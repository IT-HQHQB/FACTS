/*! For license information please see main.25edd041.js.LICENSE.txt */
(()=>{var e={75:(e,t,a)=>{"use strict";a.d(t,{B:()=>s,t:()=>n});var r=console;function n(){return r}function s(e){r=e}},244:(e,t,a)=>{"use strict";a.d(t,{m:()=>i});var r=a(5540),n=a(1422),s=a(8870),i=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!s.S$&&(null==(t=window)?void 0:t.addEventListener)){var a=function(){return e()};return window.addEventListener("visibilitychange",a,!1),window.addEventListener("focus",a,!1),function(){window.removeEventListener("visibilitychange",a),window.removeEventListener("focus",a)}}},t}(0,r.A)(t,e);var a=t.prototype;return a.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},a.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},a.setEventListener=function(e){var t,a=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"===typeof e?a.setFocused(e):a.onFocus()})},a.setFocused=function(e){this.focused=e,e&&this.onFocus()},a.onFocus=function(){this.listeners.forEach(function(e){e()})},a.isFocused=function(){return"boolean"===typeof this.focused?this.focused:"undefined"===typeof document||[void 0,"visible","prerender"].includes(document.visibilityState)},t}(n.Q))},579:(e,t,a)=>{"use strict";e.exports=a(1153)},1153:(e,t,a)=>{"use strict";var r=a(5043),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,a){var r,s={},c=null,d=null;for(r in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:n,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},1422:(e,t,a)=>{"use strict";a.d(t,{Q:()=>r});var r=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(e){var t=this,a=e||function(){};return this.listeners.push(a),this.onSubscribe(),function(){t.listeners=t.listeners.filter(function(e){return e!==a}),t.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}()},1991:(e,t,a)=>{"use strict";a.d(t,{j:()=>n});var r=a(8870),n=new(function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(e){e()},this.batchNotifyFn=function(e){e()}}var t=e.prototype;return t.batch=function(e){var t;this.transactions++;try{t=e()}finally{this.transactions--,this.transactions||this.flush()}return t},t.schedule=function(e){var t=this;this.transactions?this.queue.push(e):(0,r.G6)(function(){t.notifyFn(e)})},t.batchCalls=function(e){var t=this;return function(){for(var a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];t.schedule(function(){e.apply(void 0,r)})}},t.flush=function(){var e=this,t=this.queue;this.queue=[],t.length&&(0,r.G6)(function(){e.batchNotifyFn(function(){t.forEach(function(t){e.notifyFn(t)})})})},t.setNotifyFunction=function(e){this.notifyFn=e},t.setBatchNotifyFunction=function(e){this.batchNotifyFn=e},e}())},2284:(e,t,a)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}a.d(t,{A:()=>r})},2730:(e,t,a)=>{"use strict";var r=a(5043),n=a(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function f(e,t,a,r,n,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){x[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];x[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){x[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){x[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){x[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){x[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){x[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){x[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){x[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,a,r){var n=x.hasOwnProperty(t)?x[t]:null;(null!==n?0!==n.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,a,r){if(null===t||"undefined"===typeof t||function(e,t,a,r){if(null!==a&&0===a.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==a?!a.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,a,r))return!0;if(r)return!1;if(null!==a)switch(a.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,a,n,r)&&(a=null),r||null===n?function(e){return!!u.call(p,e)||!u.call(h,e)&&(m.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===a?e.removeAttribute(t):e.setAttribute(t,""+a)):n.mustUseProperty?e[n.propertyName]=null===a?3!==n.type&&"":a:(t=n.attributeName,r=n.attributeNamespace,null===a?e.removeAttribute(t):(a=3===(n=n.type)||4===n&&!0===a?"":""+a,r?e.setAttributeNS(r,t,a):e.setAttribute(t,a))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,y);x[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,y);x[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,y);x[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),x.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){x[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),j=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),F=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var I=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var D,M=Object.assign;function T(e){if(void 0===D)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return"\n"+D+e}var q=!1;function z(e,t){if(!e||q)return"";q=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),s=r.stack.split("\n"),i=n.length-1,o=s.length-1;1<=i&&0<=o&&n[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(n[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||n[i]!==s[o]){var l="\n"+n[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{q=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?T(e):""}function B(e){switch(e.tag){case 5:return T(e.type);case 16:return T("Lazy");case 13:return T("Suspense");case 19:return T("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case j:return"Portal";case k:return"Profiler";case N:return"StrictMode";case L:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case F:t=e._payload,e=e._init;try{return U(e(t))}catch(a){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Q(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof a&&"function"===typeof a.get&&"function"===typeof a.set){var n=a.get,s=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function J(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==a&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var a=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=a?a:e._wrapperState.initialChecked})}function K(e,t){var a=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;a=W(null!=t.value?t.value:a),e._wrapperState={initialChecked:r,initialValue:a,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function X(e,t){$(e,t);var a=W(t.value),r=t.type;if(null!=a)"number"===r?(0===a&&""===e.value||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,a):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}""!==(a=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==a&&(e.name=a)}function ee(e,t,a){"number"===t&&Y(e.ownerDocument)===e||(null==a?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var te=Array.isArray;function ae(e,t,a,r){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&r&&(e[a].defaultSelected=!0)}else{for(a=""+W(a),t=null,n=0;n<e.length;n++){if(e[n].value===a)return e[n].selected=!0,void(r&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var a=t.value;if(null==a){if(a=t.children,t=t.defaultValue,null!=a){if(null!=t)throw Error(s(92));if(te(a)){if(1<a.length)throw Error(s(93));a=a[0]}t=a}null==t&&(t=""),a=t}e._wrapperState={initialValue:W(a)}}function se(e,t){var a=W(t.value),r=W(t.defaultValue);null!=a&&((a=""+a)!==e.value&&(e.value=a),null==t.defaultValue&&e.defaultValue!==a&&(e.defaultValue=a)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,a,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function me(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&3===a.nodeType)return void(a.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,a){return null==t||"boolean"===typeof t||""===t?"":a||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function xe(e,t){for(var a in e=e.style,t)if(t.hasOwnProperty(a)){var r=0===a.indexOf("--"),n=fe(a,t[a],r);"float"===a&&(a="cssFloat"),r?e.setProperty(a,n):e[a]=n}}Object.keys(he).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]})});var ge=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,we=null,Ne=null;function ke(e){if(e=vn(e)){if("function"!==typeof je)throw Error(s(280));var t=e.stateNode;t&&(t=_n(t),je(e.stateNode,e.type,t))}}function Se(e){we?Ne?Ne.push(e):Ne=[e]:we=e}function Ce(){if(we){var e=we,t=Ne;if(Ne=we=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ae(e,t){return e(t)}function Le(){}var Pe=!1;function Ee(e,t,a){if(Pe)return e(t,a);Pe=!0;try{return Ae(e,t,a)}finally{Pe=!1,(null!==we||null!==Ne)&&(Le(),Ce())}}function Fe(e,t){var a=e.stateNode;if(null===a)return null;var r=_n(a);if(null===r)return null;a=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(a&&"function"!==typeof a)throw Error(s(231,t,typeof a));return a}var Oe=!1;if(d)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch(de){Oe=!1}function Re(e,t,a,r,n,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(a,c)}catch(d){this.onError(d)}}var De=!1,Me=null,Te=!1,qe=null,ze={onError:function(e){De=!0,Me=e}};function Be(e,t,a,r,n,s,i,o,l){De=!1,Me=null,Re.apply(ze,arguments)}function Ue(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(a=t.return),e=t.return}while(e)}return 3===t.tag?a:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var a=e,r=t;;){var n=a.return;if(null===n)break;var i=n.alternate;if(null===i){if(null!==(r=n.return)){a=r;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===a)return We(n),e;if(i===r)return We(n),t;i=i.sibling}throw Error(s(188))}if(a.return!==r.return)a=n,r=i;else{for(var o=!1,l=n.child;l;){if(l===a){o=!0,a=n,r=i;break}if(l===r){o=!0,r=n,a=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===a){o=!0,a=i,r=n;break}if(l===r){o=!0,r=i,a=n;break}l=l.sibling}if(!o)throw Error(s(189))}}if(a.alternate!==r)throw Error(s(190))}if(3!==a.tag)throw Error(s(188));return a.stateNode.current===a?e:t}(e))?Qe(e):null}function Qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Qe(e);if(null!==t)return t;e=e.sibling}return null}var Je=n.unstable_scheduleCallback,Ye=n.unstable_cancelCallback,Ge=n.unstable_shouldYield,Ke=n.unstable_requestPaint,$e=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,Ze=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,at=n.unstable_LowPriority,rt=n.unstable_IdlePriority,nt=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var a=e.pendingLanes;if(0===a)return 0;var r=0,n=e.suspendedLanes,s=e.pingedLanes,i=268435455&a;if(0!==i){var o=i&~n;0!==o?r=ut(o):0!==(s&=i)&&(r=ut(s))}else 0!==(i=a&~n)?r=ut(i):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&n)&&((n=r&-r)>=(s=t&-t)||16===n&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&a),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)n=1<<(a=31-it(t)),r|=e[a],t&=~n;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function xt(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function gt(e,t,a){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=a}function yt(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var r=31-it(a),n=1<<r;n&t|e[r]&t&&(e[r]|=t),a&=~n}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,jt,wt,Nt,kt,St=!1,Ct=[],At=null,Lt=null,Pt=null,Et=new Map,Ft=new Map,Ot=[],It="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ft.delete(t.pointerId)}}function Dt(e,t,a,r,n,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:a,eventSystemFlags:r,nativeEvent:s,targetContainers:[n]},null!==t&&(null!==(t=vn(t))&&jt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Mt(e){var t=yn(e.target);if(null!==t){var a=Ue(t);if(null!==a)if(13===(t=a.tag)){if(null!==(t=He(a)))return e.blockedOn=t,void kt(e.priority,function(){wt(a)})}else if(3===t&&a.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===a.tag?a.stateNode.containerInfo:null)}e.blockedOn=null}function Tt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var a=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==a)return null!==(t=vn(a))&&jt(t),e.blockedOn=a,!1;var r=new(a=e.nativeEvent).constructor(a.type,a);be=r,a.target.dispatchEvent(r),be=null,t.shift()}return!0}function qt(e,t,a){Tt(e)&&a.delete(t)}function zt(){St=!1,null!==At&&Tt(At)&&(At=null),null!==Lt&&Tt(Lt)&&(Lt=null),null!==Pt&&Tt(Pt)&&(Pt=null),Et.forEach(qt),Ft.forEach(qt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zt)))}function Ut(e){function t(t){return Bt(t,e)}if(0<Ct.length){Bt(Ct[0],e);for(var a=1;a<Ct.length;a++){var r=Ct[a];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Bt(At,e),null!==Lt&&Bt(Lt,e),null!==Pt&&Bt(Pt,e),Et.forEach(t),Ft.forEach(t),a=0;a<Ot.length;a++)(r=Ot[a]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(a=Ot[0]).blockedOn;)Mt(a),null===a.blockedOn&&Ot.shift()}var Ht=b.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,a,r){var n=vt,s=Ht.transition;Ht.transition=null;try{vt=1,Jt(e,t,a,r)}finally{vt=n,Ht.transition=s}}function Qt(e,t,a,r){var n=vt,s=Ht.transition;Ht.transition=null;try{vt=4,Jt(e,t,a,r)}finally{vt=n,Ht.transition=s}}function Jt(e,t,a,r){if(Wt){var n=Gt(e,t,a,r);if(null===n)Hr(e,t,r,Yt,a),Rt(e,r);else if(function(e,t,a,r,n){switch(t){case"focusin":return At=Dt(At,e,t,a,r,n),!0;case"dragenter":return Lt=Dt(Lt,e,t,a,r,n),!0;case"mouseover":return Pt=Dt(Pt,e,t,a,r,n),!0;case"pointerover":var s=n.pointerId;return Et.set(s,Dt(Et.get(s)||null,e,t,a,r,n)),!0;case"gotpointercapture":return s=n.pointerId,Ft.set(s,Dt(Ft.get(s)||null,e,t,a,r,n)),!0}return!1}(n,e,t,a,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<It.indexOf(e)){for(;null!==n;){var s=vn(n);if(null!==s&&_t(s),null===(s=Gt(e,t,a,r))&&Hr(e,t,r,Yt,a),s===n)break;n=s}null!==n&&r.stopPropagation()}else Hr(e,t,r,null,a)}}var Yt=null;function Gt(e,t,a,r){if(Yt=null,null!==(e=yn(e=_e(r))))if(null===(t=Ue(e)))e=null;else if(13===(a=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===a){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case at:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Xt=null,Zt=null;function ea(){if(Zt)return Zt;var e,t,a=Xt,r=a.length,n="value"in $t?$t.value:$t.textContent,s=n.length;for(e=0;e<r&&a[e]===n[e];e++);var i=r-e;for(t=1;t<=i&&a[r-t]===n[s-t];t++);return Zt=n.slice(e,1<t?1-t:void 0)}function ta(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function aa(){return!0}function ra(){return!1}function na(e){function t(t,a,r,n,s){for(var i in this._reactName=t,this._targetInst=r,this.type=a,this.nativeEvent=n,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(n):n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?aa:ra,this.isPropagationStopped=ra,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),t}var sa,ia,oa,la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=na(la),da=M({},la,{view:0,detail:0}),ua=na(da),ma=M({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oa&&(oa&&"mousemove"===e.type?(sa=e.screenX-oa.screenX,ia=e.screenY-oa.screenY):ia=sa=0,oa=e),sa)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),ha=na(ma),pa=na(M({},ma,{dataTransfer:0})),fa=na(M({},da,{relatedTarget:0})),xa=na(M({},la,{animationName:0,elapsedTime:0,pseudoElement:0})),ga=M({},la,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ya=na(ga),va=na(M({},la,{data:0})),ba={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ja={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wa(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ja[e])&&!!t[e]}function Na(){return wa}var ka=M({},da,{key:function(e){if(e.key){var t=ba[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ta(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_a[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(e){return"keypress"===e.type?ta(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ta(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sa=na(ka),Ca=na(M({},ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Aa=na(M({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na})),La=na(M({},la,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pa=M({},ma,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ea=na(Pa),Fa=[9,13,27,32],Oa=d&&"CompositionEvent"in window,Ia=null;d&&"documentMode"in document&&(Ia=document.documentMode);var Ra=d&&"TextEvent"in window&&!Ia,Da=d&&(!Oa||Ia&&8<Ia&&11>=Ia),Ma=String.fromCharCode(32),Ta=!1;function qa(e,t){switch(e){case"keyup":return-1!==Fa.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function za(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ba=!1;var Ua={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ua[e.type]:"textarea"===t}function Wa(e,t,a,r){Se(r),0<(t=Vr(t,"onChange")).length&&(a=new ca("onChange","change",null,a,r),e.push({event:a,listeners:t}))}var Va=null,Qa=null;function Ja(e){Mr(e,0)}function Ya(e){if(J(bn(e)))return e}function Ga(e,t){if("change"===e)return t}var Ka=!1;if(d){var $a;if(d){var Xa="oninput"in document;if(!Xa){var Za=document.createElement("div");Za.setAttribute("oninput","return;"),Xa="function"===typeof Za.oninput}$a=Xa}else $a=!1;Ka=$a&&(!document.documentMode||9<document.documentMode)}function er(){Va&&(Va.detachEvent("onpropertychange",tr),Qa=Va=null)}function tr(e){if("value"===e.propertyName&&Ya(Qa)){var t=[];Wa(t,Qa,e,_e(e)),Ee(Ja,t)}}function ar(e,t,a){"focusin"===e?(er(),Qa=a,(Va=t).attachEvent("onpropertychange",tr)):"focusout"===e&&er()}function rr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ya(Qa)}function nr(e,t){if("click"===e)return Ya(t)}function sr(e,t){if("input"===e||"change"===e)return Ya(t)}var ir="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(ir(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var a=Object.keys(e),r=Object.keys(t);if(a.length!==r.length)return!1;for(r=0;r<a.length;r++){var n=a[r];if(!u.call(t,n)||!ir(e[n],t[n]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var a,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ur(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var a="string"===typeof t.contentWindow.location.href}catch(r){a=!1}if(!a)break;t=Y((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hr(e){var t=ur(),a=e.focusedElem,r=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&dr(a.ownerDocument.documentElement,a)){if(null!==r&&mr(a))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if((e=(t=a.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=a.textContent.length,s=Math.min(r.start,n);r=void 0===r.end?s:Math.min(r.end,n),!e.extend&&s>r&&(n=r,r=s,s=n),n=cr(a,s);var i=cr(a,r);n&&i&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=a;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<t.length;a++)(e=t[a]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=d&&"documentMode"in document&&11>=document.documentMode,fr=null,xr=null,gr=null,yr=!1;function vr(e,t,a){var r=a.window===a?a.document:9===a.nodeType?a:a.ownerDocument;yr||null==fr||fr!==Y(r)||("selectionStart"in(r=fr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&or(gr,r)||(gr=r,0<(r=Vr(xr,"onSelect")).length&&(t=new ca("onSelect","select",null,t,a),e.push({event:t,listeners:r}),t.target=fr)))}function br(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},jr={},wr={};function Nr(e){if(jr[e])return jr[e];if(!_r[e])return e;var t,a=_r[e];for(t in a)if(a.hasOwnProperty(t)&&t in wr)return jr[e]=a[t];return e}d&&(wr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var kr=Nr("animationend"),Sr=Nr("animationiteration"),Cr=Nr("animationstart"),Ar=Nr("transitionend"),Lr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Lr.set(e,t),l(t,[e])}for(var Fr=0;Fr<Pr.length;Fr++){var Or=Pr[Fr];Er(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Er(kr,"onAnimationEnd"),Er(Sr,"onAnimationIteration"),Er(Cr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Dr(e,t,a){var r=e.type||"unknown-event";e.currentTarget=a,function(e,t,a,r,n,i,o,l,c){if(Be.apply(this,arguments),De){if(!De)throw Error(s(198));var d=Me;De=!1,Me=null,Te||(Te=!0,qe=d)}}(r,t,void 0,e),e.currentTarget=null}function Mr(e,t){t=0!==(4&t);for(var a=0;a<e.length;a++){var r=e[a],n=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var o=r[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&n.isPropagationStopped())break e;Dr(n,o,c),s=l}else for(i=0;i<r.length;i++){if(l=(o=r[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&n.isPropagationStopped())break e;Dr(n,o,c),s=l}}}if(Te)throw e=qe,Te=!1,qe=null,e}function Tr(e,t){var a=t[fn];void 0===a&&(a=t[fn]=new Set);var r=e+"__bubble";a.has(r)||(Ur(t,e,2,!1),a.add(r))}function qr(e,t,a){var r=0;t&&(r|=4),Ur(a,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,i.forEach(function(t){"selectionchange"!==t&&(Rr.has(t)||qr(t,!1,e),qr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,qr("selectionchange",!1,t))}}function Ur(e,t,a,r){switch(Kt(t)){case 1:var n=Vt;break;case 4:n=Qt;break;default:n=Jt}a=n.bind(null,t,a,e),n=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),r?void 0!==n?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):void 0!==n?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function Hr(e,t,a,r,n){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var o=r.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===n||8===l.nodeType&&l.parentNode===n))return;i=i.return}for(;null!==o;){if(null===(i=yn(o)))return;if(5===(l=i.tag)||6===l){r=s=i;continue e}o=o.parentNode}}r=r.return}Ee(function(){var r=s,n=_e(a),i=[];e:{var o=Lr.get(e);if(void 0!==o){var l=ca,c=e;switch(e){case"keypress":if(0===ta(a))break e;case"keydown":case"keyup":l=Sa;break;case"focusin":c="focus",l=fa;break;case"focusout":c="blur",l=fa;break;case"beforeblur":case"afterblur":l=fa;break;case"click":if(2===a.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ha;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Aa;break;case kr:case Sr:case Cr:l=xa;break;case Ar:l=La;break;case"scroll":l=ua;break;case"wheel":l=Ea;break;case"copy":case"cut":case"paste":l=ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ca}var d=0!==(4&t),u=!d&&"scroll"===e,m=d?null!==o?o+"Capture":null:o;d=[];for(var h,p=r;null!==p;){var f=(h=p).stateNode;if(5===h.tag&&null!==f&&(h=f,null!==m&&(null!=(f=Fe(p,m))&&d.push(Wr(p,f,h)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,a,n),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||a===be||!(c=a.relatedTarget||a.fromElement)||!yn(c)&&!c[pn])&&(l||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=a.relatedTarget||a.toElement)?yn(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=ha,f="onMouseLeave",m="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Ca,f="onPointerLeave",m="onPointerEnter",p="pointer"),u=null==l?o:bn(l),h=null==c?o:bn(c),(o=new d(f,p+"leave",l,a,n)).target=u,o.relatedTarget=h,f=null,yn(n)===r&&((d=new d(m,p+"enter",c,a,n)).target=h,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(m=c,p=0,h=d=l;h;h=Qr(h))p++;for(h=0,f=m;f;f=Qr(f))h++;for(;0<p-h;)d=Qr(d),p--;for(;0<h-p;)m=Qr(m),h--;for(;p--;){if(d===m||null!==m&&d===m.alternate)break e;d=Qr(d),m=Qr(m)}d=null}else d=null;null!==l&&Jr(i,o,l,d,!1),null!==c&&null!==u&&Jr(i,u,c,d,!0)}if("select"===(l=(o=r?bn(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var x=Ga;else if(Ha(o))if(Ka)x=sr;else{x=rr;var g=ar}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(x=nr);switch(x&&(x=x(e,r))?Wa(i,x,a,n):(g&&g(e,o,r),"focusout"===e&&(g=o._wrapperState)&&g.controlled&&"number"===o.type&&ee(o,"number",o.value)),g=r?bn(r):window,e){case"focusin":(Ha(g)||"true"===g.contentEditable)&&(fr=g,xr=r,gr=null);break;case"focusout":gr=xr=fr=null;break;case"mousedown":yr=!0;break;case"contextmenu":case"mouseup":case"dragend":yr=!1,vr(i,a,n);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":vr(i,a,n)}var y;if(Oa)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Ba?qa(e,a)&&(v="onCompositionEnd"):"keydown"===e&&229===a.keyCode&&(v="onCompositionStart");v&&(Da&&"ko"!==a.locale&&(Ba||"onCompositionStart"!==v?"onCompositionEnd"===v&&Ba&&(y=ea()):(Xt="value"in($t=n)?$t.value:$t.textContent,Ba=!0)),0<(g=Vr(r,v)).length&&(v=new va(v,e,null,a,n),i.push({event:v,listeners:g}),y?v.data=y:null!==(y=za(a))&&(v.data=y))),(y=Ra?function(e,t){switch(e){case"compositionend":return za(t);case"keypress":return 32!==t.which?null:(Ta=!0,Ma);case"textInput":return(e=t.data)===Ma&&Ta?null:e;default:return null}}(e,a):function(e,t){if(Ba)return"compositionend"===e||!Oa&&qa(e,t)?(e=ea(),Zt=Xt=$t=null,Ba=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Da&&"ko"!==t.locale?null:t.data}}(e,a))&&(0<(r=Vr(r,"onBeforeInput")).length&&(n=new va("onBeforeInput","beforeinput",null,a,n),i.push({event:n,listeners:r}),n.data=y))}Mr(i,t)})}function Wr(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Vr(e,t){for(var a=t+"Capture",r=[];null!==e;){var n=e,s=n.stateNode;5===n.tag&&null!==s&&(n=s,null!=(s=Fe(e,a))&&r.unshift(Wr(e,s,n)),null!=(s=Fe(e,t))&&r.push(Wr(e,s,n))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Jr(e,t,a,r,n){for(var s=t._reactName,i=[];null!==a&&a!==r;){var o=a,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,n?null!=(l=Fe(a,s))&&i.unshift(Wr(a,l,o)):n||null!=(l=Fe(a,s))&&i.push(Wr(a,l,o))),a=a.return}0!==i.length&&e.push({event:t,listeners:i})}var Yr=/\r\n?/g,Gr=/\u0000|\uFFFD/g;function Kr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Gr,"")}function $r(e,t,a){if(t=Kr(t),Kr(e)!==t&&a)throw Error(s(425))}function Xr(){}var Zr=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var an="function"===typeof setTimeout?setTimeout:void 0,rn="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,sn="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(on)}:an;function on(e){setTimeout(function(){throw e})}function ln(e,t){var a=t,r=0;do{var n=a.nextSibling;if(e.removeChild(a),n&&8===n.nodeType)if("/$"===(a=n.data)){if(0===r)return e.removeChild(n),void Ut(t);r--}else"$"!==a&&"$?"!==a&&"$!"!==a||r++;a=n}while(a);Ut(t)}function cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var a=e.data;if("$"===a||"$!"===a||"$?"===a){if(0===t)return e;t--}else"/$"===a&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),mn="__reactFiber$"+un,hn="__reactProps$"+un,pn="__reactContainer$"+un,fn="__reactEvents$"+un,xn="__reactListeners$"+un,gn="__reactHandles$"+un;function yn(e){var t=e[mn];if(t)return t;for(var a=e.parentNode;a;){if(t=a[pn]||a[mn]){if(a=t.alternate,null!==t.child||null!==a&&null!==a.child)for(e=dn(e);null!==e;){if(a=e[mn])return a;e=dn(e)}return t}a=(e=a).parentNode}return null}function vn(e){return!(e=e[mn]||e[pn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _n(e){return e[hn]||null}var jn=[],wn=-1;function Nn(e){return{current:e}}function kn(e){0>wn||(e.current=jn[wn],jn[wn]=null,wn--)}function Sn(e,t){wn++,jn[wn]=e.current,e.current=t}var Cn={},An=Nn(Cn),Ln=Nn(!1),Pn=Cn;function En(e,t){var a=e.type.contextTypes;if(!a)return Cn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n,s={};for(n in a)s[n]=t[n];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Fn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function On(){kn(Ln),kn(An)}function In(e,t,a){if(An.current!==Cn)throw Error(s(168));Sn(An,t),Sn(Ln,a)}function Rn(e,t,a){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return a;for(var n in r=r.getChildContext())if(!(n in t))throw Error(s(108,H(e)||"Unknown",n));return M({},a,r)}function Dn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cn,Pn=An.current,Sn(An,e),Sn(Ln,Ln.current),!0}function Mn(e,t,a){var r=e.stateNode;if(!r)throw Error(s(169));a?(e=Rn(e,t,Pn),r.__reactInternalMemoizedMergedChildContext=e,kn(Ln),kn(An),Sn(An,e)):kn(Ln),Sn(Ln,a)}var Tn=null,qn=!1,zn=!1;function Bn(e){null===Tn?Tn=[e]:Tn.push(e)}function Un(){if(!zn&&null!==Tn){zn=!0;var e=0,t=vt;try{var a=Tn;for(vt=1;e<a.length;e++){var r=a[e];do{r=r(!0)}while(null!==r)}Tn=null,qn=!1}catch(n){throw null!==Tn&&(Tn=Tn.slice(e+1)),Je(Ze,Un),n}finally{vt=t,zn=!1}}return null}var Hn=[],Wn=0,Vn=null,Qn=0,Jn=[],Yn=0,Gn=null,Kn=1,$n="";function Xn(e,t){Hn[Wn++]=Qn,Hn[Wn++]=Vn,Vn=e,Qn=t}function Zn(e,t,a){Jn[Yn++]=Kn,Jn[Yn++]=$n,Jn[Yn++]=Gn,Gn=e;var r=Kn;e=$n;var n=32-it(r)-1;r&=~(1<<n),a+=1;var s=32-it(t)+n;if(30<s){var i=n-n%5;s=(r&(1<<i)-1).toString(32),r>>=i,n-=i,Kn=1<<32-it(t)+n|a<<n|r,$n=s+e}else Kn=1<<s|a<<n|r,$n=e}function es(e){null!==e.return&&(Xn(e,1),Zn(e,1,0))}function ts(e){for(;e===Vn;)Vn=Hn[--Wn],Hn[Wn]=null,Qn=Hn[--Wn],Hn[Wn]=null;for(;e===Gn;)Gn=Jn[--Yn],Jn[Yn]=null,$n=Jn[--Yn],Jn[Yn]=null,Kn=Jn[--Yn],Jn[Yn]=null}var as=null,rs=null,ns=!1,ss=null;function is(e,t){var a=Ec(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,null===(t=e.deletions)?(e.deletions=[a],e.flags|=16):t.push(a)}function os(e,t){switch(e.tag){case 5:var a=e.type;return null!==(t=1!==t.nodeType||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,as=e,rs=cn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,as=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(a=null!==Gn?{id:Kn,overflow:$n}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},(a=Ec(18,null,null,0)).stateNode=t,a.return=e,e.child=a,as=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(ns){var t=rs;if(t){var a=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cn(a.nextSibling);var r=as;t&&os(e,t)?is(r,a):(e.flags=-4097&e.flags|2,ns=!1,as=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,ns=!1,as=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;as=e}function us(e){if(e!==as)return!1;if(!ns)return ds(e),ns=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ms(),Error(s(418));for(;t;)is(e,t),t=cn(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var a=e.data;if("/$"===a){if(0===t){rs=cn(e.nextSibling);break e}t--}else"$"!==a&&"$!"!==a&&"$?"!==a||t++}e=e.nextSibling}rs=null}}else rs=as?cn(e.stateNode.nextSibling):null;return!0}function ms(){for(var e=rs;e;)e=cn(e.nextSibling)}function hs(){rs=as=null,ns=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var fs=b.ReactCurrentBatchConfig;function xs(e,t,a){if(null!==(e=a.ref)&&"function"!==typeof e&&"object"!==typeof e){if(a._owner){if(a=a._owner){if(1!==a.tag)throw Error(s(309));var r=a.stateNode}if(!r)throw Error(s(147,e));var n=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=n.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!a._owner)throw Error(s(290,e))}return e}function gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function vs(e){function t(t,a){if(e){var r=t.deletions;null===r?(t.deletions=[a],t.flags|=16):r.push(a)}}function a(a,r){if(!e)return null;for(;null!==r;)t(a,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function i(t,a,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<a?(t.flags|=2,a):r:(t.flags|=2,a):(t.flags|=1048576,a)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,a,r){return null===t||6!==t.tag?((t=Mc(a,e.mode,r)).return=e,t):((t=n(t,a)).return=e,t)}function c(e,t,a,r){var s=a.type;return s===w?u(e,t,a.props.children,r,a.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===F&&ys(s)===t.type)?((r=n(t,a.props)).ref=xs(e,t,a),r.return=e,r):((r=Ic(a.type,a.key,a.props,null,e.mode,r)).ref=xs(e,t,a),r.return=e,r)}function d(e,t,a,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==a.containerInfo||t.stateNode.implementation!==a.implementation?((t=Tc(a,e.mode,r)).return=e,t):((t=n(t,a.children||[])).return=e,t)}function u(e,t,a,r,s){return null===t||7!==t.tag?((t=Rc(a,e.mode,r,s)).return=e,t):((t=n(t,a)).return=e,t)}function m(e,t,a){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,a)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(a=Ic(t.type,t.key,t.props,null,e.mode,a)).ref=xs(e,null,t),a.return=e,a;case j:return(t=Tc(t,e.mode,a)).return=e,t;case F:return m(e,(0,t._init)(t._payload),a)}if(te(t)||R(t))return(t=Rc(t,e.mode,a,null)).return=e,t;gs(e,t)}return null}function h(e,t,a,r){var n=null!==t?t.key:null;if("string"===typeof a&&""!==a||"number"===typeof a)return null!==n?null:l(e,t,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case _:return a.key===n?c(e,t,a,r):null;case j:return a.key===n?d(e,t,a,r):null;case F:return h(e,t,(n=a._init)(a._payload),r)}if(te(a)||R(a))return null!==n?null:u(e,t,a,r,null);gs(e,a)}return null}function p(e,t,a,r,n){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(a)||null,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?a:r.key)||null,r,n);case j:return d(t,e=e.get(null===r.key?a:r.key)||null,r,n);case F:return p(e,t,a,(0,r._init)(r._payload),n)}if(te(r)||R(r))return u(t,e=e.get(a)||null,r,n,null);gs(t,r)}return null}function f(n,s,o,l){for(var c=null,d=null,u=s,f=s=0,x=null;null!==u&&f<o.length;f++){u.index>f?(x=u,u=null):x=u.sibling;var g=h(n,u,o[f],l);if(null===g){null===u&&(u=x);break}e&&u&&null===g.alternate&&t(n,u),s=i(g,s,f),null===d?c=g:d.sibling=g,d=g,u=x}if(f===o.length)return a(n,u),ns&&Xn(n,f),c;if(null===u){for(;f<o.length;f++)null!==(u=m(n,o[f],l))&&(s=i(u,s,f),null===d?c=u:d.sibling=u,d=u);return ns&&Xn(n,f),c}for(u=r(n,u);f<o.length;f++)null!==(x=p(u,n,f,o[f],l))&&(e&&null!==x.alternate&&u.delete(null===x.key?f:x.key),s=i(x,s,f),null===d?c=x:d.sibling=x,d=x);return e&&u.forEach(function(e){return t(n,e)}),ns&&Xn(n,f),c}function x(n,o,l,c){var d=R(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,f=o,x=o=0,g=null,y=l.next();null!==f&&!y.done;x++,y=l.next()){f.index>x?(g=f,f=null):g=f.sibling;var v=h(n,f,y.value,c);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(n,f),o=i(v,o,x),null===u?d=v:u.sibling=v,u=v,f=g}if(y.done)return a(n,f),ns&&Xn(n,x),d;if(null===f){for(;!y.done;x++,y=l.next())null!==(y=m(n,y.value,c))&&(o=i(y,o,x),null===u?d=y:u.sibling=y,u=y);return ns&&Xn(n,x),d}for(f=r(n,f);!y.done;x++,y=l.next())null!==(y=p(f,n,x,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?x:y.key),o=i(y,o,x),null===u?d=y:u.sibling=y,u=y);return e&&f.forEach(function(e){return t(n,e)}),ns&&Xn(n,x),d}return function e(r,s,i,l){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case _:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===w){if(7===d.tag){a(r,d.sibling),(s=n(d,i.props.children)).return=r,r=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===F&&ys(c)===d.type){a(r,d.sibling),(s=n(d,i.props)).ref=xs(r,d,i),s.return=r,r=s;break e}a(r,d);break}t(r,d),d=d.sibling}i.type===w?((s=Rc(i.props.children,r.mode,l,i.key)).return=r,r=s):((l=Ic(i.type,i.key,i.props,null,r.mode,l)).ref=xs(r,s,i),l.return=r,r=l)}return o(r);case j:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){a(r,s.sibling),(s=n(s,i.children||[])).return=r,r=s;break e}a(r,s);break}t(r,s),s=s.sibling}(s=Tc(i,r.mode,l)).return=r,r=s}return o(r);case F:return e(r,s,(d=i._init)(i._payload),l)}if(te(i))return f(r,s,i,l);if(R(i))return x(r,s,i,l);gs(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(a(r,s.sibling),(s=n(s,i)).return=r,r=s):(a(r,s),(s=Mc(i,r.mode,l)).return=r,r=s),o(r)):a(r,s)}}var bs=vs(!0),_s=vs(!1),js=Nn(null),ws=null,Ns=null,ks=null;function Ss(){ks=Ns=ws=null}function Cs(e){var t=js.current;kn(js),e._currentValue=t}function As(e,t,a){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===a)break;e=e.return}}function Ls(e,t){ws=e,ks=Ns=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(ks!==e)if(e={context:e,memoizedValue:t,next:null},null===Ns){if(null===ws)throw Error(s(308));Ns=e,ws.dependencies={lanes:0,firstContext:e}}else Ns=Ns.next=e;return t}var Es=null;function Fs(e){null===Es?Es=[e]:Es.push(e)}function Os(e,t,a,r){var n=t.interleaved;return null===n?(a.next=a,Fs(t)):(a.next=n.next,n.next=a),t.interleaved=a,Is(e,r)}function Is(e,t){e.lanes|=t;var a=e.alternate;for(null!==a&&(a.lanes|=t),a=e,e=e.return;null!==e;)e.childLanes|=t,null!==(a=e.alternate)&&(a.childLanes|=t),a=e,e=e.return;return 3===a.tag?a.stateNode:null}var Rs=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ms(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ts(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function qs(e,t,a){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var n=r.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),r.pending=t,Is(e,a)}return null===(n=r.interleaved)?(t.next=t,Fs(r)):(t.next=n.next,n.next=t),r.interleaved=t,Is(e,a)}function zs(e,t,a){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&a))){var r=t.lanes;a|=r&=e.pendingLanes,t.lanes=a,yt(e,a)}}function Bs(e,t){var a=e.updateQueue,r=e.alternate;if(null!==r&&a===(r=r.updateQueue)){var n=null,s=null;if(null!==(a=a.firstBaseUpdate)){do{var i={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};null===s?n=s=i:s=s.next=i,a=a.next}while(null!==a);null===s?n=s=t:s=s.next=t}else n=s=t;return a={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=a)}null===(e=a.lastBaseUpdate)?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Us(e,t,a,r){var n=e.updateQueue;Rs=!1;var s=n.firstBaseUpdate,i=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=n.baseState;for(i=0,d=c=l=null,o=s;;){var m=o.lane,h=o.eventTime;if((r&m)===m){null!==d&&(d=d.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(m=t,h=a,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(h,u,m);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(m="function"===typeof(p=f.payload)?p.call(h,u,m):p)||void 0===m)break e;u=M({},u,m);break e;case 2:Rs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(m=n.effects)?n.effects=[o]:m.push(o))}else h={eventTime:h,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=h,l=u):d=d.next=h,i|=m;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(m=o).next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}if(null===d&&(l=u),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null!==(t=n.shared.interleaved)){n=t;do{i|=n.lane,n=n.next}while(n!==t)}else null===s&&(n.shared.lanes=0);Dl|=i,e.lanes=i,e.memoizedState=u}}function Hs(e,t,a){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(null!==n){if(r.callback=null,r=a,"function"!==typeof n)throw Error(s(191,n));n.call(r)}}}var Ws={},Vs=Nn(Ws),Qs=Nn(Ws),Js=Nn(Ws);function Ys(e){if(e===Ws)throw Error(s(174));return e}function Gs(e,t){switch(Sn(Js,t),Sn(Qs,e),Sn(Vs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}kn(Vs),Sn(Vs,t)}function Ks(){kn(Vs),kn(Qs),kn(Js)}function $s(e){Ys(Js.current);var t=Ys(Vs.current),a=le(t,e.type);t!==a&&(Sn(Qs,e),Sn(Vs,a))}function Xs(e){Qs.current===e&&(kn(Vs),kn(Qs))}var Zs=Nn(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var a=t.memoizedState;if(null!==a&&(null===(a=a.dehydrated)||"$?"===a.data||"$!"===a.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ai(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ri=b.ReactCurrentDispatcher,ni=b.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,mi=0;function hi(){throw Error(s(321))}function pi(e,t){if(null===t)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!ir(e[a],t[a]))return!1;return!0}function fi(e,t,a,r,n,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ri.current=null===e||null===e.memoizedState?Xi:Zi,e=a(r,n),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ri.current=eo,e=a(r,n)}while(di)}if(ri.current=$i,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function xi(){var e=0!==ui;return ui=0,e}function gi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function yi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function vi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=yi(),a=t.queue;if(null===a)throw Error(s(311));a.lastRenderedReducer=e;var r=oi,n=r.baseQueue,i=a.pending;if(null!==i){if(null!==n){var o=n.next;n.next=i.next,i.next=o}r.baseQueue=n=i,a.pending=null}if(null!==n){i=n.next,r=r.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=m,o=r):c=c.next=m,ii.lanes|=u,Dl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=r:c.next=l,ir(r,t.memoizedState)||(vo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,a.lastRenderedState=r}if(null!==(e=a.interleaved)){n=e;do{i=n.lane,ii.lanes|=i,Dl|=i,n=n.next}while(n!==e)}else null===n&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function _i(e){var t=yi(),a=t.queue;if(null===a)throw Error(s(311));a.lastRenderedReducer=e;var r=a.dispatch,n=a.pending,i=t.memoizedState;if(null!==n){a.pending=null;var o=n=n.next;do{i=e(i,o.action),o=o.next}while(o!==n);ir(i,t.memoizedState)||(vo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),a.lastRenderedState=i}return[i,r]}function ji(){}function wi(e,t){var a=ii,r=yi(),n=t(),i=!ir(r.memoizedState,n);if(i&&(r.memoizedState=n,vo=!0),r=r.queue,Ri(Si.bind(null,a,r,e),[e]),r.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(a.flags|=2048,Pi(9,ki.bind(null,a,r,n,t),void 0,null),null===Ll)throw Error(s(349));0!==(30&si)||Ni(a,t,n)}return n}function Ni(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(a=t.stores)?t.stores=[e]:a.push(e)}function ki(e,t,a,r){t.value=a,t.getSnapshot=r,Ci(t)&&Ai(e)}function Si(e,t,a){return a(function(){Ci(t)&&Ai(e)})}function Ci(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!ir(e,a)}catch(r){return!0}}function Ai(e){var t=Is(e,1);null!==t&&ac(t,e,1,-1)}function Li(e){var t=gi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ji.bind(null,ii,e),[t.memoizedState,e]}function Pi(e,t,a,r){return e={tag:e,create:t,destroy:a,deps:r,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(a=t.lastEffect)?t.lastEffect=e.next=e:(r=a.next,a.next=e,e.next=r,t.lastEffect=e),e}function Ei(){return yi().memoizedState}function Fi(e,t,a,r){var n=gi();ii.flags|=e,n.memoizedState=Pi(1|t,a,void 0,void 0===r?null:r)}function Oi(e,t,a,r){var n=yi();r=void 0===r?null:r;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==r&&pi(r,i.deps))return void(n.memoizedState=Pi(t,a,s,r))}ii.flags|=e,n.memoizedState=Pi(1|t,a,s,r)}function Ii(e,t){return Fi(8390656,8,e,t)}function Ri(e,t){return Oi(2048,8,e,t)}function Di(e,t){return Oi(4,2,e,t)}function Mi(e,t){return Oi(4,4,e,t)}function Ti(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qi(e,t,a){return a=null!==a&&void 0!==a?a.concat([e]):null,Oi(4,4,Ti.bind(null,t,e),a)}function zi(){}function Bi(e,t){var a=yi();t=void 0===t?null:t;var r=a.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(a.memoizedState=[e,t],e)}function Ui(e,t){var a=yi();t=void 0===t?null:t;var r=a.memoizedState;return null!==r&&null!==t&&pi(t,r[1])?r[0]:(e=e(),a.memoizedState=[e,t],e)}function Hi(e,t,a){return 0===(21&si)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=a):(ir(a,t)||(a=ft(),ii.lanes|=a,Dl|=a,e.baseState=!0),t)}function Wi(e,t){var a=vt;vt=0!==a&&4>a?a:4,e(!0);var r=ni.transition;ni.transition={};try{e(!1),t()}finally{vt=a,ni.transition=r}}function Vi(){return yi().memoizedState}function Qi(e,t,a){var r=tc(e);if(a={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null},Yi(e))Gi(t,a);else if(null!==(a=Os(e,t,a,r))){ac(a,e,r,ec()),Ki(a,t,r)}}function Ji(e,t,a){var r=tc(e),n={lane:r,action:a,hasEagerState:!1,eagerState:null,next:null};if(Yi(e))Gi(t,n);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,a);if(n.hasEagerState=!0,n.eagerState=o,ir(o,i)){var l=t.interleaved;return null===l?(n.next=n,Fs(t)):(n.next=l.next,l.next=n),void(t.interleaved=n)}}catch(c){}null!==(a=Os(e,t,n,r))&&(ac(a,e,r,n=ec()),Ki(a,t,r))}}function Yi(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Gi(e,t){di=ci=!0;var a=e.pending;null===a?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Ki(e,t,a){if(0!==(4194240&a)){var r=t.lanes;a|=r&=e.pendingLanes,t.lanes=a,yt(e,a)}}var $i={readContext:Ps,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},Xi={readContext:Ps,useCallback:function(e,t){return gi().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Ii,useImperativeHandle:function(e,t,a){return a=null!==a&&void 0!==a?a.concat([e]):null,Fi(4194308,4,Ti.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Fi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fi(4,2,e,t)},useMemo:function(e,t){var a=gi();return t=void 0===t?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var r=gi();return t=void 0!==a?a(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qi.bind(null,ii,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},gi().memoizedState=e},useState:Li,useDebugValue:zi,useDeferredValue:function(e){return gi().memoizedState=e},useTransition:function(){var e=Li(!1),t=e[0];return e=Wi.bind(null,e[1]),gi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var r=ii,n=gi();if(ns){if(void 0===a)throw Error(s(407));a=a()}else{if(a=t(),null===Ll)throw Error(s(349));0!==(30&si)||Ni(r,t,a)}n.memoizedState=a;var i={value:a,getSnapshot:t};return n.queue=i,Ii(Si.bind(null,r,i,e),[e]),r.flags|=2048,Pi(9,ki.bind(null,r,i,a,t),void 0,null),a},useId:function(){var e=gi(),t=Ll.identifierPrefix;if(ns){var a=$n;t=":"+t+"R"+(a=(Kn&~(1<<32-it(Kn)-1)).toString(32)+a),0<(a=ui++)&&(t+="H"+a.toString(32)),t+=":"}else t=":"+t+"r"+(a=mi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ps,useCallback:Bi,useContext:Ps,useEffect:Ri,useImperativeHandle:qi,useInsertionEffect:Di,useLayoutEffect:Mi,useMemo:Ui,useReducer:bi,useRef:Ei,useState:function(){return bi(vi)},useDebugValue:zi,useDeferredValue:function(e){return Hi(yi(),oi.memoizedState,e)},useTransition:function(){return[bi(vi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:wi,useId:Vi,unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:Bi,useContext:Ps,useEffect:Ri,useImperativeHandle:qi,useInsertionEffect:Di,useLayoutEffect:Mi,useMemo:Ui,useReducer:_i,useRef:Ei,useState:function(){return _i(vi)},useDebugValue:zi,useDeferredValue:function(e){var t=yi();return null===oi?t.memoizedState=e:Hi(t,oi.memoizedState,e)},useTransition:function(){return[_i(vi)[0],yi().memoizedState]},useMutableSource:ji,useSyncExternalStore:wi,useId:Vi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var a in t=M({},t),e=e.defaultProps)void 0===t[a]&&(t[a]=e[a]);return t}return t}function ao(e,t,a,r){a=null===(a=a(r,t=e.memoizedState))||void 0===a?t:M({},t,a),e.memoizedState=a,0===e.lanes&&(e.updateQueue.baseState=a)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,a){e=e._reactInternals;var r=ec(),n=tc(e),s=Ts(r,n);s.payload=t,void 0!==a&&null!==a&&(s.callback=a),null!==(t=qs(e,s,n))&&(ac(t,e,n,r),zs(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var r=ec(),n=tc(e),s=Ts(r,n);s.tag=1,s.payload=t,void 0!==a&&null!==a&&(s.callback=a),null!==(t=qs(e,s,n))&&(ac(t,e,n,r),zs(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ec(),r=tc(e),n=Ts(a,r);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=qs(e,n,r))&&(ac(t,e,r,a),zs(t,e,r))}};function no(e,t,a,r,n,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!or(a,r)||!or(n,s))}function so(e,t,a){var r=!1,n=Cn,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(n=Fn(t)?Pn:An.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?En(e,n):Cn),t=new t(a,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,a,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(a,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(a,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,a,r){var n=e.stateNode;n.props=a,n.state=e.memoizedState,n.refs={},Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?n.context=Ps(s):(s=Fn(t)?Pn:An.current,n.context=En(e,s)),n.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ao(e,t,s,a),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&ro.enqueueReplaceState(n,n.state,null),Us(e,a,n,r),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var a="",r=t;do{a+=B(r),r=r.return}while(r);var n=a}catch(s){n="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:n,digest:null}}function co(e,t,a){return{value:e,source:null,stack:null!=a?a:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(a){setTimeout(function(){throw a})}}var mo="function"===typeof WeakMap?WeakMap:Map;function ho(e,t,a){(a=Ts(-1,a)).tag=3,a.payload={element:null};var r=t.value;return a.callback=function(){Wl||(Wl=!0,Vl=r),uo(0,t)},a}function po(e,t,a){(a=Ts(-1,a)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var n=t.value;a.payload=function(){return r(n)},a.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(a.callback=function(){uo(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),a}function fo(e,t,a){var r=e.pingCache;if(null===r){r=e.pingCache=new mo;var n=new Set;r.set(t,n)}else void 0===(n=r.get(t))&&(n=new Set,r.set(t,n));n.has(a)||(n.add(a),e=kc.bind(null,e,t,a),t.then(e,e))}function xo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function go(e,t,a,r,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,1===a.tag&&(null===a.alternate?a.tag=17:((t=Ts(-1,1)).tag=2,qs(a,t,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var yo=b.ReactCurrentOwner,vo=!1;function bo(e,t,a,r){t.child=null===e?_s(t,null,a,r):bs(t,e.child,a,r)}function _o(e,t,a,r,n){a=a.render;var s=t.ref;return Ls(t,n),r=fi(e,t,a,r,s,n),a=xi(),null===e||vo?(ns&&a&&es(t),t.flags|=1,bo(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wo(e,t,n))}function jo(e,t,a,r,n){if(null===e){var s=a.type;return"function"!==typeof s||Fc(s)||void 0!==s.defaultProps||null!==a.compare||void 0!==a.defaultProps?((e=Ic(a.type,null,r,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,wo(e,t,s,r,n))}if(s=e.child,0===(e.lanes&n)){var i=s.memoizedProps;if((a=null!==(a=a.compare)?a:or)(i,r)&&e.ref===t.ref)return Wo(e,t,n)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function wo(e,t,a,r,n){if(null!==e){var s=e.memoizedProps;if(or(s,r)&&e.ref===t.ref){if(vo=!1,t.pendingProps=r=s,0===(e.lanes&n))return t.lanes=e.lanes,Wo(e,t,n);0!==(131072&e.flags)&&(vo=!0)}}return So(e,t,a,r,n)}function No(e,t,a){var r=t.pendingProps,n=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sn(Ol,Fl),Fl|=a;else{if(0===(1073741824&a))return e=null!==s?s.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sn(Ol,Fl),Fl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:a,Sn(Ol,Fl),Fl|=r}else null!==s?(r=s.baseLanes|a,t.memoizedState=null):r=a,Sn(Ol,Fl),Fl|=r;return bo(e,t,n,a),t.child}function ko(e,t){var a=t.ref;(null===e&&null!==a||null!==e&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,a,r,n){var s=Fn(a)?Pn:An.current;return s=En(t,s),Ls(t,n),a=fi(e,t,a,r,s,n),r=xi(),null===e||vo?(ns&&r&&es(t),t.flags|=1,bo(e,t,a,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wo(e,t,n))}function Co(e,t,a,r,n){if(Fn(a)){var s=!0;Dn(t)}else s=!1;if(Ls(t,n),null===t.stateNode)Ho(e,t),so(t,a,r),oo(t,a,r,n),r=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=a.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=En(t,c=Fn(a)?Pn:An.current);var d=a.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==r||l!==c)&&io(t,i,r,c),Rs=!1;var m=t.memoizedState;i.state=m,Us(t,r,i,n),l=t.memoizedState,o!==r||m!==l||Ln.current||Rs?("function"===typeof d&&(ao(t,a,d,r),l=t.memoizedState),(o=Rs||no(t,a,o,r,m,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=c,r=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Ms(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,m=i.context,"object"===typeof(l=a.contextType)&&null!==l?l=Ps(l):l=En(t,l=Fn(a)?Pn:An.current);var h=a.getDerivedStateFromProps;(d="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||m!==l)&&io(t,i,r,l),Rs=!1,m=t.memoizedState,i.state=m,Us(t,r,i,n);var p=t.memoizedState;o!==u||m!==p||Ln.current||Rs?("function"===typeof h&&(ao(t,a,h,r),p=t.memoizedState),(c=Rs||no(t,a,c,r,m,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Ao(e,t,a,r,s,n)}function Ao(e,t,a,r,n,s){ko(e,t);var i=0!==(128&t.flags);if(!r&&!i)return n&&Mn(t,a,!1),Wo(e,t,s);r=t.stateNode,yo.current=t;var o=i&&"function"!==typeof a.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,n&&Mn(t,a,!0),t.child}function Lo(e){var t=e.stateNode;t.pendingContext?In(0,t.pendingContext,t.pendingContext!==t.context):t.context&&In(0,t.context,!1),Gs(e,t.containerInfo)}function Po(e,t,a,r,n){return hs(),ps(n),t.flags|=256,bo(e,t,a,r),t.child}var Eo,Fo,Oo,Io,Ro={dehydrated:null,treeContext:null,retryLane:0};function Do(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mo(e,t,a){var r,n=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sn(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=n.children,e=n.fallback,o?(n=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&n)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Dc(l,n,0,null),e=Rc(e,n,a,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Do(a),t.memoizedState=Ro,e):To(t,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,t,a,r,n,i,o){if(a)return 256&t.flags?(t.flags&=-257,qo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=r.fallback,n=t.mode,r=Dc({mode:"visible",children:r.children},n,0,null),(i=Rc(i,n,o,null)).flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Do(o),t.memoizedState=Ro,i);if(0===(1&t.mode))return qo(e,t,o,null);if("$!"===n.data){if(r=n.nextSibling&&n.nextSibling.dataset)var l=r.dgst;return r=l,qo(e,t,o,r=co(i=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(r=Ll)){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(r.suspendedLanes|o))?0:n)&&n!==i.retryLane&&(i.retryLane=n,Is(e,n),ac(r,e,n,-1))}return fc(),qo(e,t,o,r=co(Error(s(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,rs=cn(n.nextSibling),as=t,ns=!0,ss=null,null!==e&&(Jn[Yn++]=Kn,Jn[Yn++]=$n,Jn[Yn++]=Gn,Kn=e.id,$n=e.overflow,Gn=t),t=To(t,r.children),t.flags|=4096,t)}(e,t,l,n,r,i,a);if(o){o=n.fallback,l=t.mode,r=(i=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&l)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=Oc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==r?o=Oc(r,o):(o=Rc(o,l,a,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,l=null===(l=e.child.memoizedState)?Do(a):{baseLanes:l.baseLanes|a,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~a,t.memoizedState=Ro,n}return e=(o=e.child).sibling,n=Oc(o,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=a),n.return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n}function To(e,t){return(t=Dc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qo(e,t,a,r){return null!==r&&ps(r),bs(t,e.child,null,a),(e=To(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,a){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),As(e.return,t,a)}function Bo(e,t,a,r,n){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:a,tailMode:n}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=a,s.tailMode=n)}function Uo(e,t,a){var r=t.pendingProps,n=r.revealOrder,s=r.tail;if(bo(e,t,r.children,a),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,a,t);else if(19===e.tag)zo(e,a,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Sn(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(a=t.child,n=null;null!==a;)null!==(e=a.alternate)&&null===ei(e)&&(n=a),a=a.sibling;null===(a=n)?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),Bo(t,!1,n,a,s);break;case"backwards":for(a=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===ei(e)){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}Bo(t,!0,a,null,s);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,a){if(null!==e&&(t.dependencies=e.dependencies),Dl|=t.lanes,0===(a&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(a=Oc(e=t.child,e.pendingProps),t.child=a,a.return=t;null!==e.sibling;)e=e.sibling,(a=a.sibling=Oc(e,e.pendingProps)).return=t;a.sibling=null}return t.child}function Vo(e,t){if(!ns)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;null!==t;)null!==t.alternate&&(a=t),t=t.sibling;null===a?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var r=null;null!==a;)null!==a.alternate&&(r=a),a=a.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,a=0,r=0;if(t)for(var n=e.child;null!==n;)a|=n.lanes|n.childLanes,r|=14680064&n.subtreeFlags,r|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)a|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=a,t}function Jo(e,t,a){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return Fn(t.type)&&On(),Qo(t),null;case 3:return r=t.stateNode,Ks(),kn(Ln),kn(An),ai(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Fo(e,t),Qo(t),null;case 5:Xs(t);var n=Ys(Js.current);if(a=t.type,null!==e&&null!=t.stateNode)Oo(e,t,a,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Qo(t),null}if(e=Ys(Vs.current),us(t)){r=t.stateNode,a=t.type;var i=t.memoizedProps;switch(r[mn]=t,r[hn]=i,e=0!==(1&t.mode),a){case"dialog":Tr("cancel",r),Tr("close",r);break;case"iframe":case"object":case"embed":Tr("load",r);break;case"video":case"audio":for(n=0;n<Ir.length;n++)Tr(Ir[n],r);break;case"source":Tr("error",r);break;case"img":case"image":case"link":Tr("error",r),Tr("load",r);break;case"details":Tr("toggle",r);break;case"input":K(r,i),Tr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Tr("invalid",r);break;case"textarea":ne(r,i),Tr("invalid",r)}for(var l in ye(a,i),n=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&$r(r.textContent,c,e),n=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&$r(r.textContent,c,e),n=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Tr("scroll",r)}switch(a){case"input":Q(r),Z(r,i,!0);break;case"textarea":Q(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Xr)}r=n,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(a)),"http://www.w3.org/1999/xhtml"===e?"script"===a?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(a,{is:r.is}):(e=l.createElement(a),"select"===a&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,a),e[mn]=t,e[hn]=r,Eo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(a,r),a){case"dialog":Tr("cancel",e),Tr("close",e),n=r;break;case"iframe":case"object":case"embed":Tr("load",e),n=r;break;case"video":case"audio":for(n=0;n<Ir.length;n++)Tr(Ir[n],e);n=r;break;case"source":Tr("error",e),n=r;break;case"img":case"image":case"link":Tr("error",e),Tr("load",e),n=r;break;case"details":Tr("toggle",e),n=r;break;case"input":K(e,r),n=G(e,r),Tr("invalid",e);break;case"option":default:n=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},n=M({},r,{value:void 0}),Tr("invalid",e);break;case"textarea":ne(e,r),n=re(e,r),Tr("invalid",e)}for(i in ye(a,n),c=n)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?xe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==a||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Tr("scroll",e):null!=d&&v(e,i,d,l))}switch(a){case"input":Q(e),Z(e,r,!1);break;case"textarea":Q(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ae(e,!!r.multiple,i,!1):null!=r.defaultValue&&ae(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Xr)}switch(a){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Io(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(a=Ys(Js.current),Ys(Vs.current),us(t)){if(r=t.stateNode,a=t.memoizedProps,r[mn]=t,(i=r.nodeValue!==a)&&null!==(e=as))switch(e.tag){case 3:$r(r.nodeValue,a,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,a,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===a.nodeType?a:a.ownerDocument).createTextNode(r))[mn]=t,t.stateNode=r}return Qo(t),null;case 13:if(kn(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ns&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ms(),hs(),t.flags|=98560,i=!1;else if(i=us(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[mn]=t}else hs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=a,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Il&&(Il=3):fc())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return Ks(),Fo(e,t),null===e&&Br(t.stateNode.containerInfo),Qo(t),null;case 10:return Cs(t.type._context),Qo(t),null;case 19:if(kn(Zs),null===(i=t.memoizedState))return Qo(t),null;if(r=0!==(128&t.flags),null===(l=i.rendering))if(r)Vo(i,!1);else{if(0!==Il||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=a,a=t.child;null!==a;)e=r,(i=a).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Sn(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&$e()>Ul&&(t.flags|=128,r=!0,Vo(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ei(l))){if(t.flags|=128,r=!0,null!==(a=e.updateQueue)&&(t.updateQueue=a,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!ns)return Qo(t),null}else 2*$e()-i.renderingStartTime>Ul&&1073741824!==a&&(t.flags|=128,r=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(a=i.last)?a.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,a=Zs.current,Sn(Zs,r?1&a|2:1&a),t):(Qo(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Fl)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Yo(e,t){switch(ts(t),t.tag){case 1:return Fn(t.type)&&On(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ks(),kn(Ln),kn(An),ai(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xs(t),null;case 13:if(kn(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));hs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return kn(Zs),null;case 4:return Ks(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Eo=function(e,t){for(var a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Fo=function(){},Oo=function(e,t,a,r){var n=e.memoizedProps;if(n!==r){e=t.stateNode,Ys(Vs.current);var s,i=null;switch(a){case"input":n=G(e,n),r=G(e,r),i=[];break;case"select":n=M({},n,{value:void 0}),r=M({},r,{value:void 0}),i=[];break;case"textarea":n=re(e,n),r=re(e,r),i=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(d in ye(a,r),a=null,n)if(!r.hasOwnProperty(d)&&n.hasOwnProperty(d)&&null!=n[d])if("style"===d){var l=n[d];for(s in l)l.hasOwnProperty(s)&&(a||(a={}),a[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=n?n[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(a||(a={}),a[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(a||(a={}),a[s]=c[s])}else a||(i||(i=[]),i.push(d,a)),a=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Tr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}a&&(i=i||[]).push("style",a);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Io=function(e,t,a,r){a!==r&&(t.flags|=4)};var Go=!1,Ko=!1,$o="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var a=e.ref;if(null!==a)if("function"===typeof a)try{a(null)}catch(r){Nc(e,t,r)}else a.current=null}function el(e,t,a){try{a()}catch(r){Nc(e,t,r)}}var tl=!1;function al(e,t,a){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var n=r=r.next;do{if((n.tag&e)===e){var s=n.destroy;n.destroy=void 0,void 0!==s&&el(t,a,s)}n=n.next}while(n!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var a=t=t.next;do{if((a.tag&e)===e){var r=a.create;a.destroy=r()}a=a.next}while(a!==t)}}function nl(e){var t=e.ref;if(null!==t){var a=e.stateNode;e.tag,e=a,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[mn],delete t[hn],delete t[fn],delete t[xn],delete t[gn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,a){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===a.nodeType?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(8===a.nodeType?(t=a.parentNode).insertBefore(e,a):(t=a).appendChild(e),null!==(a=a._reactRootContainer)&&void 0!==a||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,a),e=e.sibling;null!==e;)ll(e,t,a),e=e.sibling}function cl(e,t,a){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,a),e=e.sibling;null!==e;)cl(e,t,a),e=e.sibling}var dl=null,ul=!1;function ml(e,t,a){for(a=a.child;null!==a;)hl(e,t,a),a=a.sibling}function hl(e,t,a){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(nt,a)}catch(o){}switch(a.tag){case 5:Ko||Zo(a,t);case 6:var r=dl,n=ul;dl=null,ml(e,t,a),ul=n,null!==(dl=r)&&(ul?(e=dl,a=a.stateNode,8===e.nodeType?e.parentNode.removeChild(a):e.removeChild(a)):dl.removeChild(a.stateNode));break;case 18:null!==dl&&(ul?(e=dl,a=a.stateNode,8===e.nodeType?ln(e.parentNode,a):1===e.nodeType&&ln(e,a),Ut(e)):ln(dl,a.stateNode));break;case 4:r=dl,n=ul,dl=a.stateNode.containerInfo,ul=!0,ml(e,t,a),dl=r,ul=n;break;case 0:case 11:case 14:case 15:if(!Ko&&(null!==(r=a.updateQueue)&&null!==(r=r.lastEffect))){n=r=r.next;do{var s=n,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(a,t,i),n=n.next}while(n!==r)}ml(e,t,a);break;case 1:if(!Ko&&(Zo(a,t),"function"===typeof(r=a.stateNode).componentWillUnmount))try{r.props=a.memoizedProps,r.state=a.memoizedState,r.componentWillUnmount()}catch(o){Nc(a,t,o)}ml(e,t,a);break;case 21:ml(e,t,a);break;case 22:1&a.mode?(Ko=(r=Ko)||null!==a.memoizedState,ml(e,t,a),Ko=r):ml(e,t,a);break;default:ml(e,t,a)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var a=e.stateNode;null===a&&(a=e.stateNode=new $o),t.forEach(function(t){var r=Ac.bind(null,e,t);a.has(t)||(a.add(t),t.then(r,r))})}}function fl(e,t){var a=t.deletions;if(null!==a)for(var r=0;r<a.length;r++){var n=a[r];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));hl(i,o,n),dl=null,ul=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(d){Nc(n,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xl(t,e),t=t.sibling}function xl(e,t){var a=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),gl(e),4&r){try{al(3,e,e.return),rl(3,e)}catch(x){Nc(e,e.return,x)}try{al(5,e,e.return)}catch(x){Nc(e,e.return,x)}}break;case 1:fl(t,e),gl(e),512&r&&null!==a&&Zo(a,a.return);break;case 5:if(fl(t,e),gl(e),512&r&&null!==a&&Zo(a,a.return),32&e.flags){var n=e.stateNode;try{me(n,"")}catch(x){Nc(e,e.return,x)}}if(4&r&&null!=(n=e.stateNode)){var i=e.memoizedProps,o=null!==a?a.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&$(n,i),ve(l,o);var d=ve(l,i);for(o=0;o<c.length;o+=2){var u=c[o],m=c[o+1];"style"===u?xe(n,m):"dangerouslySetInnerHTML"===u?ue(n,m):"children"===u?me(n,m):v(n,u,m,d)}switch(l){case"input":X(n,i);break;case"textarea":se(n,i);break;case"select":var h=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ae(n,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?ae(n,!!i.multiple,i.defaultValue,!0):ae(n,!!i.multiple,i.multiple?[]:"",!1))}n[hn]=i}catch(x){Nc(e,e.return,x)}}break;case 6:if(fl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(s(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(x){Nc(e,e.return,x)}}break;case 3:if(fl(t,e),gl(e),4&r&&null!==a&&a.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(x){Nc(e,e.return,x)}break;case 4:default:fl(t,e),gl(e);break;case 13:fl(t,e),gl(e),8192&(n=e.child).flags&&(i=null!==n.memoizedState,n.stateNode.isHidden=i,!i||null!==n.alternate&&null!==n.alternate.memoizedState||(Bl=$e())),4&r&&pl(e);break;case 22:if(u=null!==a&&null!==a.memoizedState,1&e.mode?(Ko=(d=Ko)||u,fl(t,e),Ko=d):fl(t,e),gl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(m=Xo=u;null!==Xo;){switch(p=(h=Xo).child,h.tag){case 0:case 11:case 14:case 15:al(4,h,h.return);break;case 1:Zo(h,h.return);var f=h.stateNode;if("function"===typeof f.componentWillUnmount){r=h,a=h.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(x){Nc(r,a,x)}}break;case 5:Zo(h,h.return);break;case 22:if(null!==h.memoizedState){_l(m);continue}}null!==p?(p.return=h,Xo=p):_l(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{n=m.stateNode,d?"function"===typeof(i=n.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=m.stateNode,o=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(x){Nc(e,e.return,x)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(x){Nc(e,e.return,x)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:fl(t,e),gl(e),4&r&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var a=e.return;null!==a;){if(il(a)){var r=a;break e}a=a.return}throw Error(s(160))}switch(r.tag){case 5:var n=r.stateNode;32&r.flags&&(me(n,""),r.flags&=-33),cl(e,ol(e),n);break;case 3:case 4:var i=r.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,a){Xo=e,vl(e,t,a)}function vl(e,t,a){for(var r=0!==(1&e.mode);null!==Xo;){var n=Xo,s=n.child;if(22===n.tag&&r){var i=null!==n.memoizedState||Go;if(!i){var o=n.alternate,l=null!==o&&null!==o.memoizedState||Ko;o=Go;var c=Ko;if(Go=i,(Ko=l)&&!c)for(Xo=n;null!==Xo;)l=(i=Xo).child,22===i.tag&&null!==i.memoizedState?jl(n):null!==l?(l.return=i,Xo=l):jl(n);for(;null!==s;)Xo=s,vl(s,t,a),s=s.sibling;Xo=n,Go=o,Ko=c}bl(e)}else 0!==(8772&n.subtreeFlags)&&null!==s?(s.return=n,Xo=s):bl(e)}}function bl(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var a=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ko||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ko)if(null===a)r.componentDidMount();else{var n=t.elementType===t.type?a.memoizedProps:to(t.type,a.memoizedProps);r.componentDidUpdate(n,a.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Hs(t,i,r);break;case 3:var o=t.updateQueue;if(null!==o){if(a=null,null!==t.child)switch(t.child.tag){case 5:case 1:a=t.child.stateNode}Hs(t,o,a)}break;case 5:var l=t.stateNode;if(null===a&&4&t.flags){a=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&Ut(m)}}}break;default:throw Error(s(163))}Ko||512&t.flags&&nl(t)}catch(h){Nc(t,t.return,h)}}if(t===e){Xo=null;break}if(null!==(a=t.sibling)){a.return=t.return,Xo=a;break}Xo=t.return}}function _l(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xo=a;break}Xo=t.return}}function jl(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{rl(4,t)}catch(l){Nc(t,a,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var n=t.return;try{r.componentDidMount()}catch(l){Nc(t,n,l)}}var s=t.return;try{nl(t)}catch(l){Nc(t,s,l)}break;case 5:var i=t.return;try{nl(t)}catch(l){Nc(t,i,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var wl,Nl=Math.ceil,kl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Al=0,Ll=null,Pl=null,El=0,Fl=0,Ol=Nn(0),Il=0,Rl=null,Dl=0,Ml=0,Tl=0,ql=null,zl=null,Bl=0,Ul=1/0,Hl=null,Wl=!1,Vl=null,Ql=null,Jl=!1,Yl=null,Gl=0,Kl=0,$l=null,Xl=-1,Zl=0;function ec(){return 0!==(6&Al)?$e():-1!==Xl?Xl:Xl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==El?El&-El:null!==fs.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function ac(e,t,a,r){if(50<Kl)throw Kl=0,$l=null,Error(s(185));gt(e,a,r),0!==(2&Al)&&e===Ll||(e===Ll&&(0===(2&Al)&&(Ml|=a),4===Il&&oc(e,El)),rc(e,r),1===a&&0===Al&&0===(1&t.mode)&&(Ul=$e()+500,qn&&Un()))}function rc(e,t){var a=e.callbackNode;!function(e,t){for(var a=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=n[i];-1===l?0!==(o&a)&&0===(o&r)||(n[i]=ht(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=mt(e,e===Ll?El:0);if(0===r)null!==a&&Ye(a),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=a&&Ye(a),1===t)0===e.tag?function(e){qn=!0,Bn(e)}(lc.bind(null,e)):Bn(lc.bind(null,e)),sn(function(){0===(6&Al)&&Un()}),a=null;else{switch(bt(r)){case 1:a=Ze;break;case 4:a=et;break;case 16:default:a=tt;break;case 536870912:a=rt}a=Lc(a,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function nc(e,t){if(Xl=-1,Zl=0,0!==(6&Al))throw Error(s(327));var a=e.callbackNode;if(jc()&&e.callbackNode!==a)return null;var r=mt(e,e===Ll?El:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=xc(e,r);else{t=r;var n=Al;Al|=2;var i=pc();for(Ll===e&&El===t||(Hl=null,Ul=$e()+500,mc(e,t));;)try{yc();break}catch(l){hc(e,l)}Ss(),kl.current=i,Al=n,null!==Pl?t=0:(Ll=null,El=0,t=Il)}if(0!==t){if(2===t&&(0!==(n=pt(e))&&(r=n,t=sc(e,n))),1===t)throw a=Rl,mc(e,0),oc(e,r),rc(e,$e()),a;if(6===t)oc(e,r);else{if(n=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var a=t.updateQueue;if(null!==a&&null!==(a=a.stores))for(var r=0;r<a.length;r++){var n=a[r],s=n.getSnapshot;n=n.value;try{if(!ir(s(),n))return!1}catch(o){return!1}}}if(a=t.child,16384&t.subtreeFlags&&null!==a)a.return=t,t=a;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=xc(e,r))&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t))throw a=Rl,mc(e,0),oc(e,r),rc(e,$e()),a;switch(e.finishedWork=n,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,zl,Hl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Bl+500-$e())){if(0!==mt(e,0))break;if(((n=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=an(_c.bind(null,e,zl,Hl),t);break}_c(e,zl,Hl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,n=-1;0<r;){var o=31-it(r);i=1<<o,(o=t[o])>n&&(n=o),r&=~i}if(r=n,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Nl(r/1960))-r)){e.timeoutHandle=an(_c.bind(null,e,zl,Hl),r);break}_c(e,zl,Hl);break;default:throw Error(s(329))}}}return rc(e,$e()),e.callbackNode===a?nc.bind(null,e):null}function sc(e,t){var a=ql;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=xc(e,t))&&(t=zl,zl=a,null!==t&&ic(t)),e}function ic(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Tl,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-it(t),r=1<<a;e[a]=-1,t&=~r}}function lc(e){if(0!==(6&Al))throw Error(s(327));jc();var t=mt(e,0);if(0===(1&t))return rc(e,$e()),null;var a=xc(e,t);if(0!==e.tag&&2===a){var r=pt(e);0!==r&&(t=r,a=sc(e,r))}if(1===a)throw a=Rl,mc(e,0),oc(e,t),rc(e,$e()),a;if(6===a)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zl,Hl),rc(e,$e()),null}function cc(e,t){var a=Al;Al|=1;try{return e(t)}finally{0===(Al=a)&&(Ul=$e()+500,qn&&Un())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&jc();var t=Al;Al|=1;var a=Cl.transition,r=vt;try{if(Cl.transition=null,vt=1,e)return e()}finally{vt=r,Cl.transition=a,0===(6&(Al=t))&&Un()}}function uc(){Fl=Ol.current,kn(Ol)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(-1!==a&&(e.timeoutHandle=-1,rn(a)),null!==Pl)for(a=Pl.return;null!==a;){var r=a;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&On();break;case 3:Ks(),kn(Ln),kn(An),ai();break;case 5:Xs(r);break;case 4:Ks();break;case 13:case 19:kn(Zs);break;case 10:Cs(r.type._context);break;case 22:case 23:uc()}a=a.return}if(Ll=e,Pl=e=Oc(e.current,null),El=Fl=t,Il=0,Rl=null,Tl=Ml=Dl=0,zl=ql=null,null!==Es){for(t=0;t<Es.length;t++)if(null!==(r=(a=Es[t]).interleaved)){a.interleaved=null;var n=r.next,s=a.pending;if(null!==s){var i=s.next;s.next=n,r.next=i}a.pending=r}Es=null}return e}function hc(e,t){for(;;){var a=Pl;try{if(Ss(),ri.current=$i,ci){for(var r=ii.memoizedState;null!==r;){var n=r.queue;null!==n&&(n.pending=null),r=r.next}ci=!1}if(si=0,li=oi=ii=null,di=!1,ui=0,Sl.current=null,null===a||null===a.return){Il=1,Rl=t,Pl=null;break}e:{var i=e,o=a.return,l=a,c=t;if(t=El,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xo(o);if(null!==p){p.flags&=-257,go(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var x=new Set;x.add(c),t.updateQueue=x}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(s(426))}else if(ns&&1&l.mode){var g=xo(o);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),go(g,o,l,0,t),ps(lo(c,l));break e}}i=c=lo(c,l),4!==Il&&(Il=2),null===ql?ql=[i]:ql.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,ho(0,c,t));break e;case 1:l=c;var y=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Ql||!Ql.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,Bs(i,po(i,l,t));break e}}i=i.return}while(null!==i)}bc(a)}catch(b){t=b,Pl===a&&null!==a&&(Pl=a=a.return);continue}break}}function pc(){var e=kl.current;return kl.current=$i,null===e?$i:e}function fc(){0!==Il&&3!==Il&&2!==Il||(Il=4),null===Ll||0===(268435455&Dl)&&0===(268435455&Ml)||oc(Ll,El)}function xc(e,t){var a=Al;Al|=2;var r=pc();for(Ll===e&&El===t||(Hl=null,mc(e,t));;)try{gc();break}catch(n){hc(e,n)}if(Ss(),Al=a,kl.current=r,null!==Pl)throw Error(s(261));return Ll=null,El=0,Il}function gc(){for(;null!==Pl;)vc(Pl)}function yc(){for(;null!==Pl&&!Ge();)vc(Pl)}function vc(e){var t=wl(e.alternate,e,Fl);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Sl.current=null}function bc(e){var t=e;do{var a=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(a=Jo(a,t,Fl)))return void(Pl=a)}else{if(null!==(a=Yo(a,t)))return a.flags&=32767,void(Pl=a);if(null===e)return Il=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Il&&(Il=5)}function _c(e,t,a){var r=vt,n=Cl.transition;try{Cl.transition=null,vt=1,function(e,t,a,r){do{jc()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));a=e.finishedWork;var n=e.finishedLanes;if(null===a)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=a.lanes|a.childLanes;if(function(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<a;){var n=31-it(a),s=1<<n;t[n]=0,r[n]=-1,e[n]=-1,a&=~s}}(e,i),e===Ll&&(Pl=Ll=null,El=0),0===(2064&a.subtreeFlags)&&0===(2064&a.flags)||Jl||(Jl=!0,Lc(tt,function(){return jc(),null})),i=0!==(15990&a.flags),0!==(15990&a.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=vt;vt=1;var l=Al;Al|=4,Sl.current=null,function(e,t){if(Zr=Wt,mr(e=ur())){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(a=(a=e.ownerDocument)&&a.defaultView||window).getSelection&&a.getSelection();if(r&&0!==r.rangeCount){a=r.anchorNode;var n=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{a.nodeType,i.nodeType}catch(_){a=null;break e}var o=0,l=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var p;m!==a||0!==n&&3!==m.nodeType||(l=o+n),m!==i||0!==r&&3!==m.nodeType||(c=o+r),3===m.nodeType&&(o+=m.nodeValue.length),null!==(p=m.firstChild);)h=m,m=p;for(;;){if(m===e)break t;if(h===a&&++d===n&&(l=o),h===i&&++u===r&&(c=o),null!==(p=m.nextSibling))break;h=(m=h).parentNode}m=p}a=-1===l||-1===c?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(en={focusedElem:e,selectionRange:a},Wt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var x=f.memoizedProps,g=f.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:to(t.type,x),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Nc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}f=tl,tl=!1}(e,a),xl(a,e),hr(en),Wt=!!Zr,en=Zr=null,e.current=a,yl(a,e,n),Ke(),Al=l,vt=o,Cl.transition=i}else e.current=a;if(Jl&&(Jl=!1,Yl=e,Gl=n),i=e.pendingLanes,0===i&&(Ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(a.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,a=0;a<t.length;a++)n=t[a],r(n.value,{componentStack:n.stack,digest:n.digest});if(Wl)throw Wl=!1,e=Vl,Vl=null,e;0!==(1&Gl)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===$l?Kl++:(Kl=0,$l=e):Kl=0,Un()}(e,t,a,r)}finally{Cl.transition=n,vt=r}return null}function jc(){if(null!==Yl){var e=bt(Gl),t=Cl.transition,a=vt;try{if(Cl.transition=null,vt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Gl=0,0!==(6&Al))throw Error(s(331));var n=Al;for(Al|=4,Xo=e.current;null!==Xo;){var i=Xo,o=i.child;if(0!==(16&Xo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Xo=d;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:al(8,u,i)}var m=u.child;if(null!==m)m.return=u,Xo=m;else for(;null!==Xo;){var h=(u=Xo).sibling,p=u.return;if(sl(u),u===d){Xo=null;break}if(null!==h){h.return=p,Xo=h;break}Xo=p}}}var f=i.alternate;if(null!==f){var x=f.child;if(null!==x){f.child=null;do{var g=x.sibling;x.sibling=null,x=g}while(null!==x)}}Xo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(i=Xo).flags))switch(i.tag){case 0:case 11:case 15:al(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Xo=y;break e}Xo=i.return}}var v=e.current;for(Xo=v;null!==Xo;){var b=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Xo=b;else e:for(o=v;null!==Xo;){if(0!==(2048&(l=Xo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(j){Nc(l,l.return,j)}if(l===o){Xo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Xo=_;break e}Xo=l.return}}if(Al=n,Un(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(nt,e)}catch(j){}r=!0}return r}finally{vt=a,Cl.transition=t}}return!1}function wc(e,t,a){e=qs(e,t=ho(0,t=lo(a,t),1),1),t=ec(),null!==e&&(gt(e,1,t),rc(e,t))}function Nc(e,t,a){if(3===e.tag)wc(e,e,a);else for(;null!==t;){if(3===t.tag){wc(t,e,a);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=qs(t,e=po(t,e=lo(a,e),1),1),e=ec(),null!==t&&(gt(t,1,e),rc(t,e));break}}t=t.return}}function kc(e,t,a){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&a,Ll===e&&(El&a)===a&&(4===Il||3===Il&&(130023424&El)===El&&500>$e()-Bl?mc(e,0):Tl|=a),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var a=ec();null!==(e=Is(e,t))&&(gt(e,t,a),rc(e,a))}function Cc(e){var t=e.memoizedState,a=0;null!==t&&(a=t.retryLane),Sc(e,a)}function Ac(e,t){var a=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;null!==n&&(a=n.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Sc(e,a)}function Lc(e,t){return Je(e,t)}function Pc(e,t,a,r){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(e,t,a,r){return new Pc(e,t,a,r)}function Fc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var a=e.alternate;return null===a?((a=Ec(e.tag,t,e.key,e.mode)).elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=14680064&e.flags,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Ic(e,t,a,r,n,i){var o=2;if(r=e,"function"===typeof e)Fc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case w:return Rc(a.children,n,i,t);case N:o=8,n|=8;break;case k:return(e=Ec(12,a,t,2|n)).elementType=k,e.lanes=i,e;case L:return(e=Ec(13,a,t,n)).elementType=L,e.lanes=i,e;case P:return(e=Ec(19,a,t,n)).elementType=P,e.lanes=i,e;case O:return Dc(a,n,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case C:o=9;break e;case A:o=11;break e;case E:o=14;break e;case F:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ec(o,a,t,n)).elementType=e,t.type=r,t.lanes=i,t}function Rc(e,t,a,r){return(e=Ec(7,e,r,t)).lanes=a,e}function Dc(e,t,a,r){return(e=Ec(22,e,r,t)).elementType=O,e.lanes=a,e.stateNode={isHidden:!1},e}function Mc(e,t,a){return(e=Ec(6,e,null,t)).lanes=a,e}function Tc(e,t,a){return(t=Ec(4,null!==e.children?e.children:[],e.key,t)).lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qc(e,t,a,r,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=r,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function zc(e,t,a,r,n,s,i,o,l){return e=new qc(e,t,a,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ec(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function Bc(e){if(!e)return Cn;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var a=e.type;if(Fn(a))return Rn(e,a,t)}return t}function Uc(e,t,a,r,n,s,i,o,l){return(e=zc(a,r,!0,e,0,s,0,o,l)).context=Bc(null),a=e.current,(s=Ts(r=ec(),n=tc(a))).callback=void 0!==t&&null!==t?t:null,qs(a,s,n),e.current.lanes=n,gt(e,n,r),rc(e,r),e}function Hc(e,t,a,r){var n=t.current,s=ec(),i=tc(n);return a=Bc(a),null===t.context?t.context=a:t.pendingContext=a,(t=Ts(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=qs(n,t,i))&&(ac(e,n,i,s),zs(e,n,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var a=e.retryLane;e.retryLane=0!==a&&a<t?a:t}}function Qc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}wl=function(e,t,a){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ln.current)vo=!0;else{if(0===(e.lanes&a)&&0===(128&t.flags))return vo=!1,function(e,t,a){switch(t.tag){case 3:Lo(t),hs();break;case 5:$s(t);break;case 1:Fn(t.type)&&Dn(t);break;case 4:Gs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,n=t.memoizedProps.value;Sn(js,r._currentValue),r._currentValue=n;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Sn(Zs,1&Zs.current),t.flags|=128,null):0!==(a&t.child.childLanes)?Mo(e,t,a):(Sn(Zs,1&Zs.current),null!==(e=Wo(e,t,a))?e.sibling:null);Sn(Zs,1&Zs.current);break;case 19:if(r=0!==(a&t.childLanes),0!==(128&e.flags)){if(r)return Uo(e,t,a);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Sn(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,No(e,t,a)}return Wo(e,t,a)}(e,t,a);vo=0!==(131072&e.flags)}else vo=!1,ns&&0!==(1048576&t.flags)&&Zn(t,Qn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ho(e,t),e=t.pendingProps;var n=En(t,An.current);Ls(t,a),n=fi(null,t,r,e,n,a);var i=xi();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fn(r)?(i=!0,Dn(t)):i=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Ds(t),n.updater=ro,t.stateNode=n,n._reactInternals=t,oo(t,r,e,a),t=Ao(null,t,r,!0,i,a)):(t.tag=0,ns&&i&&es(t),bo(null,t,n,a),t=t.child),t;case 16:r=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,r=(n=r._init)(r._payload),t.type=r,n=t.tag=function(e){if("function"===typeof e)return Fc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===E)return 14}return 2}(r),e=to(r,e),n){case 0:t=So(null,t,r,e,a);break e;case 1:t=Co(null,t,r,e,a);break e;case 11:t=_o(null,t,r,e,a);break e;case 14:t=jo(null,t,r,to(r.type,e),a);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,n=t.pendingProps,So(e,t,r,n=t.elementType===r?n:to(r,n),a);case 1:return r=t.type,n=t.pendingProps,Co(e,t,r,n=t.elementType===r?n:to(r,n),a);case 3:e:{if(Lo(t),null===e)throw Error(s(387));r=t.pendingProps,n=(i=t.memoizedState).element,Ms(e,t),Us(t,r,null,a);var o=t.memoizedState;if(r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Po(e,t,r,a,n=lo(Error(s(423)),t));break e}if(r!==n){t=Po(e,t,r,a,n=lo(Error(s(424)),t));break e}for(rs=cn(t.stateNode.containerInfo.firstChild),as=t,ns=!0,ss=null,a=_s(t,null,r,a),t.child=a;a;)a.flags=-3&a.flags|4096,a=a.sibling}else{if(hs(),r===n){t=Wo(e,t,a);break e}bo(e,t,r,a)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),r=t.type,n=t.pendingProps,i=null!==e?e.memoizedProps:null,o=n.children,tn(r,n)?o=null:null!==i&&tn(r,i)&&(t.flags|=32),ko(e,t),bo(e,t,o,a),t.child;case 6:return null===e&&cs(t),null;case 13:return Mo(e,t,a);case 4:return Gs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,a):bo(e,t,r,a),t.child;case 11:return r=t.type,n=t.pendingProps,_o(e,t,r,n=t.elementType===r?n:to(r,n),a);case 7:return bo(e,t,t.pendingProps,a),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,i=t.memoizedProps,o=n.value,Sn(js,r._currentValue),r._currentValue=o,null!==i)if(ir(i.value,o)){if(i.children===n.children&&!Ln.current){t=Wo(e,t,a);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=Ts(-1,a&-a)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=a,null!==(c=i.alternate)&&(c.lanes|=a),As(i.return,a,t),l.lanes|=a;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=a,null!==(l=o.alternate)&&(l.lanes|=a),As(o,a,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,n.children,a),t=t.child}return t;case 9:return n=t.type,r=t.pendingProps.children,Ls(t,a),r=r(n=Ps(n)),t.flags|=1,bo(e,t,r,a),t.child;case 14:return n=to(r=t.type,t.pendingProps),jo(e,t,r,n=to(r.type,n),a);case 15:return wo(e,t,t.type,t.pendingProps,a);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:to(r,n),Ho(e,t),t.tag=1,Fn(r)?(e=!0,Dn(t)):e=!1,Ls(t,a),so(t,r,n),oo(t,r,n,a),Ao(null,t,r,!0,e,a);case 19:return Uo(e,t,a);case 22:return No(e,t,a)}throw Error(s(156,t.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,t,a,r,n){var s=a._reactRootContainer;if(s){var i=s;if("function"===typeof n){var o=n;n=function(){var e=Wc(i);o.call(e)}}Hc(t,i,e,n)}else i=function(e,t,a,r,n){if(n){if("function"===typeof r){var s=r;r=function(){var e=Wc(i);s.call(e)}}var i=Uc(t,r,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[pn]=i.current,Br(8===e.nodeType?e.parentNode:e),dc(),i}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof r){var o=r;r=function(){var e=Wc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=l,e[pn]=l.current,Br(8===e.nodeType?e.parentNode:e),dc(function(){Hc(t,l,a,r)}),l}(a,t,e,n,r);return Wc(i)}Gc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Gc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Hc(null,e,null,null)}),t[pn]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ot.length&&0!==t&&t<Ot[a].priority;a++);Ot.splice(a,0,e),0===a&&Mt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=ut(t.pendingLanes);0!==a&&(yt(t,1|a),rc(t,$e()),0===(6&Al)&&(Ul=$e()+500,Un()))}break;case 13:dc(function(){var t=Is(e,1);if(null!==t){var a=ec();ac(t,e,1,a)}}),Qc(e,1)}},jt=function(e){if(13===e.tag){var t=Is(e,134217728);if(null!==t)ac(t,e,134217728,ec());Qc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),a=Is(e,t);if(null!==a)ac(a,e,t,ec());Qc(e,t)}},Nt=function(){return vt},kt=function(e,t){var a=vt;try{return vt=e,t()}finally{vt=a}},je=function(e,t,a){switch(t){case"input":if(X(e,a),t=a.name,"radio"===a.type&&null!=t){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var r=a[t];if(r!==e&&r.form===e.form){var n=_n(r);if(!n)throw Error(s(90));J(r),X(r,n)}}}break;case"textarea":se(e,a);break;case"select":null!=(t=a.value)&&ae(e,!!a.multiple,t,!1)}},Ae=cc,Le=dc;var ed={usingClientEntryPoint:!1,Events:[vn,bn,_n,Se,Ce,cc]},td={findFiberByHostInstance:yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ad={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{nt=rd.inject(ad),st=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(s(200));return function(e,t,a){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==r?null:""+r,children:e,containerInfo:t,implementation:a}}(e,t,null,a)},t.createRoot=function(e,t){if(!Kc(e))throw Error(s(299));var a=!1,r="",n=Jc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=zc(e,1,!1,null,0,a,0,r,n),e[pn]=t.current,Br(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,a){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!0,a)},t.hydrateRoot=function(e,t,a){if(!Kc(e))throw Error(s(405));var r=null!=a&&a.hydratedSources||null,n=!1,i="",o=Jc;if(null!==a&&void 0!==a&&(!0===a.unstable_strictMode&&(n=!0),void 0!==a.identifierPrefix&&(i=a.identifierPrefix),void 0!==a.onRecoverableError&&(o=a.onRecoverableError)),t=Uc(t,null,e,1,null!=a?a:null,n,0,i,o),e[pn]=t.current,Br(e),r)for(e=0;e<r.length;e++)n=(n=(a=r[e])._getVersion)(a._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[a,n]:t.mutableSourceEagerHydrationData.push(a,n);return new Gc(t)},t.render=function(e,t,a){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!1,a)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,a,r){if(!$c(a))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,a,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2907:(e,t,a)=>{"use strict";a.d(t,{QueryClient:()=>r.QueryClient,QueryClientProvider:()=>n.QueryClientProvider,useMutation:()=>n.useMutation,useQuery:()=>n.useQuery,useQueryClient:()=>n.useQueryClient});var r=a(5819);a.o(r,"QueryClientProvider")&&a.d(t,{QueryClientProvider:function(){return r.QueryClientProvider}}),a.o(r,"useMutation")&&a.d(t,{useMutation:function(){return r.useMutation}}),a.o(r,"useQuery")&&a.d(t,{useQuery:function(){return r.useQuery}}),a.o(r,"useQueryClient")&&a.d(t,{useQueryClient:function(){return r.useQueryClient}});var n=a(6490)},4202:(e,t)=>{"use strict";var a=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,x={};function g(e,t,a){this.props=e,this.context=t,this.refs=x,this.updater=a||p}function y(){}function v(e,t,a){this.props=e,this.context=t,this.refs=x,this.updater=a||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var b=v.prototype=new y;b.constructor=v,f(b,g.prototype),b.isPureReactComponent=!0;var _=Array.isArray,j=Object.prototype.hasOwnProperty,w={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,r){var n,s={},i=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,n)&&!N.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===s[n]&&(s[n]=l[n]);return{$$typeof:a,type:e,key:i,ref:o,props:s,_owner:w.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function L(e,t,n,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case a:case r:l=!0}}if(l)return i=i(l=e),e=""===s?"."+A(l,0):s,_(i)?(n="",null!=e&&(n=e.replace(C,"$&/")+"/"),L(i,t,n,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var d=s+A(o=e[c],c);l+=L(o,t,n,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=L(o=o.value,t,n,d=s+A(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,a){if(null==e)return e;var r=[],n=0;return L(e,r,"","",function(e){return t.call(a,e,n++)}),r}function E(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var F={current:null},O={transition:null},I={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:O,ReactCurrentOwner:w};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,a){P(e,function(){t.apply(this,arguments)},a)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=n,t.Profiler=i,t.PureComponent=v,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=f({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=w.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!N.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:a,type:e.type,key:s,ref:i,props:n,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return F.current.useCallback(e,t)},t.useContext=function(e){return F.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return F.current.useDeferredValue(e)},t.useEffect=function(e,t){return F.current.useEffect(e,t)},t.useId=function(){return F.current.useId()},t.useImperativeHandle=function(e,t,a){return F.current.useImperativeHandle(e,t,a)},t.useInsertionEffect=function(e,t){return F.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return F.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return F.current.useMemo(e,t)},t.useReducer=function(e,t,a){return F.current.useReducer(e,t,a)},t.useRef=function(e){return F.current.useRef(e)},t.useState=function(e){return F.current.useState(e)},t.useSyncExternalStore=function(e,t,a){return F.current.useSyncExternalStore(e,t,a)},t.useTransition=function(){return F.current.useTransition()},t.version="18.3.1"},4298:()=>{},4391:(e,t,a)=>{"use strict";var r=a(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4980:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var r=a(2284);function n(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=(0,r.A)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}function s(e,t,a){return(t=n(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},5043:(e,t,a)=>{"use strict";e.exports=a(4202)},5540:(e,t,a)=>{"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function n(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}a.d(t,{A:()=>n})},5819:(e,t,a)=>{"use strict";a.d(t,{QueryClient:()=>r.E});var r=a(7646),n=a(4298);a.o(n,"QueryClientProvider")&&a.d(t,{QueryClientProvider:function(){return n.QueryClientProvider}}),a.o(n,"useMutation")&&a.d(t,{useMutation:function(){return n.useMutation}}),a.o(n,"useQuery")&&a.d(t,{useQuery:function(){return n.useQuery}}),a.o(n,"useQueryClient")&&a.d(t,{useQueryClient:function(){return n.useQueryClient}})},5964:(e,t,a)=>{"use strict";a.d(t,{$:()=>c,s:()=>l});var r=a(8168),n=a(75),s=a(1991),i=a(8990),o=a(8870),l=function(){function e(e){this.options=(0,r.A)({},e.defaultOptions,e.options),this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.observers=[],this.state=e.state||c(),this.meta=e.meta}var t=e.prototype;return t.setState=function(e){this.dispatch({type:"setState",state:e})},t.addObserver=function(e){-1===this.observers.indexOf(e)&&this.observers.push(e)},t.removeObserver=function(e){this.observers=this.observers.filter(function(t){return t!==e})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(o.lQ).catch(o.lQ)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var e,t=this,a="loading"===this.state.status,r=Promise.resolve();return a||(this.dispatch({type:"loading",variables:this.options.variables}),r=r.then(function(){null==t.mutationCache.config.onMutate||t.mutationCache.config.onMutate(t.state.variables,t)}).then(function(){return null==t.options.onMutate?void 0:t.options.onMutate(t.state.variables)}).then(function(e){e!==t.state.context&&t.dispatch({type:"loading",context:e,variables:t.state.variables})})),r.then(function(){return t.executeMutation()}).then(function(a){e=a,null==t.mutationCache.config.onSuccess||t.mutationCache.config.onSuccess(e,t.state.variables,t.state.context,t)}).then(function(){return null==t.options.onSuccess?void 0:t.options.onSuccess(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(e,null,t.state.variables,t.state.context)}).then(function(){return t.dispatch({type:"success",data:e}),e}).catch(function(e){return null==t.mutationCache.config.onError||t.mutationCache.config.onError(e,t.state.variables,t.state.context,t),(0,n.t)().error(e),Promise.resolve().then(function(){return null==t.options.onError?void 0:t.options.onError(e,t.state.variables,t.state.context)}).then(function(){return null==t.options.onSettled?void 0:t.options.onSettled(void 0,e,t.state.variables,t.state.context)}).then(function(){throw t.dispatch({type:"error",error:e}),e})})},t.executeMutation=function(){var e,t=this;return this.retryer=new i.eJ({fn:function(){return t.options.mutationFn?t.options.mutationFn(t.state.variables):Promise.reject("No mutationFn found")},onFail:function(){t.dispatch({type:"failed"})},onPause:function(){t.dispatch({type:"pause"})},onContinue:function(){t.dispatch({type:"continue"})},retry:null!=(e=this.options.retry)?e:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(e){var t=this;this.state=function(e,t){switch(t.type){case"failed":return(0,r.A)({},e,{failureCount:e.failureCount+1});case"pause":return(0,r.A)({},e,{isPaused:!0});case"continue":return(0,r.A)({},e,{isPaused:!1});case"loading":return(0,r.A)({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return(0,r.A)({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return(0,r.A)({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return(0,r.A)({},e,t.state);default:return e}}(this.state,e),s.j.batch(function(){t.observers.forEach(function(t){t.onMutationUpdate(e)}),t.mutationCache.notify(t)})},e}();function c(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}},6317:(e,t,a)=>{"use strict";a.d(t,{t:()=>i});var r=a(5540),n=a(1422),s=a(8870),i=new(function(e){function t(){var t;return(t=e.call(this)||this).setup=function(e){var t;if(!s.S$&&(null==(t=window)?void 0:t.addEventListener)){var a=function(){return e()};return window.addEventListener("online",a,!1),window.addEventListener("offline",a,!1),function(){window.removeEventListener("online",a),window.removeEventListener("offline",a)}}},t}(0,r.A)(t,e);var a=t.prototype;return a.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},a.onUnsubscribe=function(){var e;this.hasListeners()||(null==(e=this.cleanup)||e.call(this),this.cleanup=void 0)},a.setEventListener=function(e){var t,a=this;this.setup=e,null==(t=this.cleanup)||t.call(this),this.cleanup=e(function(e){"boolean"===typeof e?a.setOnline(e):a.onOnline()})},a.setOnline=function(e){this.online=e,e&&this.onOnline()},a.onOnline=function(){this.listeners.forEach(function(e){e()})},a.isOnline=function(){return"boolean"===typeof this.online?this.online:"undefined"===typeof navigator||"undefined"===typeof navigator.onLine||navigator.onLine},t}(n.Q))},6490:(e,t,a)=>{"use strict";a.d(t,{QueryClientProvider:()=>m,useMutation:()=>b,useQuery:()=>E,useQueryClient:()=>u});var r=a(1991),n=a(7950).unstable_batchedUpdates;r.j.setBatchNotifyFunction(n);var s=a(75),i=console;(0,s.B)(i);var o=a(5043),l=o.createContext(void 0),c=o.createContext(!1);function d(e){return e&&"undefined"!==typeof window?(window.ReactQueryClientContext||(window.ReactQueryClientContext=l),window.ReactQueryClientContext):l}var u=function(){var e=o.useContext(d(o.useContext(c)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},m=function(e){var t=e.client,a=e.contextSharing,r=void 0!==a&&a,n=e.children;o.useEffect(function(){return t.mount(),function(){t.unmount()}},[t]);var s=d(r);return o.createElement(c.Provider,{value:r},o.createElement(s.Provider,{value:t},n))},h=a(8168),p=a(8870),f=a(5540),x=a(5964),g=a(1422),y=function(e){function t(t,a){var r;return(r=e.call(this)||this).client=t,r.setOptions(a),r.bindMethods(),r.updateResult(),r}(0,f.A)(t,e);var a=t.prototype;return a.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},a.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},a.onUnsubscribe=function(){var e;this.listeners.length||(null==(e=this.currentMutation)||e.removeObserver(this))},a.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)},a.getCurrentResult=function(){return this.currentResult},a.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},a.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,(0,h.A)({},this.options,{variables:"undefined"!==typeof e?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},a.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:(0,x.$)(),t=(0,h.A)({},e,{isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset});this.currentResult=t},a.notify=function(e){var t=this;r.j.batch(function(){t.mutateOptions&&(e.onSuccess?(null==t.mutateOptions.onSuccess||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(null==t.mutateOptions.onError||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),null==t.mutateOptions.onSettled||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach(function(e){e(t.currentResult)})})},t}(g.Q);function v(e,t,a){return"function"===typeof t?t.apply(void 0,a):"boolean"===typeof t?t:!!e}function b(e,t,a){var n=o.useRef(!1),s=o.useState(0)[1],i=(0,p.GR)(e,t,a),l=u(),c=o.useRef();c.current?c.current.setOptions(i):c.current=new y(l,i);var d=c.current.getCurrentResult();o.useEffect(function(){n.current=!0;var e=c.current.subscribe(r.j.batchCalls(function(){n.current&&s(function(e){return e+1})}));return function(){n.current=!1,e()}},[]);var m=o.useCallback(function(e,t){c.current.mutate(e,t).catch(p.lQ)},[]);if(d.error&&v(void 0,c.current.options.useErrorBoundary,[d.error]))throw d.error;return(0,h.A)({},d,{mutate:m,mutateAsync:d.mutate})}var _=a(244),j=a(8990),w=function(e){function t(t,a){var r;return(r=e.call(this)||this).client=t,r.options=a,r.trackedProps=[],r.selectError=null,r.bindMethods(),r.setOptions(a),r}(0,f.A)(t,e);var a=t.prototype;return a.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},a.onSubscribe=function(){1===this.listeners.length&&(this.currentQuery.addObserver(this),N(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},a.onUnsubscribe=function(){this.listeners.length||this.destroy()},a.shouldFetchOnReconnect=function(){return k(this.currentQuery,this.options,this.options.refetchOnReconnect)},a.shouldFetchOnWindowFocus=function(){return k(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},a.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},a.setOptions=function(e,t){var a=this.options,r=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(e),"undefined"!==typeof this.options.enabled&&"boolean"!==typeof this.options.enabled)throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=a.queryKey),this.updateQuery();var n=this.hasListeners();n&&S(this.currentQuery,r,this.options,a)&&this.executeFetch(),this.updateResult(t),!n||this.currentQuery===r&&this.options.enabled===a.enabled&&this.options.staleTime===a.staleTime||this.updateStaleTimeout();var s=this.computeRefetchInterval();!n||this.currentQuery===r&&this.options.enabled===a.enabled&&s===this.currentRefetchInterval||this.updateRefetchInterval(s)},a.getOptimisticResult=function(e){var t=this.client.defaultQueryObserverOptions(e),a=this.client.getQueryCache().build(this.client,t);return this.createResult(a,t)},a.getCurrentResult=function(){return this.currentResult},a.trackResult=function(e,t){var a=this,r={},n=function(e){a.trackedProps.includes(e)||a.trackedProps.push(e)};return Object.keys(e).forEach(function(t){Object.defineProperty(r,t,{configurable:!1,enumerable:!0,get:function(){return n(t),e[t]}})}),(t.useErrorBoundary||t.suspense)&&n("error"),r},a.getNextResult=function(e){var t=this;return new Promise(function(a,r){var n=t.subscribe(function(t){t.isFetching||(n(),t.isError&&(null==e?void 0:e.throwOnError)?r(t.error):a(t))})})},a.getCurrentQuery=function(){return this.currentQuery},a.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},a.refetch=function(e){return this.fetch((0,h.A)({},e,{meta:{refetchPage:null==e?void 0:e.refetchPage}}))},a.fetchOptimistic=function(e){var t=this,a=this.client.defaultQueryObserverOptions(e),r=this.client.getQueryCache().build(this.client,a);return r.fetch().then(function(){return t.createResult(r,a)})},a.fetch=function(e){var t=this;return this.executeFetch(e).then(function(){return t.updateResult(),t.currentResult})},a.executeFetch=function(e){this.updateQuery();var t=this.currentQuery.fetch(this.options,e);return(null==e?void 0:e.throwOnError)||(t=t.catch(p.lQ)),t},a.updateStaleTimeout=function(){var e=this;if(this.clearStaleTimeout(),!p.S$&&!this.currentResult.isStale&&(0,p.gn)(this.options.staleTime)){var t=(0,p.j3)(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(function(){e.currentResult.isStale||e.updateResult()},t)}},a.computeRefetchInterval=function(){var e;return"function"===typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e},a.updateRefetchInterval=function(e){var t=this;this.clearRefetchInterval(),this.currentRefetchInterval=e,!p.S$&&!1!==this.options.enabled&&(0,p.gn)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(function(){(t.options.refetchIntervalInBackground||_.m.isFocused())&&t.executeFetch()},this.currentRefetchInterval))},a.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},a.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},a.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},a.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},a.createResult=function(e,t){var a,r=this.currentQuery,n=this.options,i=this.currentResult,o=this.currentResultState,l=this.currentResultOptions,c=e!==r,d=c?e.state:this.currentQueryInitialState,u=c?this.currentResult:this.previousQueryResult,m=e.state,h=m.dataUpdatedAt,f=m.error,x=m.errorUpdatedAt,g=m.isFetching,y=m.status,v=!1,b=!1;if(t.optimisticResults){var _=this.hasListeners(),j=!_&&N(e,t),w=_&&S(e,r,t,n);(j||w)&&(g=!0,h||(y="loading"))}if(t.keepPreviousData&&!m.dataUpdateCount&&(null==u?void 0:u.isSuccess)&&"error"!==y)a=u.data,h=u.dataUpdatedAt,y=u.status,v=!0;else if(t.select&&"undefined"!==typeof m.data)if(i&&m.data===(null==o?void 0:o.data)&&t.select===this.selectFn)a=this.selectResult;else try{this.selectFn=t.select,a=t.select(m.data),!1!==t.structuralSharing&&(a=(0,p.BH)(null==i?void 0:i.data,a)),this.selectResult=a,this.selectError=null}catch(A){(0,s.t)().error(A),this.selectError=A}else a=m.data;if("undefined"!==typeof t.placeholderData&&"undefined"===typeof a&&("loading"===y||"idle"===y)){var k;if((null==i?void 0:i.isPlaceholderData)&&t.placeholderData===(null==l?void 0:l.placeholderData))k=i.data;else if(k="function"===typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&"undefined"!==typeof k)try{k=t.select(k),!1!==t.structuralSharing&&(k=(0,p.BH)(null==i?void 0:i.data,k)),this.selectError=null}catch(A){(0,s.t)().error(A),this.selectError=A}"undefined"!==typeof k&&(y="success",a=k,b=!0)}return this.selectError&&(f=this.selectError,a=this.selectResult,x=Date.now(),y="error"),{status:y,isLoading:"loading"===y,isSuccess:"success"===y,isError:"error"===y,isIdle:"idle"===y,data:a,dataUpdatedAt:h,error:f,errorUpdatedAt:x,failureCount:m.fetchFailureCount,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:g,isRefetching:g&&"loading"!==y,isLoadingError:"error"===y&&0===m.dataUpdatedAt,isPlaceholderData:b,isPreviousData:v,isRefetchError:"error"===y&&0!==m.dataUpdatedAt,isStale:C(e,t),refetch:this.refetch,remove:this.remove}},a.shouldNotifyListeners=function(e,t){if(!t)return!0;var a=this.options,r=a.notifyOnChangeProps,n=a.notifyOnChangePropsExclusions;if(!r&&!n)return!0;if("tracked"===r&&!this.trackedProps.length)return!0;var s="tracked"===r?this.trackedProps:r;return Object.keys(e).some(function(a){var r=a,i=e[r]!==t[r],o=null==s?void 0:s.some(function(e){return e===a}),l=null==n?void 0:n.some(function(e){return e===a});return i&&!l&&(!s||o)})},a.updateResult=function(e){var t=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!(0,p.f8)(this.currentResult,t)){var a={cache:!0};!1!==(null==e?void 0:e.listeners)&&this.shouldNotifyListeners(this.currentResult,t)&&(a.listeners=!0),this.notify((0,h.A)({},a,e))}},a.updateQuery=function(){var e=this.client.getQueryCache().build(this.client,this.options);if(e!==this.currentQuery){var t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}},a.onQueryUpdate=function(e){var t={};"success"===e.type?t.onSuccess=!0:"error"!==e.type||(0,j.wm)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()},a.notify=function(e){var t=this;r.j.batch(function(){e.onSuccess?(null==t.options.onSuccess||t.options.onSuccess(t.currentResult.data),null==t.options.onSettled||t.options.onSettled(t.currentResult.data,null)):e.onError&&(null==t.options.onError||t.options.onError(t.currentResult.error),null==t.options.onSettled||t.options.onSettled(void 0,t.currentResult.error)),e.listeners&&t.listeners.forEach(function(e){e(t.currentResult)}),e.cache&&t.client.getQueryCache().notify({query:t.currentQuery,type:"observerResultsUpdated"})})},t}(g.Q);function N(e,t){return function(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||e.state.dataUpdatedAt>0&&k(e,t,t.refetchOnMount)}function k(e,t,a){if(!1!==t.enabled){var r="function"===typeof a?a(e):a;return"always"===r||!1!==r&&C(e,t)}return!1}function S(e,t,a,r){return!1!==a.enabled&&(e!==t||!1===r.enabled)&&(!a.suspense||"error"!==e.state.status)&&C(e,a)}function C(e,t){return e.isStaleByTime(t.staleTime)}function A(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var L=o.createContext(A()),P=function(){return o.useContext(L)};function E(e,t,a){return function(e,t){var a=o.useRef(!1),n=o.useState(0)[1],s=u(),i=P(),l=s.defaultQueryObserverOptions(e);l.optimisticResults=!0,l.onError&&(l.onError=r.j.batchCalls(l.onError)),l.onSuccess&&(l.onSuccess=r.j.batchCalls(l.onSuccess)),l.onSettled&&(l.onSettled=r.j.batchCalls(l.onSettled)),l.suspense&&("number"!==typeof l.staleTime&&(l.staleTime=1e3),0===l.cacheTime&&(l.cacheTime=1)),(l.suspense||l.useErrorBoundary)&&(i.isReset()||(l.retryOnMount=!1));var c=o.useState(function(){return new t(s,l)})[0],d=c.getOptimisticResult(l);if(o.useEffect(function(){a.current=!0,i.clearReset();var e=c.subscribe(r.j.batchCalls(function(){a.current&&n(function(e){return e+1})}));return c.updateResult(),function(){a.current=!1,e()}},[i,c]),o.useEffect(function(){c.setOptions(l,{listeners:!1})},[l,c]),l.suspense&&d.isLoading)throw c.fetchOptimistic(l).then(function(e){var t=e.data;null==l.onSuccess||l.onSuccess(t),null==l.onSettled||l.onSettled(t,null)}).catch(function(e){i.clearReset(),null==l.onError||l.onError(e),null==l.onSettled||l.onSettled(void 0,e)});if(d.isError&&!i.isReset()&&!d.isFetching&&v(l.suspense,l.useErrorBoundary,[d.error,c.getCurrentQuery()]))throw d.error;return"tracked"===l.notifyOnChangeProps&&(d=c.trackResult(d,l)),d}((0,p.vh)(e,t,a),w)}},7234:(e,t)=>{"use strict";function a(e,t){var a=e.length;e.push(t);e:for(;0<a;){var r=a-1>>>1,n=e[r];if(!(0<s(n,t)))break e;e[r]=t,e[a]=n,a=r}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],a=e.pop();if(a!==t){e[0]=a;e:for(var r=0,n=e.length,i=n>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,a))c<n&&0>s(d,l)?(e[r]=d,e[c]=a,r=c):(e[r]=l,e[o]=a,r=o);else{if(!(c<n&&0>s(d,a)))break e;e[r]=d,e[c]=a,r=c}}}return t}function s(e,t){var a=e.sortIndex-t.sortIndex;return 0!==a?a:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,h=3,p=!1,f=!1,x=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,a(c,t)}t=r(d)}}function _(e){if(x=!1,b(e),!f)if(null!==r(c))f=!0,O(j);else{var t=r(d);null!==t&&I(_,t.startTime-e)}}function j(e,a){f=!1,x&&(x=!1,y(S),S=-1),p=!0;var s=h;try{for(b(a),m=r(c);null!==m&&(!(m.expirationTime>a)||e&&!L());){var i=m.callback;if("function"===typeof i){m.callback=null,h=m.priorityLevel;var o=i(m.expirationTime<=a);a=t.unstable_now(),"function"===typeof o?m.callback=o:m===r(c)&&n(c),b(a)}else n(c);m=r(c)}if(null!==m)var l=!0;else{var u=r(d);null!==u&&I(_,u.startTime-a),l=!1}return l}finally{m=null,h=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,N=!1,k=null,S=-1,C=5,A=-1;function L(){return!(t.unstable_now()-A<C)}function P(){if(null!==k){var e=t.unstable_now();A=e;var a=!0;try{a=k(!0,e)}finally{a?w():(N=!1,k=null)}}else N=!1}if("function"===typeof v)w=function(){v(P)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,F=E.port2;E.port1.onmessage=P,w=function(){F.postMessage(null)}}else w=function(){g(P,0)};function O(e){k=e,N||(N=!0,w())}function I(e,a){S=g(function(){e(t.unstable_now())},a)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,O(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var a=h;h=t;try{return e()}finally{h=a}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=h;h=e;try{return t()}finally{h=a}},t.unstable_scheduleCallback=function(e,n,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,a(d,e),null===r(c)&&e===r(d)&&(x?(y(S),S=-1):x=!0,I(_,s-i))):(e.sortIndex=o,a(c,e),f||p||(f=!0,O(j))),e},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(e){var t=h;return function(){var a=h;h=t;try{return e.apply(this,arguments)}finally{h=a}}}},7646:(e,t,a)=>{"use strict";a.d(t,{E:()=>y});var r=a(8168),n=a(8870),s=a(5540),i=a(1991),o=a(75),l=a(8990),c=function(){function e(e){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=e.meta,this.scheduleGc()}var t=e.prototype;return t.setOptions=function(e){var t;this.options=(0,r.A)({},this.defaultOptions,e),this.meta=null==e?void 0:e.meta,this.cacheTime=Math.max(this.cacheTime||0,null!=(t=this.options.cacheTime)?t:3e5)},t.setDefaultOptions=function(e){this.defaultOptions=e},t.scheduleGc=function(){var e=this;this.clearGcTimeout(),(0,n.gn)(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){e.optionalRemove()},this.cacheTime))},t.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},t.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},t.setData=function(e,t){var a,r,s=this.state.data,i=(0,n.Zw)(e,s);return(null==(a=(r=this.options).isDataEqual)?void 0:a.call(r,s,i))?i=s:!1!==this.options.structuralSharing&&(i=(0,n.BH)(s,i)),this.dispatch({data:i,type:"success",dataUpdatedAt:null==t?void 0:t.updatedAt}),i},t.setState=function(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})},t.cancel=function(e){var t,a=this.promise;return null==(t=this.retryer)||t.cancel(e),a?a.then(n.lQ).catch(n.lQ):Promise.resolve()},t.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},t.reset=function(){this.destroy(),this.setState(this.initialState)},t.isActive=function(){return this.observers.some(function(e){return!1!==e.options.enabled})},t.isFetching=function(){return this.state.isFetching},t.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(e){return e.getCurrentResult().isStale})},t.isStaleByTime=function(e){return void 0===e&&(e=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!(0,n.j3)(this.state.dataUpdatedAt,e)},t.onFocus=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnWindowFocus()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.onOnline=function(){var e,t=this.observers.find(function(e){return e.shouldFetchOnReconnect()});t&&t.refetch(),null==(e=this.retryer)||e.continue()},t.addObserver=function(e){-1===this.observers.indexOf(e)&&(this.observers.push(e),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))},t.removeObserver=function(e){-1!==this.observers.indexOf(e)&&(this.observers=this.observers.filter(function(t){return t!==e}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:e}))},t.getObserversCount=function(){return this.observers.length},t.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},t.fetch=function(e,t){var a,r,s,i=this;if(this.state.isFetching)if(this.state.dataUpdatedAt&&(null==t?void 0:t.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var c;return null==(c=this.retryer)||c.continueRetry(),this.promise}if(e&&this.setOptions(e),!this.options.queryFn){var d=this.observers.find(function(e){return e.options.queryFn});d&&this.setOptions(d.options)}var u=(0,n.HN)(this.queryKey),m=(0,n.jY)(),h={queryKey:u,pageParam:void 0,meta:this.meta};Object.defineProperty(h,"signal",{enumerable:!0,get:function(){if(m)return i.abortSignalConsumed=!0,m.signal}});var p,f,x={fetchOptions:t,options:this.options,queryKey:u,state:this.state,fetchFn:function(){return i.options.queryFn?(i.abortSignalConsumed=!1,i.options.queryFn(h)):Promise.reject("Missing queryFn")},meta:this.meta};(null==(a=this.options.behavior)?void 0:a.onFetch)&&(null==(p=this.options.behavior)||p.onFetch(x));(this.revertState=this.state,this.state.isFetching&&this.state.fetchMeta===(null==(r=x.fetchOptions)?void 0:r.meta))||this.dispatch({type:"fetch",meta:null==(f=x.fetchOptions)?void 0:f.meta});return this.retryer=new l.eJ({fn:x.fetchFn,abort:null==m||null==(s=m.abort)?void 0:s.bind(m),onSuccess:function(e){i.setData(e),null==i.cache.config.onSuccess||i.cache.config.onSuccess(e,i),0===i.cacheTime&&i.optionalRemove()},onError:function(e){(0,l.wm)(e)&&e.silent||i.dispatch({type:"error",error:e}),(0,l.wm)(e)||(null==i.cache.config.onError||i.cache.config.onError(e,i),(0,o.t)().error(e)),0===i.cacheTime&&i.optionalRemove()},onFail:function(){i.dispatch({type:"failed"})},onPause:function(){i.dispatch({type:"pause"})},onContinue:function(){i.dispatch({type:"continue"})},retry:x.options.retry,retryDelay:x.options.retryDelay}),this.promise=this.retryer.promise,this.promise},t.dispatch=function(e){var t=this;this.state=this.reducer(this.state,e),i.j.batch(function(){t.observers.forEach(function(t){t.onQueryUpdate(e)}),t.cache.notify({query:t,type:"queryUpdated",action:e})})},t.getDefaultState=function(e){var t="function"===typeof e.initialData?e.initialData():e.initialData,a="undefined"!==typeof e.initialData?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0,r="undefined"!==typeof t;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?null!=a?a:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:r?"success":"idle"}},t.reducer=function(e,t){var a,n;switch(t.type){case"failed":return(0,r.A)({},e,{fetchFailureCount:e.fetchFailureCount+1});case"pause":return(0,r.A)({},e,{isPaused:!0});case"continue":return(0,r.A)({},e,{isPaused:!1});case"fetch":return(0,r.A)({},e,{fetchFailureCount:0,fetchMeta:null!=(a=t.meta)?a:null,isFetching:!0,isPaused:!1},!e.dataUpdatedAt&&{error:null,status:"loading"});case"success":return(0,r.A)({},e,{data:t.data,dataUpdateCount:e.dataUpdateCount+1,dataUpdatedAt:null!=(n=t.dataUpdatedAt)?n:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var s=t.error;return(0,l.wm)(s)&&s.revert&&this.revertState?(0,r.A)({},this.revertState):(0,r.A)({},e,{error:s,errorUpdateCount:e.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:e.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return(0,r.A)({},e,{isInvalidated:!0});case"setState":return(0,r.A)({},e,t.state);default:return e}},e}(),d=a(1422),u=function(e){function t(t){var a;return(a=e.call(this)||this).config=t||{},a.queries=[],a.queriesMap={},a}(0,s.A)(t,e);var a=t.prototype;return a.build=function(e,t,a){var r,s=t.queryKey,i=null!=(r=t.queryHash)?r:(0,n.F$)(s,t),o=this.get(i);return o||(o=new c({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:a,defaultOptions:e.getQueryDefaults(s),meta:t.meta}),this.add(o)),o},a.add=function(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"queryAdded",query:e}))},a.remove=function(e){var t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(function(t){return t!==e}),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"queryRemoved",query:e}))},a.clear=function(){var e=this;i.j.batch(function(){e.queries.forEach(function(t){e.remove(t)})})},a.get=function(e){return this.queriesMap[e]},a.getAll=function(){return this.queries},a.find=function(e,t){var a=(0,n.b_)(e,t)[0];return"undefined"===typeof a.exact&&(a.exact=!0),this.queries.find(function(e){return(0,n.MK)(a,e)})},a.findAll=function(e,t){var a=(0,n.b_)(e,t)[0];return Object.keys(a).length>0?this.queries.filter(function(e){return(0,n.MK)(a,e)}):this.queries},a.notify=function(e){var t=this;i.j.batch(function(){t.listeners.forEach(function(t){t(e)})})},a.onFocus=function(){var e=this;i.j.batch(function(){e.queries.forEach(function(e){e.onFocus()})})},a.onOnline=function(){var e=this;i.j.batch(function(){e.queries.forEach(function(e){e.onOnline()})})},t}(d.Q),m=a(5964),h=function(e){function t(t){var a;return(a=e.call(this)||this).config=t||{},a.mutations=[],a.mutationId=0,a}(0,s.A)(t,e);var a=t.prototype;return a.build=function(e,t,a){var r=new m.s({mutationCache:this,mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:a,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0,meta:t.meta});return this.add(r),r},a.add=function(e){this.mutations.push(e),this.notify(e)},a.remove=function(e){this.mutations=this.mutations.filter(function(t){return t!==e}),e.cancel(),this.notify(e)},a.clear=function(){var e=this;i.j.batch(function(){e.mutations.forEach(function(t){e.remove(t)})})},a.getAll=function(){return this.mutations},a.find=function(e){return"undefined"===typeof e.exact&&(e.exact=!0),this.mutations.find(function(t){return(0,n.nJ)(e,t)})},a.findAll=function(e){return this.mutations.filter(function(t){return(0,n.nJ)(e,t)})},a.notify=function(e){var t=this;i.j.batch(function(){t.listeners.forEach(function(t){t(e)})})},a.onFocus=function(){this.resumePausedMutations()},a.onOnline=function(){this.resumePausedMutations()},a.resumePausedMutations=function(){var e=this.mutations.filter(function(e){return e.state.isPaused});return i.j.batch(function(){return e.reduce(function(e,t){return e.then(function(){return t.continue().catch(n.lQ)})},Promise.resolve())})},t}(d.Q),p=a(244),f=a(6317);function x(e,t){return null==e.getNextPageParam?void 0:e.getNextPageParam(t[t.length-1],t)}function g(e,t){return null==e.getPreviousPageParam?void 0:e.getPreviousPageParam(t[0],t)}var y=function(){function e(e){void 0===e&&(e={}),this.queryCache=e.queryCache||new u,this.mutationCache=e.mutationCache||new h,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var t=e.prototype;return t.mount=function(){var e=this;this.unsubscribeFocus=p.m.subscribe(function(){p.m.isFocused()&&f.t.isOnline()&&(e.mutationCache.onFocus(),e.queryCache.onFocus())}),this.unsubscribeOnline=f.t.subscribe(function(){p.m.isFocused()&&f.t.isOnline()&&(e.mutationCache.onOnline(),e.queryCache.onOnline())})},t.unmount=function(){var e,t;null==(e=this.unsubscribeFocus)||e.call(this),null==(t=this.unsubscribeOnline)||t.call(this)},t.isFetching=function(e,t){var a=(0,n.b_)(e,t)[0];return a.fetching=!0,this.queryCache.findAll(a).length},t.isMutating=function(e){return this.mutationCache.findAll((0,r.A)({},e,{fetching:!0})).length},t.getQueryData=function(e,t){var a;return null==(a=this.queryCache.find(e,t))?void 0:a.state.data},t.getQueriesData=function(e){return this.getQueryCache().findAll(e).map(function(e){return[e.queryKey,e.state.data]})},t.setQueryData=function(e,t,a){var r=(0,n.vh)(e),s=this.defaultQueryOptions(r);return this.queryCache.build(this,s).setData(t,a)},t.setQueriesData=function(e,t,a){var r=this;return i.j.batch(function(){return r.getQueryCache().findAll(e).map(function(e){var n=e.queryKey;return[n,r.setQueryData(n,t,a)]})})},t.getQueryState=function(e,t){var a;return null==(a=this.queryCache.find(e,t))?void 0:a.state},t.removeQueries=function(e,t){var a=(0,n.b_)(e,t)[0],r=this.queryCache;i.j.batch(function(){r.findAll(a).forEach(function(e){r.remove(e)})})},t.resetQueries=function(e,t,a){var s=this,o=(0,n.b_)(e,t,a),l=o[0],c=o[1],d=this.queryCache,u=(0,r.A)({},l,{active:!0});return i.j.batch(function(){return d.findAll(l).forEach(function(e){e.reset()}),s.refetchQueries(u,c)})},t.cancelQueries=function(e,t,a){var r=this,s=(0,n.b_)(e,t,a),o=s[0],l=s[1],c=void 0===l?{}:l;"undefined"===typeof c.revert&&(c.revert=!0);var d=i.j.batch(function(){return r.queryCache.findAll(o).map(function(e){return e.cancel(c)})});return Promise.all(d).then(n.lQ).catch(n.lQ)},t.invalidateQueries=function(e,t,a){var s,o,l,c=this,d=(0,n.b_)(e,t,a),u=d[0],m=d[1],h=(0,r.A)({},u,{active:null==(s=null!=(o=u.refetchActive)?o:u.active)||s,inactive:null!=(l=u.refetchInactive)&&l});return i.j.batch(function(){return c.queryCache.findAll(u).forEach(function(e){e.invalidate()}),c.refetchQueries(h,m)})},t.refetchQueries=function(e,t,a){var s=this,o=(0,n.b_)(e,t,a),l=o[0],c=o[1],d=i.j.batch(function(){return s.queryCache.findAll(l).map(function(e){return e.fetch(void 0,(0,r.A)({},c,{meta:{refetchPage:null==l?void 0:l.refetchPage}}))})}),u=Promise.all(d).then(n.lQ);return(null==c?void 0:c.throwOnError)||(u=u.catch(n.lQ)),u},t.fetchQuery=function(e,t,a){var r=(0,n.vh)(e,t,a),s=this.defaultQueryOptions(r);"undefined"===typeof s.retry&&(s.retry=!1);var i=this.queryCache.build(this,s);return i.isStaleByTime(s.staleTime)?i.fetch(s):Promise.resolve(i.state.data)},t.prefetchQuery=function(e,t,a){return this.fetchQuery(e,t,a).then(n.lQ).catch(n.lQ)},t.fetchInfiniteQuery=function(e,t,a){var r=(0,n.vh)(e,t,a);return r.behavior={onFetch:function(e){e.fetchFn=function(){var t,a,r,s,i,o,c,d=null==(t=e.fetchOptions)||null==(a=t.meta)?void 0:a.refetchPage,u=null==(r=e.fetchOptions)||null==(s=r.meta)?void 0:s.fetchMore,m=null==u?void 0:u.pageParam,h="forward"===(null==u?void 0:u.direction),p="backward"===(null==u?void 0:u.direction),f=(null==(i=e.state.data)?void 0:i.pages)||[],y=(null==(o=e.state.data)?void 0:o.pageParams)||[],v=(0,n.jY)(),b=null==v?void 0:v.signal,_=y,j=!1,w=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},N=function(e,t,a,r){return _=r?[t].concat(_):[].concat(_,[t]),r?[a].concat(e):[].concat(e,[a])},k=function(t,a,r,n){if(j)return Promise.reject("Cancelled");if("undefined"===typeof r&&!a&&t.length)return Promise.resolve(t);var s={queryKey:e.queryKey,signal:b,pageParam:r,meta:e.meta},i=w(s),o=Promise.resolve(i).then(function(e){return N(t,r,e,n)});return(0,l.dd)(i)&&(o.cancel=i.cancel),o};if(f.length)if(h){var S="undefined"!==typeof m,C=S?m:x(e.options,f);c=k(f,S,C)}else if(p){var A="undefined"!==typeof m,L=A?m:g(e.options,f);c=k(f,A,L,!0)}else!function(){_=[];var t="undefined"===typeof e.options.getNextPageParam,a=!d||!f[0]||d(f[0],0,f);c=a?k([],t,y[0]):Promise.resolve(N([],y[0],f[0]));for(var r=function(a){c=c.then(function(r){if(!d||!f[a]||d(f[a],a,f)){var n=t?y[a]:x(e.options,r);return k(r,t,n)}return Promise.resolve(N(r,y[a],f[a]))})},n=1;n<f.length;n++)r(n)}();else c=k([]);var P=c.then(function(e){return{pages:e,pageParams:_}});return P.cancel=function(){j=!0,null==v||v.abort(),(0,l.dd)(c)&&c.cancel()},P}}},this.fetchQuery(r)},t.prefetchInfiniteQuery=function(e,t,a){return this.fetchInfiniteQuery(e,t,a).then(n.lQ).catch(n.lQ)},t.cancelMutations=function(){var e=this,t=i.j.batch(function(){return e.mutationCache.getAll().map(function(e){return e.cancel()})});return Promise.all(t).then(n.lQ).catch(n.lQ)},t.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},t.executeMutation=function(e){return this.mutationCache.build(this,e).execute()},t.getQueryCache=function(){return this.queryCache},t.getMutationCache=function(){return this.mutationCache},t.getDefaultOptions=function(){return this.defaultOptions},t.setDefaultOptions=function(e){this.defaultOptions=e},t.setQueryDefaults=function(e,t){var a=this.queryDefaults.find(function(t){return(0,n.Od)(e)===(0,n.Od)(t.queryKey)});a?a.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})},t.getQueryDefaults=function(e){var t;return e?null==(t=this.queryDefaults.find(function(t){return(0,n.Cp)(e,t.queryKey)}))?void 0:t.defaultOptions:void 0},t.setMutationDefaults=function(e,t){var a=this.mutationDefaults.find(function(t){return(0,n.Od)(e)===(0,n.Od)(t.mutationKey)});a?a.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})},t.getMutationDefaults=function(e){var t;return e?null==(t=this.mutationDefaults.find(function(t){return(0,n.Cp)(e,t.mutationKey)}))?void 0:t.defaultOptions:void 0},t.defaultQueryOptions=function(e){if(null==e?void 0:e._defaulted)return e;var t=(0,r.A)({},this.defaultOptions.queries,this.getQueryDefaults(null==e?void 0:e.queryKey),e,{_defaulted:!0});return!t.queryHash&&t.queryKey&&(t.queryHash=(0,n.F$)(t.queryKey,t)),t},t.defaultQueryObserverOptions=function(e){return this.defaultQueryOptions(e)},t.defaultMutationOptions=function(e){return(null==e?void 0:e._defaulted)?e:(0,r.A)({},this.defaultOptions.mutations,this.getMutationDefaults(null==e?void 0:e.mutationKey),e,{_defaulted:!0})},t.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},e}()},7950:(e,t,a)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=a(2730)},8168:(e,t,a)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},r.apply(null,arguments)}a.d(t,{A:()=>r})},8853:(e,t,a)=>{"use strict";e.exports=a(7234)},8870:(e,t,a)=>{"use strict";a.d(t,{BH:()=>v,Cp:()=>g,F$:()=>f,G6:()=>k,GR:()=>u,HN:()=>l,MK:()=>h,Od:()=>x,S$:()=>n,Zw:()=>i,b_:()=>m,f8:()=>b,gn:()=>o,j3:()=>c,jY:()=>S,lQ:()=>s,nJ:()=>p,vh:()=>d,yy:()=>N});var r=a(8168),n="undefined"===typeof window;function s(){}function i(e,t){return"function"===typeof e?e(t):e}function o(e){return"number"===typeof e&&e>=0&&e!==1/0}function l(e){return Array.isArray(e)?e:[e]}function c(e,t){return Math.max(e+(t||0)-Date.now(),0)}function d(e,t,a){return w(e)?"function"===typeof t?(0,r.A)({},a,{queryKey:e,queryFn:t}):(0,r.A)({},t,{queryKey:e}):e}function u(e,t,a){return w(e)?"function"===typeof t?(0,r.A)({},a,{mutationKey:e,mutationFn:t}):(0,r.A)({},t,{mutationKey:e}):"function"===typeof e?(0,r.A)({},t,{mutationFn:e}):(0,r.A)({},e)}function m(e,t,a){return w(e)?[(0,r.A)({},t,{queryKey:e}),a]:[e||{},t]}function h(e,t){var a=e.active,r=e.exact,n=e.fetching,s=e.inactive,i=e.predicate,o=e.queryKey,l=e.stale;if(w(o))if(r){if(t.queryHash!==f(o,t.options))return!1}else if(!g(t.queryKey,o))return!1;var c=function(e,t){return!0===e&&!0===t||null==e&&null==t?"all":!1===e&&!1===t?"none":(null!=e?e:!t)?"active":"inactive"}(a,s);if("none"===c)return!1;if("all"!==c){var d=t.isActive();if("active"===c&&!d)return!1;if("inactive"===c&&d)return!1}return("boolean"!==typeof l||t.isStale()===l)&&(("boolean"!==typeof n||t.isFetching()===n)&&!(i&&!i(t)))}function p(e,t){var a=e.exact,r=e.fetching,n=e.predicate,s=e.mutationKey;if(w(s)){if(!t.options.mutationKey)return!1;if(a){if(x(t.options.mutationKey)!==x(s))return!1}else if(!g(t.options.mutationKey,s))return!1}return("boolean"!==typeof r||"loading"===t.state.status===r)&&!(n&&!n(t))}function f(e,t){return((null==t?void 0:t.queryKeyHashFn)||x)(e)}function x(e){var t,a=l(e);return t=a,JSON.stringify(t,function(e,t){return _(t)?Object.keys(t).sort().reduce(function(e,a){return e[a]=t[a],e},{}):t})}function g(e,t){return y(l(e),l(t))}function y(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&!Object.keys(t).some(function(a){return!y(e[a],t[a])}))}function v(e,t){if(e===t)return e;var a=Array.isArray(e)&&Array.isArray(t);if(a||_(e)&&_(t)){for(var r=a?e.length:Object.keys(e).length,n=a?t:Object.keys(t),s=n.length,i=a?[]:{},o=0,l=0;l<s;l++){var c=a?l:n[l];i[c]=v(e[c],t[c]),i[c]===e[c]&&o++}return r===s&&o===r?e:i}return t}function b(e,t){if(e&&!t||t&&!e)return!1;for(var a in e)if(e[a]!==t[a])return!1;return!0}function _(e){if(!j(e))return!1;var t=e.constructor;if("undefined"===typeof t)return!0;var a=t.prototype;return!!j(a)&&!!a.hasOwnProperty("isPrototypeOf")}function j(e){return"[object Object]"===Object.prototype.toString.call(e)}function w(e){return"string"===typeof e||Array.isArray(e)}function N(e){return new Promise(function(t){setTimeout(t,e)})}function k(e){Promise.resolve().then(e).catch(function(e){return setTimeout(function(){throw e})})}function S(){if("function"===typeof AbortController)return new AbortController}},8990:(e,t,a)=>{"use strict";a.d(t,{dd:()=>o,eJ:()=>d,wm:()=>c});var r=a(244),n=a(6317),s=a(8870);function i(e){return Math.min(1e3*Math.pow(2,e),3e4)}function o(e){return"function"===typeof(null==e?void 0:e.cancel)}var l=function(e){this.revert=null==e?void 0:e.revert,this.silent=null==e?void 0:e.silent};function c(e){return e instanceof l}var d=function(e){var t,a,c,d,u=this,m=!1;this.abort=e.abort,this.cancel=function(e){return null==t?void 0:t(e)},this.cancelRetry=function(){m=!0},this.continueRetry=function(){m=!1},this.continue=function(){return null==a?void 0:a()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(e,t){c=e,d=t});var h=function(t){u.isResolved||(u.isResolved=!0,null==e.onSuccess||e.onSuccess(t),null==a||a(),c(t))},p=function(t){u.isResolved||(u.isResolved=!0,null==e.onError||e.onError(t),null==a||a(),d(t))};!function c(){if(!u.isResolved){var d;try{d=e.fn()}catch(f){d=Promise.reject(f)}t=function(e){if(!u.isResolved&&(p(new l(e)),null==u.abort||u.abort(),o(d)))try{d.cancel()}catch(t){}},u.isTransportCancelable=o(d),Promise.resolve(d).then(h).catch(function(t){var o,l;if(!u.isResolved){var d=null!=(o=e.retry)?o:3,h=null!=(l=e.retryDelay)?l:i,f="function"===typeof h?h(u.failureCount,t):h,x=!0===d||"number"===typeof d&&u.failureCount<d||"function"===typeof d&&d(u.failureCount,t);!m&&x?(u.failureCount++,null==e.onFail||e.onFail(u.failureCount,t),(0,s.yy)(f).then(function(){if(!r.m.isFocused()||!n.t.isOnline())return new Promise(function(t){a=t,u.isPaused=!0,null==e.onPause||e.onPause()}).then(function(){a=void 0,u.isPaused=!1,null==e.onContinue||e.onContinue()})}).then(function(){m?p(t):c()})):p(t)}})}}()}}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,a),s.exports}a.m=e,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;a.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"===typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"===typeof r.then)return r}var s=Object.create(null);a.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>r[e]);return i.default=()=>r,a.d(s,i),s}})(),a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,r)=>(a.f[r](e,t),t),[])),a.u=e=>"static/js/"+e+"."+{213:"d0e97581",239:"755cab45",455:"bc844438"}[e]+".chunk.js",a.miniCssF=e=>{},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="baaseteen-frontend:";a.l=(r,n,s,i)=>{if(e[r])e[r].push(n);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[n];var m=(t,a)=>{o.onerror=o.onload=null,clearTimeout(h);var n=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach(e=>e(a)),t)return t(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/",(()=>{var e={792:0};a.f.j=(t,r)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var s=new Promise((a,r)=>n=e[t]=[a,r]);r.push(n[2]=s);var i=a.p+a.u(t),o=new Error;a.l(i,r=>{if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,n[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var n,s,i=r[0],o=r[1],l=r[2],c=0;if(i.some(t=>0!==e[t])){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)l(a)}for(t&&t(r);c<i.length;c++)s=i[c],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkbaaseteen_frontend=self.webpackChunkbaaseteen_frontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};a.r(e),a.d(e,{hasBrowserEnv:()=>Dt,hasStandardBrowserEnv:()=>Tt,hasStandardBrowserWebWorkerEnv:()=>qt,navigator:()=>Mt,origin:()=>zt});var t,r=a(5043),n=a.t(r,2),s=a(4391);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const o="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(a){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,a,r){return void 0===a&&(a=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?h(t):t,{state:a,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:a="",hash:r=""}=e;return a&&"?"!==a&&(t+="?"===a.charAt(0)?a:"?"+a),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function h(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function p(e,a,r,n){void 0===n&&(n={});let{window:s=document.defaultView,v5Compat:c=!1}=n,h=s.history,p=t.Pop,f=null,x=g();function g(){return(h.state||{idx:null}).idx}function y(){p=t.Pop;let e=g(),a=null==e?null:e-x;x=e,f&&f({action:p,location:b.location,delta:a})}function v(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,a="string"===typeof e?e:m(e);return a=a.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+a),new URL(a,t)}null==x&&(x=0,h.replaceState(i({},h.state,{idx:x}),""));let b={get action(){return p},get location(){return e(s,h)},listen(e){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(o,y),f=e,()=>{s.removeEventListener(o,y),f=null}},createHref:e=>a(s,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,a){p=t.Push;let n=u(b.location,e,a);r&&r(n,e),x=g()+1;let i=d(n,x),o=b.createHref(n);try{h.pushState(i,"",o)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;s.location.assign(o)}c&&f&&f({action:p,location:b.location,delta:1})},replace:function(e,a){p=t.Replace;let n=u(b.location,e,a);r&&r(n,e),x=g();let s=d(n,x),i=b.createHref(n);h.replaceState(s,"",i),c&&f&&f({action:p,location:b.location,delta:0})},go:e=>h.go(e)};return b}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,a){return void 0===a&&(a="/"),g(e,t,a,!1)}function g(e,t,a,r){let n=E(("string"===typeof t?h(t):t).pathname||"/",a);if(null==n)return null;let s=y(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let a=e.length===t.length&&e.slice(0,-1).every((e,a)=>e===t[a]);return a?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=P(n);i=A(s[o],e,r)}return i}function y(e,t,a,r){void 0===t&&(t=[]),void 0===a&&(a=[]),void 0===r&&(r="");let n=(e,n,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};i.relativePath.startsWith("/")&&(l(i.relativePath.startsWith(r),'Absolute route path "'+i.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(r.length));let o=D([r,i.relativePath]),c=a.concat(i);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),y(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:C(o,e.index),routesMeta:c})};return e.forEach((e,t)=>{var a;if(""!==e.path&&null!=(a=e.path)&&a.includes("?"))for(let r of v(e.path))n(e,t,r);else n(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[a,...r]=t,n=a.endsWith("?"),s=a.replace(/\?$/,"");if(0===r.length)return n?[s,""]:[s];let i=v(r.join("/")),o=[];return o.push(...i.map(e=>""===e?s:[s,e].join("/"))),n&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const b=/^:[\w-]+$/,_=3,j=2,w=1,N=10,k=-2,S=e=>"*"===e;function C(e,t){let a=e.split("/"),r=a.length;return a.some(S)&&(r+=k),t&&(r+=j),a.filter(e=>!S(e)).reduce((e,t)=>e+(b.test(t)?_:""===t?w:N),r)}function A(e,t,a){void 0===a&&(a=!1);let{routesMeta:r}=e,n={},s="/",i=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&a&&!r[r.length-1].route.index&&(d=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),i.push({params:n,pathname:D([s,d.pathname]),pathnameBase:M(D([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=D([s,d.pathnameBase]))}return i}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[a,r]=function(e,t,a){void 0===t&&(t=!1);void 0===a&&(a=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,a)=>(r.push({paramName:t,isOptional:null!=a}),a?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let s=new RegExp(n,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),n=t.match(a);if(!n)return null;let s=n[0],i=s.replace(/(.)\/+$/,"$1"),o=n.slice(1);return{params:r.reduce((e,t,a)=>{let{paramName:r,isOptional:n}=t;if("*"===r){let e=o[a]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[a];return e[r]=n&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:s,pathnameBase:i,pattern:e}}function P(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function E(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,r=e.charAt(a);return r&&"/"!==r?null:e.slice(a)||"/"}function F(e,t,a,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+a+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function I(e,t){let a=O(e);return t?a.map((e,t)=>t===a.length-1?e.pathname:e.pathnameBase):a.map(e=>e.pathnameBase)}function R(e,t,a,r){let n;void 0===r&&(r=!1),"string"===typeof e?n=h(e):(n=i({},e),l(!n.pathname||!n.pathname.includes("?"),F("?","pathname","search",n)),l(!n.pathname||!n.pathname.includes("#"),F("#","pathname","hash",n)),l(!n.search||!n.search.includes("#"),F("#","search","hash",n)));let s,o=""===e||""===n.pathname,c=o?"/":n.pathname;if(null==c)s=a;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}s=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:a,search:r="",hash:n=""}="string"===typeof e?h(e):e,s=a?a.startsWith("/")?a:function(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?a.length>1&&a.pop():"."!==e&&a.push(e)}),a.length>1?a.join("/"):"/"}(a,t):t;return{pathname:s,search:T(r),hash:q(n)}}(n,s),u=c&&"/"!==c&&c.endsWith("/"),m=(o||"."===c)&&a.endsWith("/");return d.pathname.endsWith("/")||!u&&!m||(d.pathname+="/"),d}const D=e=>e.join("/").replace(/\/\/+/g,"/"),M=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),T=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function z(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],U=(new Set(B),["get",...B]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},H.apply(this,arguments)}const W=r.createContext(null);const V=r.createContext(null);const Q=r.createContext(null);const J=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const G=r.createContext(null);function K(){return null!=r.useContext(J)}function $(){return K()||l(!1),r.useContext(J).location}function X(e){r.useContext(Q).static||r.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=ce(oe.UseNavigateStable),t=ue(le.UseNavigateStable),a=r.useRef(!1);return X(()=>{a.current=!0}),r.useCallback(function(r,n){void 0===n&&(n={}),a.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},n)))},[e,t])}():function(){K()||l(!1);let e=r.useContext(W),{basename:t,future:a,navigator:n}=r.useContext(Q),{matches:s}=r.useContext(Y),{pathname:i}=$(),o=JSON.stringify(I(s,a.v7_relativeSplatPath)),c=r.useRef(!1);return X(()=>{c.current=!0}),r.useCallback(function(a,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof a)return void n.go(a);let s=R(a,JSON.parse(o),i,"path"===r.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:D([t,s.pathname])),(r.replace?n.replace:n.push)(s,r.state,r)},[t,n,o,i,e])}()}function ee(){let{matches:e}=r.useContext(Y),t=e[e.length-1];return t?t.params:{}}function te(e,a,n,s){K()||l(!1);let{navigator:i}=r.useContext(Q),{matches:o}=r.useContext(Y),c=o[o.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let m,p=$();if(a){var f;let e="string"===typeof a?h(a):a;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||l(!1),m=e}else m=p;let g=m.pathname||"/",y=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=x(e,{pathname:y});let b=ie(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:D([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:D([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,s);return a&&b?r.createElement(J.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:t.Pop}},b):b}function ae(){let e=function(){var e;let t=r.useContext(G),a=de(le.UseRouteError),n=ue(le.UseRouteError);if(void 0!==t)return t;return null==(e=a.errors)?void 0:e[n]}(),t=z(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),a?r.createElement("pre",{style:s},a):null,null)}const re=r.createElement(ae,null);class ne extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(G.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:t,match:a,children:n}=e,s=r.useContext(W);return s&&s.static&&s.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=a.route.id),r.createElement(Y.Provider,{value:t},n)}function ie(e,t,a,n){var s;if(void 0===t&&(t=[]),void 0===a&&(a=null),void 0===n&&(n=null),null==e){var i;if(!a)return null;if(a.errors)e=a.matches;else{if(!(null!=(i=n)&&i.v7_partialHydration&&0===t.length&&!a.initialized&&a.matches.length>0))return null;e=a.matches}}let o=e,c=null==(s=a)?void 0:s.errors;if(null!=c){let e=o.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||l(!1),o=o.slice(0,Math.min(o.length,e+1))}let d=!1,u=-1;if(a&&n&&n.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=a,n=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||n){d=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,n,s)=>{let i,l=!1,m=null,h=null;a&&(i=c&&n.route.id?c[n.route.id]:void 0,m=n.route.errorElement||re,d&&(u<0&&0===s?(!function(e,t){t||me[e]||(me[e]=!0)}("route-fallback",!1),l=!0,h=null):u===s&&(l=!0,h=n.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,s+1)),f=()=>{let t;return t=i?m:l?h:n.route.Component?r.createElement(n.route.Component,null):n.route.element?n.route.element:e,r.createElement(se,{match:n,routeContext:{outlet:e,matches:p,isDataRoute:null!=a},children:t})};return a&&(n.route.ErrorBoundary||n.route.errorElement||0===s)?r.createElement(ne,{location:a.location,revalidation:a.revalidation,component:m,error:i,children:f(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):f()},null)}var oe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(oe||{}),le=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(le||{});function ce(e){let t=r.useContext(W);return t||l(!1),t}function de(e){let t=r.useContext(V);return t||l(!1),t}function ue(e){let t=function(){let e=r.useContext(Y);return e||l(!1),e}(),a=t.matches[t.matches.length-1];return a.route.id||l(!1),a.route.id}const me={};function he(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}n.startTransition;function pe(e){let{to:t,replace:a,state:n,relative:s}=e;K()||l(!1);let{future:i,static:o}=r.useContext(Q),{matches:c}=r.useContext(Y),{pathname:d}=$(),u=Z(),m=R(t,I(c,i.v7_relativeSplatPath),d,"path"===s),h=JSON.stringify(m);return r.useEffect(()=>u(JSON.parse(h),{replace:a,state:n,relative:s}),[u,h,s,a,n]),null}function fe(e){l(!1)}function xe(e){let{basename:a="/",children:n=null,location:s,navigationType:i=t.Pop,navigator:o,static:c=!1,future:d}=e;K()&&l(!1);let u=a.replace(/^\/*/,"/"),m=r.useMemo(()=>({basename:u,navigator:o,static:c,future:H({v7_relativeSplatPath:!1},d)}),[u,d,o,c]);"string"===typeof s&&(s=h(s));let{pathname:p="/",search:f="",hash:x="",state:g=null,key:y="default"}=s,v=r.useMemo(()=>{let e=E(p,u);return null==e?null:{location:{pathname:e,search:f,hash:x,state:g,key:y},navigationType:i}},[u,p,f,x,g,y,i]);return null==v?null:r.createElement(Q.Provider,{value:m},r.createElement(J.Provider,{children:n,value:v}))}function ge(e){let{children:t,location:a}=e;return te(ye(t),a)}new Promise(()=>{});r.Component;function ye(e,t){void 0===t&&(t=[]);let a=[];return r.Children.forEach(e,(e,n)=>{if(!r.isValidElement(e))return;let s=[...t,n];if(e.type===r.Fragment)return void a.push.apply(a,ye(e.props.children,s));e.type!==fe&&l(!1),e.props.index&&e.props.children&&l(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ye(e.props.children,s)),a.push(i)}),a}var ve=a(7950),be=a.t(ve,2);function _e(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,a)=>{let r=e[a];return t.concat(Array.isArray(r)?r.map(e=>[a,e]):[[a,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(zh){}new Map;const je=n.startTransition;be.flushSync,n.useId;function we(e){let{basename:t,children:a,future:n,window:s}=e,i=r.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),p(function(e,t){let{pathname:a,search:r,hash:n}=e.location;return u("",{pathname:a,search:r,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:m(t)},null,o)));let l=i.current,[c,d]=r.useState({action:l.action,location:l.location}),{v7_startTransition:h}=n||{},f=r.useCallback(e=>{h&&je?je(()=>d(e)):d(e)},[d,h]);return r.useLayoutEffect(()=>l.listen(f),[l,f]),r.useEffect(()=>he(n),[n]),r.createElement(xe,{basename:t,children:a,location:c.location,navigationType:c.action,navigator:l,future:n})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ne,ke;function Se(e){let t=r.useRef(_e(e)),a=r.useRef(!1),n=$(),s=r.useMemo(()=>function(e,t){let a=_e(e);return t&&t.forEach((e,r)=>{a.has(r)||t.getAll(r).forEach(e=>{a.append(r,e)})}),a}(n.search,a.current?null:t.current),[n.search]),i=Z(),o=r.useCallback((e,t)=>{const r=_e("function"===typeof e?e(s):e);a.current=!0,i("?"+r,t)},[i,s]);return[s,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ke||(ke={}));var Ce=a(2907),Ae=a(4980);function Le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function Pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(a),!0).forEach(function(t){(0,Ae.A)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Le(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function Ee(e,t){return function(){return e.apply(t,arguments)}}const{toString:Fe}=Object.prototype,{getPrototypeOf:Oe}=Object,{iterator:Ie,toStringTag:Re}=Symbol,De=(Me=Object.create(null),e=>{const t=Fe.call(e);return Me[t]||(Me[t]=t.slice(8,-1).toLowerCase())});var Me;const Te=e=>(e=e.toLowerCase(),t=>De(t)===e),qe=e=>t=>typeof t===e,{isArray:ze}=Array,Be=qe("undefined");function Ue(e){return null!==e&&!Be(e)&&null!==e.constructor&&!Be(e.constructor)&&Ve(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const He=Te("ArrayBuffer");const We=qe("string"),Ve=qe("function"),Qe=qe("number"),Je=e=>null!==e&&"object"===typeof e,Ye=e=>{if("object"!==De(e))return!1;const t=Oe(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Re in e)&&!(Ie in e)},Ge=Te("Date"),Ke=Te("File"),$e=Te("Blob"),Xe=Te("FileList"),Ze=Te("URLSearchParams"),[et,tt,at,rt]=["ReadableStream","Request","Response","Headers"].map(Te);function nt(e,t){let a,r,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ze(e))for(a=0,r=e.length;a<r;a++)t.call(null,e[a],a,e);else{if(Ue(e))return;const r=n?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let i;for(a=0;a<s;a++)i=r[a],t.call(null,e[i],i,e)}}function st(e,t){if(Ue(e))return null;t=t.toLowerCase();const a=Object.keys(e);let r,n=a.length;for(;n-- >0;)if(r=a[n],t===r.toLowerCase())return r;return null}const it="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,ot=e=>!Be(e)&&e!==it;const lt=(ct="undefined"!==typeof Uint8Array&&Oe(Uint8Array),e=>ct&&e instanceof ct);var ct;const dt=Te("HTMLFormElement"),ut=(e=>{let{hasOwnProperty:t}=e;return(e,a)=>t.call(e,a)})(Object.prototype),mt=Te("RegExp"),ht=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),r={};nt(a,(a,n)=>{let s;!1!==(s=t(a,n,e))&&(r[n]=s||a)}),Object.defineProperties(e,r)};const pt=Te("AsyncFunction"),ft=((e,t)=>{return e?setImmediate:t?(a="axios@".concat(Math.random()),r=[],it.addEventListener("message",e=>{let{source:t,data:n}=e;t===it&&n===a&&r.length&&r.shift()()},!1),e=>{r.push(e),it.postMessage(a,"*")}):e=>setTimeout(e);var a,r})("function"===typeof setImmediate,Ve(it.postMessage)),xt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(it):"undefined"!==typeof process&&process.nextTick||ft,gt={isArray:ze,isArrayBuffer:He,isBuffer:Ue,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||Ve(e.append)&&("formdata"===(t=De(e))||"object"===t&&Ve(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&He(e.buffer),t},isString:We,isNumber:Qe,isBoolean:e=>!0===e||!1===e,isObject:Je,isPlainObject:Ye,isEmptyObject:e=>{if(!Je(e)||Ue(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(zh){return!1}},isReadableStream:et,isRequest:tt,isResponse:at,isHeaders:rt,isUndefined:Be,isDate:Ge,isFile:Ke,isBlob:$e,isRegExp:mt,isFunction:Ve,isStream:e=>Je(e)&&Ve(e.pipe),isURLSearchParams:Ze,isTypedArray:lt,isFileList:Xe,forEach:nt,merge:function e(){const{caseless:t,skipUndefined:a}=ot(this)&&this||{},r={},n=(n,s)=>{const i=t&&st(r,s)||s;Ye(r[i])&&Ye(n)?r[i]=e(r[i],n):Ye(n)?r[i]=e({},n):ze(n)?r[i]=n.slice():a&&Be(n)||(r[i]=n)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&nt(arguments[s],n);return r},extend:function(e,t,a){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return nt(t,(t,r)=>{a&&Ve(t)?e[r]=Ee(t,a):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,a,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},toFlatObject:(e,t,a,r)=>{let n,s,i;const o={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),s=n.length;s-- >0;)i=n[s],r&&!r(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==a&&Oe(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},kindOf:De,kindOfTest:Te,endsWith:(e,t,a)=>{e=String(e),(void 0===a||a>e.length)&&(a=e.length),a-=t.length;const r=e.indexOf(t,a);return-1!==r&&r===a},toArray:e=>{if(!e)return null;if(ze(e))return e;let t=e.length;if(!Qe(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},forEachEntry:(e,t)=>{const a=(e&&e[Ie]).call(e);let r;for(;(r=a.next())&&!r.done;){const a=r.value;t.call(e,a[0],a[1])}},matchAll:(e,t)=>{let a;const r=[];for(;null!==(a=e.exec(t));)r.push(a);return r},isHTMLForm:dt,hasOwnProperty:ut,hasOwnProp:ut,reduceDescriptors:ht,freezeMethods:e=>{ht(e,(t,a)=>{if(Ve(e)&&-1!==["arguments","caller","callee"].indexOf(a))return!1;const r=e[a];Ve(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")}))})},toObjectSet:(e,t)=>{const a={},r=e=>{e.forEach(e=>{a[e]=!0})};return ze(e)?r(e):r(String(e).split(t)),a},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,a){return t.toUpperCase()+a}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:st,global:it,isContextDefined:ot,isSpecCompliantForm:function(e){return!!(e&&Ve(e.append)&&"FormData"===e[Re]&&e[Ie])},toJSONObject:e=>{const t=new Array(10),a=(e,r)=>{if(Je(e)){if(t.indexOf(e)>=0)return;if(Ue(e))return e;if(!("toJSON"in e)){t[r]=e;const n=ze(e)?[]:{};return nt(e,(e,t)=>{const s=a(e,r+1);!Be(s)&&(n[t]=s)}),t[r]=void 0,n}}return e};return a(e,0)},isAsyncFn:pt,isThenable:e=>e&&(Je(e)||Ve(e))&&Ve(e.then)&&Ve(e.catch),setImmediate:ft,asap:xt,isIterable:e=>null!=e&&Ve(e[Ie])};function yt(e,t,a,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}gt.inherits(yt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:gt.toJSONObject(this.config),code:this.code,status:this.status}}});const vt=yt.prototype,bt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{bt[e]={value:e}}),Object.defineProperties(yt,bt),Object.defineProperty(vt,"isAxiosError",{value:!0}),yt.from=(e,t,a,r,n,s)=>{const i=Object.create(vt);gt.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return yt.call(i,o,l,a,r,n),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",s&&Object.assign(i,s),i};const _t=yt;function jt(e){return gt.isPlainObject(e)||gt.isArray(e)}function wt(e){return gt.endsWith(e,"[]")?e.slice(0,-2):e}function Nt(e,t,a){return e?e.concat(t).map(function(e,t){return e=wt(e),!a&&t?"["+e+"]":e}).join(a?".":""):t}const kt=gt.toFlatObject(gt,{},null,function(e){return/^is[A-Z]/.test(e)});const St=function(e,t,a){if(!gt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(a=gt.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!gt.isUndefined(t[e])})).metaTokens,n=a.visitor||c,s=a.dots,i=a.indexes,o=(a.Blob||"undefined"!==typeof Blob&&Blob)&&gt.isSpecCompliantForm(t);if(!gt.isFunction(n))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(gt.isDate(e))return e.toISOString();if(gt.isBoolean(e))return e.toString();if(!o&&gt.isBlob(e))throw new _t("Blob is not supported. Use a Buffer instead.");return gt.isArrayBuffer(e)||gt.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,a,n){let o=e;if(e&&!n&&"object"===typeof e)if(gt.endsWith(a,"{}"))a=r?a:a.slice(0,-2),e=JSON.stringify(e);else if(gt.isArray(e)&&function(e){return gt.isArray(e)&&!e.some(jt)}(e)||(gt.isFileList(e)||gt.endsWith(a,"[]"))&&(o=gt.toArray(e)))return a=wt(a),o.forEach(function(e,r){!gt.isUndefined(e)&&null!==e&&t.append(!0===i?Nt([a],r,s):null===i?a:a+"[]",l(e))}),!1;return!!jt(e)||(t.append(Nt(n,a,s),l(e)),!1)}const d=[],u=Object.assign(kt,{defaultVisitor:c,convertValue:l,isVisitable:jt});if(!gt.isObject(e))throw new TypeError("data must be an object");return function e(a,r){if(!gt.isUndefined(a)){if(-1!==d.indexOf(a))throw Error("Circular reference detected in "+r.join("."));d.push(a),gt.forEach(a,function(a,s){!0===(!(gt.isUndefined(a)||null===a)&&n.call(t,a,gt.isString(s)?s.trim():s,r,u))&&e(a,r?r.concat(s):[s])}),d.pop()}}(e),t};function Ct(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function At(e,t){this._pairs=[],e&&St(e,this,t)}const Lt=At.prototype;Lt.append=function(e,t){this._pairs.push([e,t])},Lt.toString=function(e){const t=e?function(t){return e.call(this,t,Ct)}:Ct;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Pt=At;function Et(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ft(e,t,a){if(!t)return e;const r=a&&a.encode||Et;gt.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let s;if(s=n?n(t,a):gt.isURLSearchParams(t)?t.toString():new Pt(t,a).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const Ot=class{constructor(){this.handlers=[]}use(e,t,a){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!a&&a.synchronous,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){gt.forEach(this.handlers,function(t){null!==t&&e(t)})}},It={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Rt={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Pt,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Dt="undefined"!==typeof window&&"undefined"!==typeof document,Mt="object"===typeof navigator&&navigator||void 0,Tt=Dt&&(!Mt||["ReactNative","NativeScript","NS"].indexOf(Mt.product)<0),qt="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,zt=Dt&&window.location.href||"http://localhost",Bt=Pe(Pe({},e),Rt);const Ut=function(e){function t(e,a,r,n){let s=e[n++];if("__proto__"===s)return!0;const i=Number.isFinite(+s),o=n>=e.length;if(s=!s&&gt.isArray(r)?r.length:s,o)return gt.hasOwnProp(r,s)?r[s]=[r[s],a]:r[s]=a,!i;r[s]&&gt.isObject(r[s])||(r[s]=[]);return t(e,a,r[s],n)&&gt.isArray(r[s])&&(r[s]=function(e){const t={},a=Object.keys(e);let r;const n=a.length;let s;for(r=0;r<n;r++)s=a[r],t[s]=e[s];return t}(r[s])),!i}if(gt.isFormData(e)&&gt.isFunction(e.entries)){const a={};return gt.forEachEntry(e,(e,r)=>{t(function(e){return gt.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,a,0)}),a}return null};const Ht={transitional:It,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const a=t.getContentType()||"",r=a.indexOf("application/json")>-1,n=gt.isObject(e);n&&gt.isHTMLForm(e)&&(e=new FormData(e));if(gt.isFormData(e))return r?JSON.stringify(Ut(e)):e;if(gt.isArrayBuffer(e)||gt.isBuffer(e)||gt.isStream(e)||gt.isFile(e)||gt.isBlob(e)||gt.isReadableStream(e))return e;if(gt.isArrayBufferView(e))return e.buffer;if(gt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(n){if(a.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return St(e,new Bt.classes.URLSearchParams,Pe({visitor:function(e,t,a,r){return Bt.isNode&&gt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=gt.isFileList(e))||a.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return St(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||r?(t.setContentType("application/json",!1),function(e,t,a){if(gt.isString(e))try{return(t||JSON.parse)(e),gt.trim(e)}catch(zh){if("SyntaxError"!==zh.name)throw zh}return(a||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ht.transitional,a=t&&t.forcedJSONParsing,r="json"===this.responseType;if(gt.isResponse(e)||gt.isReadableStream(e))return e;if(e&&gt.isString(e)&&(a&&!this.responseType||r)){const a=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(zh){if(a){if("SyntaxError"===zh.name)throw _t.from(zh,_t.ERR_BAD_RESPONSE,this,null,this.response);throw zh}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bt.classes.FormData,Blob:Bt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};gt.forEach(["delete","get","head","post","put","patch"],e=>{Ht.headers[e]={}});const Wt=Ht,Vt=gt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qt=Symbol("internals");function Jt(e){return e&&String(e).trim().toLowerCase()}function Yt(e){return!1===e||null==e?e:gt.isArray(e)?e.map(Yt):String(e)}function Gt(e,t,a,r,n){return gt.isFunction(r)?r.call(this,t,a):(n&&(t=a),gt.isString(t)?gt.isString(r)?-1!==t.indexOf(r):gt.isRegExp(r)?r.test(t):void 0:void 0)}class Kt{constructor(e){e&&this.set(e)}set(e,t,a){const r=this;function n(e,t,a){const n=Jt(t);if(!n)throw new Error("header name must be a non-empty string");const s=gt.findKey(r,n);(!s||void 0===r[s]||!0===a||void 0===a&&!1!==r[s])&&(r[s||t]=Yt(e))}const s=(e,t)=>gt.forEach(e,(e,a)=>n(e,a,t));if(gt.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(gt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let a,r,n;return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),a=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!a||t[a]&&Vt[a]||("set-cookie"===a?t[a]?t[a].push(r):t[a]=[r]:t[a]=t[a]?t[a]+", "+r:r)}),t})(e),t);else if(gt.isObject(e)&&gt.isIterable(e)){let a,r,n={};for(const t of e){if(!gt.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[r=t[0]]=(a=n[r])?gt.isArray(a)?[...a,t[1]]:[a,t[1]]:t[1]}s(n,t)}else null!=e&&n(t,e,a);return this}get(e,t){if(e=Jt(e)){const a=gt.findKey(this,e);if(a){const e=this[a];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(e);)t[r[1]]=r[2];return t}(e);if(gt.isFunction(t))return t.call(this,e,a);if(gt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Jt(e)){const a=gt.findKey(this,e);return!(!a||void 0===this[a]||t&&!Gt(0,this[a],a,t))}return!1}delete(e,t){const a=this;let r=!1;function n(e){if(e=Jt(e)){const n=gt.findKey(a,e);!n||t&&!Gt(0,a[n],n,t)||(delete a[n],r=!0)}}return gt.isArray(e)?e.forEach(n):n(e),r}clear(e){const t=Object.keys(this);let a=t.length,r=!1;for(;a--;){const n=t[a];e&&!Gt(0,this[n],n,e,!0)||(delete this[n],r=!0)}return r}normalize(e){const t=this,a={};return gt.forEach(this,(r,n)=>{const s=gt.findKey(a,n);if(s)return t[s]=Yt(r),void delete t[n];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,a)=>t.toUpperCase()+a)}(n):String(n).trim();i!==n&&delete t[n],t[i]=Yt(r),a[i]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return gt.forEach(this,(a,r)=>{null!=a&&!1!==a&&(t[r]=e&&gt.isArray(a)?a.join(", "):a)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,a]=e;return t+": "+a}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[Qt]=this[Qt]={accessors:{}}).accessors,a=this.prototype;function r(e){const r=Jt(e);t[r]||(!function(e,t){const a=gt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+a,{value:function(e,a,n){return this[r].call(this,t,e,a,n)},configurable:!0})})}(a,e),t[r]=!0)}return gt.isArray(e)?e.forEach(r):r(e),this}}Kt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),gt.reduceDescriptors(Kt.prototype,(e,t)=>{let{value:a}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>a,set(e){this[r]=e}}}),gt.freezeMethods(Kt);const $t=Kt;function Xt(e,t){const a=this||Wt,r=t||a,n=$t.from(r.headers);let s=r.data;return gt.forEach(e,function(e){s=e.call(a,s,n.normalize(),t?t.status:void 0)}),n.normalize(),s}function Zt(e){return!(!e||!e.__CANCEL__)}function ea(e,t,a){_t.call(this,null==e?"canceled":e,_t.ERR_CANCELED,t,a),this.name="CanceledError"}gt.inherits(ea,_t,{__CANCEL__:!0});const ta=ea;function aa(e,t,a){const r=a.config.validateStatus;a.status&&r&&!r(a.status)?t(new _t("Request failed with status code "+a.status,[_t.ERR_BAD_REQUEST,_t.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a)):e(a)}const ra=function(e,t){e=e||10;const a=new Array(e),r=new Array(e);let n,s=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[i];n||(n=l),a[s]=o,r[s]=l;let d=i,u=0;for(;d!==s;)u+=a[d++],d%=e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-n<t)return;const m=c&&l-c;return m?Math.round(1e3*u/m):void 0}};const na=function(e,t){let a,r,n=0,s=1e3/t;const i=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=s,a=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-n;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?i(l,e):(a=l,r||(r=setTimeout(()=>{r=null,i(a)},s-t)))},()=>a&&i(a)]},sa=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const n=ra(50,250);return na(a=>{const s=a.loaded,i=a.lengthComputable?a.total:void 0,o=s-r,l=n(o);r=s;e({loaded:s,total:i,progress:i?s/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&s<=i?(i-s)/l:void 0,event:a,lengthComputable:null!=i,[t?"download":"upload"]:!0})},a)},ia=(e,t)=>{const a=null!=e;return[r=>t[0]({lengthComputable:a,total:e,loaded:r}),t[1]]},oa=e=>function(){for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return gt.asap(()=>e(...a))},la=Bt.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,Bt.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(Bt.origin),Bt.navigator&&/(msie|trident)/i.test(Bt.navigator.userAgent)):()=>!0,ca=Bt.hasStandardBrowserEnv?{write(e,t,a,r,n,s){const i=[e+"="+encodeURIComponent(t)];gt.isNumber(a)&&i.push("expires="+new Date(a).toGMTString()),gt.isString(r)&&i.push("path="+r),gt.isString(n)&&i.push("domain="+n),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function da(e,t,a){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==a)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ua=e=>e instanceof $t?Pe({},e):e;function ma(e,t){t=t||{};const a={};function r(e,t,a,r){return gt.isPlainObject(e)&&gt.isPlainObject(t)?gt.merge.call({caseless:r},e,t):gt.isPlainObject(t)?gt.merge({},t):gt.isArray(t)?t.slice():t}function n(e,t,a,n){return gt.isUndefined(t)?gt.isUndefined(e)?void 0:r(void 0,e,0,n):r(e,t,0,n)}function s(e,t){if(!gt.isUndefined(t))return r(void 0,t)}function i(e,t){return gt.isUndefined(t)?gt.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(a,n,s){return s in t?r(a,n):s in e?r(void 0,a):void 0}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,a)=>n(ua(e),ua(t),0,!0)};return gt.forEach(Object.keys(Pe(Pe({},e),t)),function(r){const s=l[r]||n,i=s(e[r],t[r],r);gt.isUndefined(i)&&s!==o||(a[r]=i)}),a}const ha=e=>{const t=ma({},e);let{data:a,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:s,headers:i,auth:o}=t;if(t.headers=i=$t.from(i),t.url=Ft(da(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),gt.isFormData(a))if(Bt.hasStandardBrowserEnv||Bt.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(gt.isFunction(a.getHeaders)){const e=a.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[a,r]=e;t.includes(a.toLowerCase())&&i.set(a,r)})}if(Bt.hasStandardBrowserEnv&&(r&&gt.isFunction(r)&&(r=r(t)),r||!1!==r&&la(t.url))){const e=n&&s&&ca.read(s);e&&i.set(n,e)}return t},pa="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,a){const r=ha(e);let n=r.data;const s=$t.from(r.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:h}=r;function p(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function x(){if(!f)return;const r=$t.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());aa(function(e){t(e),p()},function(e){a(e),p()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=x:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(x)},f.onabort=function(){f&&(a(new _t("Request aborted",_t.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const r=t&&t.message?t.message:"Network Error",n=new _t(r,_t.ERR_NETWORK,e,f);n.event=t||null,a(n),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const n=r.transitional||It;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),a(new _t(t,n.clarifyTimeoutError?_t.ETIMEDOUT:_t.ECONNABORTED,e,f)),f=null},void 0===n&&s.setContentType(null),"setRequestHeader"in f&&gt.forEach(s.toJSON(),function(e,t){f.setRequestHeader(t,e)}),gt.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),u&&"json"!==u&&(f.responseType=r.responseType),h&&([l,d]=sa(h,!0),f.addEventListener("progress",l)),m&&f.upload&&([o,c]=sa(m),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{f&&(a(!t||t.type?new ta(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===Bt.protocols.indexOf(g)?a(new _t("Unsupported protocol "+g+":",_t.ERR_BAD_REQUEST,e)):f.send(n||null)})},fa=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let a,r=new AbortController;const n=function(e){if(!a){a=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof _t?t:new ta(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,n(new _t("timeout ".concat(t," of ms exceeded"),_t.ETIMEDOUT))},t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),e=null)};e.forEach(e=>e.addEventListener("abort",n));const{signal:o}=r;return o.unsubscribe=()=>gt.asap(i),o}};function xa(e,t){this.v=e,this.k=t}function ga(e){return function(){return new ya(e.apply(this,arguments))}}function ya(e){var t,a;function r(t,a){try{var s=e[t](a),i=s.value,o=i instanceof xa;Promise.resolve(o?i.v:i).then(function(a){if(o){var l="return"===t?"return":"next";if(!i.k||a.done)return r(l,a);a=e[l](a).value}n(s.done?"return":"normal",a)},function(e){r("throw",e)})}catch(e){n("throw",e)}}function n(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?r(t.key,t.arg):a=null}this._invoke=function(e,n){return new Promise(function(s,i){var o={key:e,arg:n,resolve:s,reject:i,next:null};a?a=a.next=o:(t=a=o,r(e,n))})},"function"!=typeof e.return&&(this.return=void 0)}function va(e){return new xa(e,0)}function ba(e){var t={},a=!1;function r(t,r){return a=!0,r=new Promise(function(a){a(e[t](r))}),{done:!1,value:new xa(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return a?(a=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(a)throw a=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return a?(a=!1,e):r("return",e)}),t}function _a(e){var t,a,r,n=2;for("undefined"!=typeof Symbol&&(a=Symbol.asyncIterator,r=Symbol.iterator);n--;){if(a&&null!=(t=e[a]))return t.call(e);if(r&&null!=(t=e[r]))return new ja(t.call(e));a="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function ja(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return ja=function(e){this.s=e,this.n=e.next},ja.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var a=this.s.return;return void 0===a?Promise.resolve({value:e,done:!0}):t(a.apply(this.s,arguments))},throw:function(e){var a=this.s.return;return void 0===a?Promise.reject(e):t(a.apply(this.s,arguments))}},new ja(e)}ya.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},ya.prototype.next=function(e){return this._invoke("next",e)},ya.prototype.throw=function(e){return this._invoke("throw",e)},ya.prototype.return=function(e){return this._invoke("return",e)};const wa=function*(e,t){let a=e.byteLength;if(!t||a<t)return void(yield e);let r,n=0;for(;n<a;)r=n+t,yield e.slice(n,r),n=r},Na=function(){var e=ga(function*(e,t){var a,r=!1,n=!1;try{for(var s,i=_a(ka(e));r=!(s=yield va(i.next())).done;r=!1){const e=s.value;yield*ba(_a(wa(e,t)))}}catch(Ki){n=!0,a=Ki}finally{try{r&&null!=i.return&&(yield va(i.return()))}finally{if(n)throw a}}});return function(t,a){return e.apply(this,arguments)}}(),ka=function(){var e=ga(function*(e){if(e[Symbol.asyncIterator])return void(yield*ba(_a(e)));const t=e.getReader();try{for(;;){const{done:e,value:a}=yield va(t.read());if(e)break;yield a}}finally{yield va(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Sa=(e,t,a,r)=>{const n=Na(e,t);let s,i=0,o=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await n.next();if(t)return o(),void e.close();let s=r.byteLength;if(a){let e=i+=s;a(e)}e.enqueue(new Uint8Array(r))}catch(Ki){throw o(Ki),Ki}},cancel:e=>(o(e),n.return())},{highWaterMark:2})},{isFunction:Ca}=gt,Aa=(e=>{let{Request:t,Response:a}=e;return{Request:t,Response:a}})(gt.global),{ReadableStream:La,TextEncoder:Pa}=gt.global,Ea=function(e){try{for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];return!!e(...a)}catch(zh){return!1}},Fa=e=>{e=gt.merge.call({skipUndefined:!0},Aa,e);const{fetch:t,Request:a,Response:r}=e,n=t?Ca(t):"function"===typeof fetch,s=Ca(a),i=Ca(r);if(!n)return!1;const o=n&&Ca(La),l=n&&("function"===typeof Pa?(c=new Pa,e=>c.encode(e)):async e=>new Uint8Array(await new a(e).arrayBuffer()));var c;const d=s&&o&&Ea(()=>{let e=!1;const t=new a(Bt.origin,{body:new La,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=i&&o&&Ea(()=>gt.isReadableStream(new r("").body)),m={stream:u&&(e=>e.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!m[e]&&(m[e]=(t,a)=>{let r=t&&t[e];if(r)return r.call(t);throw new _t("Response type '".concat(e,"' is not supported"),_t.ERR_NOT_SUPPORT,a)})});const h=async(e,t)=>{const r=gt.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(gt.isBlob(e))return e.size;if(gt.isSpecCompliantForm(e)){const t=new a(Bt.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return gt.isArrayBufferView(e)||gt.isArrayBuffer(e)?e.byteLength:(gt.isURLSearchParams(e)&&(e+=""),gt.isString(e)?(await l(e)).byteLength:void 0)})(t):r};return async e=>{let{url:n,method:i,data:o,signal:l,cancelToken:c,timeout:p,onDownloadProgress:f,onUploadProgress:x,responseType:g,headers:y,withCredentials:v="same-origin",fetchOptions:b}=ha(e),_=t||fetch;g=g?(g+"").toLowerCase():"text";let j=fa([l,c&&c.toAbortSignal()],p),w=null;const N=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let k;try{if(x&&d&&"get"!==i&&"head"!==i&&0!==(k=await h(y,o))){let e,t=new a(n,{method:"POST",body:o,duplex:"half"});if(gt.isFormData(o)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,a]=ia(k,sa(oa(x)));o=Sa(t.body,65536,e,a)}}gt.isString(v)||(v=v?"include":"omit");const t=s&&"credentials"in a.prototype,l=Pe(Pe({},b),{},{signal:j,method:i.toUpperCase(),headers:y.normalize().toJSON(),body:o,duplex:"half",credentials:t?v:void 0});w=s&&new a(n,l);let c=await(s?_(w,b):_(n,l));const p=u&&("stream"===g||"response"===g);if(u&&(f||p&&N)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=gt.toFiniteNumber(c.headers.get("content-length")),[a,n]=f&&ia(t,sa(oa(f),!0))||[];c=new r(Sa(c.body,65536,a,()=>{n&&n(),N&&N()}),e)}g=g||"text";let S=await m[gt.findKey(m,g)||"text"](c,e);return!p&&N&&N(),await new Promise((t,a)=>{aa(t,a,{data:S,headers:$t.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:w})})}catch(Ki){if(N&&N(),Ki&&"TypeError"===Ki.name&&/Load failed|fetch/i.test(Ki.message))throw Object.assign(new _t("Network Error",_t.ERR_NETWORK,e,w),{cause:Ki.cause||Ki});throw _t.from(Ki,Ki&&Ki.code,e,w)}}},Oa=new Map,Ia=e=>{let t=e?e.env:{};const{fetch:a,Request:r,Response:n}=t,s=[r,n,a];let i,o,l=s.length,c=Oa;for(;l--;)i=s[l],o=c.get(i),void 0===o&&c.set(i,o=l?new Map:Fa(t)),c=o;return o},Ra=(Ia(),{http:null,xhr:pa,fetch:{get:Ia}});gt.forEach(Ra,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(zh){}Object.defineProperty(e,"adapterName",{value:t})}});const Da=e=>"- ".concat(e),Ma=e=>gt.isFunction(e)||null===e||!1===e,Ta=(e,t)=>{e=gt.isArray(e)?e:[e];const{length:a}=e;let r,n;const s={};for(let i=0;i<a;i++){let a;if(r=e[i],n=r,!Ma(r)&&(n=Ra[(a=String(r)).toLowerCase()],void 0===n))throw new _t("Unknown adapter '".concat(a,"'"));if(n&&(gt.isFunction(n)||(n=n.get(t))))break;s[a||"#"+i]=n}if(!n){const e=Object.entries(s).map(e=>{let[t,a]=e;return"adapter ".concat(t," ")+(!1===a?"is not supported by the environment":"is not available in the build")});let t=a?e.length>1?"since :\n"+e.map(Da).join("\n"):" "+Da(e[0]):"as no adapter specified";throw new _t("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return n};function qa(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ta(null,e)}function za(e){qa(e),e.headers=$t.from(e.headers),e.data=Xt.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ta(e.adapter||Wt.adapter,e)(e).then(function(t){return qa(e),t.data=Xt.call(e,e.transformResponse,t),t.headers=$t.from(t.headers),t},function(t){return Zt(t)||(qa(e),t&&t.response&&(t.response.data=Xt.call(e,e.transformResponse,t.response),t.response.headers=$t.from(t.response.headers))),Promise.reject(t)})}const Ba="1.12.2",Ua={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ua[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const Ha={};Ua.transitional=function(e,t,a){function r(e,t){return"[Axios v"+Ba+"] Transitional option '"+e+"'"+t+(a?". "+a:"")}return(a,n,s)=>{if(!1===e)throw new _t(r(n," has been removed"+(t?" in "+t:"")),_t.ERR_DEPRECATED);return t&&!Ha[n]&&(Ha[n]=!0,console.warn(r(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(a,n,s)}},Ua.spelling=function(e){return(t,a)=>(console.warn("".concat(a," is likely a misspelling of ").concat(e)),!0)};const Wa={assertOptions:function(e,t,a){if("object"!==typeof e)throw new _t("options must be an object",_t.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const s=r[n],i=t[s];if(i){const t=e[s],a=void 0===t||i(t,s,e);if(!0!==a)throw new _t("option "+s+" must be "+a,_t.ERR_BAD_OPTION_VALUE);continue}if(!0!==a)throw new _t("Unknown option "+s,_t.ERR_BAD_OPTION)}},validators:Ua},Va=Wa.validators;class Qa{constructor(e){this.defaults=e||{},this.interceptors={request:new Ot,response:new Ot}}async request(e,t){try{return await this._request(e,t)}catch(Ki){if(Ki instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const a=t.stack?t.stack.replace(/^.+\n/,""):"";try{Ki.stack?a&&!String(Ki.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(Ki.stack+="\n"+a):Ki.stack=a}catch(zh){}}throw Ki}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=ma(this.defaults,t);const{transitional:a,paramsSerializer:r,headers:n}=t;void 0!==a&&Wa.assertOptions(a,{silentJSONParsing:Va.transitional(Va.boolean),forcedJSONParsing:Va.transitional(Va.boolean),clarifyTimeoutError:Va.transitional(Va.boolean)},!1),null!=r&&(gt.isFunction(r)?t.paramsSerializer={serialize:r}:Wa.assertOptions(r,{encode:Va.function,serialize:Va.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Wa.assertOptions(t,{baseUrl:Va.spelling("baseURL"),withXsrfToken:Va.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=n&&gt.merge(n.common,n[t.method]);n&&gt.forEach(["delete","get","head","post","put","patch","common"],e=>{delete n[e]}),t.headers=$t.concat(s,n);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[za.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let m=t;for(;u<d;){const e=i[u++],t=i[u++];try{m=e(m)}catch(h){t.call(this,h);break}}try{c=za.call(this,m)}catch(h){return Promise.reject(h)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Ft(da((e=ma(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}gt.forEach(["delete","get","head","options"],function(e){Qa.prototype[e]=function(t,a){return this.request(ma(a||{},{method:e,url:t,data:(a||{}).data}))}}),gt.forEach(["post","put","patch"],function(e){function t(t){return function(a,r,n){return this.request(ma(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:a,data:r}))}}Qa.prototype[e]=t(),Qa.prototype[e+"Form"]=t(!0)});const Ja=Qa;class Ya{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const a=this;this.promise.then(e=>{if(!a._listeners)return;let t=a._listeners.length;for(;t-- >0;)a._listeners[t](e);a._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{a.subscribe(e),t=e}).then(e);return r.cancel=function(){a.unsubscribe(t)},r},e(function(e,r,n){a.reason||(a.reason=new ta(e,r,n),t(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new Ya(function(t){e=t});return{token:t,cancel:e}}}const Ga=Ya;const Ka={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ka).forEach(e=>{let[t,a]=e;Ka[a]=t});const $a=Ka;const Xa=function e(t){const a=new Ja(t),r=Ee(Ja.prototype.request,a);return gt.extend(r,Ja.prototype,a,{allOwnKeys:!0}),gt.extend(r,a,null,{allOwnKeys:!0}),r.create=function(a){return e(ma(t,a))},r}(Wt);Xa.Axios=Ja,Xa.CanceledError=ta,Xa.CancelToken=Ga,Xa.isCancel=Zt,Xa.VERSION=Ba,Xa.toFormData=St,Xa.AxiosError=_t,Xa.Cancel=Xa.CanceledError,Xa.all=function(e){return Promise.all(e)},Xa.spread=function(e){return function(t){return e.apply(null,t)}},Xa.isAxiosError=function(e){return gt.isObject(e)&&!0===e.isAxiosError},Xa.mergeConfig=ma,Xa.AxiosHeaders=$t,Xa.formToJSON=e=>Ut(gt.isHTMLForm(e)?new FormData(e):e),Xa.getAdapter=Ta,Xa.HttpStatusCode=$a,Xa.default=Xa;const Za=Xa;var er=a(579);const tr=(0,r.createContext)(),ar=()=>{const e=(0,r.useContext)(tr);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},rr=e=>{let{children:t}=e;const[a,n]=(0,r.useState)(null),[s,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(localStorage.getItem("token")),c=(0,r.useRef)(!1),d=()=>{l(null),n(null),localStorage.removeItem("token"),delete Za.defaults.headers.common.Authorization};(0,r.useEffect)(()=>{o?Za.defaults.headers.common.Authorization="Bearer ".concat(o):delete Za.defaults.headers.common.Authorization},[o]),(0,r.useEffect)(()=>{const e=Za.interceptors.response.use(e=>e,e=>Promise.reject(e));return()=>{Za.interceptors.response.eject(e)}},[]),(0,r.useEffect)(()=>{(async()=>{if(o){c.current=!0;try{const e=await Za.get("/api/auth/profile");n(e.data.user)}catch(a){var e,t;401===(null===(e=a.response)||void 0===e?void 0:e.status)||403===(null===(t=a.response)||void 0===t?void 0:t.status)||console.error("Auth check failed:",a),d()}finally{c.current=!1}}i(!1)})().catch(()=>{})},[o]);const u={user:a,token:o,loading:s,login:async(e,t)=>{try{const a=await Za.post("/api/auth/login",{username:e,password:t}),{token:r,user:s}=a.data;return l(r),n(s),localStorage.setItem("token",r),Za.defaults.headers.common.Authorization="Bearer ".concat(r),{success:!0}}catch(r){var a;console.error("Login failed:",r);const e=null===(a=r.response)||void 0===a?void 0:a.data;return{success:!1,error:e&&"object"===typeof e&&e.error||("string"===typeof e?e:null)||"Login failed"}}},logout:d,updateProfile:async e=>{try{await Za.put("/api/auth/profile",e);return n(t=>Pe(Pe({},t),e)),{success:!0}}catch(r){var t,a;return console.error("Profile update failed:",r),{success:!1,error:(null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Profile update failed"}}},changePassword:async(e,t)=>{try{return await Za.put("/api/auth/change-password",{currentPassword:e,newPassword:t}),{success:!0}}catch(n){var a,r;return console.error("Password change failed:",n),{success:!1,error:(null===(a=n.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||"Password change failed"}}},setPrimaryRole:async e=>{try{return await Za.patch("/api/users/me/primary-role",{role:e}),n(t=>t?Pe(Pe({},t),{},{role:e}):null),{success:!0}}catch(r){var t,a;return console.error("Set primary role failed:",r),{success:!1,error:(null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to switch role"}}}};return(0,er.jsx)(tr.Provider,{value:u,children:t})},nr=()=>(0,er.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),sr=()=>(0,er.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"}),(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"})]}),ir=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),or=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),lr=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),cr=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),dr=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),ur=()=>(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),mr=()=>(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),hr=()=>(0,er.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),pr=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),fr=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),xr=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),gr=()=>(0,er.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5z"}),(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"})]}),yr=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2V6"})}),vr=()=>(0,er.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}),(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})]}),br=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),_r=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V8a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2"})}),jr=()=>(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),wr=()=>(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),Nr=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),kr=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Sr=e=>{var t,a;let{children:n}=e;const s=Z(),i=$(),{user:o,logout:l,setPrimaryRole:c}=ar(),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),[p,f]=(0,r.useState)({}),[x,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),b=e=>null===e||void 0===e?void 0:e.some(e=>e.children?b(e.children):i.pathname===e.path||i.pathname.startsWith(e.path+"/")),_=()=>{u(!d)},j=()=>{h(null),g([])},w=e=>{s(e),u(!1)},N=e=>({super_admin:"Super Administrator",admin:"Administrator",dcm:"Deputy Case Manager",counselor:"Counselor",welfare_reviewer:"Welfare Reviewer",executive:"Executive",finance:"Finance"}[e]||e),k=(e,t)=>{if(null===o||void 0===o||!o.permissions)return!1;const a=o.permissions[e];return!!a&&(a.includes(t)||a.includes("all"))},S="super_admin"===(null===o||void 0===o?void 0:o.role)||"Super Administrator"===(null===o||void 0===o?void 0:o.role),C=()=>{const e=[];(S||k("dashboard","read")||k("cases","read")||k("cases","case_assigned")||k("applicants","read")||k("case_identification","read"))&&e.push({text:"Dashboard",icon:(0,er.jsx)(sr,{}),path:"/dashboard",color:"text-blue-500"}),(S||k("cases","read")||k("cases","case_assigned"))&&e.push({text:"Cases",icon:(0,er.jsx)(ir,{}),path:"/cases",color:"text-purple-500"}),(S||k("applicants","read"))&&e.push({text:"Applicants",icon:(0,er.jsx)(or,{}),path:"/applicants",color:"text-green-500"}),(S||k("case_identification","read"))&&e.push({text:"Case Identification",icon:(0,er.jsx)(_r,{}),path:"/case-identification",color:"text-teal-500"});const t=[];"super_admin"!==(null===o||void 0===o?void 0:o.role)&&"Super Administrator"!==(null===o||void 0===o?void 0:o.role)&&"admin"!==(null===o||void 0===o?void 0:o.role)||t.push({text:"Users",icon:(0,er.jsx)(lr,{}),path:"/users",color:"text-indigo-500"},{text:"Role Management",icon:(0,er.jsx)(pr,{}),path:"/roles",color:"text-red-500"});const a=[],r=S||k("master","read");return r&&a.push({text:"Jamiat Master",icon:(0,er.jsx)(hr,{}),path:"/jamiat-master",color:"text-orange-500"},{text:"Case Types",icon:(0,er.jsx)(fr,{}),path:"/case-types",color:"text-pink-500"},{text:"Relations",icon:(0,er.jsx)(xr,{}),path:"/relations",color:"text-cyan-500"},{text:"Education Levels",icon:(0,er.jsx)(gr,{}),path:"/education-levels",color:"text-emerald-500"},{text:"Occupations",icon:(0,er.jsx)(yr,{}),path:"/occupations",color:"text-amber-500"},{text:"Executive Levels",icon:(0,er.jsx)(vr,{}),path:"/executive-levels",color:"text-teal-500"},{text:"Workflow Stages",icon:(0,er.jsx)(br,{}),path:"/workflow-stages",color:"text-violet-500"}),S?a.push({text:"Counseling Forms",icon:(0,er.jsx)(cr,{}),path:"/counseling-forms",color:"text-rose-500"},{text:"Checklist Categories",icon:(0,er.jsx)(cr,{}),path:"/welfare-checklist-categories",color:"text-sky-500"},{text:"Checklist Items",icon:(0,er.jsx)(cr,{}),path:"/welfare-checklist-items",color:"text-lime-500"}):["dcm","counselor"].includes(null===o||void 0===o?void 0:o.role)?e.push({text:"Counseling Forms",icon:(0,er.jsx)(cr,{}),path:"/counseling-forms",color:"text-rose-500"}):r&&a.push({text:"Counseling Forms",icon:(0,er.jsx)(cr,{}),path:"/counseling-forms",color:"text-rose-500"}),t.length>0&&e.push({text:"Administration",icon:(0,er.jsx)(kr,{}),path:null,isDropdown:!0,children:t,color:"text-indigo-600"}),a.length>0&&e.push({text:"Master",icon:(0,er.jsx)(Nr,{}),path:null,isDropdown:!0,children:a,color:"text-orange-600"}),(S||k("reports","read"))&&e.push({text:"Reports",icon:(0,er.jsx)(dr,{}),path:"/reports",color:"text-green-600"}),e};(0,r.useEffect)(()=>{const e=C(),t={};e.forEach(e=>{e.isDropdown&&e.children&&b(e.children)&&(t[e.text]=!0)}),Object.keys(t).length>0&&f(e=>Pe(Pe({},e),t))},[i.pathname,null===o||void 0===o?void 0:o.role]);const A=e=>{const t=e.path&&(i.pathname===e.path||i.pathname.startsWith(e.path+"/")),a=e.isDropdown&&b(e.children),r=void 0!==p[e.text]?p[e.text]:e.isDropdown&&a;return e.isDropdown?(0,er.jsxs)("div",{className:"px-2",children:[(0,er.jsxs)("button",{onClick:()=>{return t=e.text,void f(e=>Pe(Pe({},e),{},{[t]:!e[t]}));var t},className:"w-full flex items-center justify-between px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 ".concat(a?"bg-primary-50 text-primary-600 border-l-4 border-primary-600 shadow-sm":"text-gray-700 hover:bg-gray-100 hover:text-primary-600 hover:shadow-sm"),children:[(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("span",{className:"mr-3 ".concat(a?e.color||"text-primary-600":e.color||"text-gray-500"),children:e.icon}),e.text]}),(0,er.jsx)("span",{className:"ml-auto",children:r?(0,er.jsx)(jr,{}):(0,er.jsx)(wr,{})})]}),r&&e.children&&(0,er.jsx)("div",{className:"ml-4 mt-1 space-y-1",children:e.children.map(e=>{const t=i.pathname===e.path||i.pathname.startsWith(e.path+"/");return(0,er.jsxs)("button",{onClick:()=>w(e.path),className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 ".concat(t?"bg-primary-50 text-primary-600 border-l-4 border-primary-600 shadow-sm":"text-gray-600 hover:bg-gray-100 hover:text-primary-600"),children:[(0,er.jsx)("span",{className:"mr-3 ".concat(t?e.color||"text-primary-600":e.color||"text-gray-400"),children:e.icon}),e.text]},e.text)})})]},e.text):(0,er.jsx)("div",{className:"px-2",children:(0,er.jsxs)("button",{onClick:()=>w(e.path),className:"w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 ".concat(t?"bg-primary-50 text-primary-600 border-l-4 border-primary-600 shadow-sm":"text-gray-700 hover:bg-gray-100 hover:text-primary-600 hover:shadow-sm"),children:[(0,er.jsx)("span",{className:"mr-3 ".concat(t?e.color||"text-primary-600":e.color||"text-gray-500"),children:e.icon}),e.text]})},e.text)},L=(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"flex items-center justify-center h-16 px-4",children:(0,er.jsx)("h1",{className:"text-xl font-bold text-primary-600",children:"FACTS"})}),(0,er.jsx)("div",{className:"border-t border-gray-200"}),(0,er.jsx)("nav",{className:"mt-4",children:C().map(e=>A(e))})]});return(0,er.jsxs)("div",{className:"flex",children:[(0,er.jsx)("div",{className:"fixed top-0 right-0 z-40 bg-primary-600 text-white shadow-xl border-b border-primary-700 transition-all duration-300 ".concat(d?"left-0":"left-0 md:left-52"),children:(0,er.jsxs)("div",{className:"flex items-center justify-between h-16 px-4",children:[(0,er.jsx)("button",{onClick:_,className:"md:hidden p-2 rounded-md text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-white",children:(0,er.jsx)(nr,{})}),(0,er.jsx)("h2",{className:"text-lg font-semibold flex-1 text-center md:text-left",children:(()=>{const e=C(),t=e.find(e=>e.path===i.pathname);if(t)return t.text;for(const a of e)if(a.children){const e=a.children.find(e=>e.path===i.pathname||i.pathname.startsWith(e.path+"/"));if(e)return e.text}return"FACTS"})()}),(0,er.jsx)("div",{className:"flex items-center space-x-4",children:(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center text-primary-600 font-semibold text-sm",children:(null===o||void 0===o||null===(t=o.full_name)||void 0===t?void 0:t[0])||(null===o||void 0===o||null===(a=o.username)||void 0===a?void 0:a[0])||"U"}),(0,er.jsxs)("div",{className:"hidden sm:block",children:[(0,er.jsx)("p",{className:"text-sm font-medium",children:(null===o||void 0===o?void 0:o.full_name)||(null===o||void 0===o?void 0:o.username)||"User"}),(0,er.jsx)("p",{className:"text-xs text-primary-200",children:N(null===o||void 0===o?void 0:o.role)})]}),(0,er.jsx)("button",{onClick:async e=>{h(e.currentTarget);try{var t,a;const e=localStorage.getItem("token"),r=await Za.get("/api/users/me",{headers:{Authorization:"Bearer ".concat(e)}});g((null===(t=r.data)||void 0===t||null===(a=t.user)||void 0===a?void 0:a.assigned_roles)||[])}catch(r){g([])}},className:"p-1 text-white hover:bg-primary-700 rounded-md focus:outline-none focus:ring-2 focus:ring-white",children:(0,er.jsx)(hr,{})})]})})]})}),(0,er.jsxs)("div",{className:"fixed inset-0 z-50 md:hidden ".concat(d?"block":"hidden"),children:[(0,er.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:_}),(0,er.jsx)("div",{className:"fixed left-0 top-0 h-full w-52 bg-white shadow-xl z-50",children:L})]}),(0,er.jsx)("div",{className:"hidden md:block fixed left-0 top-0 h-full w-52 bg-white border-r border-gray-200 shadow-lg z-30",children:L}),(0,er.jsx)("div",{className:"flex-1 transition-all duration-300 ".concat(d?"ml-0":"ml-0 md:ml-52"),children:(0,er.jsx)("div",{className:"pt-16 px-2 py-6",children:n})}),m&&(0,er.jsx)("div",{className:"fixed inset-0 z-50",onClick:j,children:(0,er.jsxs)("div",{className:"absolute top-16 right-4 bg-white rounded-lg shadow-lg border border-gray-200 py-2 w-56",onClick:e=>e.stopPropagation(),children:[(0,er.jsxs)("button",{onClick:()=>{j(),w("/profile")},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 text-left",children:[(0,er.jsx)(ur,{}),(0,er.jsx)("span",{className:"ml-3",children:"Profile"})]}),x.length>=2&&(0,er.jsxs)("div",{className:"border-t border-gray-100 mt-1 pt-1",children:[(0,er.jsx)("div",{className:"px-4 py-1.5 text-xs font-medium text-gray-500",children:"Switch role"}),x.map(e=>(0,er.jsx)("button",{onClick:()=>(async e=>{v(!0);const t=await c(e);v(!1),null!==t&&void 0!==t&&t.success&&(j(),window.location.reload())})(e.name),disabled:y,className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 text-left",children:(0,er.jsxs)("span",{className:"ml-3",children:[(null===o||void 0===o?void 0:o.role)===e.name?"\u2713 ":"",N(e.name)||e.name]})},e.id))]}),(0,er.jsxs)("button",{onClick:()=>{l(),s("/login"),j()},className:"w-full flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 text-left",children:[(0,er.jsx)(mr,{}),(0,er.jsx)("span",{className:"ml-3",children:"Logout"})]})]})})]})},Cr=(e,t)=>{const[a,n]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null);return(0,r.useEffect)(()=>{const a=async()=>{try{i(!0),l(null);const a=await(async(e,t)=>{try{return(await Za.get("/api/permissions/check",{params:{resource:e,action:t}})).data.hasPermission}catch(o){return console.error("Error checking permission:",o),!1}})(e,t);n(a)}catch(Ki){l(Ki),n(!1)}finally{i(!1)}};e&&t&&a()},[e,t]),{hasPermission:a,loading:s,error:o}},Ar=()=>{const[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(!0),[s,i]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{n(!0),i(null);const e=await(async()=>{try{return(await Za.get("/api/permissions/counseling-form-access")).data.hasCounselingFormAccess}catch(s){return console.error("Error checking counseling form access:",s),!1}})();t(e)}catch(Ki){i(Ki),t(!1)}finally{n(!1)}})()},[]),{hasAccess:e,loading:a,error:s}},Lr=e=>{let{children:t,requireCounselingFormAccess:a=!1,requireAdminAccess:n=!1,requiredPermission:s=null,requiredAnyOfPermissions:i=null}=e;const{user:o}=ar(),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null);if((0,r.useEffect)(()=>{(async()=>{try{if(u(!0),h(null),a){const e=await(async()=>{try{return(await Za.get("/api/permissions/counseling-form-roles")).data.roles}catch(m){return console.error("Error getting counseling form roles:",m),[]}})();c(e)}else if(n){const e=await(async()=>{try{return(await Za.get("/api/permissions/admin-roles")).data.roles}catch(m){return console.error("Error getting admin roles:",m),[]}})();c(e)}else c([])}catch(Ki){console.error("Error checking permissions:",Ki),h("Failed to check permissions")}finally{u(!1)}})()},[a,n]),d)return(0,er.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})});if(m)return(0,er.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Permission Error"}),(0,er.jsx)("p",{className:"text-gray-600",children:m})]})});if(!o)return(0,er.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Authentication Required"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Please log in to access this page."})]})});const p="super_admin"===o.role||"Super Administrator"===o.role;if(i&&Array.isArray(i)&&i.length>0){if(p)return t;if(!i.some(e=>{var t;let{resource:a,action:r}=e;const n=null===(t=o.permissions)||void 0===t?void 0:t[a];return n&&(n.includes(r)||n.includes("all"))}))return(0,er.jsx)(pe,{to:"/dashboard",replace:!0,state:{message:"You do not have permission to access this page."}})}else if(s&&s.resource&&s.action){var f;if(p)return t;const e=null===(f=o.permissions)||void 0===f?void 0:f[s.resource];if(!(e&&(e.includes(s.action)||e.includes("all"))))return(0,er.jsx)(pe,{to:"/dashboard",replace:!0,state:{message:"You do not have permission to access this page."}})}return 0===l.length||l.includes(o.role)?t:(0,er.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Access Denied"}),(0,er.jsx)("p",{className:"text-gray-600",children:"You don't have permission to access this page."}),(0,er.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:["Required role: ",l.join(", ")]}),(0,er.jsxs)("p",{className:"text-sm text-gray-500",children:["Your role: ",o.role]})]})})};function Pr(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}const Er=["children","variant","size","disabled","loading","className","onClick","type"],Fr=e=>{let{children:t,variant:a="primary",size:r="md",disabled:n=!1,loading:s=!1,className:i="",onClick:o,type:l="button"}=e,c=Pr(e,Er);const d="".concat("inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",outline:"border border-primary-600 text-primary-600 hover:bg-primary-50 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500"}[a]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[r]," ").concat(i);return(0,er.jsxs)("button",Pe(Pe({type:l,className:d,disabled:n||s,onClick:o},c),{},{children:[s&&(0,er.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),t]}))},Or=["label","error","helperText","required","disabled","className","type"],Ir=r.forwardRef((e,t)=>{let{label:a,error:n,helperText:s,required:i=!1,disabled:o=!1,className:l="",type:c="text"}=e,d=Pr(e,Or);const[u,m]=(0,r.useState)(!1),h="password"===c,p=h&&u?"text":c,f="\n    w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200\n    ".concat(n?"border-red-300 focus:ring-red-500":"border-gray-300 hover:border-gray-400","\n    ").concat(o?"bg-gray-100 cursor-not-allowed":"bg-white","\n    ").concat(h?"pr-10":"","\n    ").concat(l,"\n  ").trim();return(0,er.jsxs)("div",{className:"w-full",children:[a&&(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a,i&&(0,er.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,er.jsxs)("div",{className:"relative",children:[(0,er.jsx)("input",Pe({ref:t,type:p,className:f,disabled:o},d)),h&&(0,er.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>{m(!u)},disabled:o,children:u?(0,er.jsx)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,er.jsxs)("svg",{className:"h-5 w-5 text-gray-400 hover:text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),n&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n}),s&&!n&&(0,er.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:s})]})}),Rr=["children","className","padding"],Dr=["children","className"],Mr=["children","className"],Tr=["children","className"],qr=e=>{let{children:t,className:a="",padding:r="default"}=e,n=Pr(e,Rr);const s="bg-white rounded-lg shadow-lg border border-gray-100 ".concat({none:"",sm:"p-4",default:"p-6",lg:"p-8"}[r]," ").concat(a);return(0,er.jsx)("div",Pe(Pe({className:s},n),{},{children:t}))};qr.Header=e=>{let{children:t,className:a=""}=e,r=Pr(e,Dr);return(0,er.jsx)("div",Pe(Pe({className:"mb-4 ".concat(a)},r),{},{children:t}))},qr.Content=e=>{let{children:t,className:a=""}=e,r=Pr(e,Mr);return(0,er.jsx)("div",Pe(Pe({className:a},r),{},{children:t}))},qr.Footer=e=>{let{children:t,className:a=""}=e,r=Pr(e,Tr);return(0,er.jsx)("div",Pe(Pe({className:"mt-4 ".concat(a)},r),{},{children:t}))};const zr=qr,Br=["children","severity","className","onClose"],Ur=e=>{let{children:t,severity:a="info",className:r="",onClose:n}=e,s=Pr(e,Br);const i="p-4 border rounded-lg ".concat({error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800",success:"bg-green-50 border-green-200 text-green-800"}[a]," ").concat(r);return(0,er.jsx)("div",Pe(Pe({className:i},s),{},{children:(0,er.jsxs)("div",{className:"flex items-start",children:[(0,er.jsx)("div",{className:"flex-shrink-0 pt-0.5",children:(0,er.jsx)("div",{className:{error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400",success:"text-green-400"}[a],children:(()=>{switch(a){case"error":return(0,er.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"warning":return(0,er.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"success":return(0,er.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});default:return(0,er.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}})()})}),(0,er.jsx)("div",{className:"ml-3 flex-1 min-w-0",children:(0,er.jsx)("div",{className:"text-sm break-words whitespace-normal",children:t})}),n&&(0,er.jsx)("div",{className:"ml-auto pl-3",children:(0,er.jsx)("div",{className:"-mx-1.5 -my-1.5",children:(0,er.jsxs)("button",{type:"button",onClick:n,className:"inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat("error"===a?"text-red-500 hover:bg-red-100 focus:ring-red-600":"warning"===a?"text-yellow-500 hover:bg-yellow-100 focus:ring-yellow-600":"success"===a?"text-green-500 hover:bg-green-100 focus:ring-green-600":"text-blue-500 hover:bg-blue-100 focus:ring-blue-600"),children:[(0,er.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,er.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})}))},Hr=["children","severity","className","onClose","autoClose","duration"],Wr=e=>{let{children:t,severity:a="info",className:n="",onClose:s,autoClose:i=!0,duration:o=3e3}=e,l=Pr(e,Hr);const[c,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(i&&o>0){const e=setTimeout(()=>{d(!1),setTimeout(()=>{null===s||void 0===s||s()},300)},o);return()=>clearTimeout(e)}},[i,o,s]);const u="p-4 border rounded-lg shadow-lg transition-all duration-300 ease-in-out ".concat(c?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"," ").concat({error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800",success:"bg-green-50 border-green-200 text-green-800"}[a]," ").concat(n);return(0,er.jsx)("div",Pe(Pe({className:u},l),{},{children:(0,er.jsxs)("div",{className:"flex",children:[(0,er.jsx)("div",{className:"flex-shrink-0",children:(0,er.jsx)("div",{className:{error:"text-red-400",warning:"text-yellow-400",info:"text-blue-400",success:"text-green-400"}[a],children:(()=>{switch(a){case"error":return(0,er.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});case"warning":return(0,er.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})});case"success":return(0,er.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});default:return(0,er.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}})()})}),(0,er.jsx)("div",{className:"ml-3 flex-1",children:(0,er.jsx)("div",{className:"text-sm font-medium",children:t})}),s&&(0,er.jsx)("div",{className:"ml-auto pl-3",children:(0,er.jsx)("div",{className:"-mx-1.5 -my-1.5",children:(0,er.jsxs)("button",{type:"button",onClick:()=>{d(!1),setTimeout(()=>{null===s||void 0===s||s()},300)},className:"inline-flex rounded-md p-1.5 focus:outline-none focus:ring-2 focus:ring-offset-2 ".concat("error"===a?"text-red-500 hover:bg-red-100 focus:ring-red-600":"warning"===a?"text-yellow-500 hover:bg-yellow-100 focus:ring-yellow-600":"success"===a?"text-green-500 hover:bg-green-100 focus:ring-green-600":"text-blue-500 hover:bg-blue-100 focus:ring-blue-600"),children:[(0,er.jsx)("span",{className:"sr-only",children:"Dismiss"}),(0,er.jsx)("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})})]})}))},Vr=["children","className","data","columns","keyField"],Qr=["children","className"],Jr=["children","className"],Yr=["children","className","hover"],Gr=["children","className","align"],Kr=["children","className","align","sortable","sortDirection","onSort"],$r=e=>{let{children:t,className:a="",data:r,columns:n,keyField:s}=e,i=Pr(e,Vr);return r&&n?(0,er.jsx)("div",Pe(Pe({className:"overflow-x-auto ".concat(a)},i),{},{children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)(Xr,{children:(0,er.jsx)(en,{children:n.map(e=>(0,er.jsx)(an,{children:e.label},e.key||e.label))})}),(0,er.jsx)(Zr,{children:r.map(e=>(0,er.jsx)(en,{hover:!0,children:n.map(t=>(0,er.jsx)(tn,{children:t.render?t.render(e):e[t.key]},t.key||t.label))},e[s]||e.id))})]})})):(0,er.jsx)("div",Pe(Pe({className:"w-full ".concat(a.includes("table-auto")?"":"overflow-x-auto"," ").concat(a)},i),{},{children:(0,er.jsx)("table",{className:"".concat(a.includes("table-auto")?"table-auto":"min-w-full"," w-full divide-y divide-gray-200"),children:t})}))},Xr=e=>{let{children:t,className:a=""}=e,r=Pr(e,Qr);return(0,er.jsx)("thead",Pe(Pe({className:"bg-gray-50 border-b border-gray-200 ".concat(a)},r),{},{children:t}))},Zr=e=>{let{children:t,className:a=""}=e,r=Pr(e,Jr);return(0,er.jsx)("tbody",Pe(Pe({className:"bg-white divide-y divide-gray-200 ".concat(a)},r),{},{children:t}))},en=e=>{let{children:t,className:a="",hover:r=!1}=e,n=Pr(e,Yr);return(0,er.jsx)("tr",Pe(Pe({className:"".concat(r?"hover:bg-gray-50 transition-colors duration-150":""," ").concat(a)},n),{},{children:t}))},tn=e=>{let{children:t,className:a="",align:r="left"}=e,n=Pr(e,Gr);const s=a.includes("max-w")||a.includes("break-words");return(0,er.jsx)("td",Pe(Pe({className:"px-6 py-4 ".concat(s?"":"whitespace-nowrap"," text-sm text-gray-900 ").concat({left:"text-left",center:"text-center",right:"text-right"}[r]," ").concat(a)},n),{},{children:t}))},an=e=>{let{children:t,className:a="",align:r="left",sortable:n=!1,sortDirection:s=null,onSort:i}=e,o=Pr(e,Kr);return(0,er.jsx)("th",Pe(Pe({className:"px-6 py-3 text-sm font-semibold text-gray-700 tracking-wider ".concat({left:"text-left",center:"text-center",right:"text-right"}[r]," ").concat(n?"cursor-pointer hover:bg-gray-100 select-none":""," ").concat(a),onClick:()=>{n&&i&&i()}},o),{},{children:(0,er.jsxs)("div",{className:"flex items-center",children:[t,n?"asc"===s?(0,er.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}):"desc"===s?(0,er.jsx)("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}):(0,er.jsx)("svg",{className:"w-4 h-4 ml-1 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):null]})}))};$r.Head=Xr,$r.Body=Zr,$r.Row=en,$r.Cell=tn,$r.Header=an;const rn=$r,nn=["children","label","error","helperText","required","disabled","className"],sn=["children"],on=r.forwardRef((e,t)=>{let{children:a,label:r,error:n,helperText:s,required:i=!1,disabled:o=!1,className:l=""}=e,c=Pr(e,nn);const d="\n    w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200\n    ".concat(n?"border-red-300 focus:ring-red-500":"border-gray-300 hover:border-gray-400","\n    ").concat(o?"bg-gray-100 cursor-not-allowed":"bg-white","\n    ").concat(l,"\n  ").trim();return(0,er.jsxs)("div",{className:"w-full",children:[r&&(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[r,i&&(0,er.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,er.jsx)("select",Pe(Pe({ref:t,className:d,disabled:o},c),{},{children:a})),n&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:n}),s&&!n&&(0,er.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:s})]})});on.Option=e=>{let{children:t}=e,a=Pr(e,sn);return(0,er.jsx)("option",Pe(Pe({},a),{},{children:t}))};const ln=on,cn=["options","value","onChange","label","placeholder","error","helperText","required","disabled","className","showSelectAll","selectAllLabel","onSelectAll"],dn=e=>{let{options:t=[],value:a=[],onChange:n,label:s,placeholder:i="Select options...",error:o,helperText:l,required:c=!1,disabled:d=!1,className:u="",showSelectAll:m=!1,selectAllLabel:h="Select All",onSelectAll:p}=e,f=Pr(e,cn);const[x,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(""),b=(0,r.useRef)(null),_=(0,r.useRef)(null),j=t.filter(e=>(e.label||"").toLowerCase().includes(y.toLowerCase())),w=j.length>0&&j.every(e=>a.includes(e.value)),N=t.filter(e=>a.includes(e.value));return(0,r.useEffect)(()=>{const e=e=>{b.current&&!b.current.contains(e.target)&&(g(!1),v(""))};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.useEffect)(()=>{x&&_.current&&_.current.focus()},[x]),(0,er.jsxs)("div",Pe(Pe({className:"w-full ".concat(u)},f),{},{children:[s&&(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s,c&&(0,er.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,er.jsxs)("div",{className:"relative",ref:b,children:[(0,er.jsx)("div",{className:"\n            w-full px-3 py-2 border rounded-lg cursor-pointer\n            ".concat(o?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-primary-500","\n            ").concat(d?"bg-gray-100 cursor-not-allowed":"bg-white","\n            focus:outline-none focus:ring-2 focus:border-transparent\n          "),onClick:()=>!d&&g(!x),children:(0,er.jsx)("div",{className:"flex flex-wrap gap-1 min-h-[2rem] items-center",children:N.length>0?N.map(e=>(0,er.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-primary-100 text-primary-800",children:[e.label,!d&&(0,er.jsx)("button",{type:"button",className:"ml-1 inline-flex items-center justify-center w-4 h-4 rounded-full hover:bg-primary-200",onClick:t=>{t.stopPropagation(),(e=>{const t=a.filter(t=>t!==e);n(t)})(e.value)},children:(0,er.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e.value)):(0,er.jsx)("span",{className:"text-gray-500",children:i})})}),(0,er.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,er.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform ".concat(x?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),x&&(0,er.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-hidden",children:[(0,er.jsx)("div",{className:"p-2 border-b border-gray-200",children:(0,er.jsx)("input",{ref:_,type:"text",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Search options...",value:y,onChange:e=>v(e.target.value),onClick:e=>e.stopPropagation()})}),(0,er.jsxs)("div",{className:"max-h-48 overflow-y-auto",children:[m&&j.length>0&&(0,er.jsx)("div",{className:"\n                    px-3 py-2 cursor-pointer hover:bg-gray-100 flex items-center border-b border-gray-200\n                    ".concat(w?"bg-primary-50 text-primary-700":"text-gray-900","\n                  "),onClick:()=>{if(p)p();else{const e=j.map(e=>e.value);if(e.every(e=>a.includes(e))){const t=a.filter(t=>!e.includes(t));n(t)}else{const t=[...new Set([...a,...e])];n(t)}}},children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("input",{type:"checkbox",checked:w,onChange:()=>{},className:"mr-2 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,er.jsx)("span",{className:"text-sm font-medium",children:h})]})}),j.length>0?j.map(e=>(0,er.jsx)("div",{className:"\n                      px-3 py-2 cursor-pointer hover:bg-gray-100 flex items-center\n                      ".concat(a.includes(e.value)?"bg-primary-50 text-primary-700":"text-gray-900","\n                    "),onClick:()=>(e=>{const t=a.includes(e.value)?a.filter(t=>t!==e.value):[...a,e.value];n(t)})(e),children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("input",{type:"checkbox",checked:a.includes(e.value),onChange:()=>{},className:"mr-2 h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,er.jsx)("span",{className:"text-sm",children:e.label})]})},e.value)):(0,er.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No options found"})]})]})]}),o&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:o}),l&&!o&&(0,er.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:l})]}))},un=["options","value","onChange","label","placeholder","error","helperText","required","disabled","className"],mn=e=>{let{options:t=[],value:a="",onChange:n,label:s,placeholder:i="Select option...",error:o,helperText:l,required:c=!1,disabled:d=!1,className:u=""}=e,m=Pr(e,un);const[h,p]=(0,r.useState)(!1),[f,x]=(0,r.useState)(""),g=(0,r.useRef)(null),y=(0,r.useRef)(null),v=t.filter(e=>(e.label||"").toLowerCase().includes(f.toLowerCase())),b=(0,r.useMemo)(()=>t.find(e=>""===a&&""===e.value||(null===a||void 0===a?null===e.value||void 0===e.value||""===e.value:String(e.value)===String(a)||e.value===a)),[t,a]);return(0,r.useEffect)(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&(p(!1),x(""))};if(h)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[h]),(0,r.useEffect)(()=>{h&&y.current&&y.current.focus()},[h]),(0,er.jsxs)("div",Pe(Pe({className:"w-full ".concat(u)},m),{},{children:[s&&(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[s,c&&(0,er.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,er.jsxs)("div",{className:"relative",ref:g,children:[(0,er.jsx)("div",{className:"\n            w-full px-3 py-2 border rounded-lg cursor-pointer\n            ".concat(o?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-primary-500","\n            ").concat(d?"bg-gray-100 cursor-not-allowed":"bg-white","\n            ").concat(h?"ring-2 ring-primary-500 border-primary-500":"","\n            focus:outline-none focus:ring-2 focus:border-transparent\n          "),onClick:e=>{e.preventDefault(),e.stopPropagation(),d||p(!h)},children:(0,er.jsx)("div",{className:"flex items-center justify-between min-h-[20px] pr-8",children:(0,er.jsx)("span",{className:"block truncate flex-1 ".concat(b?"text-gray-900":"text-gray-500"),style:{visibility:"visible",opacity:1,display:"block",minHeight:"20px",lineHeight:"20px",color:b?"#111827":"#6B7280",width:"100%"},children:(null===b||void 0===b?void 0:b.label)||i||"Select option..."})})}),(0,er.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:(0,er.jsx)("svg",{className:"w-5 h-5 text-gray-400 transition-transform ".concat(h?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})}),h&&(0,er.jsxs)("div",{className:"absolute z-[200] w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-[28rem] overflow-hidden",children:[(0,er.jsx)("div",{className:"p-2 border-b border-gray-200",children:(0,er.jsx)("input",{ref:y,type:"text",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Search options...",value:f,onChange:e=>x(e.target.value),onClick:e=>e.stopPropagation()})}),(0,er.jsx)("div",{className:"max-h-96 overflow-y-auto",children:v.length>0?v.map(e=>{const t=a===e.value;return(0,er.jsx)("div",{className:"\n                        px-3 py-2 cursor-pointer hover:bg-gray-100\n                        ".concat(t?"bg-primary-50":"","\n                      "),onClick:()=>(e=>{n(e.value),p(!1),x("")})(e),children:(0,er.jsx)("span",{className:"text-sm ".concat(t?"text-primary-700 font-medium":"text-gray-900"),style:{color:t?"#0d47a1":"#111827",display:"block",visibility:"visible",opacity:1,lineHeight:"1.5"},children:e.label||"Unassigned"})},e.value)}):(0,er.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No options found"})})]})]}),o&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:o}),l&&!o&&(0,er.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:l})]}))},hn=["children","variant","size","className"],pn=e=>{let{children:t,variant:a="default",size:r="md",className:n=""}=e,s=Pr(e,hn);const i="".concat("inline-flex items-center font-medium rounded-full"," ").concat({default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[a]," ").concat({sm:"px-2 py-1 text-xs",md:"px-3 py-1 text-sm",lg:"px-4 py-2 text-base"}[r]," ").concat(n);return(0,er.jsx)("span",Pe(Pe({className:i},s),{},{children:t}))},fn=e=>{let{isOpen:t,onClose:a,title:r,children:n,size:s="md",className:i=""}=e;if(!t)return null;return(0,er.jsxs)("div",{className:"fixed inset-0 z-[100] overflow-y-auto",children:[(0,er.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:a}),(0,er.jsx)("div",{className:"flex items-start justify-center min-h-screen pt-16 pb-8 px-4 relative z-[101]",children:(0,er.jsxs)("div",{className:"relative bg-white rounded-lg text-left overflow-visible shadow-xl transform transition-all w-full mt-4 ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-full mx-4"}[s]," ").concat(i),children:[r&&(0,er.jsx)("div",{className:"bg-white border-b border-gray-200 px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:r}),(0,er.jsx)("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-full p-1 hover:bg-gray-100 transition-colors","aria-label":"Close modal",children:(0,er.jsx)("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,er.jsx)("div",{className:"bg-white px-4 pb-4 sm:p-6",children:n})]})})]})};fn.Header=e=>{let{children:t,className:a=""}=e;return(0,er.jsx)("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4 ".concat(a),children:t})},fn.Content=e=>{let{children:t,className:a=""}=e;return(0,er.jsx)("div",{className:"px-4 pb-4 sm:p-6 ".concat(a),children:t})},fn.Footer=e=>{let{children:t,className:a=""}=e;return(0,er.jsx)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse ".concat(a),children:t})};const xn=fn,gn=e=>{let{currentPage:t,totalPages:a,onPageChange:r,rowsPerPage:n,onRowsPerPageChange:s,totalItems:i,rowsPerPageOptions:o=[10,50,100,500,1e3],className:l=""}=e;const c=(()=>{const e=[];if(a<=5)for(let t=1;t<=a;t++)e.push(t);else{const r=Math.max(1,t-2),n=Math.min(a,r+5-1);r>1&&(e.push(1),r>2&&e.push("..."));for(let t=r;t<=n;t++)e.push(t);n<a&&(n<a-1&&e.push("..."),e.push(a))}return e})();return(0,er.jsxs)("div",{className:"flex items-center justify-between ".concat(l),children:[(0,er.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,er.jsx)("button",{onClick:()=>r(t-1),disabled:1===t,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,er.jsx)("button",{onClick:()=>r(t+1),disabled:t===a,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,er.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[s&&(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("label",{className:"text-sm text-gray-700",children:"Rows per page:"}),(0,er.jsx)("select",{value:n,onChange:e=>{s(Number(e.target.value)),r(1)},className:"border border-gray-300 rounded-md px-3 py-1.5 text-sm text-gray-700 bg-white focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:o.map(e=>(0,er.jsx)("option",{value:e,children:e},e))})]}),(0,er.jsx)("div",{children:(0,er.jsx)("p",{className:"text-sm text-gray-700",children:void 0!==i?(0,er.jsxs)(er.Fragment,{children:["Showing ",(0,er.jsx)("span",{className:"font-medium",children:(t-1)*(n||10)+1})," to"," ",(0,er.jsx)("span",{className:"font-medium",children:Math.min(t*(n||10),i)})," ","of ",(0,er.jsx)("span",{className:"font-medium",children:i})," results"]}):(0,er.jsxs)(er.Fragment,{children:["Page ",(0,er.jsx)("span",{className:"font-medium",children:t})," of"," ",(0,er.jsx)("span",{className:"font-medium",children:a})]})})})]}),(0,er.jsx)("div",{children:(0,er.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,er.jsx)("button",{onClick:()=>r(t-1),disabled:1===t,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,er.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),c.map((e,a)=>(0,er.jsx)("button",{onClick:()=>"number"===typeof e&&r(e),disabled:"..."===e,className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(e===t?"z-10 bg-primary-50 border-primary-500 text-primary-600":"..."===e?"border-gray-300 bg-white text-gray-700 cursor-default":"border-gray-300 bg-white text-gray-500 hover:bg-gray-50"),children:e},a)),(0,er.jsx)("button",{onClick:()=>r(t+1),disabled:t===a,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,er.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})})]})]})},yn=["children","variant","size","className"],vn=e=>{let{children:t,variant:a="default",size:r="sm",className:n=""}=e,s=Pr(e,yn);const i="".concat("inline-flex items-center font-medium rounded-full"," ").concat({default:"bg-gray-100 text-gray-800",primary:"bg-primary-100 text-primary-800",secondary:"bg-gray-100 text-gray-800",success:"bg-green-100 text-green-800",warning:"bg-yellow-100 text-yellow-800",error:"bg-red-100 text-red-800",info:"bg-blue-100 text-blue-800"}[a]," ").concat({sm:"px-2 py-1 text-xs",md:"px-2.5 py-0.5 text-sm",lg:"px-3 py-1 text-sm"}[r]," ").concat(n);return(0,er.jsx)("span",Pe(Pe({className:i},s),{},{children:t}))},bn=["checked","onChange","disabled","label","className"],_n=e=>{let{checked:t,onChange:a,disabled:r=!1,label:n,className:s=""}=e,i=Pr(e,bn);return(0,er.jsxs)("div",{className:"flex items-center ".concat(s),children:[(0,er.jsx)("button",Pe(Pe({type:"button",className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 ".concat(t?"bg-primary-600":"bg-gray-200"," ").concat(r?"opacity-50 cursor-not-allowed":""),onClick:()=>!r&&a(!t),disabled:r},i),{},{children:(0,er.jsx)("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ".concat(t?"translate-x-5":"translate-x-0")})})),n&&(0,er.jsx)("span",{className:"ml-3 text-sm text-gray-700",children:n})]})},jn=e=>{var t;let{children:a,defaultTab:n=0,className:s=""}=e;const[i,o]=(0,r.useState)(n),l=r.Children.toArray(a).filter(e=>e.type===wn);return(0,er.jsxs)("div",{className:s,children:[(0,er.jsx)("div",{className:"border-b border-gray-200",children:(0,er.jsx)("nav",{className:"-mb-px flex space-x-8",children:l.map((e,t)=>(0,er.jsx)("button",{onClick:()=>o(t),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(i===t?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.props.label},t))})}),(0,er.jsx)("div",{className:"mt-6",children:null===(t=l[i])||void 0===t?void 0:t.props.children})]})},wn=e=>{let{children:t,label:a}=e;return(0,er.jsx)("div",{children:t})};jn.Tab=wn;const Nn=jn,kn=e=>{let{steps:t,currentStep:a,completedSteps:n=[],className:s="",compact:i=!1,onStepClick:o}=e;return i?(0,er.jsx)("div",{className:"flex items-center ".concat(s),children:t.map((e,s)=>{const i=n.includes(e.id)||s<a,l=s===a,c=l&&i,d=l&&!i;return(0,er.jsxs)(r.Fragment,{children:[(0,er.jsx)("div",{className:"w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold shadow-sm transition-all duration-200 ".concat(c?"bg-green-500 text-white shadow-green-200 ring-2 ring-blue-500 ring-offset-1":d?"bg-primary-500 text-white shadow-primary-200":i?"bg-green-500 text-white shadow-green-200":"bg-gray-200 text-gray-600"," ").concat(o?"cursor-pointer hover:opacity-80 hover:scale-105":""),onClick:o?()=>o(e.id,s):void 0,title:o?"Click to go to ".concat(e.label):e.label,children:i?"\u2713":s+1}),s<t.length-1&&(0,er.jsx)("div",{className:"flex-1 h-1 mx-1 rounded-full transition-all duration-300 ".concat(i?"bg-green-500":"bg-gray-200")})]},e.id)})}):(0,er.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200 ".concat(s),children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Workflow Progress"}),(0,er.jsx)("div",{className:"flex items-center justify-between",children:t.map((e,s)=>{const i=n.includes(e.id)||s<a,l=s===a,c=l&&i,d=l&&!i;return(0,er.jsxs)(r.Fragment,{children:[(0,er.jsxs)("div",{className:"flex flex-col items-center",children:[(0,er.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-all duration-200 relative ".concat(c?"bg-green-500 text-white ring-4 ring-blue-500 ring-offset-2 shadow-lg":d?"bg-blue-500 text-white":i?"bg-green-500 text-white":"bg-gray-300 text-gray-600"," ").concat(o?"cursor-pointer hover:opacity-80":""),onClick:o?()=>o(e.id,s):void 0,title:o?"Click to go to ".concat(e.title):e.title,children:e.number}),(0,er.jsxs)("div",{className:"mt-2 text-center",children:[(0,er.jsx)("div",{className:"text-sm font-medium ".concat(i||l?"text-gray-900":"text-gray-500"),children:e.title}),e.date&&(0,er.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.date})]})]}),s<t.length-1&&(0,er.jsx)("div",{className:"flex-1 mx-4",children:(0,er.jsx)("div",{className:"h-0.5 bg-gray-200 relative",children:(0,er.jsx)("div",{className:"absolute top-0 left-0 h-full transition-all duration-300 ".concat(i?"bg-green-500":"bg-gray-200"),style:{width:i?"100%":"0%"}})})})]},e.id)})})]})},Sn=()=>(0,er.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Cn=()=>{const[e,t]=(0,r.useState)({username:"",password:""}),[a,n]=(0,r.useState)(""),[s,i]=(0,r.useState)(!1),{login:o}=ar(),l=Z(),c=a=>{t(Pe(Pe({},e),{},{[a.target.name]:a.target.value})),n("")};return(0,er.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-primary-600 to-primary-400 p-4",children:(0,er.jsx)("div",{className:"w-full max-w-md mx-auto",children:(0,er.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[(0,er.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[(0,er.jsx)("div",{className:"w-16 h-16 bg-primary-600 rounded-full flex items-center justify-center mb-4",children:(0,er.jsx)(Sn,{})}),(0,er.jsx)("h1",{className:"text-3xl font-bold text-primary-600 mb-2",children:"FACTS"}),(0,er.jsx)("p",{className:"text-gray-600 text-center",children:"File and case tracking system"})]}),a&&(0,er.jsx)(Ur,{severity:"error",className:"mb-4",children:a}),(0,er.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0),n("");const a=await o(e.username,e.password);a.success?l("/dashboard"):n(a.error),i(!1)},className:"space-y-4",children:[(0,er.jsx)(Ir,{id:"username",name:"username",type:"text",label:"Username or Email",autoComplete:"username",required:!0,value:e.username,onChange:c,disabled:s,placeholder:"Enter your username or email"}),(0,er.jsx)(Ir,{id:"password",name:"password",type:"password",label:"Password",autoComplete:"current-password",required:!0,value:e.password,onChange:c,disabled:s,placeholder:"Enter your password"}),(0,er.jsx)(Fr,{type:"submit",disabled:s,loading:s,className:"w-full",size:"lg",children:s?"Signing In...":"Sign In"})]}),(0,er.jsxs)("div",{className:"mt-6 text-center",children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Welcome to FACTS - File and case tracking system"}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Please contact your administrator if you need access"})]})]})})})},An=()=>(0,er.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Ln=()=>(0,er.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Pn=()=>(0,er.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),En=()=>(0,er.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),Fn=()=>(0,er.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),On=()=>{var e,t,a,r,n,s,i,o;const{user:l}=ar(),{data:c,isLoading:d}=(0,Ce.useQuery)("dashboard-overview",()=>Za.get("/api/dashboard/overview").then(e=>e.data),{refetchInterval:3e4}),{data:u}=(0,Ce.useQuery)("recent-activities",()=>Za.get("/api/dashboard/recent-activities").then(e=>e.data),{refetchInterval:6e4}),{data:m}=(0,Ce.useQuery)("case-pipeline",()=>Za.get("/api/dashboard/case-pipeline").then(e=>e.data)),h=e=>({draft:"bg-gray-100 text-gray-800",assigned:"bg-blue-100 text-blue-800",in_counseling:"bg-yellow-100 text-yellow-800",cover_letter_generated:"bg-indigo-100 text-indigo-800",submitted_to_welfare:"bg-purple-100 text-purple-800",welfare_approved:"bg-green-100 text-green-800",welfare_rejected:"bg-red-100 text-red-800",executive_approved:"bg-green-100 text-green-800",executive_rejected:"bg-red-100 text-red-800",finance_disbursement:"bg-green-100 text-green-800"}[e]||"bg-gray-100 text-gray-800");return d?(0,er.jsx)("div",{className:"flex justify-center items-center min-h-96",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,er.jsxs)("div",{children:[(0,er.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",(null===l||void 0===l?void 0:l.full_name)||(null===l||void 0===l?void 0:l.username)||"User","!"]}),(0,er.jsx)("p",{className:"text-gray-600 mb-8",children:"Here's an overview of your case management activities."}),(0,er.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,er.jsx)(zr,{children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("div",{className:"w-12 h-12 bg-primary-600 rounded-lg flex items-center justify-center mr-4",children:(0,er.jsx)(An,{className:"text-white"})}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===c||void 0===c||null===(e=c.totalStats)||void 0===e?void 0:e.total_cases)||0}),(0,er.jsx)("p",{className:"text-gray-600",children:"Total Cases"})]})]})}),(0,er.jsx)(zr,{children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center mr-4",children:(0,er.jsx)(Ln,{className:"text-white"})}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:((null===c||void 0===c||null===(t=c.totalStats)||void 0===t?void 0:t.welfare_approved)||0)+((null===c||void 0===c||null===(a=c.totalStats)||void 0===a?void 0:a.executive_approved)||0)}),(0,er.jsx)("p",{className:"text-gray-600",children:"Approved Cases"})]})]})}),(0,er.jsx)(zr,{children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("div",{className:"w-12 h-12 bg-yellow-600 rounded-lg flex items-center justify-center mr-4",children:(0,er.jsx)(Pn,{className:"text-white"})}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:((null===c||void 0===c||null===(r=c.totalStats)||void 0===r?void 0:r.submitted_to_welfare)||0)+((null===c||void 0===c||null===(n=c.totalStats)||void 0===n?void 0:n.welfare_approved)||0)}),(0,er.jsx)("p",{className:"text-gray-600",children:"Pending Review"})]})]})}),(0,er.jsx)(zr,{children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center mr-4",children:(0,er.jsx)(Fn,{className:"text-white"})}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===c||void 0===c||null===(s=c.totalStats)||void 0===s?void 0:s.finance_disbursement)||0}),(0,er.jsx)("p",{className:"text-gray-600",children:"Disbursed"})]})]})})]}),(()=>{var e,t,a,r,n,s,i,o,d,u,m,p;if(!c)return null;switch(null===l||void 0===l?void 0:l.role){case"super_admin":case"admin":return(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"User Statistics"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Total Users:"}),(0,er.jsx)("span",{className:"font-semibold",children:(null===(e=c.userStats)||void 0===e?void 0:e.total_users)||0})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Active Users:"}),(0,er.jsx)("span",{className:"font-semibold",children:(null===(t=c.userStats)||void 0===t?void 0:t.active_users)||0})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"DCMs:"}),(0,er.jsx)("span",{className:"font-semibold",children:(null===(a=c.userStats)||void 0===a?void 0:a.dcm_count)||0})]})]})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Cases"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("div",{className:"space-y-3",children:null===(r=c.recentCases)||void 0===r?void 0:r.slice(0,5).map(e=>(0,er.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)(An,{className:"text-primary-600"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-medium text-gray-900",children:e.case_number}),(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:[e.applicant_first_name," ",e.applicant_last_name]})]})]}),(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(h(e.status)),children:e.status.replace("_"," ")})]},e.id))})})]})]});case"dcm":return(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"My Assigned Cases"}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Total Assigned:"}),(0,er.jsx)("span",{className:"font-semibold",children:(null===(n=c.assignedCases)||void 0===n?void 0:n.total_assigned)||0})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"In Counseling:"}),(0,er.jsx)("span",{className:"font-semibold",children:(null===(s=c.assignedCases)||void 0===s?void 0:s.in_counseling)||0})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Ready for Review:"}),(0,er.jsx)("span",{className:"font-semibold",children:(null===(i=c.assignedCases)||void 0===i?void 0:i.submitted_for_review)||0})]})]})]}),(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Assigned Cases"}),(0,er.jsx)("div",{className:"space-y-3",children:null===(o=c.recentAssignedCases)||void 0===o?void 0:o.slice(0,5).map(e=>(0,er.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)(An,{className:"text-primary-600"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-medium text-gray-900",children:e.case_number}),(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:[e.applicant_first_name," ",e.applicant_last_name]})]})]}),(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(h(e.status)),children:e.status.replace("_"," ")})]},e.id))})]})]});case"welfare_reviewer":case"welfare":return(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Review Statistics"}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Pending Review:"}),(0,er.jsx)("span",{className:"font-semibold text-yellow-600",children:(null===(d=c.reviewCases)||void 0===d?void 0:d.pending_review)||0})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Approved:"}),(0,er.jsx)("span",{className:"font-semibold text-green-600",children:(null===(u=c.reviewCases)||void 0===u?void 0:u.approved_cases)||0})]}),(0,er.jsxs)("div",{className:"flex justify-between",children:[(0,er.jsx)("span",{className:"text-gray-600",children:"Rework:"}),(0,er.jsx)("span",{className:"font-semibold text-red-600",children:(null===(m=c.reviewCases)||void 0===m?void 0:m.rejected_cases)||0})]})]})]}),(0,er.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Cases Pending Review"}),(0,er.jsx)("div",{className:"space-y-3",children:null===(p=c.pendingReviewCases)||void 0===p?void 0:p.slice(0,5).map(e=>(0,er.jsxs)("div",{className:"flex items-center space-x-3 py-2 border-b border-gray-100 last:border-b-0",children:[(0,er.jsx)(Pn,{className:"text-yellow-600"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-medium text-gray-900",children:e.case_number}),(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:[e.applicant_first_name," ",e.applicant_last_name]})]})]},e.id))})]})]});default:return null}})(),(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activities"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("div",{className:"space-y-3",children:null===u||void 0===u||null===(i=u.activities)||void 0===i?void 0:i.slice(0,8).map(e=>{return(0,er.jsxs)("div",{className:"flex items-center space-x-3 py-2 border-b border-gray-100 last:border-b-0",children:[(0,er.jsx)("div",{className:"text-primary-600",children:(t=e.to_status,t.includes("approved")?(0,er.jsx)(Ln,{}):t.includes("rejected")?(0,er.jsx)(En,{}):(0,er.jsx)(Pn,{}))}),(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsxs)("p",{className:"font-medium text-gray-900",children:[e.case_number," - ",e.to_status.replace("_"," ")]}),(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:[e.changed_by_first_name," ",e.changed_by_last_name," \u2022 ",new Date(e.created_at).toLocaleString()]})]})]},e.id);var t})})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Case Pipeline"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("div",{className:"space-y-3",children:null===m||void 0===m||null===(o=m.pipelineData)||void 0===o?void 0:o.map(e=>(0,er.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)(An,{className:"text-primary-600"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-medium text-gray-900",children:e.status.replace("_"," ").toUpperCase()}),(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:[e.count," cases"]})]})]}),(0,er.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(h(e.status)),children:e.count})]},e.status))})})]})]})]})},In=["_f"],Rn=["name"],Dn=["_f"],Mn=["ref","message","type"],Tn=["formControl"];var qn=e=>"checkbox"===e.type,zn=e=>e instanceof Date,Bn=e=>null==e;const Un=e=>"object"===typeof e;var Hn=e=>!Bn(e)&&!Array.isArray(e)&&Un(e)&&!zn(e),Wn=e=>Hn(e)&&e.target?qn(e.target)?e.target.checked:e.target.value:e,Vn=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Qn="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function Jn(e){let t;const a=Array.isArray(e),r="undefined"!==typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(Qn&&(e instanceof Blob||r)||!a&&!Hn(e))return e;if(t=a?[]:Object.create(Object.getPrototypeOf(e)),a||(e=>{const t=e.constructor&&e.constructor.prototype;return Hn(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const a in e)e.hasOwnProperty(a)&&(t[a]=Jn(e[a]));else t=e}return t}var Yn=e=>/^\w*$/.test(e),Gn=e=>void 0===e,Kn=e=>Array.isArray(e)?e.filter(Boolean):[],$n=e=>Kn(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Xn=(e,t,a)=>{if(!t||!Hn(e))return a;const r=(Yn(t)?[t]:$n(t)).reduce((e,t)=>Bn(e)?e:e[t],e);return Gn(r)||r===e?Gn(e[t])?a:e[t]:r},Zn=e=>"boolean"===typeof e,es=(e,t,a)=>{let r=-1;const n=Yn(t)?[t]:$n(t),s=n.length,i=s-1;for(;++r<s;){const t=n[r];let s=a;if(r!==i){const a=e[t];s=Hn(a)||Array.isArray(a)?a:isNaN(+n[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=s,e=e[t]}};const ts="blur",as="focusout",rs="onBlur",ns="onChange",ss="onSubmit",is="onTouched",os="all",ls="max",cs="min",ds="maxLength",us="minLength",ms="pattern",hs="required",ps="validate",fs=r.createContext(null);fs.displayName="HookFormContext";const xs=()=>r.useContext(fs);var gs=function(e,t,a){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(n,s,{get:()=>{const n=s;return t._proxyFormState[n]!==os&&(t._proxyFormState[n]=!r||os),a&&(a[n]=!0),e[n]}});return n};const ys="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;var vs=e=>"string"===typeof e,bs=(e,t,a,r,n)=>vs(e)?(r&&t.watch.add(e),Xn(a,e,n)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),Xn(a,e))):(r&&(t.watchAll=!0),a),_s=e=>Bn(e)||!Un(e);function js(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if(_s(e)||_s(t))return e===t;if(zn(e)&&zn(t))return e.getTime()===t.getTime();const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;if(a.has(e)||a.has(t))return!0;a.add(e),a.add(t);for(const s of r){const r=e[s];if(!n.includes(s))return!1;if("ref"!==s){const e=t[s];if(zn(r)&&zn(e)||Hn(r)&&Hn(e)||Array.isArray(r)&&Array.isArray(e)?!js(r,e,a):r!==e)return!1}}return!0}var ws=(e,t,a,r,n)=>t?Pe(Pe({},a[e]),{},{types:Pe(Pe({},a[e]&&a[e].types?a[e].types:{}),{},{[r]:n||!0})}):{},Ns=e=>Array.isArray(e)?e:[e],ks=()=>{let e=[];return{get observers(){return e},next:t=>{for(const a of e)a.next&&a.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function Ss(e,t){const a={};for(const r in e)if(e.hasOwnProperty(r)){const n=e[r],s=t[r];if(n&&Hn(n)&&s){const e=Ss(n,s);Hn(e)&&(a[r]=e)}else e[r]&&(a[r]=s)}return a}var Cs=e=>Hn(e)&&!Object.keys(e).length,As=e=>"file"===e.type,Ls=e=>"function"===typeof e,Ps=e=>{if(!Qn)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Es=e=>"select-multiple"===e.type,Fs=e=>"radio"===e.type,Os=e=>Ps(e)&&e.isConnected;function Is(e,t){const a=Array.isArray(t)?t:Yn(t)?[t]:$n(t),r=1===a.length?e:function(e,t){const a=t.slice(0,-1).length;let r=0;for(;r<a;)e=Gn(e)?r++:e[t[r++]];return e}(e,a),n=a.length-1,s=a[n];return r&&delete r[s],0!==n&&(Hn(r)&&Cs(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!Gn(e[t]))return!1;return!0}(r))&&Is(e,a.slice(0,-1)),e}function Rs(e){return Array.isArray(e)||Hn(e)&&!(e=>{for(const t in e)if(Ls(e[t]))return!0;return!1})(e)}function Ds(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const a in e)Rs(e[a])?(t[a]=Array.isArray(e[a])?[]:{},Ds(e[a],t[a])):Bn(e[a])||(t[a]=!0);return t}function Ms(e,t,a){a||(a=Ds(t));for(const r in e)Rs(e[r])?Gn(t)||_s(a[r])?a[r]=Ds(e[r],Array.isArray(e[r])?[]:{}):Ms(e[r],Bn(t)?{}:t[r],a[r]):a[r]=!js(e[r],t[r]);return a}const Ts={value:!1,isValid:!1},qs={value:!0,isValid:!0};var zs=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Gn(e[0].attributes.value)?Gn(e[0].value)||""===e[0].value?qs:{value:e[0].value,isValid:!0}:qs:Ts}return Ts},Bs=(e,t)=>{let{valueAsNumber:a,valueAsDate:r,setValueAs:n}=t;return Gn(e)?e:a?""===e?NaN:e?+e:e:r&&vs(e)?new Date(e):n?n(e):e};const Us={isValid:!1,value:null};var Hs=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Us):Us;function Ws(e){const t=e.ref;return As(t)?t.files:Fs(t)?Hs(e.refs).value:Es(t)?[...t.selectedOptions].map(e=>{let{value:t}=e;return t}):qn(t)?zs(e.refs).value:Bs(Gn(t.value)?e.ref.value:t.value,e)}var Vs=e=>e instanceof RegExp,Qs=e=>Gn(e)?e:Vs(e)?e.source:Hn(e)?Vs(e.value)?e.value.source:e.value:e,Js=e=>({isOnSubmit:!e||e===ss,isOnBlur:e===rs,isOnChange:e===ns,isOnAll:e===os,isOnTouch:e===is});const Ys="AsyncFunction";var Gs=e=>!!e&&!!e.validate&&!!(Ls(e.validate)&&e.validate.constructor.name===Ys||Hn(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===Ys)),Ks=(e,t,a)=>!a&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const $s=(e,t,a,r)=>{for(const n of a||Object.keys(e)){const a=Xn(e,n);if(a){const{_f:e}=a,s=Pr(a,In);if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],n)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if($s(s,t))break}else if(Hn(s)&&$s(s,t))break}}};function Xs(e,t,a){const r=Xn(e,a);if(r||Yn(a))return{error:r,name:a};const n=a.split(".");for(;n.length;){const r=n.join("."),s=Xn(t,r),i=Xn(e,r);if(s&&!Array.isArray(s)&&a!==r)return{name:a};if(i&&i.type)return{name:r,error:i};if(i&&i.root&&i.root.type)return{name:"".concat(r,".root"),error:i.root};n.pop()}return{name:a}}var Zs=(e,t,a)=>{const r=Ns(Xn(e,a));return es(r,"root",t[a]),es(e,a,r),e};function ei(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(vs(e)||Array.isArray(e)&&e.every(vs)||Zn(e)&&!e)return{type:a,message:vs(e)?e:"",ref:t}}var ti=e=>Hn(e)&&!Vs(e)?e:{value:e,message:""},ai=async(e,t,a,r,n,s)=>{const{ref:i,refs:o,required:l,maxLength:c,minLength:d,min:u,max:m,pattern:h,validate:p,name:f,valueAsNumber:x,mount:g}=e._f,y=Xn(a,f);if(!g||t.has(f))return{};const v=o?o[0]:i,b=e=>{n&&v.reportValidity&&(v.setCustomValidity(Zn(e)?"":e||""),v.reportValidity())},_={},j=Fs(i),w=qn(i),N=j||w,k=(x||As(i))&&Gn(i.value)&&Gn(y)||Ps(i)&&""===i.value||""===y||Array.isArray(y)&&!y.length,S=ws.bind(null,f,r,_),C=function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ds,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:us;const s=e?t:a;_[f]=Pe({type:e?r:n,message:s,ref:i},S(e?r:n,s))};if(s?!Array.isArray(y)||!y.length:l&&(!N&&(k||Bn(y))||Zn(y)&&!y||w&&!zs(o).isValid||j&&!Hs(o).isValid)){const{value:e,message:t}=vs(l)?{value:!!l,message:l}:ti(l);if(e&&(_[f]=Pe({type:hs,message:t,ref:v},S(hs,t)),!r))return b(t),_}if(!k&&(!Bn(u)||!Bn(m))){let e,t;const a=ti(m),n=ti(u);if(Bn(y)||isNaN(y)){const r=i.valueAsDate||new Date(y),s=e=>new Date((new Date).toDateString()+" "+e),o="time"==i.type,l="week"==i.type;vs(a.value)&&y&&(e=o?s(y)>s(a.value):l?y>a.value:r>new Date(a.value)),vs(n.value)&&y&&(t=o?s(y)<s(n.value):l?y<n.value:r<new Date(n.value))}else{const r=i.valueAsNumber||(y?+y:y);Bn(a.value)||(e=r>a.value),Bn(n.value)||(t=r<n.value)}if((e||t)&&(C(!!e,a.message,n.message,ls,cs),!r))return b(_[f].message),_}if((c||d)&&!k&&(vs(y)||s&&Array.isArray(y))){const e=ti(c),t=ti(d),a=!Bn(e.value)&&y.length>+e.value,n=!Bn(t.value)&&y.length<+t.value;if((a||n)&&(C(a,e.message,t.message),!r))return b(_[f].message),_}if(h&&!k&&vs(y)){const{value:e,message:t}=ti(h);if(Vs(e)&&!y.match(e)&&(_[f]=Pe({type:ms,message:t,ref:i},S(ms,t)),!r))return b(t),_}if(p)if(Ls(p)){const e=ei(await p(y,a),v);if(e&&(_[f]=Pe(Pe({},e),S(ps,e.message)),!r))return b(e.message),_}else if(Hn(p)){let e={};for(const t in p){if(!Cs(e)&&!r)break;const n=ei(await p[t](y,a),v,t);n&&(e=Pe(Pe({},n),S(t,n.message)),b(n.message),r&&(_[f]=e))}if(!Cs(e)&&(_[f]=Pe({ref:v},e),!r))return _}return b(!0),_};const ri={mode:ss,reValidateMode:ns,shouldFocusError:!0};function ni(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Pe(Pe({},ri),t),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ls(a.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:a.errors||{},disabled:a.disabled||!1},n={},s=(Hn(a.defaultValues)||Hn(a.values))&&Jn(a.defaultValues||a.values)||{},i=a.shouldUnregister?{}:Jn(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u=Pe({},d);const m={array:ks(),state:ks()},h=a.criteriaMode===os,p=async e=>{if(!a.disabled&&(d.isValid||u.isValid||e)){const e=a.resolver?Cs((await v()).errors):await b(n,!0);e!==r.isValid&&m.state.next({isValid:e})}},f=(e,t)=>{!a.disabled&&(d.isValidating||d.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?es(r.validatingFields,e,t):Is(r.validatingFields,e))}),m.state.next({validatingFields:r.validatingFields,isValidating:!Cs(r.validatingFields)}))},x=(e,t,a,r)=>{const l=Xn(n,e);if(l){const n=Xn(i,e,Gn(a)?Xn(s,e):a);Gn(n)||r&&r.defaultChecked||t?es(i,e,t?n:Ws(l._f)):w(e,n),o.mount&&p()}},g=(e,t,n,i,o)=>{let l=!1,c=!1;const h={name:e};if(!a.disabled){if(!n||i){(d.isDirty||u.isDirty)&&(c=r.isDirty,r.isDirty=h.isDirty=_(),l=c!==h.isDirty);const a=js(Xn(s,e),t);c=!!Xn(r.dirtyFields,e),a?Is(r.dirtyFields,e):es(r.dirtyFields,e,!0),h.dirtyFields=r.dirtyFields,l=l||(d.dirtyFields||u.dirtyFields)&&c!==!a}if(n){const t=Xn(r.touchedFields,e);t||(es(r.touchedFields,e,n),h.touchedFields=r.touchedFields,l=l||(d.touchedFields||u.touchedFields)&&t!==n)}l&&o&&m.state.next(h)}return l?h:{}},y=(t,n,s,i)=>{const o=Xn(r.errors,t),l=(d.isValid||u.isValid)&&Zn(n)&&r.isValid!==n;var h;if(a.delayError&&s?(h=()=>((e,t)=>{es(r.errors,e,t),m.state.next({errors:r.errors})})(t,s),e=e=>{clearTimeout(c),c=setTimeout(h,e)},e(a.delayError)):(clearTimeout(c),e=null,s?es(r.errors,t,s):Is(r.errors,t)),(s?!js(o,s):o)||!Cs(i)||l){const e=Pe(Pe(Pe({},i),l&&Zn(n)?{isValid:n}:{}),{},{errors:r.errors,name:t});r=Pe(Pe({},r),e),m.state.next(e)}},v=async e=>{f(e,!0);const t=await a.resolver(i,a.context,((e,t,a,r)=>{const n={};for(const s of e){const e=Xn(t,s);e&&es(n,s,e._f)}return{criteriaMode:a,names:[...e],fields:n,shouldUseNativeValidation:r}})(e||l.mount,n,a.criteriaMode,a.shouldUseNativeValidation));return f(e),t},b=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const s in e){const o=e[s];if(o){const{_f:e}=o,s=Pr(o,Dn);if(e){const s=l.array.has(e.name),c=o._f&&Gs(o._f);c&&d.validatingFields&&f([e.name],!0);const u=await ai(o,l.disabled,i,h,a.shouldUseNativeValidation&&!t,s);if(c&&d.validatingFields&&f([e.name]),u[e.name]&&(n.valid=!1,t))break;!t&&(Xn(u,e.name)?s?Zs(r.errors,u,e.name):es(r.errors,e.name,u[e.name]):Is(r.errors,e.name))}!Cs(s)&&await b(s,t,n)}}return n.valid},_=(e,t)=>!a.disabled&&(e&&t&&es(i,e,t),!js(L(),s)),j=(e,t,a)=>bs(e,l,Pe({},o.mount?i:Gn(t)?s:vs(e)?{[e]:t}:t),a,t),w=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=Xn(n,e);let s=t;if(r){const a=r._f;a&&(!a.disabled&&es(i,e,Bs(t,a)),s=Ps(a.ref)&&Bn(t)?"":t,Es(a.ref)?[...a.ref.options].forEach(e=>e.selected=s.includes(e.value)):a.refs?qn(a.ref)?a.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(s)?e.checked=!!s.find(t=>t===e.value):e.checked=s===e.value||!!s)}):a.refs.forEach(e=>e.checked=e.value===s):As(a.ref)?a.ref.value="":(a.ref.value=s,a.ref.type||m.state.next({name:e,values:Jn(i)})))}(a.shouldDirty||a.shouldTouch)&&g(e,s,a.shouldTouch,a.shouldDirty,!0),a.shouldValidate&&A(e)},N=(e,t,a)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const s=t[r],i=e+"."+r,o=Xn(n,i);(l.array.has(e)||Hn(s)||o&&!o._f)&&!zn(s)?N(i,s,a):w(i,s,a)}},k=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=Xn(n,e),h=l.array.has(e),p=Jn(t);es(i,e,p),h?(m.array.next({name:e,values:Jn(i)}),(d.isDirty||d.dirtyFields||u.isDirty||u.dirtyFields)&&a.shouldDirty&&m.state.next({name:e,dirtyFields:Ms(s,i),isDirty:_(e,p)})):!c||c._f||Bn(p)?w(e,p,a):N(e,p,a),Ks(e,l)&&m.state.next(Pe(Pe({},r),{},{name:e})),m.state.next({name:o.mount?e:void 0,values:Jn(i)})},S=async t=>{o.mount=!0;const s=t.target;let c=s.name,x=!0;const _=Xn(n,c),j=e=>{x=Number.isNaN(e)||zn(e)&&isNaN(e.getTime())||js(e,Xn(i,c,e))},w=Js(a.mode),N=Js(a.reValidateMode);if(_){let o,S;const C=s.type?Ws(_._f):Wn(t),L=t.type===ts||t.type===as,P=!((k=_._f).mount&&(k.required||k.min||k.max||k.maxLength||k.minLength||k.pattern||k.validate))&&!a.resolver&&!Xn(r.errors,c)&&!_._f.deps||((e,t,a,r,n)=>!n.isOnAll&&(!a&&n.isOnTouch?!(t||e):(a?r.isOnBlur:n.isOnBlur)?!e:!(a?r.isOnChange:n.isOnChange)||e))(L,Xn(r.touchedFields,c),r.isSubmitted,N,w),E=Ks(c,l,L);es(i,c,C),L?s&&s.readOnly||(_._f.onBlur&&_._f.onBlur(t),e&&e(0)):_._f.onChange&&_._f.onChange(t);const F=g(c,C,L),O=!Cs(F)||E;if(!L&&m.state.next({name:c,type:t.type,values:Jn(i)}),P)return(d.isValid||u.isValid)&&("onBlur"===a.mode?L&&p():L||p()),O&&m.state.next(Pe({name:c},E?{}:F));if(!L&&E&&m.state.next(Pe({},r)),a.resolver){const{errors:e}=await v([c]);if(j(C),x){const t=Xs(r.errors,n,c),a=Xs(e,n,t.name||c);o=a.error,c=a.name,S=Cs(e)}}else f([c],!0),o=(await ai(_,l.disabled,i,h,a.shouldUseNativeValidation))[c],f([c]),j(C),x&&(o?S=!1:(d.isValid||u.isValid)&&(S=await b(n,!0)));x&&(_._f.deps&&(!Array.isArray(_._f.deps)||_._f.deps.length>0)&&A(_._f.deps),y(c,S,o,F))}var k},C=(e,t)=>{if(Xn(r.errors,t)&&e.focus)return e.focus(),1},A=async function(e){let t,s,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=Ns(e);if(a.resolver){const a=await(async e=>{const{errors:t}=await v(e);if(e)for(const a of e){const e=Xn(t,a);e?es(r.errors,a,e):Is(r.errors,a)}else r.errors=t;return t})(Gn(e)?e:o);t=Cs(a),s=e?!o.some(e=>Xn(a,e)):t}else e?(s=(await Promise.all(o.map(async e=>{const t=Xn(n,e);return await b(t&&t._f?{[e]:t}:t)}))).every(Boolean),(s||r.isValid)&&p()):s=t=await b(n);return m.state.next(Pe(Pe(Pe({},!vs(e)||(d.isValid||u.isValid)&&t!==r.isValid?{}:{name:e}),a.resolver||!e?{isValid:t}:{}),{},{errors:r.errors})),i.shouldFocus&&!s&&$s(n,C,e?o:l.mount),s},L=(e,t)=>{let a=Pe({},o.mount?i:s);return t&&(a=Ss(t.dirtyFields?r.dirtyFields:r.touchedFields,a)),Gn(e)?a:vs(e)?Xn(a,e):e.map(e=>Xn(a,e))},P=(e,t)=>({invalid:!!Xn((t||r).errors,e),isDirty:!!Xn((t||r).dirtyFields,e),error:Xn((t||r).errors,e),isValidating:!!Xn(r.validatingFields,e),isTouched:!!Xn((t||r).touchedFields,e)}),E=(e,t,a)=>{const s=(Xn(n,e,{_f:{}})._f||{}).ref,i=Xn(r.errors,e)||{},{ref:o,message:l,type:c}=i,d=Pr(i,Mn);es(r.errors,e,Pe(Pe(Pe({},d),t),{},{ref:s})),m.state.next({name:e,errors:r.errors,isValid:!1}),a&&a.shouldFocus&&s&&s.focus&&s.focus()},F=e=>m.state.subscribe({next:t=>{var a,n,o;a=e.name,n=t.name,o=e.exact,a&&n&&a!==n&&!Ns(a).some(e=>e&&(o?e===n:e.startsWith(n)||n.startsWith(e)))||!((e,t,a,r)=>{a(e);const{name:n}=e,s=Pr(e,Rn);return Cs(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(e=>t[e]===(!r||os))})(t,e.formState||d,z,e.reRenderRoot)||e.callback(Pe(Pe(Pe({values:Pe({},i)},r),t),{},{defaultValues:s}))}}).unsubscribe,O=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const o of e?Ns(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(Is(n,o),Is(i,o)),!t.keepError&&Is(r.errors,o),!t.keepDirty&&Is(r.dirtyFields,o),!t.keepTouched&&Is(r.touchedFields,o),!t.keepIsValidating&&Is(r.validatingFields,o),!a.shouldUnregister&&!t.keepDefaultValue&&Is(s,o);m.state.next({values:Jn(i)}),m.state.next(Pe(Pe({},r),t.keepDirty?{isDirty:_()}:{})),!t.keepIsValid&&p()},I=e=>{let{disabled:t,name:a}=e;(Zn(t)&&o.mount||t||l.disabled.has(a))&&(t?l.disabled.add(a):l.disabled.delete(a))},R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Xn(n,e);const i=Zn(t.disabled)||Zn(a.disabled);return es(n,e,Pe(Pe({},r||{}),{},{_f:Pe(Pe({},r&&r._f?r._f:{ref:{name:e}}),{},{name:e,mount:!0},t)})),l.mount.add(e),r?I({disabled:Zn(t.disabled)?t.disabled:a.disabled,name:e}):x(e,!0,t.value),Pe(Pe(Pe({},i?{disabled:t.disabled||a.disabled}:{}),a.progressive?{required:!!t.required,min:Qs(t.min),max:Qs(t.max),minLength:Qs(t.minLength),maxLength:Qs(t.maxLength),pattern:Qs(t.pattern)}:{}),{},{name:e,onChange:S,onBlur:S,ref:i=>{if(i){R(e,t),r=Xn(n,e);const a=Gn(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,o=(e=>Fs(e)||qn(e))(a),l=r._f.refs||[];if(o?l.find(e=>e===a):a===r._f.ref)return;es(n,e,{_f:Pe(Pe({},r._f),o?{refs:[...l.filter(Os),a,...Array.isArray(Xn(s,e))?[{}]:[]],ref:{type:a.type,name:e}}:{ref:a})}),x(e,!1,void 0,a)}else r=Xn(n,e,{}),r._f&&(r._f.mount=!1),(a.shouldUnregister||t.shouldUnregister)&&(!Vn(l.array,e)||!o.action)&&l.unMount.add(e)}})},D=()=>a.shouldFocusError&&$s(n,C,l.mount),M=(e,t)=>async s=>{let o;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let c=Jn(i);if(m.state.next({isSubmitting:!0}),a.resolver){const{errors:e,values:t}=await v();r.errors=e,c=Jn(t)}else await b(n);if(l.disabled.size)for(const e of l.disabled)Is(c,e);if(Is(r.errors,"root"),Cs(r.errors)){m.state.next({errors:{}});try{await e(c,s)}catch(d){o=d}}else t&&await t(Pe({},r.errors),s),D(),setTimeout(D);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Cs(r.errors)&&!o,submitCount:r.submitCount+1,errors:r.errors}),o)throw o},T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=e?Jn(e):s,u=Jn(c),h=Cs(e),p=h?s:u;if(t.keepDefaultValues||(s=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(Ms(s,i))]);for(const t of Array.from(e))Xn(r.dirtyFields,t)?es(p,t,Xn(i,t)):k(t,Xn(p,t))}else{if(Qn&&Gn(e))for(const e of l.mount){const t=Xn(n,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(Ps(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)k(e,Xn(p,e));else n={}}i=a.shouldUnregister?t.keepDefaultValues?Jn(s):{}:Jn(p),m.array.next({values:Pe({},p)}),m.state.next({values:Pe({},p)})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!t.keepIsValid||!!t.keepDirtyValues,o.watch=!!a.shouldUnregister,m.state.next({submitCount:t.keepSubmitCount?r.submitCount:0,isDirty:!h&&(t.keepDirty?r.isDirty:!(!t.keepDefaultValues||js(e,s))),isSubmitted:!!t.keepIsSubmitted&&r.isSubmitted,dirtyFields:h?{}:t.keepDirtyValues?t.keepDefaultValues&&i?Ms(s,i):r.dirtyFields:t.keepDefaultValues&&e?Ms(s,e):t.keepDirty?r.dirtyFields:{},touchedFields:t.keepTouched?r.touchedFields:{},errors:t.keepErrors?r.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1,defaultValues:s})},q=(e,t)=>T(Ls(e)?e(i):e,t),z=e=>{r=Pe(Pe({},r),e)},B={control:{register:R,unregister:O,getFieldState:P,handleSubmit:M,setError:E,_subscribe:F,_runSchema:v,_focusError:D,_getWatch:j,_getDirty:_,_setValid:p,_setFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,h=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],p=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&l&&!a.disabled){if(o.action=!0,p&&Array.isArray(Xn(n,e))){const t=l(Xn(n,e),c.argA,c.argB);h&&es(n,e,t)}if(p&&Array.isArray(Xn(r.errors,e))){const t=l(Xn(r.errors,e),c.argA,c.argB);h&&es(r.errors,e,t),((e,t)=>{!Kn(Xn(e,t)).length&&Is(e,t)})(r.errors,e)}if((d.touchedFields||u.touchedFields)&&p&&Array.isArray(Xn(r.touchedFields,e))){const t=l(Xn(r.touchedFields,e),c.argA,c.argB);h&&es(r.touchedFields,e,t)}(d.dirtyFields||u.dirtyFields)&&(r.dirtyFields=Ms(s,i)),m.state.next({name:e,isDirty:_(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else es(i,e,t)},_setDisabledField:I,_setErrors:e=>{r.errors=e,m.state.next({errors:r.errors,isValid:!1})},_getFieldArray:e=>Kn(Xn(o.mount?i:s,e,a.shouldUnregister?Xn(s,e,[]):[])),_reset:T,_resetDefaultValues:()=>Ls(a.defaultValues)&&a.defaultValues().then(e=>{q(e,a.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=Xn(n,e);t&&(t._f.refs?t._f.refs.every(e=>!Os(e)):!Os(t._f.ref))&&O(e)}l.unMount=new Set},_disableForm:e=>{Zn(e)&&(m.state.next({disabled:e}),$s(n,(t,a)=>{const r=Xn(n,a);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:m,_proxyFormState:d,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(e){o=e},get _defaultValues(){return s},get _names(){return l},set _names(e){l=e},get _formState(){return r},get _options(){return a},set _options(e){a=Pe(Pe({},a),e)}},subscribe:e=>(o.mount=!0,u=Pe(Pe({},u),e.formState),F(Pe(Pe({},e),{},{formState:u}))),trigger:A,register:R,handleSubmit:M,watch:(e,t)=>Ls(e)?m.state.subscribe({next:a=>"values"in a&&e(j(void 0,t),a)}):j(e,t,!0),setValue:k,getValues:L,reset:q,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Xn(n,e)&&(Gn(t.defaultValue)?k(e,Jn(Xn(s,e))):(k(e,t.defaultValue),es(s,e,Jn(t.defaultValue))),t.keepTouched||Is(r.touchedFields,e),t.keepDirty||(Is(r.dirtyFields,e),r.isDirty=t.defaultValue?_(e,Jn(Xn(s,e))):_()),t.keepError||(Is(r.errors,e),d.isValid&&p()),m.state.next(Pe({},r)))},clearErrors:e=>{e&&Ns(e).forEach(e=>Is(r.errors,e)),m.state.next({errors:e?r.errors:{}})},unregister:O,setError:E,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=Xn(n,e),r=a&&a._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&Ls(e.select)&&e.select())}},getFieldState:P};return Pe(Pe({},B),{},{formControl:B})}var si=()=>{if("undefined"!==typeof crypto&&crypto.randomUUID)return crypto.randomUUID();const e="undefined"===typeof performance?Date.now():1e3*performance.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const a=(16*Math.random()+e)%16|0;return("x"==t?a:3&a|8).toString(16)})},ii=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a.shouldFocus||Gn(a.shouldFocus)?a.focusName||"".concat(e,".").concat(Gn(a.focusIndex)?t:a.focusIndex,"."):""},oi=(e,t)=>[...e,...Ns(t)],li=e=>Array.isArray(e)?e.map(()=>{}):void 0;function ci(e,t,a){return[...e.slice(0,t),...Ns(a),...e.slice(t)]}var di=(e,t,a)=>Array.isArray(e)?(Gn(e[a])&&(e[a]=void 0),e.splice(a,0,e.splice(t,1)[0]),e):[],ui=(e,t)=>[...Ns(t),...Ns(e)];var mi=(e,t)=>Gn(t)?[]:function(e,t){let a=0;const r=[...e];for(const n of t)r.splice(n-a,1),a++;return Kn(r).length?r:[]}(e,Ns(t).sort((e,t)=>e-t)),hi=(e,t,a)=>{[e[t],e[a]]=[e[a],e[t]]},pi=(e,t,a)=>(e[t]=a,e);function fi(e){const t=xs(),{control:a=t.control,name:n,keyName:s="id",shouldUnregister:i,rules:o}=e,[l,c]=r.useState(a._getFieldArray(n)),d=r.useRef(a._getFieldArray(n).map(si)),u=r.useRef(l),m=r.useRef(!1);u.current=l,a._names.array.add(n),r.useMemo(()=>o&&a.register(n,o),[a,o,n]),ys(()=>a._subjects.array.subscribe({next:e=>{let{values:t,name:a}=e;if(a===n||!a){const e=Xn(t,n);Array.isArray(e)&&(c(e),d.current=e.map(si))}}}).unsubscribe,[a,n]);const h=r.useCallback(e=>{m.current=!0,a._setFieldArray(n,e)},[a,n]);return r.useEffect(()=>{if(a._state.action=!1,Ks(n,a._names)&&a._subjects.state.next(Pe({},a._formState)),m.current&&(!Js(a._options.mode).isOnSubmit||a._formState.isSubmitted)&&!Js(a._options.reValidateMode).isOnSubmit)if(a._options.resolver)a._runSchema([n]).then(e=>{const t=Xn(e.errors,n),r=Xn(a._formState.errors,n);(r?!t&&r.type||t&&(r.type!==t.type||r.message!==t.message):t&&t.type)&&(t?es(a._formState.errors,n,t):Is(a._formState.errors,n),a._subjects.state.next({errors:a._formState.errors}))});else{const e=Xn(a._fields,n);!e||!e._f||Js(a._options.reValidateMode).isOnSubmit&&Js(a._options.mode).isOnSubmit||ai(e,a._names.disabled,a._formValues,a._options.criteriaMode===os,a._options.shouldUseNativeValidation,!0).then(e=>!Cs(e)&&a._subjects.state.next({errors:Zs(a._formState.errors,e,n)}))}a._subjects.state.next({name:n,values:Jn(a._formValues)}),a._names.focus&&$s(a._fields,(e,t)=>{if(a._names.focus&&t.startsWith(a._names.focus)&&e.focus)return e.focus(),1}),a._names.focus="",a._setValid(),m.current=!1},[l,n,a]),r.useEffect(()=>(!Xn(a._formValues,n)&&a._setFieldArray(n),()=>{a._options.shouldUnregister||i?a.unregister(n):((e,t)=>{const r=Xn(a._fields,e);r&&r._f&&(r._f.mount=t)})(n,!1)}),[n,a,s,i]),{swap:r.useCallback((e,t)=>{const r=a._getFieldArray(n);hi(r,e,t),hi(d.current,e,t),h(r),c(r),a._setFieldArray(n,r,hi,{argA:e,argB:t},!1)},[h,n,a]),move:r.useCallback((e,t)=>{const r=a._getFieldArray(n);di(r,e,t),di(d.current,e,t),h(r),c(r),a._setFieldArray(n,r,di,{argA:e,argB:t},!1)},[h,n,a]),prepend:r.useCallback((e,t)=>{const r=Ns(Jn(e)),s=ui(a._getFieldArray(n),r);a._names.focus=ii(n,0,t),d.current=ui(d.current,r.map(si)),h(s),c(s),a._setFieldArray(n,s,ui,{argA:li(e)})},[h,n,a]),append:r.useCallback((e,t)=>{const r=Ns(Jn(e)),s=oi(a._getFieldArray(n),r);a._names.focus=ii(n,s.length-1,t),d.current=oi(d.current,r.map(si)),h(s),c(s),a._setFieldArray(n,s,oi,{argA:li(e)})},[h,n,a]),remove:r.useCallback(e=>{const t=mi(a._getFieldArray(n),e);d.current=mi(d.current,e),h(t),c(t),!Array.isArray(Xn(a._fields,n))&&es(a._fields,n,void 0),a._setFieldArray(n,t,mi,{argA:e})},[h,n,a]),insert:r.useCallback((e,t,r)=>{const s=Ns(Jn(t)),i=ci(a._getFieldArray(n),e,s);a._names.focus=ii(n,e,r),d.current=ci(d.current,e,s.map(si)),h(i),c(i),a._setFieldArray(n,i,ci,{argA:e,argB:li(t)})},[h,n,a]),update:r.useCallback((e,t)=>{const r=Jn(t),s=pi(a._getFieldArray(n),e,r);d.current=[...s].map((t,a)=>t&&a!==e?d.current[a]:si()),h(s),c([...s]),a._setFieldArray(n,s,pi,{argA:e,argB:r},!0,!1)},[h,n,a]),replace:r.useCallback(e=>{const t=Ns(Jn(e));d.current=t.map(si),h([...t]),c([...t]),a._setFieldArray(n,[...t],e=>e,{},!0,!1)},[h,n,a]),fields:r.useMemo(()=>l.map((e,t)=>Pe(Pe({},e),{},{[s]:d.current[t]||si()})),[l,s])}}function xi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=r.useRef(void 0),a=r.useRef(void 0),[n,s]=r.useState({isDirty:!1,isValidating:!1,isLoading:Ls(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Ls(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current=Pe(Pe({},e.formControl),{},{formState:n}),e.defaultValues&&!Ls(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const a=ni(e),{formControl:r}=a,s=Pr(a,Tn);t.current=Pe(Pe({},s),{},{formState:n})}const i=t.current.control;return i._options=e,ys(()=>{const e=i._subscribe({formState:i._proxyFormState,callback:()=>s(Pe({},i._formState)),reRenderRoot:!0});return s(e=>Pe(Pe({},e),{},{isReady:!0})),i._formState.isReady=!0,e},[i]),r.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),r.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),r.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),r.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),r.useEffect(()=>{if(i._proxyFormState.isDirty){const e=i._getDirty();e!==n.isDirty&&i._subjects.state.next({isDirty:e})}},[i,n.isDirty]),r.useEffect(()=>{e.values&&!js(e.values,a.current)?(i._reset(e.values,Pe({keepFieldsRef:!0},i._options.resetOptions)),a.current=e.values,s(e=>Pe({},e))):i._resetDefaultValues()},[i,e.values]),r.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next(Pe({},i._formState))),i._removeUnmounted()}),t.current.formState=gs(n,i),t.current}const gi=e=>{var t;let{caseId:a,isViewOnly:n=!1,onSuccess:s,caseStatus:i=null,onExposeSubmit:o=null}=e;const{user:l}=ar(),c=(0,Ce.useQueryClient)(),{hasPermission:d}=Cr("welfare_checklist","create"),{hasPermission:u}=Cr("welfare_checklist","update"),{hasPermission:m}=Cr("welfare_checklist","all"),[h,p]=(0,r.useState)({}),[f,x]=(0,r.useState)(""),[g,y]=(0,r.useState)({}),[v,b]=(0,r.useState)(""),_="welfare_approved"===i||(null===i||void 0===i?void 0:i.startsWith("submitted_to_executive"))||"executive_approved"===i||"executive_rejected"===i||"finance_disbursement"===i||"completed"===i||"closed"===i,j=n||_,{data:w,isLoading:N}=(0,Ce.useQuery)(["welfareChecklistGrouped"],()=>Za.get("/api/welfare-checklist/items/grouped").then(e=>e.data),{enabled:!!a,retry:!1}),{data:k,isLoading:S}=(0,Ce.useQuery)(["welfareChecklistResponses",a],()=>Za.get("/api/welfare-checklist/responses/".concat(a)).then(e=>e.data),{enabled:!!a,retry:!1}),{data:C}=(0,Ce.useQuery)(["welfareChecklistStatus",a],()=>Za.get("/api/welfare-checklist/status/".concat(a)).then(e=>e.data),{enabled:!!a,retry:!1});(0,r.useEffect)(()=>{if(null!==k&&void 0!==k&&k.responses){const e={};k.responses.forEach(t=>{e[t.checklist_item_id]={properly_filled:t.properly_filled,comments:t.comments||""}}),p(e)}null!==k&&void 0!==k&&k.overall_remarks&&x(k.overall_remarks)},[k]);const A=(0,Ce.useMutation)(async e=>Za.post("/api/welfare-checklist/responses/".concat(a),e),{onSuccess:e=>{var t;c.invalidateQueries(["welfareChecklistResponses",a]),c.invalidateQueries(["welfareChecklistStatus",a]),c.invalidateQueries(["case",a]),c.invalidateQueries(["cases"]),y({}),b((null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Checklist submitted successfully!"),setTimeout(()=>{b("")},5e3),s&&s()},onError:e=>{var t,a;y({submit:(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to submit checklist"})}}),L=(e,t,a)=>{p(r=>Pe(Pe({},r),{},{[e]:Pe(Pe({},r[e]),{},{[t]:a})})),g[e]&&y(t=>{const a=Pe({},t);return delete a[e],a})},P=(0,r.useCallback)(()=>{var e,t;y({});const a=[],r=[];if(null===w||void 0===w||null===(e=w.grouped)||void 0===e||e.forEach(e=>{e.items.forEach(e=>{const t=h[e.id];null!==t&&void 0!==t&&t.properly_filled||(a.push(e.id),y(t=>Pe(Pe({},t),{},{[e.id]:"Please select Y or N"}))),"Y"!==(null===t||void 0===t?void 0:t.properly_filled)||t.comments&&""!==t.comments.trim()||(r.push(e.id),y(t=>Pe(Pe({},t),{},{[e.id]:'Comments are required when "Y" (Yes) is selected'})))})}),a.length>0||r.length>0){const e=a.length>0?"Please fill all checklist items before submitting":'Please add comments for all items marked as "Y" (Yes)';return void y({submit:e})}const n=[];null===w||void 0===w||null===(t=w.grouped)||void 0===t||t.forEach(e=>{e.items.forEach(e=>{n.push({checklist_item_id:e.id,properly_filled:h[e.id].properly_filled,comments:h[e.id].comments||""})})}),A.mutate({responses:n,overall_remarks:f})},[w,h,f,A]),E=(null===w||void 0===w?void 0:w.grouped)||[],F=(()=>{let e=0,t=0;return E.forEach(a=>{a.items.forEach(a=>{var r;e++,null!==(r=h[a.id])&&void 0!==r&&r.properly_filled&&t++})}),{total:e,filled:t,isComplete:e>0&&t===e,completionPercentage:e>0?Math.round(t/e*100):0}})(),O=null===l||void 0===l||null===(t=l.role)||void 0===t?void 0:t.toLowerCase(),I=!j&&(d||u||m||("welfare_reviewer"===O||"welfare"===O||"admin"===O||"super_admin"===O)||"admin"===(null===l||void 0===l?void 0:l.role)||"super_admin"===(null===l||void 0===l?void 0:l.role));return(0,r.useEffect)(()=>{o&&o({submit:P,canSubmit:I,isSubmitting:A.isLoading})},[P,j,I,A.isLoading,o,d,u,m]),N||S?(0,er.jsx)(zr,{children:(0,er.jsx)(zr.Content,{children:(0,er.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})})}):(0,er.jsxs)(er.Fragment,{children:[v&&(0,er.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:(0,er.jsx)(Wr,{severity:"success",onClose:()=>b(""),autoClose:!0,duration:5e3,children:v})}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"File Submission Checklist: Welfare / Upliftment Cases"}),F.total>0&&(0,er.jsxs)(pn,{variant:F.isComplete?"success":"warning",size:"sm",children:[F.completionPercentage,"% Complete (",F.filled,"/",F.total,")"]})]})}),(0,er.jsx)(zr.Content,{children:(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)(Ur,{severity:"info",children:(0,er.jsxs)("div",{className:"text-sm",children:[(0,er.jsx)("p",{className:"font-medium mb-1",children:"Purpose of this checklist:"}),(0,er.jsx)("p",{className:"mb-1",children:"This checklist is NOT to check if sections have been filled or not. All sections of the form must be filled."}),(0,er.jsx)("p",{children:"The purpose is to ensure details are correctly filled for realistic assessment. Mark YES if the section is filled correctly and relevant details are added. Mention in comments if addition/modification is required."})]})}),E.map(e=>(0,er.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,er.jsxs)("div",{className:"bg-yellow-50 px-4 py-3 border-b",children:[(0,er.jsx)("h4",{className:"font-semibold text-gray-900",children:e.category_name}),e.description&&(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),(0,er.jsx)("div",{className:"bg-white",children:(0,er.jsxs)("table",{className:"w-full table-fixed",children:[(0,er.jsx)("thead",{className:"bg-green-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b w-[10%]",children:"Form Section"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b w-[35%]",children:"Checklist Details"}),(0,er.jsx)("th",{className:"px-4 py-2 text-center text-sm font-medium text-gray-700 border-b w-[15%]",children:"Properly filled: Y/N"}),(0,er.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700 border-b w-[40%]",children:"Comments"})]})}),(0,er.jsx)("tbody",{children:e.items.map((e,t)=>{const a=h[e.id]||{properly_filled:"",comments:""},r=g[e.id];return(0,er.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 border-b w-[10%]",children:e.form_section}),(0,er.jsx)("td",{className:"px-4 py-3 text-sm text-gray-900 border-b w-[35%]",children:(0,er.jsxs)("span",{className:"flex items-start",children:[(0,er.jsx)("span",{className:"break-words whitespace-normal",children:e.checklist_detail}),e.is_compulsory&&(0,er.jsx)("span",{className:"text-red-600 font-bold ml-1 flex-shrink-0",children:"*"})]})}),(0,er.jsxs)("td",{className:"px-4 py-3 text-center border-b w-[15%]",children:[j?(0,er.jsx)(pn,{variant:"Y"===a.properly_filled?"success":"N"===a.properly_filled?"error":"secondary",size:"sm",children:a.properly_filled||"-"}):(0,er.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,er.jsxs)("label",{className:"flex items-center space-x-1 cursor-pointer",children:[(0,er.jsx)("input",{type:"radio",name:"response_".concat(e.id),value:"Y",checked:"Y"===a.properly_filled,onChange:t=>L(e.id,"properly_filled",t.target.value),className:"w-4 h-4 text-primary-600 border-gray-300 focus:ring-primary-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Y"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-1 cursor-pointer",children:[(0,er.jsx)("input",{type:"radio",name:"response_".concat(e.id),value:"N",checked:"N"===a.properly_filled,onChange:t=>L(e.id,"properly_filled",t.target.value),className:"w-4 h-4 text-primary-600 border-gray-300 focus:ring-primary-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"N"})]})]}),r&&(0,er.jsx)("p",{className:"text-xs text-red-600 mt-1",children:r})]}),(0,er.jsx)("td",{className:"px-4 py-3 border-b w-[40%]",children:j?(0,er.jsx)("p",{className:"text-sm text-gray-700",children:a.comments||"-"}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("textarea",{value:a.comments,onChange:t=>L(e.id,"comments",t.target.value),placeholder:"Y"===a.properly_filled?'Comments are required when "Y" is selected':"Any addition, modification required in file?",rows:4,className:"w-full px-3 py-2 text-sm border rounded focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-y ".concat("Y"!==a.properly_filled||a.comments&&""!==a.comments.trim()?"border-gray-300":"border-red-300 bg-red-50")}),"Y"===a.properly_filled&&(!a.comments||""===a.comments.trim())&&(0,er.jsx)("p",{className:"text-xs text-red-600 mt-1",children:'Comments are required when "Y" is selected'})]})})]},e.id)})})]})})]},e.id)),E.length>0&&(0,er.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,er.jsx)("div",{className:"bg-yellow-50 px-4 py-3 border-b",children:(0,er.jsx)("h4",{className:"font-semibold text-gray-900",children:"Overall Remarks"})}),(0,er.jsx)("div",{className:"bg-white p-4",children:n?(0,er.jsx)("p",{className:"text-sm text-gray-700",children:f||"No remarks"}):(0,er.jsx)("textarea",{value:f,onChange:e=>x(e.target.value),placeholder:"Enter overall remarks...",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})})]}),v&&(0,er.jsx)(Ur,{severity:"success",className:"mb-4",children:v}),g.submit&&(0,er.jsx)(Ur,{severity:"error",children:g.submit}),I&&(0,er.jsx)("div",{className:"flex justify-end",children:(0,er.jsx)(Fr,{onClick:P,loading:A.isLoading,disabled:A.isLoading,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-2",children:A.isLoading?"Submitting...":"Submit Checklist"})}),j&&(0,er.jsx)(Ur,{severity:"info",children:_?"This case has been approved. The checklist is now read-only.":"You are viewing the checklist. Only welfare department can fill or modify it."})]})})]})]})};gi.displayName="WelfareChecklistForm";const yi=gi,vi=e=>{let{value:t,onChange:a,error:n}=e;const s=(0,r.useRef)(null),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=s.current;if(!e)return;const a=e.getContext("2d");if(a.strokeStyle="#000000",a.lineWidth=2,a.lineCap="round",a.lineJoin="round",t&&t.startsWith("data:image")){const r=new Image;r.onload=()=>{a.clearRect(0,0,e.width,e.height),a.drawImage(r,0,0,e.width,e.height),c(!0)},r.src=t}},[t]);const d=()=>{if(i){o(!1),c(!0);const e=s.current.toDataURL("image/png");a(e)}};return(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 bg-white",children:(0,er.jsx)("canvas",{ref:s,width:400,height:150,className:"border border-gray-200 rounded cursor-crosshair",onMouseDown:e=>{o(!0);const t=s.current,a=t.getBoundingClientRect(),r=e.clientX-a.left,n=e.clientY-a.top,i=t.getContext("2d");i.beginPath(),i.moveTo(r,n)},onMouseMove:e=>{if(!i)return;const t=s.current,a=t.getBoundingClientRect(),r=e.clientX-a.left,n=e.clientY-a.top,o=t.getContext("2d");o.lineTo(r,n),o.stroke()},onMouseUp:d,onMouseLeave:d})}),(0,er.jsxs)("div",{className:"flex justify-between items-center",children:[(0,er.jsx)("p",{className:"text-sm text-gray-500",children:l?"Signature captured":"Draw your signature above"}),l&&(0,er.jsx)("button",{type:"button",onClick:()=>{const e=s.current;e.getContext("2d").clearRect(0,0,e.width,e.height),c(!1),a("")},className:"text-sm text-red-600 hover:text-red-800",children:"Clear"})]}),n&&(0,er.jsx)("p",{className:"text-sm text-red-600",children:n})]})};var bi=a(2284),_i=Uint8Array,ji=Uint16Array,wi=Int32Array,Ni=new _i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ki=new _i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Si=new _i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ci=function(e,t){for(var a=new ji(31),r=0;r<31;++r)a[r]=t+=1<<e[r-1];var n=new wi(a[30]);for(r=1;r<30;++r)for(var s=a[r];s<a[r+1];++s)n[s]=s-a[r]<<5|r;return{b:a,r:n}},Ai=Ci(Ni,2),Li=Ai.b,Pi=Ai.r;Li[28]=258,Pi[258]=28;for(var Ei=Ci(ki,0),Fi=Ei.b,Oi=Ei.r,Ii=new ji(32768),Ri=0;Ri<32768;++Ri){var Di=(43690&Ri)>>1|(21845&Ri)<<1;Di=(61680&(Di=(52428&Di)>>2|(13107&Di)<<2))>>4|(3855&Di)<<4,Ii[Ri]=((65280&Di)>>8|(255&Di)<<8)>>1}var Mi=function(e,t,a){for(var r=e.length,n=0,s=new ji(t);n<r;++n)e[n]&&++s[e[n]-1];var i,o=new ji(t);for(n=1;n<t;++n)o[n]=o[n-1]+s[n-1]<<1;if(a){i=new ji(1<<t);var l=15-t;for(n=0;n<r;++n)if(e[n])for(var c=n<<4|e[n],d=t-e[n],u=o[e[n]-1]++<<d,m=u|(1<<d)-1;u<=m;++u)i[Ii[u]>>l]=c}else for(i=new ji(r),n=0;n<r;++n)e[n]&&(i[n]=Ii[o[e[n]-1]++]>>15-e[n]);return i},Ti=new _i(288);for(Ri=0;Ri<144;++Ri)Ti[Ri]=8;for(Ri=144;Ri<256;++Ri)Ti[Ri]=9;for(Ri=256;Ri<280;++Ri)Ti[Ri]=7;for(Ri=280;Ri<288;++Ri)Ti[Ri]=8;var qi=new _i(32);for(Ri=0;Ri<32;++Ri)qi[Ri]=5;var zi=Mi(Ti,9,0),Bi=Mi(Ti,9,1),Ui=Mi(qi,5,0),Hi=Mi(qi,5,1),Wi=function(e){for(var t=e[0],a=1;a<e.length;++a)e[a]>t&&(t=e[a]);return t},Vi=function(e,t,a){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&a},Qi=function(e,t){var a=t/8|0;return(e[a]|e[a+1]<<8|e[a+2]<<16)>>(7&t)},Ji=function(e){return(e+7)/8|0},Yi=function(e,t,a){return(null==t||t<0)&&(t=0),(null==a||a>e.length)&&(a=e.length),new _i(e.subarray(t,a))},Gi=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ki=function(e,t,a){var r=new Error(t||Gi[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Ki),!a)throw r;return r},$i=function(e,t,a,r){var n=e.length,s=r?r.length:0;if(!n||t.f&&!t.l)return a||new _i(0);var i=!a,o=i||2!=t.i,l=t.i;i&&(a=new _i(3*n));var c=function(e){var t=a.length;if(e>t){var r=new _i(Math.max(2*t,e));r.set(a),a=r}},d=t.f||0,u=t.p||0,m=t.b||0,h=t.l,p=t.d,f=t.m,x=t.n,g=8*n;do{if(!h){d=Vi(e,u,1);var y=Vi(e,u+1,3);if(u+=3,!y){var v=e[(P=Ji(u)+4)-4]|e[P-3]<<8,b=P+v;if(b>n){l&&Ki(0);break}o&&c(m+v),a.set(e.subarray(P,b),m),t.b=m+=v,t.p=u=8*b,t.f=d;continue}if(1==y)h=Bi,p=Hi,f=9,x=5;else if(2==y){var _=Vi(e,u,31)+257,j=Vi(e,u+10,15)+4,w=_+Vi(e,u+5,31)+1;u+=14;for(var N=new _i(w),k=new _i(19),S=0;S<j;++S)k[Si[S]]=Vi(e,u+3*S,7);u+=3*j;var C=Wi(k),A=(1<<C)-1,L=Mi(k,C,1);for(S=0;S<w;){var P,E=L[Vi(e,u,A)];if(u+=15&E,(P=E>>4)<16)N[S++]=P;else{var F=0,O=0;for(16==P?(O=3+Vi(e,u,3),u+=2,F=N[S-1]):17==P?(O=3+Vi(e,u,7),u+=3):18==P&&(O=11+Vi(e,u,127),u+=7);O--;)N[S++]=F}}var I=N.subarray(0,_),R=N.subarray(_);f=Wi(I),x=Wi(R),h=Mi(I,f,1),p=Mi(R,x,1)}else Ki(1);if(u>g){l&&Ki(0);break}}o&&c(m+131072);for(var D=(1<<f)-1,M=(1<<x)-1,T=u;;T=u){var q=(F=h[Qi(e,u)&D])>>4;if((u+=15&F)>g){l&&Ki(0);break}if(F||Ki(2),q<256)a[m++]=q;else{if(256==q){T=u,h=null;break}var z=q-254;if(q>264){var B=Ni[S=q-257];z=Vi(e,u,(1<<B)-1)+Li[S],u+=B}var U=p[Qi(e,u)&M],H=U>>4;U||Ki(3),u+=15&U;R=Fi[H];if(H>3){B=ki[H];R+=Qi(e,u)&(1<<B)-1,u+=B}if(u>g){l&&Ki(0);break}o&&c(m+131072);var W=m+z;if(m<R){var V=s-R,Q=Math.min(R,W);for(V+m<0&&Ki(3);m<Q;++m)a[m]=r[V+m]}for(;m<W;++m)a[m]=a[m-R]}}t.l=h,t.p=T,t.b=m,t.f=d,h&&(d=1,t.m=f,t.d=p,t.n=x)}while(!d);return m!=a.length&&i?Yi(a,0,m):a.subarray(0,m)},Xi=function(e,t,a){a<<=7&t;var r=t/8|0;e[r]|=a,e[r+1]|=a>>8},Zi=function(e,t,a){a<<=7&t;var r=t/8|0;e[r]|=a,e[r+1]|=a>>8,e[r+2]|=a>>16},eo=function(e,t){for(var a=[],r=0;r<e.length;++r)e[r]&&a.push({s:r,f:e[r]});var n=a.length,s=a.slice();if(!n)return{t:oo,l:0};if(1==n){var i=new _i(a[0].s+1);return i[a[0].s]=1,{t:i,l:1}}a.sort(function(e,t){return e.f-t.f}),a.push({s:-1,f:25001});var o=a[0],l=a[1],c=0,d=1,u=2;for(a[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=n-1;)o=a[a[c].f<a[u].f?c++:u++],l=a[c!=d&&a[c].f<a[u].f?c++:u++],a[d++]={s:-1,f:o.f+l.f,l:o,r:l};var m=s[0].s;for(r=1;r<n;++r)s[r].s>m&&(m=s[r].s);var h=new ji(m+1),p=to(a[d-1],h,0);if(p>t){r=0;var f=0,x=p-t,g=1<<x;for(s.sort(function(e,t){return h[t.s]-h[e.s]||e.f-t.f});r<n;++r){var y=s[r].s;if(!(h[y]>t))break;f+=g-(1<<p-h[y]),h[y]=t}for(f>>=x;f>0;){var v=s[r].s;h[v]<t?f-=1<<t-h[v]++-1:++r}for(;r>=0&&f;--r){var b=s[r].s;h[b]==t&&(--h[b],++f)}p=t}return{t:new _i(h),l:p}},to=function(e,t,a){return-1==e.s?Math.max(to(e.l,t,a+1),to(e.r,t,a+1)):t[e.s]=a},ao=function(e){for(var t=e.length;t&&!e[--t];);for(var a=new ji(++t),r=0,n=e[0],s=1,i=function(e){a[r++]=e},o=1;o<=t;++o)if(e[o]==n&&o!=t)++s;else{if(!n&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(n),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(n);s=1,n=e[o]}return{c:a.subarray(0,r),n:t}},ro=function(e,t){for(var a=0,r=0;r<t.length;++r)a+=e[r]*t[r];return a},no=function(e,t,a){var r=a.length,n=Ji(t+2);e[n]=255&r,e[n+1]=r>>8,e[n+2]=255^e[n],e[n+3]=255^e[n+1];for(var s=0;s<r;++s)e[n+s+4]=a[s];return 8*(n+4+r)},so=function(e,t,a,r,n,s,i,o,l,c,d){Xi(t,d++,a),++n[256];for(var u=eo(n,15),m=u.t,h=u.l,p=eo(s,15),f=p.t,x=p.l,g=ao(m),y=g.c,v=g.n,b=ao(f),_=b.c,j=b.n,w=new ji(19),N=0;N<y.length;++N)++w[31&y[N]];for(N=0;N<_.length;++N)++w[31&_[N]];for(var k=eo(w,7),S=k.t,C=k.l,A=19;A>4&&!S[Si[A-1]];--A);var L,P,E,F,O=c+5<<3,I=ro(n,Ti)+ro(s,qi)+i,R=ro(n,m)+ro(s,f)+i+14+3*A+ro(w,S)+2*w[16]+3*w[17]+7*w[18];if(l>=0&&O<=I&&O<=R)return no(t,d,e.subarray(l,l+c));if(Xi(t,d,1+(R<I)),d+=2,R<I){L=Mi(m,h,0),P=m,E=Mi(f,x,0),F=f;var D=Mi(S,C,0);Xi(t,d,v-257),Xi(t,d+5,j-1),Xi(t,d+10,A-4),d+=14;for(N=0;N<A;++N)Xi(t,d+3*N,S[Si[N]]);d+=3*A;for(var M=[y,_],T=0;T<2;++T){var q=M[T];for(N=0;N<q.length;++N){var z=31&q[N];Xi(t,d,D[z]),d+=S[z],z>15&&(Xi(t,d,q[N]>>5&127),d+=q[N]>>12)}}}else L=zi,P=Ti,E=Ui,F=qi;for(N=0;N<o;++N){var B=r[N];if(B>255){Zi(t,d,L[(z=B>>18&31)+257]),d+=P[z+257],z>7&&(Xi(t,d,B>>23&31),d+=Ni[z]);var U=31&B;Zi(t,d,E[U]),d+=F[U],U>3&&(Zi(t,d,B>>5&8191),d+=ki[U])}else Zi(t,d,L[B]),d+=P[B]}return Zi(t,d,L[256]),d+P[256]},io=new wi([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),oo=new _i(0),lo=function(e,t,a,r,n,s){var i=s.z||e.length,o=new _i(r+i+5*(1+Math.ceil(i/7e3))+n),l=o.subarray(r,o.length-n),c=s.l,d=7&(s.r||0);if(t){d&&(l[0]=s.r>>3);for(var u=io[t-1],m=u>>13,h=8191&u,p=(1<<a)-1,f=s.p||new ji(32768),x=s.h||new ji(p+1),g=Math.ceil(a/3),y=2*g,v=function(t){return(e[t]^e[t+1]<<g^e[t+2]<<y)&p},b=new wi(25e3),_=new ji(288),j=new ji(32),w=0,N=0,k=s.i||0,S=0,C=s.w||0,A=0;k+2<i;++k){var L=v(k),P=32767&k,E=x[L];if(f[P]=E,x[L]=P,C<=k){var F=i-k;if((w>7e3||S>24576)&&(F>423||!c)){d=so(e,l,0,b,_,j,N,S,A,k-A,d),S=w=N=0,A=k;for(var O=0;O<286;++O)_[O]=0;for(O=0;O<30;++O)j[O]=0}var I=2,R=0,D=h,M=P-E&32767;if(F>2&&L==v(k-M))for(var T=Math.min(m,F)-1,q=Math.min(32767,k),z=Math.min(258,F);M<=q&&--D&&P!=E;){if(e[k+I]==e[k+I-M]){for(var B=0;B<z&&e[k+B]==e[k+B-M];++B);if(B>I){if(I=B,R=M,B>T)break;var U=Math.min(M,B-2),H=0;for(O=0;O<U;++O){var W=k-M+O&32767,V=W-f[W]&32767;V>H&&(H=V,E=W)}}}M+=(P=E)-(E=f[P])&32767}if(R){b[S++]=268435456|Pi[I]<<18|Oi[R];var Q=31&Pi[I],J=31&Oi[R];N+=Ni[Q]+ki[J],++_[257+Q],++j[J],C=k+I,++w}else b[S++]=e[k],++_[e[k]]}}for(k=Math.max(k,C);k<i;++k)b[S++]=e[k],++_[e[k]];d=so(e,l,c,b,_,j,N,S,A,k-A,d),c||(s.r=7&d|l[d/8|0]<<3,d-=7,s.h=x,s.p=f,s.i=k,s.w=C)}else{for(k=s.w||0;k<i+c;k+=65535){var Y=k+65535;Y>=i&&(l[d/8|0]=c,Y=i),d=no(l,d+1,e.subarray(k,Y))}s.i=i}return Yi(o,0,r+Ji(d)+n)},co=function(){var e=1,t=0;return{p:function(a){for(var r=e,n=t,s=0|a.length,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)n+=r+=a[i];r=(65535&r)+15*(r>>16),n=(65535&n)+15*(n>>16)}e=r,t=n},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},uo=function(e,t,a,r,n){if(!n&&(n={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new _i(s.length+e.length);i.set(s),i.set(e,s.length),e=i,n.w=s.length}return lo(e,null==t.level?6:t.level,null==t.mem?n.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,a,r,n)},mo=function(e,t,a){for(;a;++t)e[t]=a,a>>>=8},ho=function(e,t){var a=t.level,r=0==a?0:a<6?1:9==a?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var n=co();n.p(t.dictionary),mo(e,2,n.d())}},po=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ki(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&Ki(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function fo(e,t){t||(t={});var a=co();a.p(e);var r=uo(e,t,t.dictionary?6:2,4);return ho(r,t),mo(r,r.length-4,a.d()),r}function xo(e,t){return $i(e.subarray(po(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var go="undefined"!=typeof TextDecoder&&new TextDecoder;try{go.decode(oo,{stream:!0})}catch(zh){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var yo=function(){return"undefined"!=typeof window?window:"undefined"!=typeof a.g?a.g:"undefined"!=typeof self?self:this}();function vo(){yo.console&&"function"==typeof yo.console.log&&yo.console.log.apply(yo.console,arguments)}var bo={log:vo,warn:function(e){yo.console&&("function"==typeof yo.console.warn?yo.console.warn.apply(yo.console,arguments):vo.call(null,arguments))},error:function(e){yo.console&&("function"==typeof yo.console.error?yo.console.error.apply(yo.console,arguments):vo(e))}};function _o(e,t,a){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){So(r.response,t,a)},r.onerror=function(){bo.error("could not download file")},r.send()}function jo(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function wo(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var No,ko,So=yo.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,bi.A)(window))||window!==yo?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,a){var r=yo.URL||yo.webkitURL,n=document.createElement("a");t=t||e.name||"download",n.download=t,n.rel="noopener","string"==typeof e?(n.href=e,n.origin!==location.origin?jo(n.href)?_o(e,t,a):wo(n,n.target="_blank"):wo(n)):(n.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(n.href)},4e4),setTimeout(function(){wo(n)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,a){if(t=t||e.name||"download","string"==typeof e)if(jo(e))_o(e,t,a);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){wo(r)})}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,bi.A)(t)&&(bo.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,a),t)}:function(e,t,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return _o(e,t,a);var n="application/octet-stream"===e.type,s=/constructor/i.test(yo.HTMLElement)||yo.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||n&&s)&&"object"===("undefined"==typeof FileReader?"undefined":(0,bi.A)(FileReader))){var o=new FileReader;o.onloadend=function(){var e=o.result;e=i?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},o.readAsDataURL(e)}else{var l=yo.URL||yo.webkitURL,c=l.createObjectURL(e);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});function Co(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],r=0;r<a.length;r++){var n=a[r].re,s=a[r].process,i=n.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),a=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==a.length&&(a="0"+a),"#"+e+t+a}}function Ao(e,t){var a=e[0],r=e[1],n=e[2],s=e[3];a=Po(a,r,n,s,t[0],7,-680876936),s=Po(s,a,r,n,t[1],12,-389564586),n=Po(n,s,a,r,t[2],17,606105819),r=Po(r,n,s,a,t[3],22,-1044525330),a=Po(a,r,n,s,t[4],7,-176418897),s=Po(s,a,r,n,t[5],12,1200080426),n=Po(n,s,a,r,t[6],17,-1473231341),r=Po(r,n,s,a,t[7],22,-45705983),a=Po(a,r,n,s,t[8],7,1770035416),s=Po(s,a,r,n,t[9],12,-1958414417),n=Po(n,s,a,r,t[10],17,-42063),r=Po(r,n,s,a,t[11],22,-1990404162),a=Po(a,r,n,s,t[12],7,1804603682),s=Po(s,a,r,n,t[13],12,-40341101),n=Po(n,s,a,r,t[14],17,-1502002290),a=Eo(a,r=Po(r,n,s,a,t[15],22,1236535329),n,s,t[1],5,-165796510),s=Eo(s,a,r,n,t[6],9,-1069501632),n=Eo(n,s,a,r,t[11],14,643717713),r=Eo(r,n,s,a,t[0],20,-373897302),a=Eo(a,r,n,s,t[5],5,-701558691),s=Eo(s,a,r,n,t[10],9,38016083),n=Eo(n,s,a,r,t[15],14,-660478335),r=Eo(r,n,s,a,t[4],20,-405537848),a=Eo(a,r,n,s,t[9],5,568446438),s=Eo(s,a,r,n,t[14],9,-1019803690),n=Eo(n,s,a,r,t[3],14,-187363961),r=Eo(r,n,s,a,t[8],20,1163531501),a=Eo(a,r,n,s,t[13],5,-1444681467),s=Eo(s,a,r,n,t[2],9,-51403784),n=Eo(n,s,a,r,t[7],14,1735328473),a=Fo(a,r=Eo(r,n,s,a,t[12],20,-1926607734),n,s,t[5],4,-378558),s=Fo(s,a,r,n,t[8],11,-2022574463),n=Fo(n,s,a,r,t[11],16,1839030562),r=Fo(r,n,s,a,t[14],23,-35309556),a=Fo(a,r,n,s,t[1],4,-1530992060),s=Fo(s,a,r,n,t[4],11,1272893353),n=Fo(n,s,a,r,t[7],16,-155497632),r=Fo(r,n,s,a,t[10],23,-1094730640),a=Fo(a,r,n,s,t[13],4,681279174),s=Fo(s,a,r,n,t[0],11,-358537222),n=Fo(n,s,a,r,t[3],16,-722521979),r=Fo(r,n,s,a,t[6],23,76029189),a=Fo(a,r,n,s,t[9],4,-640364487),s=Fo(s,a,r,n,t[12],11,-421815835),n=Fo(n,s,a,r,t[15],16,530742520),a=Oo(a,r=Fo(r,n,s,a,t[2],23,-995338651),n,s,t[0],6,-198630844),s=Oo(s,a,r,n,t[7],10,1126891415),n=Oo(n,s,a,r,t[14],15,-1416354905),r=Oo(r,n,s,a,t[5],21,-57434055),a=Oo(a,r,n,s,t[12],6,1700485571),s=Oo(s,a,r,n,t[3],10,-1894986606),n=Oo(n,s,a,r,t[10],15,-1051523),r=Oo(r,n,s,a,t[1],21,-2054922799),a=Oo(a,r,n,s,t[8],6,1873313359),s=Oo(s,a,r,n,t[15],10,-30611744),n=Oo(n,s,a,r,t[6],15,-1560198380),r=Oo(r,n,s,a,t[13],21,1309151649),a=Oo(a,r,n,s,t[4],6,-145523070),s=Oo(s,a,r,n,t[11],10,-1120210379),n=Oo(n,s,a,r,t[2],15,718787259),r=Oo(r,n,s,a,t[9],21,-343485551),e[0]=Bo(a,e[0]),e[1]=Bo(r,e[1]),e[2]=Bo(n,e[2]),e[3]=Bo(s,e[3])}function Lo(e,t,a,r,n,s){return t=Bo(Bo(t,e),Bo(r,s)),Bo(t<<n|t>>>32-n,a)}function Po(e,t,a,r,n,s,i){return Lo(t&a|~t&r,e,t,n,s,i)}function Eo(e,t,a,r,n,s,i){return Lo(t&r|a&~r,e,t,n,s,i)}function Fo(e,t,a,r,n,s,i){return Lo(t^a^r,e,t,n,s,i)}function Oo(e,t,a,r,n,s,i){return Lo(a^(t|~r),e,t,n,s,i)}function Io(e){var t,a=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Ao(r,Ro(e.substring(t-64,t)));e=e.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(Ao(r,n),t=0;t<16;t++)n[t]=0;return n[14]=8*a,Ao(r,n),r}function Ro(e){var t,a=[];for(t=0;t<64;t+=4)a[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return a}No=yo.atob.bind(yo),ko=yo.btoa.bind(yo);var Do="0123456789abcdef".split("");function Mo(e){for(var t="",a=0;a<4;a++)t+=Do[e>>8*a+4&15]+Do[e>>8*a&15];return t}function To(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function qo(e){return Io(e).map(To).join("")}var zo="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=Mo(e[t]);return e.join("")}(Io("hello"));function Bo(e,t){if(zo){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}return e+t&4294967295}function Uo(e,t){var a,r,n,s;if(e!==a){for(var i=(n=e,s=1+(256/e.length|0),new Array(s+1).join(n)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+i.charCodeAt(l))%256,o[l]=o[c],o[c]=d}a=e,r=o}else o=r;var u=t.length,m=0,h=0,p="";for(l=0;l<u;l++)h=(h+(d=o[m=(m+1)%256]))%256,o[m]=o[h],o[h]=d,i=o[(o[m]+o[h])%256],p+=String.fromCharCode(t.charCodeAt(l)^i);return p}var Ho={print:4,modify:8,copy:16,"annot-forms":32};function Wo(e,t,a,r){this.v=1,this.r=2;var n=192;e.forEach(function(e){if(void 0!==Ho.perm)throw new Error("Invalid permission: "+e);n+=Ho[e]}),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var s=(t+this.padding).substr(0,32),i=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^n)),this.encryptionKey=qo(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Uo(this.encryptionKey,this.padding)}function Vo(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",a=e.length,r=0;r<a;r++){var n=e.charCodeAt(r);t+=n<33||35===n||37===n||40===n||41===n||47===n||60===n||62===n||91===n||93===n||123===n||125===n||n>126?"#"+("0"+n.toString(16)).slice(-2):e[r]}return t}function Qo(e){if("object"!==(0,bi.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,a,r){if(r=r||!1,"string"!=typeof e||"function"!=typeof a||"boolean"!=typeof r)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var n=Math.random().toString(35);return t[e][n]=[a,!!r],n},this.unsubscribe=function(e){for(var a in t)if(t[a][e])return delete t[a][e],0===Object.keys(t[a]).length&&delete t[a],!0;return!1},this.publish=function(a){if(t.hasOwnProperty(a)){var r=Array.prototype.slice.call(arguments,1),n=[];for(var s in t[a]){var i=t[a][s];try{i[0].apply(e,r)}catch(a){yo.console&&bo.error("jsPDF PubSub Error",a.message,a)}i[1]&&n.push(s)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Jo(e){if(!(this instanceof Jo))return new Jo(e);var t="opacity,stroke-opacity".split(",");for(var a in e)e.hasOwnProperty(a)&&t.indexOf(a)>=0&&(this[a]=e[a]);this.id="",this.objectNumber=-1}function Yo(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Go(e,t,a,r,n){if(!(this instanceof Go))return new Go(e,t,a,r,n);this.type="axial"===e?2:3,this.coords=t,this.colors=a,Yo.call(this,r,n)}function Ko(e,t,a,r,n){if(!(this instanceof Ko))return new Ko(e,t,a,r,n);this.boundingBox=e,this.xStep=t,this.yStep=a,this.stream="",this.cloneIndex=0,Yo.call(this,r,n)}function $o(e){var t,a="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],n=arguments[2],s=arguments[3],i=[],o=1,l=16,c="S",d=null;"object"===(0,bi.A)(e=e||{})&&(a=e.orientation,r=e.unit||r,n=e.format||n,s=e.compress||e.compressPdf||s,null!==(d=e.encryption||null)&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(l=e.floatPrecision),c=e.defaultPathOperation||"S"),i=e.filters||(!0===s?["FlateEncode"]:i),r=r||"mm",a=(""+(a||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,m={},h={internal:{},__private__:{}};h.__private__.PubSub=Qo;var p="1.3",f=h.__private__.getPdfVersion=function(){return p};h.__private__.setPdfVersion=function(e){p=e};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return x};var g=h.__private__.getPageFormat=function(e){return x[e]};n=n||"a4";var y="compat",v="advanced",b=y;function _(){this.saveGraphicsState(),$(new Ee(me,0,0,-me,0,ca()*me).toString()+" cm"),this.setFontSize(this.getFontSize()/me),c="n",b=v}function j(){this.restoreGraphicsState(),c="S",b=y}var w=h.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};h.advancedAPI=function(e){var t=b===y;return t&&_.call(this),"function"!=typeof e||(e(this),t&&j.call(this)),this},h.compatAPI=function(e){var t=b===v;return t&&j.call(this),"function"!=typeof e||(e(this),t&&_.call(this)),this},h.isAdvancedAPI=function(){return b===v};var N,k=function(e){if(b!==v)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},S=h.roundToPrecision=h.__private__.roundToPrecision=function(e,a){var r=t||a;if(isNaN(e)||isNaN(r))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(r).replace(/0+$/,"")};N=h.hpf=h.__private__.hpf="number"==typeof l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,l)}:"smart"===l?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return S(e,16)};var C=h.f2=h.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return S(e,2)},A=h.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return S(e,3)},L=h.scale=h.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return b===y?e*me:b===v?e:void 0},P=function(e){return L(function(e){return b===y?ca()-e:b===v?e:void 0}(e))};h.__private__.setPrecision=h.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var E,F="00000000000000000000000000000000",O=h.__private__.getFileId=function(){return F},I=h.__private__.setFileId=function(e){return F=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():F.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==d&&(vt=new Wo(d.userPermissions,d.userPassword,d.ownerPassword,F)),F};h.setFileId=function(e){return I(e),this},h.getFileId=function(){return O()};var R=h.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),a=t<0?"+":"-",r=Math.floor(Math.abs(t/60)),n=Math.abs(t%60),s=[a,z(r),"'",z(n),"'"].join("");return["D:",e.getFullYear(),z(e.getMonth()+1),z(e.getDate()),z(e.getHours()),z(e.getMinutes()),z(e.getSeconds()),s].join("")},D=h.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),a=parseInt(e.substr(6,2),10)-1,r=parseInt(e.substr(8,2),10),n=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),i=parseInt(e.substr(14,2),10);return new Date(t,a,r,n,s,i,0)},M=h.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=R(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return E=t},T=h.__private__.getCreationDate=function(e){var t=E;return"jsDate"===e&&(t=D(E)),t};h.setCreationDate=function(e){return M(e),this},h.getCreationDate=function(e){return T(e)};var q,z=h.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},B=h.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},U=0,H=[],W=[],V=0,Q=[],J=[],Y=!1,G=W;h.__private__.setCustomOutputDestination=function(e){Y=!0,G=e};var K=function(e){Y||(G=e)};h.__private__.resetCustomOutputDestination=function(){Y=!1,G=W};var $=h.__private__.out=function(e){return e=e.toString(),V+=e.length+1,G.push(e),G},X=h.__private__.write=function(e){return $(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},Z=h.__private__.getArrayBuffer=function(e){for(var t=e.length,a=new ArrayBuffer(t),r=new Uint8Array(a);t--;)r[t]=e.charCodeAt(t);return a},ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return ee};var te=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(e){return te=b===v?e/me:e,this};var ae,re=h.__private__.getFontSize=h.getFontSize=function(){return b===y?te:te*me},ne=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(e){return ne=e,this},h.__private__.getR2L=h.getR2L=function(){return ne};var se,ie=h.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))ae=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');ae=e}else ae=parseInt(e,10)};h.__private__.getZoomMode=function(){return ae};var oe,le=h.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');se=e};h.__private__.getPageMode=function(){return se};var ce=h.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');oe=e};h.__private__.getLayoutMode=function(){return oe},h.__private__.setDisplayMode=h.setDisplayMode=function(e,t,a){return ie(e),ce(t),le(a),this};var de={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(e){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return de[e]},h.__private__.getDocumentProperties=function(){return de},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(e){for(var t in de)de.hasOwnProperty(t)&&e[t]&&(de[t]=e[t]);return this},h.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(de).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return de[e]=t};var ue,me,he,pe,fe,xe={},ge={},ye=[],ve={},be={},_e={},je={},we=null,Ne=0,ke=[],Se=new Qo(h),Ce=e.hotfixes||[],Ae={},Le={},Pe=[],Ee=function e(t,a,r,n,s,i){if(!(this instanceof e))return new e(t,a,r,n,s,i);isNaN(t)&&(t=1),isNaN(a)&&(a=0),isNaN(r)&&(r=0),isNaN(n)&&(n=1),isNaN(s)&&(s=0),isNaN(i)&&(i=0),this._matrix=[t,a,r,n,s,i]};Object.defineProperty(Ee.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ee.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ee.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ee.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ee.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ee.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ee.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(Ee.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(Ee.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(Ee.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(Ee.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(Ee.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(Ee.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ee.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ee.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ee.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ee.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(e)},Ee.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,a=e.sx*this.shy+e.shy*this.sy,r=e.shx*this.sx+e.sy*this.shx,n=e.shx*this.shy+e.sy*this.sy,s=e.tx*this.sx+e.ty*this.shx+this.tx,i=e.tx*this.shy+e.ty*this.sy+this.ty;return new Ee(t,a,r,n,s,i)},Ee.prototype.decompose=function(){var e=this.sx,t=this.shy,a=this.shx,r=this.sy,n=this.tx,s=this.ty,i=Math.sqrt(e*e+t*t),o=(e/=i)*a+(t/=i)*r;a-=e*o,r-=t*o;var l=Math.sqrt(a*a+r*r);return o/=l,e*(r/=l)<t*(a/=l)&&(e=-e,t=-t,o=-o,i=-i),{scale:new Ee(i,0,0,l,0,0),translate:new Ee(1,0,0,1,n,s),rotate:new Ee(e,t,-t,e,0,0),skew:new Ee(1,0,o,1,0,0)}},Ee.prototype.toString=function(e){return this.join(" ")},Ee.prototype.inversed=function(){var e=this.sx,t=this.shy,a=this.shx,r=this.sy,n=this.tx,s=this.ty,i=1/(e*r-t*a),o=r*i,l=-t*i,c=-a*i,d=e*i;return new Ee(o,l,c,d,-o*n-c*s,-l*n-d*s)},Ee.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,a=e.x*this.shy+e.y*this.sy+this.ty;return new aa(t,a)},Ee.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),a=this.applyToPoint(new aa(e.x+e.w,e.y+e.h));return new ra(t.x,t.y,a.x-t.x,a.y-t.y)},Ee.prototype.clone=function(){var e=this.sx,t=this.shy,a=this.shx,r=this.sy,n=this.tx,s=this.ty;return new Ee(e,t,a,r,n,s)},h.Matrix=Ee;var Fe=h.matrixMult=function(e,t){return t.multiply(e)},Oe=new Ee(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=Oe;var Ie=function(e,t){if(!be[e]){var a=(t instanceof Go?"Sh":"P")+(Object.keys(ve).length+1).toString(10);t.id=a,be[e]=a,ve[a]=t,Se.publish("addPattern",t)}};h.ShadingPattern=Go,h.TilingPattern=Ko,h.addShadingPattern=function(e,t){return k("addShadingPattern()"),Ie(e,t),this},h.beginTilingPattern=function(e){k("beginTilingPattern()"),sa(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},h.endTilingPattern=function(e,t){k("endTilingPattern()"),t.stream=J[q].join("\n"),Ie(e,t),Se.publish("endTilingPattern",t),Pe.pop().restore()};var Re,De=h.__private__.newObject=function(){var e=Me();return Te(e,!0),e},Me=h.__private__.newObjectDeferred=function(){return U++,H[U]=function(){return V},U},Te=function(e,t){return t="boolean"==typeof t&&t,H[e]=V,t&&$(e+" 0 obj"),e},qe=h.__private__.newAdditionalObject=function(){var e={objId:Me(),content:""};return Q.push(e),e},ze=Me(),Be=Me(),Ue=h.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var a=parseFloat(t[0]);t=[a,a,a,"r"]}for(var r="#",n=0;n<3;n++)r+=("0"+Math.floor(255*parseFloat(t[n])).toString(16)).slice(-2);return r},He=h.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var a=e.ch1,r=e.ch2,n=e.ch3,s=e.ch4,i="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof a&&"#"!==a.charAt(0)){var o=new Co(a);if(o.ok)a=o.toHex();else if(!/^\d*\.?\d*$/.test(a))throw new Error('Invalid color "'+a+'" passed to jsPDF.encodeColorString.')}if("string"==typeof a&&/^#[0-9A-Fa-f]{3}$/.test(a)&&(a="#"+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]),"string"==typeof a&&/^#[0-9A-Fa-f]{6}$/.test(a)){var l=parseInt(a.substr(1),16);a=l>>16&255,r=l>>8&255,n=255&l}if(void 0===r||void 0===s&&a===r&&r===n)if("string"==typeof a)t=a+" "+i[0];else if(2===e.precision)t=C(a/255)+" "+i[0];else t=A(a/255)+" "+i[0];else if(void 0===s||"object"===(0,bi.A)(s)){if(s&&!isNaN(s.a)&&0===s.a)return["1.","1.","1.",i[1]].join(" ");if("string"==typeof a)t=[a,r,n,i[1]].join(" ");else if(2===e.precision)t=[C(a/255),C(r/255),C(n/255),i[1]].join(" ");else t=[A(a/255),A(r/255),A(n/255),i[1]].join(" ")}else if("string"==typeof a)t=[a,r,n,s,i[2]].join(" ");else if(2===e.precision)t=[C(a),C(r),C(n),C(s),i[2]].join(" ");else t=[A(a),A(r),A(n),A(s),i[2]].join(" ");return t},We=h.__private__.getFilters=function(){return i},Ve=h.__private__.putStream=function(e){var t=(e=e||{}).data||"",a=e.filters||We(),r=e.alreadyAppliedFilters||[],n=e.addLength1||!1,s=t.length,i=e.objectId,o=function(e){return e};if(null!==d&&void 0===i)throw new Error("ObjectId must be passed to putStream for file encryption");null!==d&&(o=vt.encryptor(i,0));var l={};!0===a&&(a=["FlateEncode"]);var c=e.additionalKeyValues||[],u=(l=void 0!==$o.API.processDataByFilters?$o.API.processDataByFilters(t,a):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===n&&c.push({key:"Length1",value:s})),0!=u.length)if(u.split("/").length-1==1)c.push({key:"Filter",value:u});else{c.push({key:"Filter",value:"["+u+"]"});for(var m=0;m<c.length;m+=1)if("DecodeParms"===c[m].key){for(var h=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)h.push("null");h.push(c[m].value),c[m].value="["+h.join(" ")+"]"}}$("<<");for(var f=0;f<c.length;f++)$("/"+c[f].key+" "+c[f].value);$(">>"),0!==l.data.length&&($("stream"),$(o(l.data)),$("endstream"))},Qe=h.__private__.putPage=function(e){var t=e.number,a=e.data,r=e.objId,n=e.contentsObjId;Te(r,!0),$("<</Type /Page"),$("/Parent "+e.rootDictionaryObjId+" 0 R"),$("/Resources "+e.resourceDictionaryObjId+" 0 R"),$("/MediaBox ["+parseFloat(N(e.mediaBox.bottomLeftX))+" "+parseFloat(N(e.mediaBox.bottomLeftY))+" "+N(e.mediaBox.topRightX)+" "+N(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&$("/CropBox ["+N(e.cropBox.bottomLeftX)+" "+N(e.cropBox.bottomLeftY)+" "+N(e.cropBox.topRightX)+" "+N(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&$("/BleedBox ["+N(e.bleedBox.bottomLeftX)+" "+N(e.bleedBox.bottomLeftY)+" "+N(e.bleedBox.topRightX)+" "+N(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&$("/TrimBox ["+N(e.trimBox.bottomLeftX)+" "+N(e.trimBox.bottomLeftY)+" "+N(e.trimBox.topRightX)+" "+N(e.trimBox.topRightY)+"]"),null!==e.artBox&&$("/ArtBox ["+N(e.artBox.bottomLeftX)+" "+N(e.artBox.bottomLeftY)+" "+N(e.artBox.topRightX)+" "+N(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&$("/UserUnit "+e.userUnit),Se.publish("putPage",{objId:r,pageContext:ke[t],pageNumber:t,page:a}),$("/Contents "+n+" 0 R"),$(">>"),$("endobj");var s=a.join("\n");return b===v&&(s+="\nQ"),Te(n,!0),Ve({data:s,filters:We(),objectId:n}),$("endobj"),r},Je=h.__private__.putPages=function(){var e,t,a=[];for(e=1;e<=Ne;e++)ke[e].objId=Me(),ke[e].contentsObjId=Me();for(e=1;e<=Ne;e++)a.push(Qe({number:e,data:J[e],objId:ke[e].objId,contentsObjId:ke[e].contentsObjId,mediaBox:ke[e].mediaBox,cropBox:ke[e].cropBox,bleedBox:ke[e].bleedBox,trimBox:ke[e].trimBox,artBox:ke[e].artBox,userUnit:ke[e].userUnit,rootDictionaryObjId:ze,resourceDictionaryObjId:Be}));Te(ze,!0),$("<</Type /Pages");var r="/Kids [";for(t=0;t<Ne;t++)r+=a[t]+" 0 R ";$(r+"]"),$("/Count "+Ne),$(">>"),$("endobj"),Se.publish("postPutPages")},Ye=function(e){Se.publish("putFont",{font:e,out:$,newObject:De,putStream:Ve}),!0!==e.isAlreadyPutted&&(e.objectNumber=De(),$("<<"),$("/Type /Font"),$("/BaseFont /"+Vo(e.postScriptName)),$("/Subtype /Type1"),"string"==typeof e.encoding&&$("/Encoding /"+e.encoding),$("/FirstChar 32"),$("/LastChar 255"),$(">>"),$("endobj"))},Ge=function(e){e.objectNumber=De();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[N(e.x),N(e.y),N(e.x+e.width),N(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var a=e.pages[1].join("\n");Ve({data:a,additionalKeyValues:t,objectId:e.objectNumber}),$("endobj")},Ke=function(e,t){t||(t=21);var a=De(),r=function(e,t){var a,r=[],n=1/(t-1);for(a=0;a<1;a+=n)r.push(a);if(r.push(1),0!=e[0].offset){var s={offset:0,color:e[0].color};e.unshift(s)}if(1!=e[e.length-1].offset){var i={offset:1,color:e[e.length-1].color};e.push(i)}for(var o="",l=0,c=0;c<r.length;c++){for(a=r[c];a>e[l+1].offset;)l++;var d=e[l].offset,u=(a-d)/(e[l+1].offset-d),m=e[l].color,h=e[l+1].color;o+=B(Math.round((1-u)*m[0]+u*h[0]).toString(16))+B(Math.round((1-u)*m[1]+u*h[1]).toString(16))+B(Math.round((1-u)*m[2]+u*h[2]).toString(16))}return o.trim()}(e.colors,t),n=[];n.push({key:"FunctionType",value:"0"}),n.push({key:"Domain",value:"[0.0 1.0]"}),n.push({key:"Size",value:"["+t+"]"}),n.push({key:"BitsPerSample",value:"8"}),n.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),n.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve({data:r,additionalKeyValues:n,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:a}),$("endobj"),e.objectNumber=De(),$("<< /ShadingType "+e.type),$("/ColorSpace /DeviceRGB");var s="/Coords ["+N(parseFloat(e.coords[0]))+" "+N(parseFloat(e.coords[1]))+" ";2===e.type?s+=N(parseFloat(e.coords[2]))+" "+N(parseFloat(e.coords[3])):s+=N(parseFloat(e.coords[2]))+" "+N(parseFloat(e.coords[3]))+" "+N(parseFloat(e.coords[4]))+" "+N(parseFloat(e.coords[5])),$(s+="]"),e.matrix&&$("/Matrix ["+e.matrix.toString()+"]"),$("/Function "+a+" 0 R"),$("/Extend [true true]"),$(">>"),$("endobj")},$e=function(e,t){var a=Me(),r=De();t.push({resourcesOid:a,objectOid:r}),e.objectNumber=r;var n=[];n.push({key:"Type",value:"/Pattern"}),n.push({key:"PatternType",value:"1"}),n.push({key:"PaintType",value:"1"}),n.push({key:"TilingType",value:"1"}),n.push({key:"BBox",value:"["+e.boundingBox.map(N).join(" ")+"]"}),n.push({key:"XStep",value:N(e.xStep)}),n.push({key:"YStep",value:N(e.yStep)}),n.push({key:"Resources",value:a+" 0 R"}),e.matrix&&n.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),Ve({data:e.stream,additionalKeyValues:n,objectId:e.objectNumber}),$("endobj")},Xe=function(e){for(var t in e.objectNumber=De(),$("<<"),e)switch(t){case"opacity":$("/ca "+C(e[t]));break;case"stroke-opacity":$("/CA "+C(e[t]))}$(">>"),$("endobj")},Ze=function(e){Te(e.resourcesOid,!0),$("<<"),$("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in $("/Font <<"),xe)xe.hasOwnProperty(e)&&(!1===u||!0===u&&m.hasOwnProperty(e))&&$("/"+e+" "+xe[e].objectNumber+" 0 R");$(">>")}(),function(){if(Object.keys(ve).length>0){for(var e in $("/Shading <<"),ve)ve.hasOwnProperty(e)&&ve[e]instanceof Go&&ve[e].objectNumber>=0&&$("/"+e+" "+ve[e].objectNumber+" 0 R");Se.publish("putShadingPatternDict"),$(">>")}}(),function(e){if(Object.keys(ve).length>0){for(var t in $("/Pattern <<"),ve)ve.hasOwnProperty(t)&&ve[t]instanceof h.TilingPattern&&ve[t].objectNumber>=0&&ve[t].objectNumber<e&&$("/"+t+" "+ve[t].objectNumber+" 0 R");Se.publish("putTilingPatternDict"),$(">>")}}(e.objectOid),function(){if(Object.keys(_e).length>0){var e;for(e in $("/ExtGState <<"),_e)_e.hasOwnProperty(e)&&_e[e].objectNumber>=0&&$("/"+e+" "+_e[e].objectNumber+" 0 R");Se.publish("putGStateDict"),$(">>")}}(),function(){for(var e in $("/XObject <<"),Ae)Ae.hasOwnProperty(e)&&Ae[e].objectNumber>=0&&$("/"+e+" "+Ae[e].objectNumber+" 0 R");Se.publish("putXobjectDict"),$(">>")}(),$(">>"),$("endobj")},et=function(){var e=[];(function(){for(var e in xe)xe.hasOwnProperty(e)&&(!1===u||!0===u&&m.hasOwnProperty(e))&&Ye(xe[e])})(),function(){var e;for(e in _e)_e.hasOwnProperty(e)&&Xe(_e[e])}(),function(){for(var e in Ae)Ae.hasOwnProperty(e)&&Ge(Ae[e])}(),function(e){var t;for(t in ve)ve.hasOwnProperty(t)&&(ve[t]instanceof Go?Ke(ve[t]):ve[t]instanceof Ko&&$e(ve[t],e))}(e),Se.publish("putResources"),e.forEach(Ze),Ze({resourcesOid:Be,objectOid:Number.MAX_SAFE_INTEGER}),Se.publish("postPutResources")},tt=function(e){ge[e.fontName]=ge[e.fontName]||{},ge[e.fontName][e.fontStyle]=e.id},at=function(e,t,a,r,n){var s={id:"F"+(Object.keys(xe).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:a,encoding:r,isStandardFont:n||!1,metadata:{}};return Se.publish("addFont",{font:s,instance:this}),xe[s.id]=s,tt(s),s.id},rt=h.__private__.pdfEscape=h.pdfEscape=function(e,t){return function(e,t){var a,r,n,s,i,o,l,c,d;if(n=(t=t||{}).sourceEncoding||"Unicode",i=t.outputEncoding,(t.autoencode||i)&&xe[ue].metadata&&xe[ue].metadata[n]&&xe[ue].metadata[n].encoding&&(s=xe[ue].metadata[n].encoding,!i&&xe[ue].encoding&&(i=xe[ue].encoding),!i&&s.codePages&&(i=s.codePages[0]),"string"==typeof i&&(i=s[i]),i)){for(l=!1,o=[],a=0,r=e.length;a<r;a++)(c=i[e.charCodeAt(a)])?o.push(String.fromCharCode(c)):o.push(e[a]),o[a].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(a=e.length;void 0===l&&0!==a;)e.charCodeAt(a-1)>>8&&(l=!0),a--;if(!l)return e;for(o=t.noBOM?[]:[254,255],a=0,r=e.length;a<r;a++){if((d=(c=e.charCodeAt(a))>>8)>>8)throw new Error("Character at position "+a+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(d),o.push(c-(d<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nt=h.__private__.beginPage=function(e){J[++Ne]=[],ke[Ne]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},ot(Ne),K(J[q])},st=function(e,t){var r,s,i;switch(a=t||a,"string"==typeof e&&(r=g(e.toLowerCase()),Array.isArray(r)&&(s=r[0],i=r[1])),Array.isArray(e)&&(s=e[0]*me,i=e[1]*me),isNaN(s)&&(s=n[0],i=n[1]),(s>14400||i>14400)&&(bo.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),s=Math.min(14400,s),i=Math.min(14400,i)),n=[s,i],a.substr(0,1)){case"l":i>s&&(n=[i,s]);break;case"p":s>i&&(n=[i,s])}nt(n),qt(Mt),$(Jt),0!==Zt&&$(Zt+" J"),0!==ea&&$(ea+" j"),Se.publish("addPage",{pageNumber:Ne})},it=function(e){e>0&&e<=Ne&&(J.splice(e,1),ke.splice(e,1),Ne--,q>Ne&&(q=Ne),this.setPage(q))},ot=function(e){e>0&&e<=Ne&&(q=e)},lt=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return J.length-1},ct=function(e,t,a){var r,n=void 0;return a=a||{},e=void 0!==e?e:xe[ue].fontName,t=void 0!==t?t:xe[ue].fontStyle,r=e.toLowerCase(),void 0!==ge[r]&&void 0!==ge[r][t]?n=ge[r][t]:void 0!==ge[e]&&void 0!==ge[e][t]?n=ge[e][t]:!1===a.disableWarning&&bo.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),n||a.noFallback||null==(n=ge.times[t])&&(n=ge.times.normal),n},dt=h.__private__.putInfo=function(){var e=De(),t=function(e){return e};for(var a in null!==d&&(t=vt.encryptor(e,0)),$("<<"),$("/Producer ("+rt(t("jsPDF "+$o.version))+")"),de)de.hasOwnProperty(a)&&de[a]&&$("/"+a.substr(0,1).toUpperCase()+a.substr(1)+" ("+rt(t(de[a]))+")");$("/CreationDate ("+rt(t(E))+")"),$(">>"),$("endobj")},ut=h.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||ze;switch(De(),$("<<"),$("/Type /Catalog"),$("/Pages "+t+" 0 R"),ae||(ae="fullwidth"),ae){case"fullwidth":$("/OpenAction [3 0 R /FitH null]");break;case"fullheight":$("/OpenAction [3 0 R /FitV null]");break;case"fullpage":$("/OpenAction [3 0 R /Fit]");break;case"original":$("/OpenAction [3 0 R /XYZ null null 1]");break;default:var a=""+ae;"%"===a.substr(a.length-1)&&(ae=parseInt(ae)/100),"number"==typeof ae&&$("/OpenAction [3 0 R /XYZ null null "+C(ae)+"]")}switch(oe||(oe="continuous"),oe){case"continuous":$("/PageLayout /OneColumn");break;case"single":$("/PageLayout /SinglePage");break;case"two":case"twoleft":$("/PageLayout /TwoColumnLeft");break;case"tworight":$("/PageLayout /TwoColumnRight")}se&&$("/PageMode /"+se),Se.publish("putCatalog"),$(">>"),$("endobj")},mt=h.__private__.putTrailer=function(){$("trailer"),$("<<"),$("/Size "+(U+1)),$("/Root "+U+" 0 R"),$("/Info "+(U-1)+" 0 R"),null!==d&&$("/Encrypt "+vt.oid+" 0 R"),$("/ID [ <"+F+"> <"+F+"> ]"),$(">>")},ht=h.__private__.putHeader=function(){$("%PDF-"+p),$("%\xba\xdf\xac\xe0")},pt=h.__private__.putXRef=function(){var e="0000000000";$("xref"),$("0 "+(U+1)),$("0000000000 65535 f ");for(var t=1;t<=U;t++)"function"==typeof H[t]?$((e+H[t]()).slice(-10)+" 00000 n "):void 0!==H[t]?$((e+H[t]).slice(-10)+" 00000 n "):$("0000000000 00000 n ")},ft=h.__private__.buildDocument=function(){U=0,V=0,W=[],H=[],Q=[],ze=Me(),Be=Me(),K(W),Se.publish("buildDocument"),ht(),Je(),function(){Se.publish("putAdditionalObjects");for(var e=0;e<Q.length;e++){var t=Q[e];Te(t.objId,!0),$(t.content),$("endobj")}Se.publish("postPutAdditionalObjects")}(),et(),null!==d&&(vt.oid=De(),$("<<"),$("/Filter /Standard"),$("/V "+vt.v),$("/R "+vt.r),$("/U <"+vt.toHexString(vt.U)+">"),$("/O <"+vt.toHexString(vt.O)+">"),$("/P "+vt.P),$(">>"),$("endobj")),dt(),ut();var e=V;return pt(),mt(),$("startxref"),$(""+e),$("%%EOF"),K(J[q]),W.join("\n")},xt=h.__private__.getBlob=function(e){return new Blob([Z(e)],{type:"application/pdf"})},gt=h.output=h.__private__.output=(Re=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return ft();case"save":h.save(t.filename);break;case"arraybuffer":return Z(ft());case"blob":return xt(ft());case"bloburi":case"bloburl":if(void 0!==yo.URL&&"function"==typeof yo.URL.createObjectURL)return yo.URL&&yo.URL.createObjectURL(xt(ft()))||void 0;bo.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var a="",r=ft();try{a=ko(r)}catch(e){a=ko(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+t.filename+";base64,"+a;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(yo)){var n="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(n=t.pdfObjectUrl,s="");var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+n+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=yo.open();return null!==o&&o.document.write(i),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(yo)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=yo.open();if(null!==c){c.document.write(l);var d=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(d.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(yo))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',m=yo.open();if(null!==m&&(m.document.write(u),m.document.title=t.filename),m||"undefined"==typeof safari)return m;break;case"datauri":case"dataurl":return yo.document.location.href=this.output("datauristring",t);default:return null}},Re.foo=function(){try{return Re.apply(this,arguments)}catch(Re){var e=Re.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+Re.message;if(!yo.console)throw new Error(t);yo.console.error(t,Re),yo.alert&&alert(t)}},Re.foo.bar=Re,Re.foo),yt=function(e){return!0===Array.isArray(Ce)&&Ce.indexOf(e)>-1};switch(r){case"pt":me=1;break;case"mm":me=72/25.4;break;case"cm":me=72/2.54;break;case"in":me=72;break;case"px":me=1==yt("px_scaling")?.75:96/72;break;case"pc":case"em":me=12;break;case"ex":me=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);me=r}var vt=null;M(),I();var bt=h.__private__.getPageInfo=h.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ke[e].objId,pageNumber:e,pageContext:ke[e]}},_t=h.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in ke)if(ke[t].objId===e)break;return bt(t)},jt=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:ke[q].objId,pageNumber:q,pageContext:ke[q]}};h.addPage=function(){return st.apply(this,arguments),this},h.setPage=function(){return ot.apply(this,arguments),K.call(this,J[q]),this},h.insertPage=function(e){return this.addPage(),this.movePage(q,e),this},h.movePage=function(e,t){var a,r;if(e>t){a=J[e],r=ke[e];for(var n=e;n>t;n--)J[n]=J[n-1],ke[n]=ke[n-1];J[t]=a,ke[t]=r,this.setPage(t)}else if(e<t){a=J[e],r=ke[e];for(var s=e;s<t;s++)J[s]=J[s+1],ke[s]=ke[s+1];J[t]=a,ke[t]=r,this.setPage(t)}return this},h.deletePage=function(){return it.apply(this,arguments),this},h.__private__.text=h.text=function(e,t,a,r,n){var s,i,o,l,c,d,u,h,p,f=(r=r||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof a||Array.isArray(a))){var x=a;a=t,t=e,e=x}if(arguments[3]instanceof Ee==0?(o=arguments[4],l=arguments[5],"object"===(0,bi.A)(u=arguments[3])&&null!==u||("string"==typeof o&&(l=o,o=null),"string"==typeof u&&(l=u,u=null),"number"==typeof u&&(o=u,u=null),r={flags:u,angle:o,align:l})):(k("The transform parameter of text() with a Matrix value"),p=n),isNaN(t)||isNaN(a)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return f;var g,y="",_="number"==typeof r.lineHeightFactor?r.lineHeightFactor:Dt,j=f.internal.scaleFactor;function w(e){return e=e.split("\t").join(Array(r.TabLen||9).join(" ")),rt(e,u)}function S(e){for(var t,a=e.concat(),r=[],n=a.length;n--;)"string"==typeof(t=a.shift())?r.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?r.push(t[0]):r.push([t[0],t[1],t[2]]);return r}function C(e,t){var a;if("string"==typeof e)a=t(e)[0];else if(Array.isArray(e)){for(var r,n,s=e.concat(),i=[],o=s.length;o--;)"string"==typeof(r=s.shift())?i.push(t(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&(n=t(r[0],r[1],r[2]),i.push([n[0],n[1],n[2]]));a=i}return a}var A=!1,P=!0;if("string"==typeof e)A=!0;else if(Array.isArray(e)){var E=e.concat();i=[];for(var F,O=E.length;O--;)("string"!=typeof(F=E.shift())||Array.isArray(F)&&"string"!=typeof F[0])&&(P=!1);A=P}if(!1===A)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var I=te/f.internal.scaleFactor,R=I*(_-1);switch(r.baseline){case"bottom":a-=R;break;case"top":a+=I-R;break;case"hanging":a+=I-2*R;break;case"middle":a+=I/2-R}if((d=r.maxWidth||0)>0&&("string"==typeof e?e=f.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(f.splitTextToSize(t,d))},[]))),s={text:e,x:t,y:a,options:r,mutex:{pdfEscape:rt,activeFontKey:ue,fonts:xe,activeFontSize:te}},Se.publish("preProcessText",s),e=s.text,o=(r=s.options).angle,p instanceof Ee==0&&o&&"number"==typeof o){o*=Math.PI/180,0===r.rotationDirection&&(o=-o),b===v&&(o=-o);var D=Math.cos(o),M=Math.sin(o);p=new Ee(D,M,-M,D,0,0)}else o&&o instanceof Ee&&(p=o);b!==v||p||(p=Oe),void 0!==(c=r.charSpace||$t)&&(y+=N(L(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(h=r.horizontalScale)&&(y+=N(100*h)+" Tz\n"),r.lang;var T=-1,q=void 0!==r.renderingMode?r.renderingMode:r.stroke,z=f.internal.getCurrentPageInfo().pageContext;switch(q){case 0:case!1:case"fill":T=0;break;case 1:case!0:case"stroke":T=1;break;case 2:case"fillThenStroke":T=2;break;case 3:case"invisible":T=3;break;case 4:case"fillAndAddForClipping":T=4;break;case 5:case"strokeAndAddPathForClipping":T=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":T=6;break;case 7:case"addToPathForClipping":T=7}var B=void 0!==z.usedRenderingMode?z.usedRenderingMode:-1;-1!==T?y+=T+" Tr\n":-1!==B&&(y+="0 Tr\n"),-1!==T&&(z.usedRenderingMode=T),l=r.align||"left";var U,H=te*_,W=f.internal.pageSize.getWidth(),V=xe[ue];c=r.charSpace||$t,d=r.maxWidth||0,u=Object.assign({autoencode:!0,noBOM:!0},r.flags);var Q=[],J=function(e){return f.getStringUnitWidth(e,{font:V,charSpace:c,fontSize:te,doKerning:!1})*te/j};if("[object Array]"===Object.prototype.toString.call(e)){var Y;i=S(e),"left"!==l&&(U=i.map(J));var G,K=0;if("right"===l){t-=U[0],e=[],O=i.length;for(var X=0;X<O;X++)0===X?(G=Ht(t),Y=Wt(a)):(G=L(K-U[X]),Y=-H),e.push([i[X],G,Y]),K=U[X]}else if("center"===l){t-=U[0]/2,e=[],O=i.length;for(var Z=0;Z<O;Z++)0===Z?(G=Ht(t),Y=Wt(a)):(G=L((K-U[Z])/2),Y=-H),e.push([i[Z],G,Y]),K=U[Z]}else if("left"===l){e=[],O=i.length;for(var ee=0;ee<O;ee++)e.push(i[ee])}else if("justify"===l&&"Identity-H"===V.encoding){e=[],O=i.length,d=0!==d?d:W;for(var ae=0,re=0;re<O;re++)if(Y=0===re?Wt(a):-H,G=0===re?Ht(t):ae,re<O-1){var se=L((d-U[re])/(i[re].split(" ").length-1)),ie=i[re].split(" ");e.push([ie[0]+" ",G,Y]),ae=0;for(var oe=1;oe<ie.length;oe++){var le=(J(ie[oe-1]+" "+ie[oe])-J(ie[oe]))*j+se;oe==ie.length-1?e.push([ie[oe],le,0]):e.push([ie[oe]+" ",le,0]),ae-=le}}else e.push([i[re],G,Y]);e.push(["",ae,0])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],O=i.length,d=0!==d?d:W,re=0;re<O;re++)Y=0===re?Wt(a):-H,G=0===re?Ht(t):0,re<O-1?Q.push(N(L((d-U[re])/(i[re].split(" ").length-1)))):Q.push(0),e.push([i[re],G,Y])}}!0===("boolean"==typeof r.R2L?r.R2L:ne)&&(e=C(e,function(e,t,a){return[e.split("").reverse().join(""),t,a]})),s={text:e,x:t,y:a,options:r,mutex:{pdfEscape:rt,activeFontKey:ue,fonts:xe,activeFontSize:te}},Se.publish("postProcessText",s),e=s.text,g=s.mutex.isHex||!1;var ce=xe[ue].encoding;"WinAnsiEncoding"!==ce&&"StandardEncoding"!==ce||(e=C(e,function(e,t,a){return[w(e),t,a]})),i=S(e),e=[];for(var de,me,he,pe=Array.isArray(i[0])?1:0,fe="",ge=function(e,t,a){var n="";return a instanceof Ee?(a="number"==typeof r.angle?Fe(a,new Ee(1,0,0,1,e,t)):Fe(new Ee(1,0,0,1,e,t),a),b===v&&(a=Fe(new Ee(1,0,0,-1,0,0),a)),n=a.join(" ")+" Tm\n"):n=N(e)+" "+N(t)+" Td\n",n},ye=0;ye<i.length;ye++){switch(fe="",pe){case 1:he=(g?"<":"(")+i[ye][0]+(g?">":")"),de=parseFloat(i[ye][1]),me=parseFloat(i[ye][2]);break;case 0:he=(g?"<":"(")+i[ye]+(g?">":")"),de=Ht(t),me=Wt(a)}void 0!==Q&&void 0!==Q[ye]&&(fe=Q[ye]+" Tw\n"),0===ye?e.push(fe+ge(de,me,p)+he):0===pe?e.push(fe+he):1===pe&&e.push(fe+ge(de,me,p)+he)}e=0===pe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var ve="BT\n/";return ve+=ue+" "+te+" Tf\n",ve+=N(te*_)+" TL\n",ve+=Gt+"\n",ve+=y,ve+=e,$(ve+="ET"),m[ue]=!0,f};var wt=h.__private__.clip=h.clip=function(e){return $("evenodd"===e?"W*":"W"),this};h.clipEvenOdd=function(){return wt("evenodd")},h.__private__.discardPath=h.discardPath=function(){return $("n"),this};var Nt=h.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(e){return Nt(e)&&(c=e),this};var kt=h.__private__.getStyle=h.getStyle=function(e){var t=c;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},St=h.close=function(){return $("h"),this};h.stroke=function(){return $("S"),this},h.fill=function(e){return Ct("f",e),this},h.fillEvenOdd=function(e){return Ct("f*",e),this},h.fillStroke=function(e){return Ct("B",e),this},h.fillStrokeEvenOdd=function(e){return Ct("B*",e),this};var Ct=function(e,t){"object"===(0,bi.A)(t)?Pt(t,e):$(e)},At=function(e){null===e||b===v&&void 0===e||(e=kt(e),$(e))};function Lt(e,t,a,r,n){var s=new Ko(t||this.boundingBox,a||this.xStep,r||this.yStep,this.gState,n||this.matrix);s.stream=this.stream;var i=e+"$$"+this.cloneIndex+++"$$";return Ie(i,s),s}var Pt=function(e,t){var a=be[e.key],r=ve[a];if(r instanceof Go)$("q"),$(Et(t)),r.gState&&h.setGState(r.gState),$(e.matrix.toString()+" cm"),$("/"+a+" sh"),$("Q");else if(r instanceof Ko){var n=new Ee(1,0,0,-1,0,ca());e.matrix&&(n=n.multiply(e.matrix||Oe),a=Lt.call(r,e.key,e.boundingBox,e.xStep,e.yStep,n).id),$("q"),$("/Pattern cs"),$("/"+a+" scn"),r.gState&&h.setGState(r.gState),$(t),$("Q")}},Et=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ft=h.moveTo=function(e,t){return $(N(L(e))+" "+N(P(t))+" m"),this},Ot=h.lineTo=function(e,t){return $(N(L(e))+" "+N(P(t))+" l"),this},It=h.curveTo=function(e,t,a,r,n,s){return $([N(L(e)),N(P(t)),N(L(a)),N(P(r)),N(L(n)),N(P(s)),"c"].join(" ")),this};h.__private__.line=h.line=function(e,t,a,r,n){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r)||!Nt(n))throw new Error("Invalid arguments passed to jsPDF.line");return b===y?this.lines([[a-e,r-t]],e,t,[1,1],n||"S"):this.lines([[a-e,r-t]],e,t,[1,1]).stroke()},h.__private__.lines=h.lines=function(e,t,a,r,n,s){var i,o,l,c,d,u,m,h,p,f,x,g;if("number"==typeof e&&(g=a,a=t,t=e,e=g),r=r||[1,1],s=s||!1,isNaN(t)||isNaN(a)||!Array.isArray(e)||!Array.isArray(r)||!Nt(n)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(Ft(t,a),i=r[0],o=r[1],c=e.length,f=t,x=a,l=0;l<c;l++)2===(d=e[l]).length?(f=d[0]*i+f,x=d[1]*o+x,Ot(f,x)):(u=d[0]*i+f,m=d[1]*o+x,h=d[2]*i+f,p=d[3]*o+x,f=d[4]*i+f,x=d[5]*o+x,It(u,m,h,p,f,x));return s&&St(),At(n),this},h.path=function(e){for(var t=0;t<e.length;t++){var a=e[t],r=a.c;switch(a.op){case"m":Ft(r[0],r[1]);break;case"l":Ot(r[0],r[1]);break;case"c":It.apply(this,r);break;case"h":St()}}return this},h.__private__.rect=h.rect=function(e,t,a,r,n){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r)||!Nt(n))throw new Error("Invalid arguments passed to jsPDF.rect");return b===y&&(r=-r),$([N(L(e)),N(P(t)),N(L(a)),N(L(r)),"re"].join(" ")),At(n),this},h.__private__.triangle=h.triangle=function(e,t,a,r,n,s,i){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r)||isNaN(n)||isNaN(s)||!Nt(i))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[a-e,r-t],[n-a,s-r],[e-n,t-s]],e,t,[1,1],i,!0),this},h.__private__.roundedRect=h.roundedRect=function(e,t,a,r,n,s,i){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r)||isNaN(n)||isNaN(s)||!Nt(i))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return n=Math.min(n,.5*a),s=Math.min(s,.5*r),this.lines([[a-2*n,0],[n*o,0,n,s-s*o,n,s],[0,r-2*s],[0,s*o,-n*o,s,-n,s],[2*n-a,0],[-n*o,0,-n,-s*o,-n,-s],[0,2*s-r],[0,-s*o,n*o,-s,n,-s]],e+n,t,[1,1],i,!0),this},h.__private__.ellipse=h.ellipse=function(e,t,a,r,n){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r)||!Nt(n))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*a,i=4/3*(Math.SQRT2-1)*r;return Ft(e+a,t),It(e+a,t-i,e+s,t-r,e,t-r),It(e-s,t-r,e-a,t-i,e-a,t),It(e-a,t+i,e-s,t+r,e,t+r),It(e+s,t+r,e+a,t+i,e+a,t),At(n),this},h.__private__.circle=h.circle=function(e,t,a,r){if(isNaN(e)||isNaN(t)||isNaN(a)||!Nt(r))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,a,a,r)},h.setFont=function(e,t,a){return a&&(t=w(t,a)),ue=ct(e,t,{disableWarning:!1}),this};var Rt=h.__private__.getFont=h.getFont=function(){return xe[ct.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var e,t,a={};for(e in ge)if(ge.hasOwnProperty(e))for(t in a[e]=[],ge[e])ge[e].hasOwnProperty(t)&&a[e].push(t);return a},h.addFont=function(e,t,a,r,n){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?n=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(a=w(a,r)),at.call(this,e,t,a,n=n||"Identity-H")};var Dt,Mt=e.lineWidth||.200025,Tt=h.__private__.getLineWidth=h.getLineWidth=function(){return Mt},qt=h.__private__.setLineWidth=h.setLineWidth=function(e){return Mt=e,$(N(L(e))+" w"),this};h.__private__.setLineDash=$o.API.setLineDash=$o.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map(function(e){return N(L(e))}).join(" "),t=N(L(t)),$("["+e+"] "+t+" d"),this};var zt=h.__private__.getLineHeight=h.getLineHeight=function(){return te*Dt};h.__private__.getLineHeight=h.getLineHeight=function(){return te*Dt};var Bt=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Dt=e),this},Ut=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Dt};Bt(e.lineHeight);var Ht=h.__private__.getHorizontalCoordinate=function(e){return L(e)},Wt=h.__private__.getVerticalCoordinate=function(e){return b===v?e:ke[q].mediaBox.topRightY-ke[q].mediaBox.bottomLeftY-L(e)},Vt=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(e){return N(Ht(e))},Qt=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(e){return N(Wt(e))},Jt=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return Ue(Jt)},h.__private__.setStrokeColor=h.setDrawColor=function(e,t,a,r){return Jt=He({ch1:e,ch2:t,ch3:a,ch4:r,pdfColorType:"draw",precision:2}),$(Jt),this};var Yt=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return Ue(Yt)},h.__private__.setFillColor=h.setFillColor=function(e,t,a,r){return Yt=He({ch1:e,ch2:t,ch3:a,ch4:r,pdfColorType:"fill",precision:2}),$(Yt),this};var Gt=e.textColor||"0 g",Kt=h.__private__.getTextColor=h.getTextColor=function(){return Ue(Gt)};h.__private__.setTextColor=h.setTextColor=function(e,t,a,r){return Gt=He({ch1:e,ch2:t,ch3:a,ch4:r,pdfColorType:"text",precision:3}),this};var $t=e.charSpace,Xt=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat($t||0)};h.__private__.setCharSpace=h.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return $t=e,this};var Zt=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(e){var t=h.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Zt=t,$(t+" J"),this};var ea=0;h.__private__.setLineJoin=h.setLineJoin=function(e){var t=h.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ea=t,$(t+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return $(N(L(e))+" M"),this},h.GState=Jo,h.setGState=function(e){(e="string"==typeof e?_e[je[e]]:ta(null,e)).equals(we)||($("/"+e.id+" gs"),we=e)};var ta=function(e,t){if(!e||!je[e]){var a=!1;for(var r in _e)if(_e.hasOwnProperty(r)&&_e[r].equals(t)){a=!0;break}if(a)t=_e[r];else{var n="GS"+(Object.keys(_e).length+1).toString(10);_e[n]=t,t.id=n}return e&&(je[e]=t.id),Se.publish("addGState",t),t}};h.addGState=function(e,t){return ta(e,t),this},h.saveGraphicsState=function(){return $("q"),ye.push({key:ue,size:te,color:Gt}),this},h.restoreGraphicsState=function(){$("Q");var e=ye.pop();return ue=e.key,te=e.size,Gt=e.color,we=null,this},h.setCurrentTransformationMatrix=function(e){return $(e.toString()+" cm"),this},h.comment=function(e){return $("#"+e),this};var aa=function(e,t){var a=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var r=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var n="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return n},set:function(e){n=e.toString()}}),this},ra=function(e,t,a,r){aa.call(this,e,t),this.type="rect";var n=a||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var s=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}}),this},na=function(){this.page=Ne,this.currentPage=q,this.pages=J.slice(0),this.pagesContext=ke.slice(0),this.x=he,this.y=pe,this.matrix=fe,this.width=oa(q),this.height=ca(q),this.outputDestination=G,this.id="",this.objectNumber=-1};na.prototype.restore=function(){Ne=this.page,q=this.currentPage,ke=this.pagesContext,J=this.pages,he=this.x,pe=this.y,fe=this.matrix,la(q,this.width),da(q,this.height),G=this.outputDestination};var sa=function(e,t,a,r,n){Pe.push(new na),Ne=q=0,J=[],he=e,pe=t,fe=n,nt([a,r])};for(var ia in h.beginFormObject=function(e,t,a,r,n){return sa(e,t,a,r,n),this},h.endFormObject=function(e){return function(e){if(Le[e])Pe.pop().restore();else{var t=new na,a="Xo"+(Object.keys(Ae).length+1).toString(10);t.id=a,Le[e]=a,Ae[a]=t,Se.publish("addFormObject",t),Pe.pop().restore()}}(e),this},h.doFormObject=function(e,t){var a=Ae[Le[e]];return $("q"),$(t.toString()+" cm"),$("/"+a.id+" Do"),$("Q"),this},h.getFormObject=function(e){var t=Ae[Le[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},h.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(So(xt(ft()),e),"function"==typeof So.unload&&yo.setTimeout&&setTimeout(So.unload,911),this):new Promise(function(t,a){try{var r=So(xt(ft()),e);"function"==typeof So.unload&&yo.setTimeout&&setTimeout(So.unload,911),t(r)}catch(e){a(e.message)}})},$o.API)$o.API.hasOwnProperty(ia)&&("events"===ia&&$o.API.events.length?function(e,t){var a,r,n;for(n=t.length-1;-1!==n;n--)a=t[n][0],r=t[n][1],e.subscribe.apply(e,[a].concat("function"==typeof r?[r]:r))}(Se,$o.API.events):h[ia]=$o.API[ia]);var oa=h.getPageWidth=function(e){return(ke[e=e||q].mediaBox.topRightX-ke[e].mediaBox.bottomLeftX)/me},la=h.setPageWidth=function(e,t){ke[e].mediaBox.topRightX=t*me+ke[e].mediaBox.bottomLeftX},ca=h.getPageHeight=function(e){return(ke[e=e||q].mediaBox.topRightY-ke[e].mediaBox.bottomLeftY)/me},da=h.setPageHeight=function(e,t){ke[e].mediaBox.topRightY=t*me+ke[e].mediaBox.bottomLeftY};return h.internal={pdfEscape:rt,getStyle:kt,getFont:Rt,getFontSize:re,getCharSpace:Xt,getTextColor:Kt,getLineHeight:zt,getLineHeightFactor:Ut,getLineWidth:Tt,write:X,getHorizontalCoordinate:Ht,getVerticalCoordinate:Wt,getCoordinateString:Vt,getVerticalCoordinateString:Qt,collections:{},newObject:De,newAdditionalObject:qe,newObjectDeferred:Me,newObjectDeferredBegin:Te,getFilters:We,putStream:Ve,events:Se,scaleFactor:me,pageSize:{getWidth:function(){return oa(q)},setWidth:function(e){la(q,e)},getHeight:function(){return ca(q)},setHeight:function(e){da(q,e)}},encryptionOptions:d,encryption:vt,getEncryptor:function(e){return null!==d?vt.encryptor(e,0):function(e){return e}},output:gt,getNumberOfPages:lt,pages:J,out:$,f2:C,f3:A,getPageInfo:bt,getPageInfoByObjId:_t,getCurrentPageInfo:jt,getPDFVersion:f,Point:aa,Rectangle:ra,Matrix:Ee,hasHotfix:yt},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return oa(q)},set:function(e){la(q,e)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return ca(q)},set:function(e){da(q,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,a=ee.length;t<a;t++){var r=at.call(this,e[t][0],e[t][1],e[t][2],ee[t][3],!0);!1===u&&(m[r]=!0);var n=e[t][0].split("-");tt({id:r,fontName:n[0],fontStyle:n[1]||""})}Se.publish("addFonts",{fonts:xe,dictionary:ge})}.call(h,ee),ue="F1",st(n,a),Se.publish("initialized"),h}Wo.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Wo.prototype.toHexString=function(e){return e.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Wo.prototype.hexToBytes=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(String.fromCharCode(parseInt(e.substr(a,2),16)));return t.join("")},Wo.prototype.processOwnerPassword=function(e,t){return Uo(qo(t).substr(0,5),e)},Wo.prototype.encryptor=function(e,t){var a=qo(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return Uo(a,e)}},Jo.prototype.equals=function(e){var t,a="id,objectNumber,equals";if(!e||(0,bi.A)(e)!==(0,bi.A)(this))return!1;var r=0;for(t in this)if(!(a.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&a.indexOf(t)<0&&r--;return 0===r},$o.API={events:[]},$o.version="2.5.2";var Xo=$o.API,Zo=1,el=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tl=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},al=function(e){return e.toFixed(2)},rl=function(e){return e.toFixed(5)};Xo.__acroform__={};var nl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},sl=function(e){return e*Zo},il=function(e){var t=new wl,a=Ml.internal.getHeight(e)||0,r=Ml.internal.getWidth(e)||0;return t.BBox=[0,0,Number(al(r)),Number(al(a))],t},ol=Xo.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},ll=Xo.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},cl=Xo.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},dl=Xo.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return cl(e,t-1)},ul=Xo.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return ol(e,t-1)},ml=Xo.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return ll(e,t-1)},hl=Xo.__acroform__.calculateCoordinates=function(e,t){var a=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,n=e[0],s=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=a(n)||0,l.lowerLeft_Y=r(s+o)||0,l.upperRight_X=a(n+i)||0,l.upperRight_Y=r(s)||0,[Number(al(l.lowerLeft_X)),Number(al(l.lowerLeft_Y)),Number(al(l.upperRight_X)),Number(al(l.upperRight_Y))]},pl=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],a=e._V||e.DV,r=fl(e,a),n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+n+" "+al(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=il(e);return s.scope=e.scope,s.stream=t.join("\n"),s}},fl=function(e,t){var a=0===e.fontSize?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},n=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");n=e.multiline?n.map(function(e){return e.split("\n")}):n.map(function(e){return[e]});var s=a,i=Ml.internal.getHeight(e)||0;i=i<0?-i:i;var o=Ml.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,a,r){if(t+1<n.length){var s=a+" "+n[t+1][0];return xl(s,e,r).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var c,d,u=xl("3",e,s).height,m=e.multiline?i-s:(i-u)/2,h=m+=2,p=0,f=0,x=0;if(s<=0){t="(...) Tj\n",t+="% Width of Text: "+xl(t,e,s=12).width+", FieldWidth:"+o+"\n";break}for(var g="",y=0,v=0;v<n.length;v++)if(n.hasOwnProperty(v)){var b=!1;if(1!==n[v].length&&x!==n[v].length-1){if((u+2)*(y+2)+2>i)continue e;g+=n[v][x],b=!0,f=v,v--}else{g=" "==(g+=n[v][x]+" ").substr(g.length-1)?g.substr(0,g.length-1):g;var _=parseInt(v),j=l(_,g,s),w=v>=n.length-1;if(j&&!w){g+=" ",x=0;continue}if(j||w){if(w)f=_;else if(e.multiline&&(u+2)*(y+2)+2>i)continue e}else{if(!e.multiline)continue e;if((u+2)*(y+2)+2>i)continue e;f=_}}for(var N="",k=p;k<=f;k++){var S=n[k];if(e.multiline){if(k===f){N+=S[x]+" ",x=(x+1)%S.length;continue}if(k===p){N+=S[S.length-1]+" ";continue}}N+=S[0]+" "}switch(N=" "==N.substr(N.length-1)?N.substr(0,N.length-1):N,d=xl(N,e,s).width,e.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}t+=al(c)+" "+al(h)+" Td\n",t+="("+el(N)+") Tj\n",t+=-al(c)+" 0 Td\n",h=-(s+2),d=0,p=b?f:f+1,y++,g=""}break}return r.text=t,r.fontSize=s,r},xl=function(e,t,a){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:n}},gl={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},yl=function(e,t){var a={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find(function(e){return e.type===a.type&&e.object===a.object})&&t.internal.getPageInfo(e.page).pageContext.annotations.push(a)},vl=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(kl.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(gl)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Zo=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Nl,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];r.objId=void 0,r.hasAnnotation&&yl(r,e)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(t){!function(e,t){var a=!e;for(var r in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var n=e[r],s=[],i=n.Rect;if(n.Rect&&(n.Rect=hl(n.Rect,t)),t.internal.newObjectDeferredBegin(n.objId,!0),n.DA=Ml.createDefaultAppearanceStream(n),"object"===(0,bi.A)(n)&&"function"==typeof n.getKeyValueListForStream&&(s=n.getKeyValueListForStream()),n.Rect=i,n.hasAppearanceStream&&!n.appearanceStreamContent){var o=pl(n);s.push({key:"AP",value:"<</N "+o+">>"}),t.internal.acroformPlugin.xForms.push(o)}if(n.appearanceStreamContent){var l="";for(var c in n.appearanceStreamContent)if(n.appearanceStreamContent.hasOwnProperty(c)){var d=n.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var r in d)if(d.hasOwnProperty(r)){var u=d[r];"function"==typeof u&&(u=u.call(t,n)),l+="/"+r+" "+u+" ",t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u)}}else"function"==typeof(u=d)&&(u=u.call(t,n)),l+="/"+r+" "+u,t.internal.acroformPlugin.xForms.indexOf(u)>=0||t.internal.acroformPlugin.xForms.push(u);l+=">>"}s.push({key:"AP",value:"<<\n"+l+">>"})}t.internal.putStream({additionalKeyValues:s,objectId:n.objId}),t.internal.out("endobj")}a&&function(e,t){for(var a in e)if(e.hasOwnProperty(a)){var r=a,n=e[a];t.internal.newObjectDeferredBegin(n.objId,!0),"object"===(0,bi.A)(n)&&"function"==typeof n.putStream&&n.putStream(),delete e[r]}}(t.internal.acroformPlugin.xForms,t)}(t,e)}),e.internal.acroformPlugin.isInitialized=!0}},bl=Xo.__acroform__.arrayToPdfArray=function(e,t,a){var r=function(e){return e};if(Array.isArray(e)){for(var n="[",s=0;s<e.length;s++)switch(0!==s&&(n+=" "),(0,bi.A)(e[s])){case"boolean":case"number":case"object":n+=e[s].toString();break;case"string":"/"!==e[s].substr(0,1)?(void 0!==t&&a&&(r=a.internal.getEncryptor(t)),n+="("+el(r(e[s].toString()))+")"):n+=e[s].toString()}return n+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},_l=function(e,t,a){var r=function(e){return e};return void 0!==t&&a&&(r=a.internal.getEncryptor(t)),(e=e||"").toString(),"("+el(r(e))+")"},jl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};jl.prototype.toString=function(){return this.objId+" 0 R"},jl.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},jl.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)});for(var a in t)if(!1===Object.getOwnPropertyDescriptor(this,t[a]).configurable){var r=t[a],n=this[r];n&&(Array.isArray(n)?e.push({key:r,value:bl(n,this.objId,this.scope)}):n instanceof jl?(n.scope=this.scope,e.push({key:r,value:n.objId+" 0 R"})):"function"!=typeof n&&e.push({key:r,value:n}))}return e};var wl=function(){jl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};nl(wl,jl);var Nl=function(){jl.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+el(t(e))+")"}},set:function(t){e=t}})};nl(Nl,jl);var kl=function e(){jl.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(t,3))},set:function(e){!0===Boolean(e)?this.F=ul(t,3):this.F=ml(t,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');a=e}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(e){r=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(e){r[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(e){r[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(e){r[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(e){r[3]=e}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Ol)return;s="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+el(t(s))+")"},set:function(e){s=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(e){s=e}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Zo:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof Ol||this instanceof Rl))return _l(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Pl==0?_l(m,this.objId,this.scope):m},set:function(e){e=e.toString(),m=this instanceof Pl==0?"("===e.substr(0,1)?tl(e.substr(1,e.length-2)):tl(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pl==1?tl(m.substr(1,m.length-1)):m},set:function(e){e=e.toString(),m=this instanceof Pl==1?"/"+e:e}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof Pl==0?_l(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof Pl==0?"("===e.substr(0,1)?tl(e.substr(1,e.length-2)):tl(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pl==1?tl(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof Pl==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(e){e=Boolean(e),f=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,1):this.Ff=ml(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,2):this.Ff=ml(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,3):this.Ff=ml(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==x)return x},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');x=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(x){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:x=2;break;case"center":case 1:x=1;break;default:x=0}}})};nl(kl,jl);var Sl=function(){kl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return bl(t,this.objId,this.scope)},set:function(e){var a,r;r=[],"string"==typeof(a=e)&&(r=function(e,t,a){a||(a=1);for(var r,n=[];r=t.exec(e);)n.push(r[a]);return n}(a,/\((.*?)\)/g)),t=r}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,a){for(a=a||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==a););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,18):this.Ff=ml(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=ul(this.Ff,19):this.Ff=ml(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=ul(this.Ff,20),t.sort()):this.Ff=ml(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,22):this.Ff=ml(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,23):this.Ff=ml(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,27):this.Ff=ml(this.Ff,27)}}),this.hasAppearanceStream=!1};nl(Sl,kl);var Cl=function(){Sl.call(this),this.fontName="helvetica",this.combo=!1};nl(Cl,Sl);var Al=function(){Cl.call(this),this.combo=!0};nl(Al,Cl);var Ll=function(){Al.call(this),this.edit=!0};nl(Ll,Al);var Pl=function(){kl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,15):this.Ff=ml(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,16):this.Ff=ml(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,17):this.Ff=ml(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,26):this.Ff=ml(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var a,r=[];for(a in r.push("<<"),t)r.push("/"+a+" ("+el(e(t[a]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===(0,bi.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};nl(Pl,kl);var El=function(){Pl.call(this),this.pushButton=!0};nl(El,Pl);var Fl=function(){Pl.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};nl(Fl,Pl);var Ol=function(){var e,t;kl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var a,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,a=[];for(t in a.push("<<"),r)a.push("/"+t+" ("+el(e(r[t]))+")");return a.push(">>"),a.join("\n")},set:function(e){"object"===(0,bi.A)(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(e){a="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ml.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};nl(Ol,kl),Fl.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var a=this.Kids[t];a.appearanceStreamContent=e.createAppearanceStream(a.optionName),a.caption=e.getCA()}},Fl.prototype.createOption=function(e){var t=new Ol;return t.Parent=this,t.optionName=e,this.Kids.push(t),Tl.call(this.scope,t),t};var Il=function(){Pl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ml.CheckBox.createAppearanceStream()};nl(Il,Pl);var Rl=function(){kl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,13):this.Ff=ml(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,21):this.Ff=ml(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,23):this.Ff=ml(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,24):this.Ff=ml(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,25):this.Ff=ml(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,26):this.Ff=ml(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};nl(Rl,kl);var Dl=function(){Rl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(dl(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=ul(this.Ff,14):this.Ff=ml(this.Ff,14)}}),this.password=!0};nl(Dl,Rl);var Ml={CheckBox:{createAppearanceStream:function(){return{N:{On:Ml.CheckBox.YesNormal},D:{On:Ml.CheckBox.YesPushDown,Off:Ml.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=il(e);t.scope=e.scope;var a=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),s=fl(e,e.caption);return a.push("0.749023 g"),a.push("0 0 "+al(Ml.internal.getWidth(e))+" "+al(Ml.internal.getHeight(e))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+r+" "+al(s.fontSize)+" Tf "+n),a.push("BT"),a.push(s.text),a.push("ET"),a.push("Q"),a.push("EMC"),t.stream=a.join("\n"),t},YesNormal:function(e){var t=il(e);t.scope=e.scope;var a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),n=[],s=Ml.internal.getHeight(e),i=Ml.internal.getWidth(e),o=fl(e,e.caption);return n.push("1 g"),n.push("0 0 "+al(i)+" "+al(s)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+al(i-1)+" "+al(s-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+a+" "+al(o.fontSize)+" Tf "+r),n.push(o.text),n.push("ET"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=il(e);t.scope=e.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+al(Ml.internal.getWidth(e))+" "+al(Ml.internal.getHeight(e))+" re"),a.push("f"),t.stream=a.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ml.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ml.RadioButton.Circle.YesNormal,t.D[e]=Ml.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=il(e);t.scope=e.scope;var a=[],r=Ml.internal.getWidth(e)<=Ml.internal.getHeight(e)?Ml.internal.getWidth(e)/4:Ml.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var n=Ml.internal.Bezier_C,s=Number((r*n).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+rl(Ml.internal.getWidth(e)/2)+" "+rl(Ml.internal.getHeight(e)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),a.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),a.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),a.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join("\n"),t},YesPushDown:function(e){var t=il(e);t.scope=e.scope;var a=[],r=Ml.internal.getWidth(e)<=Ml.internal.getHeight(e)?Ml.internal.getWidth(e)/4:Ml.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var n=Number((2*r).toFixed(5)),s=Number((n*Ml.internal.Bezier_C).toFixed(5)),i=Number((r*Ml.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+rl(Ml.internal.getWidth(e)/2)+" "+rl(Ml.internal.getHeight(e)/2)+" cm"),a.push(n+" 0 m"),a.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),a.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),a.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),a.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+rl(Ml.internal.getWidth(e)/2)+" "+rl(Ml.internal.getHeight(e)/2)+" cm"),a.push(r+" 0 m"),a.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),a.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),a.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),a.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=il(e);t.scope=e.scope;var a=[],r=Ml.internal.getWidth(e)<=Ml.internal.getHeight(e)?Ml.internal.getWidth(e)/4:Ml.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var n=Number((2*r).toFixed(5)),s=Number((n*Ml.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+rl(Ml.internal.getWidth(e)/2)+" "+rl(Ml.internal.getHeight(e)/2)+" cm"),a.push(n+" 0 m"),a.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),a.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),a.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),a.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ml.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ml.RadioButton.Cross.YesNormal,t.D[e]=Ml.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=il(e);t.scope=e.scope;var a=[],r=Ml.internal.calculateCross(e);return a.push("q"),a.push("1 1 "+al(Ml.internal.getWidth(e)-2)+" "+al(Ml.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(al(r.x1.x)+" "+al(r.x1.y)+" m"),a.push(al(r.x2.x)+" "+al(r.x2.y)+" l"),a.push(al(r.x4.x)+" "+al(r.x4.y)+" m"),a.push(al(r.x3.x)+" "+al(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join("\n"),t},YesPushDown:function(e){var t=il(e);t.scope=e.scope;var a=Ml.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+al(Ml.internal.getWidth(e))+" "+al(Ml.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+al(Ml.internal.getWidth(e)-2)+" "+al(Ml.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(al(a.x1.x)+" "+al(a.x1.y)+" m"),r.push(al(a.x2.x)+" "+al(a.x2.y)+" l"),r.push(al(a.x4.x)+" "+al(a.x4.y)+" m"),r.push(al(a.x3.x)+" "+al(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=il(e);t.scope=e.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+al(Ml.internal.getWidth(e))+" "+al(Ml.internal.getHeight(e))+" re"),a.push("f"),t.stream=a.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+a}};Ml.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ml.internal.getWidth(e),a=Ml.internal.getHeight(e),r=Math.min(t,a);return{x1:{x:(t-r)/2,y:(a-r)/2+r},x2:{x:(t-r)/2+r,y:(a-r)/2},x3:{x:(t-r)/2,y:(a-r)/2},x4:{x:(t-r)/2+r,y:(a-r)/2+r}}}},Ml.internal.getWidth=function(e){var t=0;return"object"===(0,bi.A)(e)&&(t=sl(e.Rect[2])),t},Ml.internal.getHeight=function(e){var t=0;return"object"===(0,bi.A)(e)&&(t=sl(e.Rect[3])),t};var Tl=Xo.addField=function(e){if(vl(this,e),!(e instanceof kl))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Xo.AcroFormChoiceField=Sl,Xo.AcroFormListBox=Cl,Xo.AcroFormComboBox=Al,Xo.AcroFormEditBox=Ll,Xo.AcroFormButton=Pl,Xo.AcroFormPushButton=El,Xo.AcroFormRadioButton=Fl,Xo.AcroFormCheckBox=Il,Xo.AcroFormTextField=Rl,Xo.AcroFormPasswordField=Dl,Xo.AcroFormAppearance=Ml,Xo.AcroForm={ChoiceField:Sl,ListBox:Cl,ComboBox:Al,EditBox:Ll,Button:Pl,PushButton:El,RadioButton:Fl,CheckBox:Il,TextField:Rl,PasswordField:Dl,Appearance:Ml},$o.AcroForm={ChoiceField:Sl,ListBox:Cl,ComboBox:Al,EditBox:Ll,Button:Pl,PushButton:El,RadioButton:Fl,CheckBox:Il,TextField:Rl,PasswordField:Dl,Appearance:Ml};$o.AcroForm;function ql(e){return e.reduce(function(e,t,a){return e[t]=a,e},{})}!function(e){e.__addimage__={};var t="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(e,r){var n,s,i,o,l,c=t;if("RGBA"===(r=r||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(j(e))for(l in a)for(i=a[l],n=0;n<i.length;n+=1){for(o=!0,s=0;s<i[n].length;s+=1)if(void 0!==i[n][s]&&i[n][s]!==e[s]){o=!1;break}if(!0===o){c=l;break}}else for(l in a)for(i=a[l],n=0;n<i.length;n+=1){for(o=!0,s=0;s<i[n].length;s+=1)if(void 0!==i[n][s]&&i[n][s]!==e.charCodeAt(s)){o=!1;break}if(!0===o){c=l;break}}return c===t&&r!==t&&(c=r),c},n=function e(t){for(var a=this.internal.write,r=this.internal.putStream,n=(0,this.internal.getFilters)();-1!==n.indexOf("FlateEncode");)n.splice(n.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:t.width}),s.push({key:"Height",value:t.height}),t.colorSpace===x.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===x.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var i="",o=0,l=t.transparency.length;o<l;o++)i+=t.transparency[o]+" "+t.transparency[o]+" ";s.push({key:"Mask",value:"["+i+"]"})}void 0!==t.sMask&&s.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(r({data:t.data,additionalKeyValues:s,alreadyAppliedFilters:c,objectId:t.objectId}),a("endobj"),"sMask"in t&&void 0!==t.sMask){var d="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,u={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:d,data:t.sMask};"filter"in t&&(u.filter=t.filter),e.call(this,u)}if(t.colorSpace===x.INDEXED){var m=this.internal.newObject();r({data:N(new Uint8Array(t.palette)),objectId:m}),a("endobj")}},s=function(){var e=this.internal.collections.addImage_images;for(var t in e)n.call(this,e[t])},i=function(){var e,t=this.internal.collections.addImage_images,a=this.internal.write;for(var r in t)a("/I"+(e=t[r]).index,e.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var e=this.internal.collections.addImage_images;return o.call(this),e},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(t){return"function"==typeof e["process"+t.toUpperCase()]},u=function(e){return"object"===(0,bi.A)(e)&&1===e.nodeType},m=function(t,a){if("IMG"===t.nodeName&&t.hasAttribute("src")){var r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return No(unescape(r).split("base64,").pop());var n=e.loadFile(r,!0);if(void 0!==n)return n}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var s;switch(a){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;default:s="image/jpeg"}return No(t.toDataURL(s,1).split("base64,").pop())}},h=function(e){var t=this.internal.collections.addImage_images;if(t)for(var a in t)if(e===t[a].alias)return t[a]},p=function(e,t,a){return e||t||(e=-96,t=-96),e<0&&(e=-1*a.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*a.height*72/t/this.internal.scaleFactor),0===e&&(e=t*a.width/a.height),0===t&&(t=e*a.height/a.width),[e,t]},f=function(e,t,a,r,n,s){var i=p.call(this,a,r,n),o=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,d=l.call(this);if(a=i[0],r=i[1],d[n.index]=n,s){s*=Math.PI/180;var u=Math.cos(s),m=Math.sin(s),h=function(e){return e.toFixed(4)},f=[h(u),h(m),h(-1*m),h(u),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,o(e),c(t+r),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([o(a),"0","0",o(r),"0","0","cm"].join(" "))):this.internal.write([o(a),"0","0",o(r),o(e),c(t+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+n.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(e){var t,a,r=0;if("string"==typeof e)for(a=e.length,t=0;t<a;t++)r=(r<<5)-r+e.charCodeAt(t),r|=0;else if(j(e))for(a=e.byteLength/2,t=0;t<a;t++)r=(r<<5)-r+e[t],r|=0;return r},v=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},b=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),a=null;if(2===t.length){var r=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(r)&&(a={mimeType:r[1],charset:r[2],data:t[1]})}return a},_=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return _()&&e instanceof ArrayBuffer};var j=e.__addimage__.isArrayBufferView=function(e){return _()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},w=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,a=new Uint8Array(t),r=0;r<t;r++)a[r]=e.charCodeAt(r);return a},N=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",a=j(e)?e:new Uint8Array(e),r=0;r<a.length;r+=8192)t+=String.fromCharCode.apply(null,a.subarray(r,r+8192));return t};e.addImage=function(){var e,a,r,n,s,i,l,c,d;if("number"==typeof arguments[1]?(a=t,r=arguments[1],n=arguments[2],s=arguments[3],i=arguments[4],l=arguments[5],c=arguments[6],d=arguments[7]):(a=arguments[1],r=arguments[2],n=arguments[3],s=arguments[4],i=arguments[5],l=arguments[6],c=arguments[7],d=arguments[8]),"object"===(0,bi.A)(e=arguments[0])&&!u(e)&&"imageData"in e){var m=e;e=m.imageData,a=m.format||a||t,r=m.x||r||0,n=m.y||n||0,s=m.w||m.width||s,i=m.h||m.height||i,l=m.alias||l,c=m.compression||c,d=m.rotation||m.angle||d}var h=this.internal.getFilters();if(void 0===c&&-1!==h.indexOf("FlateEncode")&&(c="SLOW"),isNaN(r)||isNaN(n))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var p=k.call(this,e,a,l,c);return f.call(this,r,n,s,i,p,d),this};var k=function(a,n,s,i){var o,l,p;if("string"==typeof a&&r(a)===t){a=unescape(a);var f=S(a,!1);(""!==f||void 0!==(f=e.loadFile(a,!0)))&&(a=f)}if(u(a)&&(a=m(a,n)),n=r(a,n),!d(n))throw new Error("addImage does not support files of type '"+n+"', please ensure that a plugin for '"+n+"' support is added.");if((null==(p=s)||0===p.length)&&(s=function(e){return"string"==typeof e||j(e)?y(e):j(e.data)?y(e.data):null}(a)),(o=h.call(this,s))||(_()&&(a instanceof Uint8Array||"RGBA"===n||(l=a,a=w(a))),o=this["process"+n.toUpperCase()](a,c.call(this),s,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:g.NONE}(i),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},S=e.__addimage__.convertBase64ToBinaryString=function(e,t){var a;t="boolean"!=typeof t||t;var r,n="";if("string"==typeof e){r=null!==(a=b(e))?a.data:e;try{n=No(r)}catch(e){if(t)throw v(r)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return n};e.getImageProperties=function(a){var n,s,i="";if(u(a)&&(a=m(a)),"string"==typeof a&&r(a)===t&&(""===(i=S(a,!1))&&(i=e.loadFile(a)||""),a=i),s=r(a),!d(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(!_()||a instanceof Uint8Array||(a=w(a)),!(n=this["process"+s.toUpperCase()](a)))throw new Error("An unknown error occurred whilst processing the image");return n.fileType=s,n}}($o.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};$o.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var a,r,n,s=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((a=l[d]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){a=l[u];var m=this.internal.pdfEscape,h=this.internal.getEncryptor(e.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(p.objId),g=a.title||"Note";n="<</Type /Annot /Subtype /Text "+(r="/Rect ["+s(a.bounds.x)+" "+i(a.bounds.y+a.bounds.h)+" "+s(a.bounds.x+a.bounds.w)+" "+i(a.bounds.y)+"] ")+"/Contents ("+m(x(a.contents))+")",n+=" /Popup "+f.objId+" 0 R",n+=" /P "+o.objId+" 0 R",n+=" /T ("+m(x(g))+") >>",p.content=n;var y=p.objId+" 0 R";n="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+s(a.bounds.x+30)+" "+i(a.bounds.y+a.bounds.h)+" "+s(a.bounds.x+a.bounds.w+30)+" "+i(a.bounds.y)+"] ")+" /Parent "+y,a.open&&(n+=" /Open true"),n+=" >>",f.content=n,this.internal.write(p.objId,"0 R",f.objId,"0 R");break;case"freetext":r="/Rect ["+s(a.bounds.x)+" "+i(a.bounds.y)+" "+s(a.bounds.x+a.bounds.w)+" "+i(a.bounds.y+a.bounds.h)+"] ";var v=a.color||"#000000";n="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+m(h(a.contents))+")",n+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",n+=" /Border [0 0 0]",n+=" >>",this.internal.write(n);break;case"link":if(a.options.name){var b=this.annotations._nameMap[a.options.name];a.options.pageNumber=b.page,a.options.top=b.y}else a.options.top||(a.options.top=0);if(r="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",n="",a.options.url)n="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+m(h(a.options.url))+") >>";else if(a.options.pageNumber)switch(n="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":n+=" /Fit]";break;case"FitH":n+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,n+=" /FitV "+a.options.left+"]";break;default:var _=i(a.options.top);a.options.left=a.options.left||0,void 0===a.options.zoom&&(a.options.zoom=0),n+=" /XYZ "+a.options.left+" "+_+" "+a.options.zoom+"]"}""!=n&&(n+=" >>",this.internal.write(n))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,a,r,n){var s=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:i(e),y:o(t),w:i(e+a),h:o(t+r)},options:n,type:"link"})},e.textWithLink=function(e,t,a,r){var n,s,i=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==r.maxWidth){s=r.maxWidth;var l=this.splitTextToSize(e,s).length;n=Math.ceil(o*l)}else s=i,n=o;return this.text(e,t,a,r),a+=.2*o,"center"===r.align&&(t-=i/2),"right"===r.align&&(t-=i),this.link(t,a-o,s,n,r),i},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}($o.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},i=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return i(e)&&n.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return i(e)&&s(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,r=a,n="",s=0;for(t=0;t<e.length;t+=1)void 0!==r[e.charCodeAt(t)]?(s++,"number"==typeof(r=r[e.charCodeAt(t)])&&(n+=String.fromCharCode(r),r=a,s=0),t===e.length-1&&(r=a,n+=e.charAt(t-(s-1)),t-=s-1,s=0)):(r=a,n+=e.charAt(t-s),t-=s,s=0);return n};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==r[e.charCodeAt(0)]};var m=e.__arabicParser__.getCorrectForm=function(e,t,a){return i(e)?!1===s(e)?-1:!c(e)||!i(t)&&!i(a)||!i(a)&&o(t)||o(e)&&!i(t)||o(e)&&l(t)||o(e)&&o(t)?0:d(e)&&i(t)&&!o(t)&&i(a)&&c(a)?3:o(e)||!i(a)?1:2:-1},h=function(e){var a=0,r=0,n=0,s="",o="",l="",c=(e=e||"").split("\\s+"),d=[];for(a=0;a<c.length;a+=1){for(d.push(""),r=0;r<c[a].length;r+=1)s=c[a][r],o=c[a][r-1],l=c[a][r+1],i(s)?(n=m(s,o,l),d[a]+=-1!==n?String.fromCharCode(t[s.charCodeAt(0)][n]):s):d[a]+=s;d[a]=u(d[a])}return d.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,a=[];if(Array.isArray(t)){var r=0;for(a=[],r=0;r<t.length;r+=1)Array.isArray(t[r])?a.push([h(t[r][0]),t[r][1],t[r][2]]):a.push([h(t[r])]);e=a}else e=h(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}($o.API),$o.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")});return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(e){a=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(e){r=e}});var n={};Object.defineProperty(this,"style",{get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var a;if("2d"!==(e=e||"2d"))return null;for(a in t)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=t[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}($o.API),function(e){var t={left:0,top:0,bottom:0,right:0},a=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var a=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var n=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var i=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return i},set:function(e){i=e}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){r.call(this);var a=(t=t||{}).fontSize||this.getFontSize(),n=t.font||this.getFont(),s=t.scaleFactor||this.internal.scaleFactor,i=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(e,t){return e.concat(c.splitTextToSize(t,d))},[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)i<(l=this.getStringUnitWidth(e[u],{font:n})*a)&&(i=l);return 0!==i&&(o=e.length),{w:i/=s,h:Math.max((o*a*this.getLineHeightFactor()-a*(this.getLineHeightFactor()-1))/s,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var e;e=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var n=this.internal.__cell__.lastCell,i=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==n.lineNumber&&(n.lineNumber===e.lineNumber?(e.x=(n.x||0)+(n.width||0),e.y=n.y||0):n.y+n.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=n.y+n.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===a?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-i,e.y+i,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+i,{align:"center",baseline:"top",maxWidth:e.width-i-i}):this.text(e.text,e.x+i,e.y+i,{align:"left",baseline:"top",maxWidth:e.width-i-i})),this.internal.__cell__.lastCell=e,this};e.table=function(e,a,l,c,d){if(r.call(this),!l)throw new Error("No data for PDF table.");var u,m,h,p,f=[],x=[],g=[],y={},v={},b=[],_=[],j=(d=d||{}).autoSize||!1,w=!1!==d.printHeaders,N=d.css&&void 0!==d.css["font-size"]?16*d.css["font-size"]:d.fontSize||12,k=d.margins||Object.assign({width:this.getPageWidth()},t),S="number"==typeof d.padding?d.padding:3,C=d.headerBackgroundColor||"#c8c8c8",A=d.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=w,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=N,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=C,this.internal.__cell__.headerTextColor=A,this.setFontSize(N),null==c)x=f=Object.keys(l[0]),g=f.map(function(){return"left"});else if(Array.isArray(c)&&"object"===(0,bi.A)(c[0]))for(f=c.map(function(e){return e.name}),x=c.map(function(e){return e.prompt||e.name||""}),g=c.map(function(e){return e.align||"left"}),u=0;u<c.length;u+=1)v[c[u].name]=c[u].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(x=f=c,g=f.map(function(){return"left"}));if(j||Array.isArray(c)&&"string"==typeof c[0])for(u=0;u<f.length;u+=1){for(y[p=f[u]]=l.map(function(e){return e[p]}),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(x[u],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=y[p],this.setFont(void 0,"normal"),h=0;h<m.length;h+=1)b.push(this.getTextDimensions(m[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);v[p]=Math.max.apply(null,b)+S+S,b=[]}if(w){var L={};for(u=0;u<f.length;u+=1)L[f[u]]={},L[f[u]].text=x[u],L[f[u]].align=g[u];var P=o.call(this,L,v);_=f.map(function(t){return new s(e,a,v[t],P,L[t].text,void 0,L[t].align)}),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var E=c.reduce(function(e,t){return e[t.name]=t.align,e},{});for(u=0;u<l.length;u+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:u,data:l[u]},this);var F=o.call(this,l[u],v);for(h=0;h<f.length;h+=1){var O=l[u][f[h]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:u,col:h,data:O},this),i.call(this,new s(e,a,v[f[h]],F,O,u+2,E[f[h]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=a,this};var o=function(e,t){var a=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,n=this.internal.scaleFactor;return Object.keys(e).map(function(r){var n=e[r];return this.splitTextToSize(n.hasOwnProperty("text")?n.text:n,t[r]-a-a)},this).map(function(e){return this.getLineHeightFactor()*e.length*r/n+a+a},this).reduce(function(e,t){return Math.max(e,t)},0)};e.setTableHeaderRow=function(e){r.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var n;if(a=!0,"function"==typeof this.internal.__cell__.headerFunction){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){n=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(n.y=this.internal.__cell__.margins.top||0,l.push(n)),n.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,n),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),a=!1}}($o.API);var zl={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Bl=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ul=ql(Bl),Hl=[100,200,300,400,500,600,700,800,900],Wl=ql(Hl);function Vl(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),a=function(e){return zl[e=e||"normal"]?e:"normal"}(e.style),r=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),n=function(e){return"number"==typeof Ul[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:a,weight:r,stretch:n,src:e.src||[],ref:e.ref||{name:t,style:[n,a,r].join(" ")}}}function Ql(e,t,a,r){var n;for(n=a;n>=0&&n<t.length;n+=r)if(e[t[n]])return e[t[n]];for(n=a;n>=0&&n<t.length;n-=r)if(e[t[n]])return e[t[n]]}var Jl={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Yl={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Gl(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Kl(e){return e.trimLeft()}function $l(e,t){for(var a=0;a<e.length;){if(e.charAt(a)===t)return[e.substring(0,a),e.substring(a+1)];a+=1}return null}function Xl(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Zl,ec,tc,ac,rc=["times"];!function(e){var t,a,r,n,s,i,o,l,c,d=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new l,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new i,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new i,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,a=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var u=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var a=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return a},set:function(e){a=Boolean(e)}});var r=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return r},set:function(e){r=Boolean(e)}});var n=0;Object.defineProperty(this,"posX",{get:function(){return n},set:function(e){isNaN(e)||(n=e)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(e){isNaN(e)||(s=e)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),c.margin=t}});var i=!1;Object.defineProperty(this,"autoPaging",{get:function(){return i},set:function(e){i=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(e){e instanceof d&&(c=e)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(e){c.path=e}});var u=[];Object.defineProperty(this,"ctxStack",{get:function(){return u},set:function(e){u=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=m(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=m(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var h=null;function p(e,t){if(null===h){var a=function(e){var t=[];return Object.keys(e).forEach(function(a){e[a].forEach(function(e){var r=null;switch(e){case"bold":r={family:a,weight:"bold"};break;case"italic":r={family:a,style:"italic"};break;case"bolditalic":r={family:a,weight:"bold",style:"italic"};break;case"":case"normal":r={family:a}}null!==r&&(r.ref={name:a,style:e},t.push(r))})}),t}(e.getFontList());h=function(e){for(var t={},a=0;a<e.length;++a){var r=Vl(e[a]),n=r.family,s=r.stretch,i=r.style,o=r.weight;t[n]=t[n]||{},t[n][s]=t[n][s]||{},t[n][s][i]=t[n][s][i]||{},t[n][s][i][o]=r}return t}(a.concat(t))}return h}var f=null;Object.defineProperty(this,"fontFaces",{get:function(){return f},set:function(e){h=null,f=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var a=t[1],r=(t[2],t[3]),n=t[4],s=(t[5],t[6]),i=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(n)[2];n="px"===i?Math.floor(parseFloat(n)*this.pdf.internal.scaleFactor):"em"===i?Math.floor(parseFloat(n)*this.pdf.getFontSize()):Math.floor(parseFloat(n)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(n);var o=function(e){var t,a,r=[],n=e.trim();if(""===n)return rc;if(n in Yl)return[Yl[n]];for(;""!==n;){switch(a=null,t=(n=Kl(n)).charAt(0)){case'"':case"'":a=$l(n.substring(1),t);break;default:a=Xl(n)}if(null===a)return rc;if(r.push(a[0]),""!==(n=Kl(a[1]))&&","!==n.charAt(0))return rc;n=n.replace(/^,/,"")}return r}(s);if(this.fontFaces){var l=function(e,t,a){for(var r=(a=a||{}).defaultFontFamily||"times",n=Object.assign({},Jl,a.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(n[(s=Vl(t[o])).family]&&(s.family=n[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[r]))throw new Error("Could not find a font-family for the rule '"+Gl(s)+"' and default family '"+r+"'.");if(i=function(e,t){if(t[e])return t[e];var a=Ul[e],r=a<=Ul.normal?-1:1,n=Ql(t,Bl,a,r);if(!n)throw new Error("Could not find a matching font-stretch value for "+e);return n}(s.stretch,i),i=function(e,t){if(t[e])return t[e];for(var a=zl[e],r=0;r<a.length;++r)if(t[a[r]])return t[a[r]];throw new Error("Could not find a matching font-style for "+e)}(s.style,i),!(i=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var a=Wl[e],r=Ql(t,Hl,a,e<400?-1:1);if(!r)throw new Error("Could not find a matching font-weight for value "+e);return r}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+Gl(s)+"'.");return i}(p(this.pdf,this.fontFaces),o.map(function(e){return{family:e,stretch:"normal",weight:r,style:a}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===r||parseInt(r,10)>=700||"bold"===a)&&(c="bold"),"italic"===a&&(c+="italic"),0===c.length&&(c="normal");for(var d="",u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},m=0;m<o.length;m++){if(void 0!==this.pdf.internal.getFont(o[m],c,{noFallback:!0,disableWarning:!0})){d=o[m];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(o[m],"bold",{noFallback:!0,disableWarning:!0}))d=o[m],c="bold";else if(void 0!==this.pdf.internal.getFont(o[m],"normal",{noFallback:!0,disableWarning:!0})){d=o[m],c="normal";break}}if(""===d)for(var h=0;h<o.length;h++)if(u[o[h]]){d=u[o[h]];break}d=""===d?"Times":d,this.pdf.setFont(d,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,M.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,M.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};u.prototype.setLineDash=function(e){this.lineDash=e},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){b.call(this,"fill",!1)},u.prototype.stroke=function(){b.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw bo.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var a=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"mt",x:a.x,y:a.y}),this.ctx.lastPoint=new i(e,t)},u.prototype.closePath=function(){var e=new i(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,bi.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new i(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(e.x,e.y)},u.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw bo.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var a=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"lt",x:a.x,y:a.y}),this.ctx.lastPoint=new i(a.x,a.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),b.call(this,null,!0)},u.prototype.quadraticCurveTo=function(e,t,a,r){if(isNaN(a)||isNaN(r)||isNaN(e)||isNaN(t))throw bo.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var n=this.ctx.transform.applyToPoint(new i(a,r)),s=this.ctx.transform.applyToPoint(new i(e,t));this.path.push({type:"qct",x1:s.x,y1:s.y,x:n.x,y:n.y}),this.ctx.lastPoint=new i(n.x,n.y)},u.prototype.bezierCurveTo=function(e,t,a,r,n,s){if(isNaN(n)||isNaN(s)||isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r))throw bo.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new i(n,s)),l=this.ctx.transform.applyToPoint(new i(e,t)),c=this.ctx.transform.applyToPoint(new i(a,r));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:o.x,y:o.y}),this.ctx.lastPoint=new i(o.x,o.y)},u.prototype.arc=function(e,t,a,r,n,s){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r)||isNaN(n))throw bo.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new i(e,t));e=o.x,t=o.y;var l=this.ctx.transform.applyToPoint(new i(0,a)),c=this.ctx.transform.applyToPoint(new i(0,0));a=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(n-r)>=2*Math.PI&&(r=0,n=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:a,startAngle:r,endAngle:n,counterclockwise:s})},u.prototype.arcTo=function(e,t,a,r,n){throw new Error("arcTo not implemented.")},u.prototype.rect=function(e,t,a,r){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r))throw bo.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+a,t),this.lineTo(e+a,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.lineTo(e+a,t),this.lineTo(e,t)},u.prototype.fillRect=function(e,t,a,r){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r))throw bo.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var n={};"butt"!==this.lineCap&&(n.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(n.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,a,r),this.fill(),n.hasOwnProperty("lineCap")&&(this.lineCap=n.lineCap),n.hasOwnProperty("lineJoin")&&(this.lineJoin=n.lineJoin)}},u.prototype.strokeRect=function(e,t,a,r){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r))throw bo.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,a,r),this.stroke())},u.prototype.clearRect=function(e,t,a,r){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r))throw bo.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,a,r))},u.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,a=0;a<this.pdf.internal.getNumberOfPages();a++)this.pdf.setPage(a+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},u.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,a=0;a<this.pdf.internal.getNumberOfPages();a++)this.pdf.setPage(a+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(e){var t,a,r,n;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,a=0,r=0,n=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==s)t=parseInt(s[1]),a=parseInt(s[2]),r=parseInt(s[3]),n=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(s[1]),a=parseInt(s[2]),r=parseInt(s[3]),n=parseFloat(s[4]);else{if(n=1,"string"==typeof e&&"#"!==e.charAt(0)){var i=new Co(e);e=i.ok?i.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,a=e.substring(2,3),a+=a,r=e.substring(3,4),r+=r):(t=e.substring(1,3),a=e.substring(3,5),r=e.substring(5,7)),t=parseInt(t,16),a=parseInt(a,16),r=parseInt(r,16)}}return{r:t,g:a,b:r,a:n,style:e}},h=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};u.prototype.fillText=function(e,t,a,r){if(isNaN(t)||isNaN(a)||"string"!=typeof e)throw bo.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!h.call(this)){var n=I(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;A.call(this,{text:e,x:t,y:a,scale:s,angle:n,align:this.textAlign,maxWidth:r})}},u.prototype.strokeText=function(e,t,a,r){if(isNaN(t)||isNaN(a)||"string"!=typeof e)throw bo.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){r=isNaN(r)?void 0:r;var n=I(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;A.call(this,{text:e,x:t,y:a,scale:s,renderingMode:"stroke",angle:n,align:this.textAlign,maxWidth:r})}},u.prototype.measureText=function(e){if("string"!=typeof e)throw bo.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,a=this.pdf.internal.scaleFactor,r=t.internal.getFontSize(),n=t.getStringUnitWidth(e)*r/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:n*=Math.round(96*a/72*1e4)/1e4})},u.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw bo.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var a=new l(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(a)},u.prototype.rotate=function(e){if(isNaN(e))throw bo.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new l(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},u.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw bo.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var a=new l(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(a)},u.prototype.transform=function(e,t,a,r,n,s){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(r)||isNaN(n)||isNaN(s))throw bo.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var i=new l(e,t,a,r,n,s);this.ctx.transform=this.ctx.transform.multiply(i)},u.prototype.setTransform=function(e,t,a,r,n,s){e=isNaN(e)?1:e,t=isNaN(t)?0:t,a=isNaN(a)?0:a,r=isNaN(r)?1:r,n=isNaN(n)?0:n,s=isNaN(s)?0:s,this.ctx.transform=new l(e,t,a,r,n,s)};var f=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(e,t,a,r,n,s,i,c,d){var u=this.pdf.getImageProperties(e),m=1,h=1,p=1,g=1;void 0!==r&&void 0!==c&&(p=c/r,g=d/n,m=u.width/r*c/r,h=u.height/n*d/n),void 0===s&&(s=t,i=a,t=0,a=0),void 0!==r&&void 0===c&&(c=r,d=n),void 0===r&&void 0===c&&(c=u.width,d=u.height);for(var b,j=this.ctx.transform.decompose(),w=I(j.rotate.shx),N=new l,k=(N=(N=(N=N.multiply(j.translate)).multiply(j.skew)).multiply(j.scale)).applyToRectangle(new o(s-t*p,i-a*g,r*m,n*h)),S=x.call(this,k),C=[],A=0;A<S.length;A+=1)-1===C.indexOf(S[A])&&C.push(S[A]);if(v(C),this.autoPaging)for(var L=C[0],P=C[C.length-1],E=L;E<P+1;E++){this.pdf.setPage(E);var F=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],O=1===E?this.posY+this.margin[0]:this.margin[0],R=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],D=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],M=1===E?0:R+(E-2)*D;if(0!==this.ctx.clip_path.length){var T=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(b,this.posX+this.margin[3],-M+O+this.ctx.prevPageLastElemOffset),_.call(this,"fill",!0),this.path=T}var q=JSON.parse(JSON.stringify(k));q=y([q],this.posX+this.margin[3],-M+O+this.ctx.prevPageLastElemOffset)[0];var z=(E>L||E<P)&&f.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],F,D,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",q.x,q.y,q.w,q.h,null,null,w),z&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",k.x,k.y,k.w,k.h,null,null,w)};var x=function(e,t,a){var r=[];t=t||this.pdf.internal.pageSize.width,a=a||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var n=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":r.push(Math.floor((e.y+n)/a)+1);break;case"arc":r.push(Math.floor((e.y+n-e.radius)/a)+1),r.push(Math.floor((e.y+n+e.radius)/a)+1);break;case"qct":var s=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);r.push(Math.floor((s.y+n)/a)+1),r.push(Math.floor((s.y+s.h+n)/a)+1);break;case"bct":var i=D(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);r.push(Math.floor((i.y+n)/a)+1),r.push(Math.floor((i.y+i.h+n)/a)+1);break;case"rect":r.push(Math.floor((e.y+n)/a)+1),r.push(Math.floor((e.y+e.h+n)/a)+1)}for(var o=0;o<r.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<r[o];)g.call(this);return r},g=function(){var e=this.fillStyle,t=this.strokeStyle,a=this.font,r=this.lineCap,n=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=a,this.lineCap=r,this.lineWidth=n,this.lineJoin=s},y=function(e,t,a){for(var r=0;r<e.length;r++)switch(e[r].type){case"bct":e[r].x2+=t,e[r].y2+=a;case"qct":e[r].x1+=t,e[r].y1+=a;default:e[r].x+=t,e[r].y+=a}return e},v=function(e){return e.sort(function(e,t){return e-t})},b=function(e,t){for(var a,r,n=this.fillStyle,s=this.strokeStyle,i=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),m=[],h=0;h<u.length;h++)if(void 0!==u[h].x)for(var p=x.call(this,u[h]),b=0;b<p.length;b+=1)-1===m.indexOf(p[b])&&m.push(p[b]);for(var j=0;j<m.length;j++)for(;this.pdf.internal.getNumberOfPages()<m[j];)g.call(this);if(v(m),this.autoPaging)for(var w=m[0],N=m[m.length-1],k=w;k<N+1;k++){this.pdf.setPage(k),this.fillStyle=n,this.strokeStyle=s,this.lineCap=i,this.lineWidth=l,this.lineJoin=c;var S=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],C=1===k?this.posY+this.margin[0]:this.margin[0],A=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],L=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],P=1===k?0:A+(k-2)*L;if(0!==this.ctx.clip_path.length){var E=this.path;a=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(a,this.posX+this.margin[3],-P+C+this.ctx.prevPageLastElemOffset),_.call(this,e,!0),this.path=E}if(r=JSON.parse(JSON.stringify(d)),this.path=y(r,this.posX+this.margin[3],-P+C+this.ctx.prevPageLastElemOffset),!1===t||0===k){var F=(k>w||k<N)&&f.call(this);F&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],S,L,null).clip().discardPath()),_.call(this,e,t),F&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,_.call(this,e,t),this.lineWidth=o;this.path=d},_=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!h.call(this))){for(var a,r,n=[],s=this.path,i=0;i<s.length;i++){var o=s[i];switch(o.type){case"begin":n.push({begin:!0});break;case"close":n.push({close:!0});break;case"mt":n.push({start:o,deltas:[],abs:[]});break;case"lt":var l=n.length;if(s[i-1]&&!isNaN(s[i-1].x)&&(a=[o.x-s[i-1].x,o.y-s[i-1].y],l>0))for(;l>=0;l--)if(!0!==n[l-1].close&&!0!==n[l-1].begin){n[l-1].deltas.push(a),n[l-1].abs.push(o);break}break;case"bct":a=[o.x1-s[i-1].x,o.y1-s[i-1].y,o.x2-s[i-1].x,o.y2-s[i-1].y,o.x-s[i-1].x,o.y-s[i-1].y],n[n.length-1].deltas.push(a);break;case"qct":var c=s[i-1].x+2/3*(o.x1-s[i-1].x),d=s[i-1].y+2/3*(o.y1-s[i-1].y),u=o.x+2/3*(o.x1-o.x),m=o.y+2/3*(o.y1-o.y),f=o.x,x=o.y;a=[c-s[i-1].x,d-s[i-1].y,u-s[i-1].x,m-s[i-1].y,f-s[i-1].x,x-s[i-1].y],n[n.length-1].deltas.push(a);break;case"arc":n.push({deltas:[],abs:[],arc:!0}),Array.isArray(n[n.length-1].abs)&&n[n.length-1].abs.push(o)}}r=t?null:"stroke"===e?"stroke":"fill";for(var g=!1,y=0;y<n.length;y++)if(n[y].arc)for(var v=n[y].abs,b=0;b<v.length;b++){var _=v[b];"arc"===_.type?N.call(this,_.x,_.y,_.radius,_.startAngle,_.endAngle,_.counterclockwise,void 0,t,!g):L.call(this,_.x,_.y),g=!0}else if(!0===n[y].close)this.pdf.internal.out("h"),g=!1;else if(!0!==n[y].begin){var j=n[y].start.x,w=n[y].start.y;P.call(this,n[y].deltas,j,w),g=!0}r&&k.call(this,r),t&&S.call(this)}},j=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,a=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-a;case"top":return e+t-a;case"hanging":return e+t-2*a;case"middle":return e+t/2-a;default:return e}},w=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(e,t,a,r,n,s,i,o,l){for(var c=F.call(this,a,r,n,s),d=0;d<c.length;d++){var u=c[d];0===d&&(l?C.call(this,u.x1+e,u.y1+t):L.call(this,u.x1+e,u.y1+t)),E.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}o?S.call(this):k.call(this,i)},k=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},S=function(){this.pdf.clip(),this.pdf.discardPath()},C=function(e,t){this.pdf.internal.out(a(e)+" "+r(t)+" m")},A=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var a=this.pdf.getTextDimensions(e.text),r=j.call(this,e.y),n=w.call(this,r)-a.h,s=this.ctx.transform.applyToPoint(new i(e.x,r)),c=this.ctx.transform.decompose(),d=new l;d=(d=(d=d.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var u,m,h,p=this.ctx.transform.applyToRectangle(new o(e.x,r,a.w,a.h)),g=d.applyToRectangle(new o(e.x,n,a.w,a.h)),b=x.call(this,g),N=[],k=0;k<b.length;k+=1)-1===N.indexOf(b[k])&&N.push(b[k]);if(v(N),this.autoPaging)for(var S=N[0],C=N[N.length-1],A=S;A<C+1;A++){this.pdf.setPage(A);var L=1===A?this.posY+this.margin[0]:this.margin[0],P=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],E=this.pdf.internal.pageSize.height-this.margin[2],F=E-this.margin[0],O=this.pdf.internal.pageSize.width-this.margin[1],I=O-this.margin[3],R=1===A?0:P+(A-2)*F;if(0!==this.ctx.clip_path.length){var D=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(u,this.posX+this.margin[3],-1*R+L),_.call(this,"fill",!0),this.path=D}var M=y([JSON.parse(JSON.stringify(g))],this.posX+this.margin[3],-R+L+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(m=this.pdf.internal.getFontSize(),this.pdf.setFontSize(m*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale);var T="text"!==this.autoPaging;if(T||M.y+M.h<=E){if(T||M.y>=L&&M.x<=O){var q=T?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||O-M.x)[0],z=y([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-R+L+this.ctx.prevPageLastElemOffset)[0],B=T&&(A>S||A<C)&&f.call(this);B&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],I,F,null).clip().discardPath()),this.pdf.text(q,z.x,z.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),B&&this.pdf.restoreGraphicsState()}}else M.y<E&&(this.ctx.prevPageLastElemOffset+=E-M.y);e.scale>=.01&&(this.pdf.setFontSize(m),this.lineWidth=h)}else e.scale>=.01&&(m=this.pdf.internal.getFontSize(),this.pdf.setFontSize(m*e.scale),h=this.lineWidth,this.lineWidth=h*e.scale),this.pdf.text(e.text,s.x+this.posX,s.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(m),this.lineWidth=h)},L=function(e,t,n,s){n=n||0,s=s||0,this.pdf.internal.out(a(e+n)+" "+r(t+s)+" l")},P=function(e,t,a){return this.pdf.lines(e,t,a,null,null)},E=function(e,a,r,i,o,l,c,d){this.pdf.internal.out([t(n(r+e)),t(s(i+a)),t(n(o+e)),t(s(l+a)),t(n(c+e)),t(s(d+a)),"c"].join(" "))},F=function(e,t,a,r){for(var n=2*Math.PI,s=Math.PI/2;t>a;)t-=n;var i=Math.abs(a-t);i<n&&r&&(i=n-i);for(var o=[],l=r?-1:1,c=t;i>1e-5;){var d=c+l*Math.min(i,s);o.push(O.call(this,e,c,d)),i-=Math.abs(d-c),c=d}return o},O=function(e,t,a){var r=(a-t)/2,n=e*Math.cos(r),s=e*Math.sin(r),i=n,o=-s,l=i*i+o*o,c=l+i*n+o*s,d=4/3*(Math.sqrt(2*l*c)-c)/(i*s-o*n),u=i-d*o,m=o+d*i,h=u,p=-m,f=r+t,x=Math.cos(f),g=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*x-m*g,y2:u*g+m*x,x3:h*x-p*g,y3:h*g+p*x,x4:e*Math.cos(a),y4:e*Math.sin(a)}},I=function(e){return 180*e/Math.PI},R=function(e,t,a,r,n,s){var i=e+.5*(a-e),l=t+.5*(r-t),c=n+.5*(a-n),d=s+.5*(r-s),u=Math.min(e,n,i,c),m=Math.max(e,n,i,c),h=Math.min(t,s,l,d),p=Math.max(t,s,l,d);return new o(u,h,m-u,p-h)},D=function(e,t,a,r,n,s,i,l){var c,d,u,m,h,p,f,x,g,y,v,b,_,j,w=a-e,N=r-t,k=n-a,S=s-r,C=i-n,A=l-s;for(d=0;d<41;d++)g=(f=(u=e+(c=d/40)*w)+c*((h=a+c*k)-u))+c*(h+c*(n+c*C-h)-f),y=(x=(m=t+c*N)+c*((p=r+c*S)-m))+c*(p+c*(s+c*A-p)-x),0==d?(v=g,b=y,_=g,j=y):(v=Math.min(v,g),b=Math.min(b,y),_=Math.max(_,g),j=Math.max(j,y));return new o(Math.round(v),Math.round(b),Math.round(_-v),Math.round(j-b))},M=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,a=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==a&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=a)}}}($o.API),function(e){var t=function(e){var t,a,r,n,s,i,o,l,c,d;for(/[^\x00-\xFF]/.test(e),a=[],r=0,n=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;n>r;r+=4)0!==(s=(e.charCodeAt(r)<<24)+(e.charCodeAt(r+1)<<16)+(e.charCodeAt(r+2)<<8)+e.charCodeAt(r+3))?(i=(s=((s=((s=((s=(s-(d=s%85))/85)-(c=s%85))/85)-(l=s%85))/85)-(o=s%85))/85)%85,a.push(i+33,o+33,l+33,c+33,d+33)):a.push(122);return function(e,t){for(var a=t;a>0;a--)e.pop()}(a,t.length),String.fromCharCode.apply(String,a)+"~>"},a=function(e){var t,a,r,n,s,i=String,o="length",l=255,c="charCodeAt",d="slice",u="replace";for(e[d](-2),e=e[d](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),r=[],n=0,s=(e+=t="uuuuu"[d](e[o]%5||5))[o];s>n;n+=5)a=52200625*(e[c](n)-33)+614125*(e[c](n+1)-33)+7225*(e[c](n+2)-33)+85*(e[c](n+3)-33)+(e[c](n+4)-33),r.push(l&a>>24,l&a>>16,l&a>>8,l&a);return function(e,t){for(var a=t;a>0;a--)e.pop()}(r,t[o]),i.fromCharCode.apply(i,r)},r=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var a="",r=0;r<e.length;r+=2)a+=String.fromCharCode("0x"+(e[r]+e[r+1]));return a},n=function(e){for(var t=new Uint8Array(e.length),a=e.length;a--;)t[a]=e.charCodeAt(a);return(t=fo(t)).reduce(function(e,t){return e+String.fromCharCode(t)},"")};e.processDataByFilters=function(e,s){var i=0,o=e||"",l=[];for("string"==typeof(s=s||[])&&(s=[s]),i=0;i<s.length;i+=1)switch(s[i]){case"ASCII85Decode":case"/ASCII85Decode":o=a(o),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=t(o),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=r(o),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map(function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)}).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=n(o),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[i]+'" is not implemented')}return{data:o,reverseChain:l.reverse().join(" ")}}}($o.API),(ac=$o.API).loadFile=function(e,t,a){return function(e,t,a){t=!1!==t,a="function"==typeof a?a:function(){};var r=void 0;try{r=function(e,t,a){var r=new XMLHttpRequest,n=0,s=function(e){var t=e.length,a=[],r=String.fromCharCode;for(n=0;n<t;n+=1)a.push(r(255&e.charCodeAt(n)));return a.join("")};if(r.open("GET",e,!t),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(r.onload=function(){200===r.status?a(s(this.responseText)):a(void 0)}),r.send(null),t&&200===r.status)return s(r.responseText)}(e,t,a)}catch(e){}return r}(e,t,a)},ac.loadImageFile=ac.loadFile,function(e){function t(){return(yo.html2canvas?Promise.resolve(yo.html2canvas):a.e(239).then(a.t.bind(a,5239,23))).catch(function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))}).then(function(e){return e.default?e.default:e})}function r(){return(yo.DOMPurify?Promise.resolve(yo.DOMPurify):a.e(213).then(a.t.bind(a,6213,23))).catch(function(e){return Promise.reject(new Error("Could not load dompurify: "+e))}).then(function(e){return e.default?e.default:e})}var n=function(e){var t=(0,bi.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},s=function(e,t){var a=document.createElement(e);for(var r in t.className&&(a.className=t.className),t.innerHTML&&t.dompurify&&(a.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)a.style[r]=t.style[r];return a},i=function e(t){var a=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),r=e.convert(Promise.resolve(),a);return(r=r.setProgress(1,e,1,[e])).set(t)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(e,t){return e.__proto__=t||i.prototype,e},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(e,t){return this.then(function(){switch(t=t||function(e){switch(n(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(r).then(function(t){return this.set({src:s("div",{innerHTML:e,dompurify:t})})});case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}})},i.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,a){for(var r=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),n=t.firstChild;n;n=n.nextSibling)!0!==a&&1===n.nodeType&&"SCRIPT"===n.nodeName||r.appendChild(e(n,a));return 1===t.nodeType&&("CANVAS"===t.nodeName?(r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(r.value=t.value),r.addEventListener("load",function(){r.scrollTop=t.scrollTop,r.scrollLeft=t.scrollLeft},!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)}).then(function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then(function(e){var t=this.opt.jsPDF,a=this.opt.fontFaces,r="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,n=Object.assign({async:!0,allowTaint:!0,scale:r,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete n.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=a,a)for(var s=0;s<a.length;++s){var i=a[s],o=i.src.find(function(e){return"truetype"===e.format});o&&t.addFont(o.url,i.ref.name,i.ref.style)}return n.windowHeight=n.windowHeight||0,n.windowHeight=0==n.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):n.windowHeight,t.context2d.save(!0),e(this.prop.container,n)}).then(function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(e,t,a){return"img"===(a=a||"pdf").toLowerCase()||"image"===a.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},i.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(e,t)})},i.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}})},i.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(e){if("object"!==n(e))return this;var t=Object.keys(e||{}).map(function(t){if(t in i.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}},this);return this.then(function(){return this.thenList(t)})},i.prototype.get=function(e,t){return this.then(function(){var a=e in i.template.prop?this.prop[e]:this.opt[e];return t?t(a):a})},i.prototype.setMargin=function(e){return this.then(function(){switch(n(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e}).then(this.setPageSize)},i.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then(function(){(e=e||$o.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e})},i.prototype.setProgress=function(e,t,a,r){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=a&&(this.progress.n=a),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(e,t,a,r){return this.setProgress(e?this.progress.val+e:null,t||null,a?this.progress.n+a:null,r?this.progress.stack.concat(r):null)},i.prototype.then=function(e,t){var a=this;return this.thenCore(e,t,function(e,t){return a.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,function(t){return a.updateProgress(null,e),t}).then(e,t).then(function(e){return a.updateProgress(1),e})})},i.prototype.thenCore=function(e,t,a){a=a||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:i.convert(Object.assign({},this),Promise.prototype),n=a.call(r,e,t);return i.convert(n,this.__proto__)},i.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},i.prototype.thenList=function(e){var t=this;return e.forEach(function(e){t=t.thenCore(e)}),t},i.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return i.convert(t,this)},i.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},i.prototype.error=function(e){return this.then(function(){throw new Error(e)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,$o.getPageSize=function(e,t,a){if("object"===(0,bi.A)(e)){var r=e;e=r.orientation,t=r.unit||t,a=r.format||a}t=t||"mm",a=a||"a4",e=(""+(e||"P")).toLowerCase();var n,s=(""+a).toLowerCase(),i={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":n=1;break;case"mm":n=72/25.4;break;case"cm":n=72/2.54;break;case"in":n=72;break;case"px":n=.75;break;case"pc":case"em":n=12;break;case"ex":n=6;break;default:throw"Invalid unit: "+t}var o,l=0,c=0;if(i.hasOwnProperty(s))l=i[s][1]/n,c=i[s][0]/n;else try{l=a[1],c=a[0]}catch(ac){throw new Error("Invalid format: "+a)}if("p"===e||"portrait"===e)e="p",c>l&&(o=c,c=l,l=o);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",l>c&&(o=c,c=l,l=o)}return{width:c,height:l,unit:t,k:n,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(Vl):null;var a=new i(t);return t.worker?a:a.from(e).doCallback()}}($o.API),$o.API.addJS=function(e){return tc=e,this.internal.events.subscribe("postPutResources",function(){Zl=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Zl+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ec=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+tc+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==Zl&&void 0!==ec&&this.internal.out("/Names <</JavaScript "+Zl+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=e.outline.render().split(/\r\n/),n=0;n<r.length;n++){var s=r[n],i=a.exec(s);if(null!=i){var o=i[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(n=0;n<l;n++){var d=e.internal.newObject();c.push(d);var u=e.internal.getPageInfo(n+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var m=e.internal.newObject();for(e.internal.write("<< /Names [ "),n=0;n<c.length;n++)e.internal.write("(page_"+(n+1)+")"+c[n]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+m+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,a){var r={title:t,options:a,children:[]};return null==e&&(e=this.root),e.children.push(r),r},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var a=0;a<t.children.length;a++)this.genIds_r(t.children[a])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<t.children.length;r++){var n=t.children[r];this.objStart(n),this.line("/Title "+this.makeString(n.title)),this.line("/Parent "+this.makeRef(t)),r>0&&this.line("/Prev "+this.makeRef(t.children[r-1])),r<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[r+1])),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1])));var s=this.count=this.count_r({count:0},n);if(s>0&&this.line("/Count "+s),n.options&&n.options.pageNumber){var i=e.internal.getPageInfo(n.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var a=0;a<t.children.length;a++)e.count++,this.count_r(e,t.children[a]);return e.count}}])}($o.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,a,r,n,s,i){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=s||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(o=function(e){for(var a,r=256*e.charCodeAt(4)+e.charCodeAt(5),n=e.length,s={width:0,height:0,numcomponents:1},i=4;i<n;i+=2){if(i+=r,-1!==t.indexOf(e.charCodeAt(i+1))){a=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),s={width:256*e.charCodeAt(i+7)+e.charCodeAt(i+8),height:a,numcomponents:e.charCodeAt(i+9)};break}r=256*e.charCodeAt(i+2)+e.charCodeAt(i+3)}return s}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:i,bitsPerComponent:8,filter:l,index:a,alias:r}}return c}}($o.API);var nc,sc,ic,oc,lc,cc=function(){var e,t,a;function r(e){var t,a,r,n,s,i,o,l,c,d,u,m,h,p;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},s=this.readUInt16(),n=this.readUInt16()||100,i.delay=1e3*s/n,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,m=0;0<=t?m<t:m>t;0<=t?++m:--m)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>r)throw new Error("More transparent colors than palette size");if((d=r-this.transparency.indexed.length)>0)for(h=0;0<=d?h<d:h>d;0<=d?++h:--h)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(u=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,u.slice(0,o)),this.text[l]=String.fromCharCode.apply(String,u.slice(o+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(e){var t,a;for(a=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*t),r=0,n=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function s(s,i,o,l){var c,d,u,m,h,p,f,x,g,y,v,b,_,j,w,N,k,S,C,A,L,P=Math.ceil((n.width-s)/o),E=Math.ceil((n.height-i)/l),F=n.width==P&&n.height==E;for(j=t*P,b=F?a:new Uint8Array(j*E),p=e.length,_=0,d=0;_<E&&r<p;){switch(e[r++]){case 0:for(m=k=0;k<j;m=k+=1)b[d++]=e[r++];break;case 1:for(m=S=0;S<j;m=S+=1)c=e[r++],h=m<t?0:b[d-t],b[d++]=(c+h)%256;break;case 2:for(m=C=0;C<j;m=C+=1)c=e[r++],u=(m-m%t)/t,w=_&&b[(_-1)*j+u*t+m%t],b[d++]=(w+c)%256;break;case 3:for(m=A=0;A<j;m=A+=1)c=e[r++],u=(m-m%t)/t,h=m<t?0:b[d-t],w=_&&b[(_-1)*j+u*t+m%t],b[d++]=(c+Math.floor((h+w)/2))%256;break;case 4:for(m=L=0;L<j;m=L+=1)c=e[r++],u=(m-m%t)/t,h=m<t?0:b[d-t],0===_?w=N=0:(w=b[(_-1)*j+u*t+m%t],N=u&&b[(_-1)*j+(u-1)*t+m%t]),f=h+w-N,x=Math.abs(f-h),y=Math.abs(f-w),v=Math.abs(f-N),g=x<=y&&x<=v?h:y<=v?w:N,b[d++]=(c+g)%256;break;default:throw new Error("Invalid filter algorithm: "+e[r-1])}if(!F){var O=((i+_*l)*n.width+s)*t,I=_*j;for(m=0;m<P;m+=1){for(var R=0;R<t;R+=1)a[O++]=b[I++];O+=(o-1)*t}}_++}}return e=xo(e),1==n.interlaceMethod?(s(0,0,8,8),s(4,0,8,8),s(0,4,4,8),s(2,0,4,4),s(0,2,2,4),s(1,0,2,2),s(0,1,1,2)):s(0,0,1,1),a},r.prototype.decodePalette=function(){var e,t,a,r,n,s,i,o,l;for(a=this.palette,s=this.transparency.indexed||[],n=new Uint8Array((s.length||0)+a.length),r=0,e=0,t=i=0,o=a.length;i<o;t=i+=3)n[r++]=a[t],n[r++]=a[t+1],n[r++]=a[t+2],n[r++]=null!=(l=s[e++])?l:255;return n},r.prototype.copyToImageData=function(e,t){var a,r,n,s,i,o,l,c,d,u,m;if(r=this.colors,d=null,a=this.hasAlphaChannel,this.palette.length&&(d=null!=(m=this._decodedPalette)?m:this._decodedPalette=this.decodePalette(),r=4,a=!0),c=(n=e.data||e).length,i=d||t,s=o=0,1===r)for(;s<c;)l=d?4*t[s/4]:o,u=i[l++],n[s++]=u,n[s++]=u,n[s++]=u,n[s++]=a?i[l++]:255,o=l;else for(;s<c;)l=d?4*t[s/4]:o,n[s++]=i[l++],n[s++]=i[l++],n[s++]=i[l++],n[s++]=a?i[l++]:255,o=l},r.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var n=function(){if("[object Window]"===Object.prototype.toString.call(yo)){try{t=yo.document.createElement("canvas"),a=t.getContext("2d")}catch(e){return!1}return!0}return!1};return n(),e=function(e){var r;if(!0===n())return a.width=e.width,a.height=e.height,a.clearRect(0,0,e.width,e.height),a.putImageData(e,0,0),(r=new Image).src=t.toDataURL(),r;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(t){var a,r,n,s,i,o,l,c;if(this.animation){for(c=[],r=i=0,o=(l=this.animation.frames).length;i<o;r=++i)a=l[r],n=t.createImageData(a.width,a.height),s=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(n,s),a.imageData=n,c.push(a.image=e(n));return c}},r.prototype.renderFrame=function(e,t){var a,r,n;return a=(r=this.animation.frames)[t],n=r[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=n?n.disposeOp:void 0)?e.clearRect(n.xOffset,n.yOffset,n.width,n.height):2===(null!=n?n.disposeOp:void 0)&&e.putImageData(n.imageData,n.xOffset,n.yOffset),0===a.blendOp&&e.clearRect(a.xOffset,a.yOffset,a.width,a.height),e.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(e){var t,a,r,n,s,i,o=this;return a=0,i=this.animation,n=i.numFrames,r=i.frames,s=i.numPlays,(t=function(){var i,l;if(i=a++%n,l=r[i],o.renderFrame(e,i),n>1&&a/n<s)return o.animation._timeout=setTimeout(t,l.delay)})()},r.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},r.prototype.render=function(e){var t,a;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(a=t.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),t.putImageData(a,0,0))},r}();function dc(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var a=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,n=e[t++],s=n>>7,i=1<<1+(7&n);e[t++],e[t++];var o=null,l=null;s&&(o=t,l=i,t+=3*i);var c=!0,d=[],u=0,m=null,h=0,p=null;for(this.width=a,this.height=r;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var f=e[t++];u=e[t++]|e[t++]<<8,m=e[t++],0==(1&f)&&(m=null),h=f>>2&7,t++;break;case 254:for(;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var x=e[t++]|e[t++]<<8,g=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++],_=b>>6&1,j=1<<1+(7&b),w=o,N=l,k=!1;b>>7&&(k=!0,w=t,N=j,t+=3*j);var S=t;for(t++;;){var C;if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}d.push({x:x,y:g,width:y,height:v,has_local_palette:k,palette_offset:w,palette_size:N,data_offset:S,data_length:t-S,transparent_index:m,interlaced:!!_,delay:u,disposal:h});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,r){var n=this.frameInfo(t),s=n.width*n.height,i=new Uint8Array(s);uc(e,n.data_offset,i,s);var o=n.palette_offset,l=n.transparent_index;null===l&&(l=256);var c=n.width,d=a-c,u=c,m=4*(n.y*a+n.x),h=4*((n.y+n.height)*a+n.x),p=m,f=4*d;!0===n.interlaced&&(f+=4*a*7);for(var x=8,g=0,y=i.length;g<y;++g){var v=i[g];if(0===u&&(u=c,(p+=f)>=h&&(f=4*d+4*a*(x-1),p=m+(c+d)*(x<<1),x>>=1)),v===l)p+=4;else{var b=e[o+3*v],_=e[o+3*v+1],j=e[o+3*v+2];r[p++]=j,r[p++]=_,r[p++]=b,r[p++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,r){var n=this.frameInfo(t),s=n.width*n.height,i=new Uint8Array(s);uc(e,n.data_offset,i,s);var o=n.palette_offset,l=n.transparent_index;null===l&&(l=256);var c=n.width,d=a-c,u=c,m=4*(n.y*a+n.x),h=4*((n.y+n.height)*a+n.x),p=m,f=4*d;!0===n.interlaced&&(f+=4*a*7);for(var x=8,g=0,y=i.length;g<y;++g){var v=i[g];if(0===u&&(u=c,(p+=f)>=h&&(f=4*d+4*a*(x-1),p=m+(c+d)*(x<<1),x>>=1)),v===l)p+=4;else{var b=e[o+3*v],_=e[o+3*v+1],j=e[o+3*v+2];r[p++]=b,r[p++]=_,r[p++]=j,r[p++]=255}--u}}}function uc(e,t,a,r){for(var n=e[t++],s=1<<n,i=s+1,o=i+1,l=n+1,c=(1<<l)-1,d=0,u=0,m=0,h=e[t++],p=new Int32Array(4096),f=null;;){for(;d<16&&0!==h;)u|=e[t++]<<d,d+=8,1===h?h=e[t++]:--h;if(d<l)break;var x=u&c;if(u>>=l,d-=l,x!==s){if(x===i)break;for(var g=x<o?x:f,y=0,v=g;v>s;)v=p[v]>>8,++y;var b=v;if(m+y+(g!==x?1:0)>r)return void bo.log("Warning, gif stream longer than expected.");a[m++]=b;var _=m+=y;for(g!==x&&(a[m++]=b),v=g;y--;)v=p[v],a[--_]=255&v,v>>=8;null!==f&&o<4096&&(p[o++]=f<<8|b,o>=c+1&&l<12&&(++l,c=c<<1|1)),f=x}else o=i+1,c=(1<<(l=n+1))-1,f=null}return m!==r&&bo.log("Warning, gif stream shorter than expected."),a}function mc(e){var t,a,r,n,s,i=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),m=new Array(65535),h=new Array(64),p=new Array(64),f=[],x=0,g=7,y=new Array(64),v=new Array(64),b=new Array(64),_=new Array(256),j=new Array(2048),w=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],E=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function F(e,t){for(var a=0,r=0,n=new Array,s=1;s<=16;s++){for(var i=1;i<=e[s];i++)n[t[r]]=[],n[t[r]][0]=a,n[t[r]][1]=s,r++,a++;a*=2}return n}function O(e){for(var t=e[0],a=e[1]-1;a>=0;)t&1<<a&&(x|=1<<g),a--,--g<0&&(255==x?(I(255),I(0)):I(x),g=7,x=0)}function I(e){f.push(e)}function R(e){I(e>>8&255),I(255&e)}function D(e,t,a,r,n){for(var s,i=n[0],o=n[240],l=function(e,t){var a,r,n,s,i,o,l,c,d,u,m=0;for(d=0;d<8;++d){a=e[m],r=e[m+1],n=e[m+2],s=e[m+3],i=e[m+4],o=e[m+5],l=e[m+6];var p=a+(c=e[m+7]),f=a-c,x=r+l,g=r-l,y=n+o,v=n-o,b=s+i,_=s-i,j=p+b,w=p-b,N=x+y,k=x-y;e[m]=j+N,e[m+4]=j-N;var S=.707106781*(k+w);e[m+2]=w+S,e[m+6]=w-S;var C=.382683433*((j=_+v)-(k=g+f)),A=.5411961*j+C,L=1.306562965*k+C,P=.707106781*(N=v+g),E=f+P,F=f-P;e[m+5]=F+A,e[m+3]=F-A,e[m+1]=E+L,e[m+7]=E-L,m+=8}for(m=0,d=0;d<8;++d){a=e[m],r=e[m+8],n=e[m+16],s=e[m+24],i=e[m+32],o=e[m+40],l=e[m+48];var O=a+(c=e[m+56]),I=a-c,R=r+l,D=r-l,M=n+o,T=n-o,q=s+i,z=s-i,B=O+q,U=O-q,H=R+M,W=R-M;e[m]=B+H,e[m+32]=B-H;var V=.707106781*(W+U);e[m+16]=U+V,e[m+48]=U-V;var Q=.382683433*((B=z+T)-(W=D+I)),J=.5411961*B+Q,Y=1.306562965*W+Q,G=.707106781*(H=T+D),K=I+G,$=I-G;e[m+40]=$+J,e[m+24]=$-J,e[m+8]=K+Y,e[m+56]=K-Y,m++}for(d=0;d<64;++d)u=e[d]*t[d],h[d]=u>0?u+.5|0:u-.5|0;return h}(e,t),c=0;c<64;++c)p[w[c]]=l[c];var d=p[0]-a;a=p[0],0==d?O(r[0]):(O(r[m[s=32767+d]]),O(u[s]));for(var f=63;f>0&&0==p[f];)f--;if(0==f)return O(i),a;for(var x,g=1;g<=f;){for(var y=g;0==p[g]&&g<=f;)++g;var v=g-y;if(v>=16){x=v>>4;for(var b=1;b<=x;++b)O(o);v&=15}s=32767+p[g],O(n[(v<<4)+m[s]]),O(u[s]),g++}return 63!=f&&O(i),a}function M(e){e=Math.min(Math.max(e,1),100),s!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],a=0;a<64;a++){var r=i((t[a]*e+50)/100);r=Math.min(Math.max(r,1),255),o[w[a]]=r}for(var n=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var u=i((n[s]*e+50)/100);u=Math.min(Math.max(u,1),255),l[w[s]]=u}for(var m=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],h=0,p=0;p<8;p++)for(var f=0;f<8;f++)c[h]=1/(o[w[h]]*m[p]*m[f]*8),d[h]=1/(l[w[h]]*m[p]*m[f]*8),h++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),s=e)}this.encode=function(e,s){s&&M(s),f=new Array,x=0,g=7,R(65496),R(65504),R(16),I(74),I(70),I(73),I(70),I(0),I(1),I(1),I(0),R(1),R(1),I(0),I(0),function(){R(65499),R(132),I(0);for(var e=0;e<64;e++)I(o[e]);I(1);for(var t=0;t<64;t++)I(l[t])}(),function(e,t){R(65472),R(17),I(8),R(t),R(e),I(3),I(1),I(17),I(0),I(2),I(17),I(1),I(3),I(17),I(1)}(e.width,e.height),function(){R(65476),R(418),I(0);for(var e=0;e<16;e++)I(N[e+1]);for(var t=0;t<=11;t++)I(k[t]);I(16);for(var a=0;a<16;a++)I(S[a+1]);for(var r=0;r<=161;r++)I(C[r]);I(1);for(var n=0;n<16;n++)I(A[n+1]);for(var s=0;s<=11;s++)I(L[s]);I(17);for(var i=0;i<16;i++)I(P[i+1]);for(var o=0;o<=161;o++)I(E[o])}(),R(65498),R(12),I(3),I(1),I(0),I(2),I(17),I(3),I(17),I(0),I(63),I(0);var i=0,u=0,m=0;x=0,g=7,this.encode.displayName="_encode_";for(var h,p,_,w,F,T,q,z,B,U=e.data,H=e.width,W=e.height,V=4*H,Q=0;Q<W;){for(h=0;h<V;){for(F=V*Q+h,q=-1,z=0,B=0;B<64;B++)T=F+(z=B>>3)*V+(q=4*(7&B)),Q+z>=W&&(T-=V*(Q+1+z-W)),h+q>=V&&(T-=h+q-V+4),p=U[T++],_=U[T++],w=U[T++],y[B]=(j[p]+j[_+256|0]+j[w+512|0]>>16)-128,v[B]=(j[p+768|0]+j[_+1024|0]+j[w+1280|0]>>16)-128,b[B]=(j[p+1280|0]+j[_+1536|0]+j[w+1792|0]>>16)-128;i=D(y,c,i,t,r),u=D(v,d,u,a,n),m=D(b,d,m,a,n),h+=32}Q+=8}if(g>=0){var J=[];J[1]=g+1,J[0]=(1<<g+1)-1,O(J)}return R(65497),new Uint8Array(f)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)_[t]=e(t)}(),t=F(N,k),a=F(A,L),r=F(S,C),n=F(P,E),function(){for(var e=1,t=2,a=1;a<=15;a++){for(var r=e;r<t;r++)m[32767+r]=a,u[32767+r]=[],u[32767+r][1]=a,u[32767+r][0]=r;for(var n=-(t-1);n<=-e;n++)m[32767+n]=a,u[32767+n]=[],u[32767+n][1]=a,u[32767+n][0]=t-1+n;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)j[e]=19595*e,j[e+256|0]=38470*e,j[e+512|0]=7471*e+32768,j[e+768|0]=-11059*e,j[e+1024|0]=-21709*e,j[e+1280|0]=32768*e+8421375,j[e+1536|0]=-27439*e,j[e+1792|0]=-5329*e}(),M(e)}function hc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function pc(e){function t(e){if(!e)throw Error("assert :P")}function a(e,t,a){for(var r=0;4>r;r++)if(e[t+r]!=a.charCodeAt(r))return!0;return!1}function r(e,t,a,r,n){for(var s=0;s<n;s++)e[t+s]=a[r+s]}function n(e,t,a,r){for(var n=0;n<r;n++)e[t+n]=a}function s(e){return new Int32Array(e)}function i(e,t){for(var a=[],r=0;r<e;r++)a.push(new t);return a}function o(e,t){var a=[];return function e(a,r,n){for(var s=n[r],i=0;i<s&&(a.push(n.length>r+1?[]:new t),!(n.length<r+1));i++)e(a[i],r+1,n)}(a,0,e),a}var l=function(){var e=this;function l(e,t){for(var a=1<<t-1>>>0;e&a;)a>>>=1;return a?(e&a-1)+a:e}function c(e,a,r,n,s){t(!(n%r));do{e[a+(n-=r)]=s}while(0<n)}function d(e,a,r,n,i){if(t(2328>=i),512>=i)var o=s(512);else if(null==(o=s(i)))return 0;return function(e,a,r,n,i,o){var d,m,h=a,p=1<<r,f=s(16),x=s(16);for(t(0!=i),t(null!=n),t(null!=e),t(0<r),m=0;m<i;++m){if(15<n[m])return 0;++f[n[m]]}if(f[0]==i)return 0;for(x[1]=0,d=1;15>d;++d){if(f[d]>1<<d)return 0;x[d+1]=x[d]+f[d]}for(m=0;m<i;++m)d=n[m],0<n[m]&&(o[x[d]++]=m);if(1==x[15])return(n=new u).g=0,n.value=o[0],c(e,h,1,p,n),p;var g,y=-1,v=p-1,b=0,_=1,j=1,w=1<<r;for(m=0,d=1,i=2;d<=r;++d,i<<=1){if(_+=j<<=1,0>(j-=f[d]))return 0;for(;0<f[d];--f[d])(n=new u).g=d,n.value=o[m++],c(e,h+b,i,w,n),b=l(b,d)}for(d=r+1,i=2;15>=d;++d,i<<=1){if(_+=j<<=1,0>(j-=f[d]))return 0;for(;0<f[d];--f[d]){if(n=new u,(b&v)!=y){for(h+=w,g=1<<(y=d)-r;15>y&&!(0>=(g-=f[y]));)++y,g<<=1;p+=w=1<<(g=y-r),e[a+(y=b&v)].g=g+r,e[a+y].value=h-a-y}n.g=d-r,n.value=o[m++],c(e,h+(b>>r),i,w,n),b=l(b,d)}}return _!=2*x[15]-1?0:p}(e,a,r,n,i,o)}function u(){this.value=this.g=0}function m(){this.value=this.g=0}function h(){this.G=i(5,u),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Ta,m)}function p(e,a,r,n){t(null!=e),t(null!=a),t(2147483648>n),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=a,e.pa=r,e.Jd=a,e.Yc=r+n,e.Zc=4<=n?r+n-4+1:r,S(e)}function f(e,t){for(var a=0;0<t--;)a|=A(e,128)<<t;return a}function x(e,t){var a=f(e,t);return C(e)?-a:a}function g(e,a,r,n){var s,i=0;for(t(null!=e),t(null!=a),t(4294967288>n),e.Sb=n,e.Ra=0,e.u=0,e.h=0,4<n&&(n=4),s=0;s<n;++s)i+=a[r+s]<<8*s;e.Ra=i,e.bb=n,e.oa=a,e.pa=r}function y(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Ba-8>>>0,++e.bb,e.u-=8;w(e)&&(e.h=1,e.u=0)}function v(e,a){if(t(0<=a),!e.h&&a<=za){var r=j(e)&qa[a];return e.u+=a,y(e),r}return e.h=1,e.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function _(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(e){return e.Ra>>>(e.u&Ba-1)>>>0}function w(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Ba}function N(e,t){e.u=t,e.h=w(e)}function k(e){e.u>=Ua&&(t(e.u>=Ua),y(e))}function S(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function C(e){return f(e,1)}function A(e,t){var a=e.Ca;0>e.b&&S(e);var r=e.b,n=a*t>>>8,s=(e.I>>>r>n)+0;for(s?(a-=n,e.I-=n+1<<r>>>0):a=n+1,r=a,n=0;256<=r;)n+=8,r>>=8;return r=7^n+Ha[r],e.b-=r,e.Ca=(a<<r)-1,s}function L(e,t,a){e[t+0]=a>>24&255,e[t+1]=a>>16&255,e[t+2]=a>>8&255,e[t+3]=255&a}function P(e,t){return e[t+0]|e[t+1]<<8}function E(e,t){return P(e,t)|e[t+2]<<16}function F(e,t){return P(e,t)|P(e,t+2)<<16}function O(e,a){var r=1<<a;return t(null!=e),t(0<a),e.X=s(r),null==e.X?0:(e.Mb=32-a,e.Xa=a,1)}function I(e,a){t(null!=e),t(null!=a),t(e.Xa==a.Xa),r(a.X,0,e.X,0,1<<a.Xa)}function R(){this.X=[],this.Xa=this.Mb=0}function D(e,a,r,n){t(null!=r),t(null!=n);var s=r[0],i=n[0];return 0==s&&(s=(e*i+a/2)/a),0==i&&(i=(a*s+e/2)/e),0>=s||0>=i?0:(r[0]=s,n[0]=i,1)}function M(e,t){return e+(1<<t)-1>>>t}function T(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function q(t,a){e[a]=function(a,r,n,s,i,o,l){var c;for(c=0;c<i;++c){var d=e[t](o[l+c-1],n,s+c);o[l+c]=T(a[r+c],d)}}}function z(){this.ud=this.hd=this.jd=0}function B(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function U(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function H(e,t){return U(e+(e-t+.5>>1))}function W(e,t,a){return Math.abs(t-a)-Math.abs(e-a)}function V(e,t,a,r,n,s,i){for(r=s[i-1],a=0;a<n;++a)s[i+a]=r=T(e[t+a],r)}function Q(e,t,a,r,n){var s;for(s=0;s<a;++s){var i=e[t+s],o=i>>8&255,l=16711935&(l=(l=16711935&i)+((o<<16)+o));r[n+s]=(4278255360&i)+l>>>0}}function J(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function Y(e,t,a,r,n,s){var i;for(i=0;i<r;++i){var o=t[a+i],l=o>>>8,c=o,d=255&(d=(d=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),n[s+i]=(4278255360&o)+(d<<16)+c}}function G(t,a,r,n,s){e[a]=function(e,t,a,r,i,o,l,c,d){for(r=l;r<c;++r)for(l=0;l<d;++l)i[o++]=s(a[n(e[t++])])},e[t]=function(t,a,i,o,l,c,d){var u=8>>t.b,m=t.Ea,h=t.K[0],p=t.w;if(8>u)for(t=(1<<t.b)-1,p=(1<<u)-1;a<i;++a){var f,x=0;for(f=0;f<m;++f)f&t||(x=n(o[l++])),c[d++]=s(h[x&p]),x>>=u}else e["VP8LMapColor"+r](o,l,h,p,c,d,a,i,m)}}function K(e,t,a,r,n){for(a=t+a;t<a;){var s=e[t++];r[n++]=s>>16&255,r[n++]=s>>8&255,r[n++]=255&s}}function $(e,t,a,r,n){for(a=t+a;t<a;){var s=e[t++];r[n++]=s>>16&255,r[n++]=s>>8&255,r[n++]=255&s,r[n++]=s>>24&255}}function X(e,t,a,r,n){for(a=t+a;t<a;){var s=(i=e[t++])>>16&240|i>>12&15,i=240&i|i>>28&15;r[n++]=s,r[n++]=i}}function Z(e,t,a,r,n){for(a=t+a;t<a;){var s=(i=e[t++])>>16&248|i>>13&7,i=i>>5&224|i>>3&31;r[n++]=s,r[n++]=i}}function ee(e,t,a,r,n){for(a=t+a;t<a;){var s=e[t++];r[n++]=255&s,r[n++]=s>>8&255,r[n++]=s>>16&255}}function te(e,t,a,n,s,i){if(0==i)for(a=t+a;t<a;)L(n,((i=e[t++])[0]>>24|i[1]>>8&65280|i[2]<<8&16711680|i[3]<<24)>>>0),s+=32;else r(n,s,e,t,a)}function ae(t,a){e[a][0]=e[t+"0"],e[a][1]=e[t+"1"],e[a][2]=e[t+"2"],e[a][3]=e[t+"3"],e[a][4]=e[t+"4"],e[a][5]=e[t+"5"],e[a][6]=e[t+"6"],e[a][7]=e[t+"7"],e[a][8]=e[t+"8"],e[a][9]=e[t+"9"],e[a][10]=e[t+"10"],e[a][11]=e[t+"11"],e[a][12]=e[t+"12"],e[a][13]=e[t+"13"],e[a][14]=e[t+"0"],e[a][15]=e[t+"0"]}function re(e){return e==Ur||e==Hr||e==Wr||e==Vr}function ne(){this.eb=[],this.size=this.A=this.fb=0}function se(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ie(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ne,this.f.kb=new se,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var a=e.T,n=t.ba.f.RGBA,s=n.eb,i=n.fb+e.ka*n.A,o=gn[t.ba.S],l=e.y,c=e.O,d=e.f,u=e.N,m=e.ea,h=e.W,p=t.cc,f=t.dc,x=t.Mc,g=t.Nc,y=e.ka,v=e.ka+e.T,b=e.U,_=b+1>>1;for(0==y?o(l,c,null,null,d,u,m,h,d,u,m,h,s,i,null,null,b):(o(t.ec,t.fc,l,c,p,f,x,g,d,u,m,h,s,i-n.A,s,i,b),++a);y+2<v;y+=2)p=d,f=u,x=m,g=h,u+=e.Rc,h+=e.Rc,i+=2*n.A,o(l,(c+=2*e.fa)-e.fa,l,c,p,f,x,g,d,u,m,h,s,i-n.A,s,i,b);return c+=e.fa,e.j+v<e.o?(r(t.ec,t.fc,l,c,b),r(t.cc,t.dc,d,u,_),r(t.Mc,t.Nc,m,h,_),a--):1&v||o(l,c,null,null,d,u,m,h,d,u,m,h,s,i+n.A,null,null,b),a}function ue(e,a,r){var n=e.F,s=[e.J];if(null!=n){var i=e.U,o=a.ba.S,l=o==qr||o==Wr;a=a.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,s[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var u=a.eb;d=a.fb+d*a.A,e=Nr(n,s[0],e.width,i,c,u,d+(l?0:3),a.A),t(r==c),e&&re(o)&&jr(u,d,l,i,c,a.A)}return 0}function me(e){var t=e.ma,a=t.ba.S,r=11>a,n=a==Dr||a==Tr||a==qr||a==zr||12==a||re(a);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Ra(t.Oa,e,n?11:12))return 0;if(n&&re(a)&&ya(),e.da)alert("todo:use_scaling");else{if(r){if(t.Ib=ce,e.Kb){if(a=e.U+1>>1,t.memory=s(e.U+2*a),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+a,t.Ib=de,ya()}}else alert("todo:EmitYUV");n&&(t.Jb=ue,r&&xa())}if(r&&!En){for(e=0;256>e;++e)Fn[e]=89858*(e-128)+Sn>>kn,Rn[e]=-22014*(e-128)+Sn,In[e]=-45773*(e-128),On[e]=113618*(e-128)+Sn>>kn;for(e=Cn;e<An;++e)t=76283*(e-16)+Sn>>kn,Dn[e-Cn]=Ve(t,255),Mn[e-Cn]=Ve(t+8>>4,15);En=1}return 1}function he(e){var a=e.ma,r=e.U,n=e.T;return t(!(1&e.ka)),0>=r||0>=n?0:(r=a.Ib(e,a),null!=a.Jb&&a.Jb(e,a,r),a.Dc+=r,1)}function pe(e){e.ma.memory=null}function fe(e,t,a,r){return 47!=v(e,8)?0:(t[0]=v(e,14)+1,a[0]=v(e,14)+1,r[0]=v(e,1),0!=v(e,3)?0:!e.h)}function xe(e,t){if(4>e)return e+1;var a=e-2>>1;return(2+(1&e)<<a)+v(t,a)+1}function ge(e,t){return 120<t?t-120:1<=(a=((a=$r[t-1])>>4)*e+(8-(15&a)))?a:1;var a}function ye(e,t,a){var r=j(a),n=e[t+=255&r].g-8;return 0<n&&(N(a,a.u+8),r=j(a),t+=e[t].value,t+=r&(1<<n)-1),N(a,a.u+e[t].g),e[t].value}function ve(e,a,r){return r.g+=e.g,r.value+=e.value<<a>>>0,t(8>=r.g),e.g}function be(e,a,r){var n=e.xc;return t((a=0==n?0:e.vc[e.md*(r>>n)+(a>>n)])<e.Wb),e.Ya[a]}function _e(e,a,n,s){var i=e.ab,o=e.c*a,l=e.C;a=l+a;var c=n,d=s;for(s=e.Ta,n=e.Ua;0<i--;){var u=e.gc[i],m=l,h=a,p=c,f=d,x=(d=s,c=n,u.Ea);switch(t(m<h),t(h<=u.nc),u.hc){case 2:Qa(p,f,(h-m)*x,d,c);break;case 0:var g=m,y=h,v=d,b=c,_=(S=u).Ea;0==g&&(Wa(p,f,null,null,1,v,b),V(p,f+1,0,0,_-1,v,b+1),f+=_,b+=_,++g);for(var j=1<<S.b,w=j-1,N=M(_,S.b),k=S.K,S=S.w+(g>>S.b)*N;g<y;){var C=k,A=S,L=1;for(Va(p,f,v,b-_,1,v,b);L<_;){var P=(L&~w)+j;P>_&&(P=_),(0,$a[C[A++]>>8&15])(p,f+ +L,v,b+L-_,P-L,v,b+L),L=P}f+=_,b+=_,++g&w||(S+=N)}h!=u.nc&&r(d,c-x,d,c+(h-m-1)*x,x);break;case 1:for(x=p,y=f,_=(p=u.Ea)-(b=p&~(v=(f=1<<u.b)-1)),g=M(p,u.b),j=u.K,u=u.w+(m>>u.b)*g;m<h;){for(w=j,N=u,k=new z,S=y+b,C=y+p;y<S;)J(w[N++],k),Xa(k,x,y,f,d,c),y+=f,c+=f;y<C&&(J(w[N++],k),Xa(k,x,y,_,d,c),y+=_,c+=_),++m&v||(u+=g)}break;case 3:if(p==d&&f==c&&0<u.b){for(y=d,p=x=c+(h-m)*x-(b=(h-m)*M(u.Ea,u.b)),f=d,v=c,g=[],b=(_=b)-1;0<=b;--b)g[b]=f[v+b];for(b=_-1;0<=b;--b)y[p+b]=g[b];Ja(u,m,h,d,x,d,c)}else Ja(u,m,h,p,f,d,c)}c=s,d=n}d!=n&&r(s,n,c,d,o)}function je(e,a){var r=e.V,n=e.Ba+e.c*e.C,s=a-e.C;if(t(a<=e.l.o),t(16>=s),0<s){var i=e.l,o=e.Ta,l=e.Ua,c=i.width;if(_e(e,s,r,n),s=l=[l],t((r=e.C)<(n=a)),t(i.v<i.va),n>i.o&&(n=i.o),r<i.j){var d=i.j-r;r=i.j,s[0]+=d*c}if(r>=n?r=0:(s[0]+=4*i.v,i.ka=r-i.j,i.U=i.va-i.v,i.T=n-r,r=1),r){if(l=l[0],11>(r=e.ca).S){var u=r.f.RGBA,m=(n=r.S,s=i.U,i=i.T,d=u.eb,u.A),h=i;for(u=u.fb+e.Ma*u.A;0<h--;){var p=o,f=l,x=s,g=d,y=u;switch(n){case Rr:Za(p,f,x,g,y);break;case Dr:er(p,f,x,g,y);break;case Ur:er(p,f,x,g,y),jr(g,y,0,x,1,0);break;case Mr:rr(p,f,x,g,y);break;case Tr:te(p,f,x,g,y,1);break;case Hr:te(p,f,x,g,y,1),jr(g,y,0,x,1,0);break;case qr:te(p,f,x,g,y,0);break;case Wr:te(p,f,x,g,y,0),jr(g,y,1,x,1,0);break;case zr:tr(p,f,x,g,y);break;case Vr:tr(p,f,x,g,y),wr(g,y,x,1,0);break;case Br:ar(p,f,x,g,y);break;default:t(0)}l+=c,u+=m}e.Ma+=i}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=r.height)}}e.C=a,t(e.C<=e.i)}function we(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var a=e.Ya[t].G,r=e.Ya[t].H;if(0<a[1][r[1]+0].g||0<a[2][r[2]+0].g||0<a[3][r[3]+0].g)return 0}return 1}function Ne(e,a,r,n,s,i){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=xn[e.Z]);a<r;++a)xn[e.Z](o,l,n,s,n,s,i),o=n,l=s,s+=i;e.qd=o,e.rd=l}}function ke(e,a){var r=e.l.ma,n=0==r.Z||1==r.Z?e.l.j:e.C;if(n=e.C<n?n:e.C,t(a<=e.l.o),a>n){var s=e.l.width,i=r.ca,o=r.tb+s*n,l=e.V,c=e.Ba+e.c*n,d=e.gc;t(1==e.ab),t(3==d[0].hc),Ga(d[0],n,a,l,c,i,o),Ne(r,n,a,i,o,s)}e.C=e.Ma=a}function Se(e,a,r,n,s,i,o){var l=e.$/n,c=e.$%n,d=e.m,u=e.s,m=r+e.$,h=m;s=r+n*s;var p=r+n*i,f=280+u.ua,x=e.Pb?l:16777216,g=0<u.ua?u.Wa:null,y=u.wc,v=m<p?be(u,c,l):null;t(e.C<i),t(p<=s);var b=!1;e:for(;;){for(;b||m<p;){var _=0;if(l>=x){var S=m-r;t((x=e).Pb),x.wd=x.m,x.xd=S,0<x.s.ua&&I(x.s.Wa,x.s.vb),x=l+Zr}if(c&y||(v=be(u,c,l)),t(null!=v),v.Qb&&(a[m]=v.qb,b=!0),!b)if(k(d),v.jc){_=d,S=a;var C=m,A=v.pd[j(_)&Ta-1];t(v.jc),256>A.g?(N(_,_.u+A.g),S[C]=A.value,_=0):(N(_,_.u+A.g-256),t(256<=A.value),_=A.value),0==_&&(b=!0)}else _=ye(v.G[0],v.H[0],d);if(d.h)break;if(b||256>_){if(!b)if(v.nd)a[m]=(v.qb|_<<8)>>>0;else{if(k(d),b=ye(v.G[1],v.H[1],d),k(d),S=ye(v.G[2],v.H[2],d),C=ye(v.G[3],v.H[3],d),d.h)break;a[m]=(C<<24|b<<16|_<<8|S)>>>0}if(b=!1,++m,++c>=n&&(c=0,++l,null!=o&&l<=i&&!(l%16)&&o(e,l),null!=g))for(;h<m;)_=a[h++],g.X[(506832829*_&4294967295)>>>g.Mb]=_}else if(280>_){if(_=xe(_-256,d),S=ye(v.G[4],v.H[4],d),k(d),S=ge(n,S=xe(S,d)),d.h)break;if(m-r<S||s-m<_)break e;for(C=0;C<_;++C)a[m+C]=a[m+C-S];for(m+=_,c+=_;c>=n;)c-=n,++l,null!=o&&l<=i&&!(l%16)&&o(e,l);if(t(m<=s),c&y&&(v=be(u,c,l)),null!=g)for(;h<m;)_=a[h++],g.X[(506832829*_&4294967295)>>>g.Mb]=_}else{if(!(_<f))break e;for(b=_-280,t(null!=g);h<m;)_=a[h++],g.X[(506832829*_&4294967295)>>>g.Mb]=_;_=m,t(!(b>>>(S=g).Xa)),a[_]=S.X[b],b=!0}b||t(d.h==w(d))}if(e.Pb&&d.h&&m<s)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&I(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=o&&o(e,l>i?i:l),e.a=0,e.$=m-r}return 1}return e.a=3,0}function Ce(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var a=e.Wa;null!=a&&(a.X=null),e.vb=null,t(null!=e)}function Ae(){var t=new ia;return null==t?null:(t.a=0,t.xb=fn,ae("Predictor","VP8LPredictors"),ae("Predictor","VP8LPredictors_C"),ae("PredictorAdd","VP8LPredictorsAdd"),ae("PredictorAdd","VP8LPredictorsAdd_C"),Qa=Q,Xa=Y,Za=K,er=$,tr=X,ar=Z,rr=ee,e.VP8LMapColor32b=Ya,e.VP8LMapColor8b=Ka,t)}function Le(e,a,r,o,l){var c=1,m=[e],p=[a],f=o.m,x=o.s,g=null,y=0;e:for(;;){if(r)for(;c&&v(f,1);){var b=m,_=p,w=o,S=1,C=w.m,A=w.gc[w.ab],L=v(C,2);if(w.Oc&1<<L)c=0;else{switch(w.Oc|=1<<L,A.hc=L,A.Ea=b[0],A.nc=_[0],A.K=[null],++w.ab,t(4>=w.ab),L){case 0:case 1:A.b=v(C,3)+2,S=Le(M(A.Ea,A.b),M(A.nc,A.b),0,w,A.K),A.K=A.K[0];break;case 3:var P,E=v(C,8)+1,F=16<E?0:4<E?1:2<E?2:3;if(b[0]=M(A.Ea,F),A.b=F,P=S=Le(E,1,0,w,A.K)){var I,R=E,D=A,q=1<<(8>>D.b),z=s(q);if(null==z)P=0;else{var B=D.K[0],U=D.w;for(z[0]=D.K[0][0],I=1;I<1*R;++I)z[I]=T(B[U+I],z[I-1]);for(;I<4*q;++I)z[I]=0;D.K[0]=null,D.K[0]=z,P=1}}S=P;break;case 2:break;default:t(0)}c=S}}if(m=m[0],p=p[0],c&&v(f,1)&&!(c=1<=(y=v(f,4))&&11>=y)){o.a=3;break e}var H;if(H=c)t:{var W,V,Q,J=o,Y=m,G=p,K=y,$=r,X=J.m,Z=J.s,ee=[null],te=1,ae=0,re=Xr[K];a:for(;;){if($&&v(X,1)){var ne=v(X,3)+2,se=M(Y,ne),ie=M(G,ne),oe=se*ie;if(!Le(se,ie,0,J,ee))break a;for(ee=ee[0],Z.xc=ne,W=0;W<oe;++W){var le=ee[W]>>8&65535;ee[W]=le,le>=te&&(te=le+1)}}if(X.h)break a;for(V=0;5>V;++V){var ce=Yr[V];!V&&0<K&&(ce+=1<<K),ae<ce&&(ae=ce)}var de=i(te*re,u),ue=te,me=i(ue,h);if(null==me)var he=null;else t(65536>=ue),he=me;var pe=s(ae);if(null==he||null==pe||null==de){J.a=1;break a}var fe=de;for(W=Q=0;W<te;++W){var xe=he[W],ge=xe.G,ye=xe.H,be=0,_e=1,je=0;for(V=0;5>V;++V){ce=Yr[V],ge[V]=fe,ye[V]=Q,!V&&0<K&&(ce+=1<<K);r:{var we,Ne=ce,ke=J,Ae=pe,Pe=fe,Ee=Q,Fe=0,Oe=ke.m,Ie=v(Oe,1);if(n(Ae,0,0,Ne),Ie){var Re=v(Oe,1)+1,De=v(Oe,1),Me=v(Oe,0==De?1:8);Ae[Me]=1,2==Re&&(Ae[Me=v(Oe,8)]=1);var Te=1}else{var qe=s(19),ze=v(Oe,4)+4;if(19<ze){ke.a=3;var Be=0;break r}for(we=0;we<ze;++we)qe[Kr[we]]=v(Oe,3);var Ue=void 0,He=void 0,We=ke,Ve=qe,Qe=Ne,Je=Ae,Ye=0,Ge=We.m,Ke=8,$e=i(128,u);n:for(;d($e,0,7,Ve,19);){if(v(Ge,1)){var Xe=2+2*v(Ge,3);if((Ue=2+v(Ge,Xe))>Qe)break n}else Ue=Qe;for(He=0;He<Qe&&Ue--;){k(Ge);var Ze=$e[0+(127&j(Ge))];N(Ge,Ge.u+Ze.g);var et=Ze.value;if(16>et)Je[He++]=et,0!=et&&(Ke=et);else{var tt=16==et,at=et-16,rt=Jr[at],nt=v(Ge,Qr[at])+rt;if(He+nt>Qe)break n;for(var st=tt?Ke:0;0<nt--;)Je[He++]=st}}Ye=1;break n}Ye||(We.a=3),Te=Ye}(Te=Te&&!Oe.h)&&(Fe=d(Pe,Ee,8,Ae,Ne)),Te&&0!=Fe?Be=Fe:(ke.a=3,Be=0)}if(0==Be)break a;if(_e&&1==Gr[V]&&(_e=0==fe[Q].g),be+=fe[Q].g,Q+=Be,3>=V){var it,ot=pe[0];for(it=1;it<ce;++it)pe[it]>ot&&(ot=pe[it]);je+=ot}}if(xe.nd=_e,xe.Qb=0,_e&&(xe.qb=(ge[3][ye[3]+0].value<<24|ge[1][ye[1]+0].value<<16|ge[2][ye[2]+0].value)>>>0,0==be&&256>ge[0][ye[0]+0].value&&(xe.Qb=1,xe.qb+=ge[0][ye[0]+0].value<<8)),xe.jc=!xe.Qb&&6>je,xe.jc){var lt,ct=xe;for(lt=0;lt<Ta;++lt){var dt=lt,ut=ct.pd[dt],mt=ct.G[0][ct.H[0]+dt];256<=mt.value?(ut.g=mt.g+256,ut.value=mt.value):(ut.g=0,ut.value=0,dt>>=ve(mt,8,ut),dt>>=ve(ct.G[1][ct.H[1]+dt],16,ut),dt>>=ve(ct.G[2][ct.H[2]+dt],0,ut),ve(ct.G[3][ct.H[3]+dt],24,ut))}}}Z.vc=ee,Z.Wb=te,Z.Ya=he,Z.yc=de,H=1;break t}H=0}if(!(c=H)){o.a=3;break e}if(0<y){if(x.ua=1<<y,!O(x.Wa,y)){o.a=1,c=0;break e}}else x.ua=0;var ht=o,pt=m,ft=p,xt=ht.s,gt=xt.xc;if(ht.c=pt,ht.i=ft,xt.md=M(pt,gt),xt.wc=0==gt?-1:(1<<gt)-1,r){o.xb=pn;break e}if(null==(g=s(m*p))){o.a=1,c=0;break e}c=(c=Se(o,g,0,m,p,p,null))&&!f.h;break e}return c?(null!=l?l[0]=g:(t(null==g),t(r)),o.$=0,r||Ce(x)):Ce(x),c}function Pe(e,a){var r=e.c*e.i,n=r+a+16*a;return t(e.c<=a),e.V=s(n),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+r+a,1)}function Ee(e,a){var r=e.C,n=a-r,s=e.V,i=e.Ba+e.c*r;for(t(a<=e.l.o);0<n;){var o=16<n?16:n,l=e.l.ma,c=e.l.width,d=c*o,u=l.ca,m=l.tb+c*r,h=e.Ta,p=e.Ua;_e(e,o,s,i),kr(h,p,u,m,d),Ne(l,r,r+o,u,m,c),n-=o,s+=o*e.c,r+=o}t(r==a),e.C=e.Ma=a}function Fe(){this.ub=this.yd=this.td=this.Rb=0}function Oe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ie(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Re(){this.Yb=function(){var e=[];return function e(t,a,r){for(var n=r[a],s=0;s<n&&(t.push(r.length>a+1?[]:0),!(r.length<a+1));s++)e(t[s],a+1,r)}(e,0,[3,11]),e}()}function De(){this.jb=s(3),this.Wc=o([4,8],Re),this.Xc=o([4,17],Re)}function Me(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Te(){this.ld=this.La=this.dd=this.tc=0}function qe(){this.Na=this.la=0}function ze(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Be(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ue(){this.uc=this.M=this.Nb=0,this.wa=Array(new Te),this.Y=0,this.ya=Array(new Be),this.aa=0,this.l=new Qe}function He(){this.y=s(16),this.f=s(8),this.ea=s(8)}function We(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new Fe,this.Kc=new Oe,this.ed=new Me,this.Qa=new Ie,this.Ic=this.$c=this.Aa=0,this.D=new Ue,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,b),this.ia=0,this.pb=i(4,ze),this.Pa=new De,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new He),this.Hd=0,this.rb=Array(new qe),this.sb=0,this.wa=Array(new Te),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Be),this.L=this.aa=0,this.gd=o([4,2],Te),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ve(e,t){return 0>e?0:e>t?t:e}function Qe(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Je(){var e=new We;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,an||(an=$e)),e}function Ye(e,t,a){return 0==e.a&&(e.a=t,e.sc=a,e.cb=0),0}function Ge(e,t,a){return 3<=a&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Ke(e,a){if(null==e)return 0;if(e.a=0,e.sc="OK",null==a)return Ye(e,2,"null VP8Io passed to VP8GetHeaders()");var r=a.data,s=a.w,i=a.ha;if(4>i)return Ye(e,7,"Truncated header.");var o=r[s+0]|r[s+1]<<8|r[s+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return Ye(e,3,"Incorrect keyframe parameters.");if(!l.yd)return Ye(e,4,"Frame not displayable.");s+=3,i-=3;var c=e.Kc;if(l.Rb){if(7>i)return Ye(e,7,"cannot parse picture header");if(!Ge(r,s,i))return Ye(e,3,"Bad code word");c.c=16383&(r[s+4]<<8|r[s+3]),c.Td=r[s+4]>>6,c.i=16383&(r[s+6]<<8|r[s+5]),c.Ud=r[s+6]>>6,s+=7,i-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,a.width=c.c,a.height=c.i,a.Da=0,a.j=0,a.v=0,a.va=a.width,a.o=a.height,a.da=0,a.ib=a.width,a.hb=a.height,a.U=a.width,a.T=a.height,n((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,n(o.Zb,0,0,o.Zb.length),n(o.Lb,0,0,o.Lb)}if(l.ub>i)return Ye(e,7,"bad partition length");p(o=e.m,r,s,l.ub),s+=l.ub,i-=l.ub,l.Rb&&(c.Ld=C(o),c.Kd=C(o)),c=e.Qa;var d,u=e.Pa;if(t(null!=o),t(null!=c),c.Cb=C(o),c.Cb){if(c.Bb=C(o),C(o)){for(c.Fb=C(o),d=0;4>d;++d)c.Zb[d]=C(o)?x(o,7):0;for(d=0;4>d;++d)c.Lb[d]=C(o)?x(o,6):0}if(c.Bb)for(d=0;3>d;++d)u.jb[d]=C(o)?f(o,8):255}else c.Bb=0;if(o.Ka)return Ye(e,3,"cannot parse segment header");if((c=e.ed).zd=C(o),c.Tb=f(o,6),c.wb=f(o,3),c.Pc=C(o),c.Pc&&C(o)){for(u=0;4>u;++u)C(o)&&(c.vd[u]=x(o,6));for(u=0;4>u;++u)C(o)&&(c.od[u]=x(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return Ye(e,3,"cannot parse filter header");var m=i;if(i=d=s,s=d+m,c=m,e.Xb=(1<<f(e.m,2))-1,m<3*(u=e.Xb))r=7;else{for(d+=3*u,c-=3*u,m=0;m<u;++m){var h=r[i+0]|r[i+1]<<8|r[i+2]<<16;h>c&&(h=c),p(e.Jc[+m],r,d,h),d+=h,c-=h,i+=3}p(e.Jc[+u],r,d,c),r=d<s?0:5}if(0!=r)return Ye(e,r,"cannot parse partitions");for(r=f(d=e.m,7),i=C(d)?x(d,4):0,s=C(d)?x(d,4):0,c=C(d)?x(d,4):0,u=C(d)?x(d,4):0,d=C(d)?x(d,4):0,m=e.Qa,h=0;4>h;++h){if(m.Cb){var g=m.Zb[h];m.Fb||(g+=r)}else{if(0<h){e.pb[h]=e.pb[0];continue}g=r}var y=e.pb[h];y.Sc[0]=en[Ve(g+i,127)],y.Sc[1]=tn[Ve(g+0,127)],y.Eb[0]=2*en[Ve(g+s,127)],y.Eb[1]=101581*tn[Ve(g+c,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=en[Ve(g+u,117)],y.Qc[1]=tn[Ve(g+d,127)],y.lc=g+d}if(!l.Rb)return Ye(e,4,"Not a key frame.");for(C(o),l=e.Pa,r=0;4>r;++r){for(i=0;8>i;++i)for(s=0;3>s;++s)for(c=0;11>c;++c)u=A(o,cn[r][i][s][c])?f(o,8):on[r][i][s][c],l.Wc[r][i].Yb[s][c]=u;for(i=0;17>i;++i)l.Xc[r][i]=l.Wc[r][dn[i]]}return e.kc=C(o),e.kc&&(e.Bd=f(o,8)),e.cb=1}function $e(e,t,a,r,n,s,i){var o=t[n].Yb[a];for(a=0;16>n;++n){if(!A(e,o[a+0]))return n;for(;!A(e,o[a+1]);)if(o=t[++n].Yb[0],a=0,16==n)return 16;var l=t[n+1].Yb;if(A(e,o[a+2])){var c=e,d=0;if(A(c,(m=o)[(u=a)+3]))if(A(c,m[u+6])){for(o=0,u=2*(d=A(c,m[u+8]))+(m=A(c,m[u+9+d])),d=0,m=rn[u];m[o];++o)d+=d+A(c,m[o]);d+=3+(8<<u)}else A(c,m[u+7])?(d=7+2*A(c,165),d+=A(c,145)):d=5+A(c,159);else d=A(c,m[u+4])?3+A(c,m[u+5]):2;o=l[2]}else d=1,o=l[1];l=i+nn[n],0>(c=e).b&&S(c);var u,m=c.b,h=(u=c.Ca>>1)-(c.I>>m)>>31;--c.b,c.Ca+=h,c.Ca|=1,c.I-=(u+1&h)<<m,s[l]=((d^h)-h)*r[(0<n)+0]}return 16}function Xe(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,n(e.zc,0,0,e.zc.length),e.ja=0}function Ze(e,a){if(null==e)return 0;if(null==a)return Ye(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Ke(e,a))return 0;if(t(e.cb),null==a.ac||a.ac(a)){a.ob&&(e.L=0);var o=qn[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=a.v-o>>4,e.zb=a.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=a.o+15+o>>4,e.Hb=a.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var d=e.Qa.Lb[o];e.Qa.Fb||(d+=l.Tb)}else d=l.Tb;for(c=0;1>=c;++c){var u=e.gd[o][c],m=d;if(l.Pc&&(m+=l.vd[0],c&&(m+=l.od[0])),0<(m=0>m?0:63<m?63:m)){var h=m;0<l.wb&&(h=4<l.wb?h>>2:h>>1)>9-l.wb&&(h=9-l.wb),1>h&&(h=1),u.dd=h,u.tc=2*m+h,u.ld=40<=m?2:15<=m?1:0}else u.tc=0;u.La=c}}}o=0}else Ye(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=Bn);e:{o=e.Ic,l=4*(h=e.za);var p=32*h,f=h+1,x=0<e.L?h*(0<e.Aa?2:1):0,g=(2==e.Aa?2:1)*h;if((u=l+832+(c=3*(16*o+qn[e.L])/2*p)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)o=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=s(u),e.Fc=0,null==e.Ec){o=Ye(e,1,"no memory during frame initialization.");break e}e.Vb=u}u=e.Ec,m=e.Fc,e.Ac=u,e.Bc=m,m+=l,e.Gd=i(p,He),e.Hd=0,e.rb=i(f+1,qe),e.sb=1,e.wa=x?i(x,Te):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=h),t(!0),e.oc=u,e.pc=m,m+=832,e.ya=i(g,Be),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=h),e.R=16*h,e.B=8*h,h=(p=qn[e.L])*e.R,p=p/2*e.B,e.sa=u,e.ta=m+h,e.qa=e.sa,e.ra=e.ta+16*o*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+p,e.$c=0,m+=c,e.mb=d?u:null,e.nb=d?m:null,t(m+d<=e.Fc+e.Vb),Xe(e),n(e.Ac,e.Bc,0,l),o=1}}if(o){if(a.ka=0,a.y=e.sa,a.O=e.ta,a.f=e.qa,a.N=e.ra,a.ea=e.Ha,a.Vd=e.Ia,a.fa=e.R,a.Rc=e.B,a.F=null,a.J=0,!Pr){for(o=-255;255>=o;++o)Sr[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)Cr[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Ar[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)Lr[255+o]=0>o?0:255<o?255:o;Pr=1}nr=ct,sr=st,or=it,lr=ot,cr=lt,ir=nt,dr=Yt,ur=Gt,mr=Xt,hr=Zt,pr=Kt,fr=$t,xr=ea,gr=ta,yr=Ut,vr=Ht,br=Wt,_r=Vt,mn[0]=Nt,mn[1]=ut,mn[2]=jt,mn[3]=wt,mn[4]=kt,mn[5]=Ct,mn[6]=St,mn[7]=At,mn[8]=Pt,mn[9]=Lt,un[0]=gt,un[1]=ht,un[2]=pt,un[3]=ft,un[4]=yt,un[5]=vt,un[6]=bt,hn[0]=It,hn[1]=mt,hn[2]=Et,hn[3]=Ft,hn[4]=Dt,hn[5]=Rt,hn[6]=Mt,o=1}else o=0}o&&(o=function(e,a){for(e.M=0;e.M<e.Va;++e.M){var i,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(i=0;i<c.za;++i){var d=l,u=c,m=u.Ac,h=u.Bc+4*i,p=u.zc,f=u.ya[u.aa+i];if(u.Qa.Bb?f.$b=A(d,u.Pa.jb[0])?2+A(d,u.Pa.jb[2]):A(d,u.Pa.jb[1]):f.$b=0,u.kc&&(f.Ad=A(d,u.Bd)),f.Za=!A(d,145)+0,f.Za){var x=f.Ob,g=0;for(u=0;4>u;++u){var y,v=p[0+u];for(y=0;4>y;++y){v=ln[m[h+y]][v];for(var b=sn[A(d,v[0])];0<b;)b=sn[2*b+A(d,v[b])];v=-b,m[h+y]=v}r(x,g,m,h,4),g+=4,p[0+u]=v}}else v=A(d,156)?A(d,128)?1:3:A(d,163)?2:0,f.Ob[0]=v,n(m,h,v,4),n(p,0,v,4);f.Dd=A(d,142)?A(d,114)?A(d,183)?1:3:2:0}if(c.m.Ka)return Ye(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,d=(l=e).rb[l.sb-1],m=l.rb[l.sb+l.ja],i=l.ya[l.aa+l.ja],h=l.kc?i.Ad:0)d.la=m.la=0,i.Za||(d.Na=m.Na=0),i.Hc=0,i.Gc=0,i.ia=0;else{var _,j;if(d=m,m=c,h=l.Pa.Xc,p=l.ya[l.aa+l.ja],f=l.pb[p.$b],u=p.ad,x=0,g=l.rb[l.sb-1],v=y=0,n(u,x,0,384),p.Za)var w=0,N=h[3];else{b=s(16);var k=d.Na+g.Na;if(k=an(m,h[1],k,f.Eb,0,b,0),d.Na=g.Na=(0<k)+0,1<k)nr(b,0,u,x);else{var S=b[0]+3>>3;for(b=0;256>b;b+=16)u[x+b]=S}w=1,N=h[0]}var C=15&d.la,L=15&g.la;for(b=0;4>b;++b){var P=1&L;for(S=j=0;4>S;++S)C=C>>1|(P=(k=an(m,N,k=P+(1&C),f.Sc,w,u,x))>w)<<7,j=j<<2|(3<k?3:1<k?2:0!=u[x+0]),x+=16;C>>=4,L=L>>1|P<<7,y=(y<<8|j)>>>0}for(N=C,w=L>>4,_=0;4>_;_+=2){for(j=0,C=d.la>>4+_,L=g.la>>4+_,b=0;2>b;++b){for(P=1&L,S=0;2>S;++S)k=P+(1&C),C=C>>1|(P=0<(k=an(m,h[2],k,f.Qc,0,u,x)))<<3,j=j<<2|(3<k?3:1<k?2:0!=u[x+0]),x+=16;C>>=2,L=L>>1|P<<5}v|=j<<4*_,N|=C<<4<<_,w|=(240&L)<<_}d.la=N,g.la=w,p.Hc=y,p.Gc=v,p.ia=43690&v?0:f.ia,h=!(y|v)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[i.$b][i.Za],l.wa[l.Y+l.ja].La|=!h),c.Ka)return Ye(e,7,"Premature end-of-file encountered.")}if(Xe(e),l=a,c=1,i=(o=e).D,d=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)e:{if(i.M=o.M,i.uc=d,Oa(o,i),c=1,i=(j=o.D).Nb,d=(v=qn[o.L])*o.R,m=v/2*o.B,b=16*i*o.R,S=8*i*o.B,h=o.sa,p=o.ta-d+b,f=o.qa,u=o.ra-m+S,x=o.Ha,g=o.Ia-m+S,L=0==(C=j.M),y=C>=o.Va-1,2==o.Aa&&Oa(o,j),j.uc)for(P=(k=o).D.M,t(k.D.uc),j=k.yb;j<k.Hb;++j){w=j,N=P;var E=(F=(B=k).D).Nb;_=B.R;var F=F.wa[F.Y+w],O=B.sa,I=B.ta+16*E*_+16*w,R=F.dd,D=F.tc;if(0!=D)if(t(3<=D),1==B.L)0<w&&vr(O,I,_,D+4),F.La&&_r(O,I,_,D),0<N&&yr(O,I,_,D+4),F.La&&br(O,I,_,D);else{var M=B.B,T=B.qa,q=B.ra+8*E*M+8*w,z=B.Ha,B=B.Ia+8*E*M+8*w;E=F.ld,0<w&&(ur(O,I,_,D+4,R,E),hr(T,q,z,B,M,D+4,R,E)),F.La&&(fr(O,I,_,D,R,E),gr(T,q,z,B,M,D,R,E)),0<N&&(dr(O,I,_,D+4,R,E),mr(T,q,z,B,M,D+4,R,E)),F.La&&(pr(O,I,_,D,R,E),xr(T,q,z,B,M,D,R,E))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(j=16*C,C=16*(C+1),L?(l.y=o.sa,l.O=o.ta+b,l.f=o.qa,l.N=o.ra+S,l.ea=o.Ha,l.W=o.Ia+S):(j-=v,l.y=h,l.O=p,l.f=f,l.N=u,l.ea=x,l.W=g),y||(C-=v),C>l.o&&(C=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&j<C&&(l.J=ua(o,l,j,C-j),l.F=o.mb,null==l.F&&0==l.F.length)){c=Ye(o,3,"Could not decode alpha data.");break e}j<l.j&&(v=l.j-j,j=l.j,t(!(1&v)),l.O+=o.R*v,l.N+=o.B*(v>>1),l.W+=o.B*(v>>1),null!=l.F&&(l.J+=l.width*v)),j<C&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=j-l.j,l.U=l.va-l.v,l.T=C-j,c=l.put(l))}i+1!=o.Ic||y||(r(o.sa,o.ta-d,h,p+16*o.R,d),r(o.qa,o.ra-m,f,u+8*o.B,m),r(o.Ha,o.Ia-m,x,g+8*o.B,m))}if(!c)return Ye(e,6,"Output aborted.")}return 1}(e,a)),null!=a.bc&&a.bc(a),o&=1}return o?(e.cb=0,o):0}function et(e,t,a,r,n){n=e[t+a+32*r]+(n>>3),e[t+a+32*r]=-256&n?0>n?0:255:n}function tt(e,t,a,r,n,s){et(e,t,0,a,r+n),et(e,t,1,a,r+s),et(e,t,2,a,r-s),et(e,t,3,a,r-n)}function at(e){return(20091*e>>16)+e}function rt(e,t,a,r){var n,i=0,o=s(16);for(n=0;4>n;++n){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-at(e[t+12]),u=at(e[t+4])+(35468*e[t+12]>>16);o[i+0]=l+u,o[i+1]=c+d,o[i+2]=c-d,o[i+3]=l-u,i+=4,t++}for(n=i=0;4>n;++n)l=(e=o[i+0]+4)+o[i+8],c=e-o[i+8],d=(35468*o[i+4]>>16)-at(o[i+12]),et(a,r,0,0,l+(u=at(o[i+4])+(35468*o[i+12]>>16))),et(a,r,1,0,c+d),et(a,r,2,0,c-d),et(a,r,3,0,l-u),i++,r+=32}function nt(e,t,a,r){var n=e[t+0]+4,s=35468*e[t+4]>>16,i=at(e[t+4]),o=35468*e[t+1]>>16;tt(a,r,0,n+i,e=at(e[t+1]),o),tt(a,r,1,n+s,e,o),tt(a,r,2,n-s,e,o),tt(a,r,3,n-i,e,o)}function st(e,t,a,r,n){rt(e,t,a,r),n&&rt(e,t+16,a,r+4)}function it(e,t,a,r){sr(e,t+0,a,r,1),sr(e,t+32,a,r+128,1)}function ot(e,t,a,r){var n;for(e=e[t+0]+4,n=0;4>n;++n)for(t=0;4>t;++t)et(a,r,t,n,e)}function lt(e,t,a,r){e[t+0]&&lr(e,t+0,a,r),e[t+16]&&lr(e,t+16,a,r+4),e[t+32]&&lr(e,t+32,a,r+128),e[t+48]&&lr(e,t+48,a,r+128+4)}function ct(e,t,a,r){var n,i=s(16);for(n=0;4>n;++n){var o=e[t+0+n]+e[t+12+n],l=e[t+4+n]+e[t+8+n],c=e[t+4+n]-e[t+8+n],d=e[t+0+n]-e[t+12+n];i[0+n]=o+l,i[8+n]=o-l,i[4+n]=d+c,i[12+n]=d-c}for(n=0;4>n;++n)o=(e=i[0+4*n]+3)+i[3+4*n],l=i[1+4*n]+i[2+4*n],c=i[1+4*n]-i[2+4*n],d=e-i[3+4*n],a[r+0]=o+l>>3,a[r+16]=d+c>>3,a[r+32]=o-l>>3,a[r+48]=d-c>>3,r+=64}function dt(e,t,a){var r,n=t-32,s=Or,i=255-e[n-1];for(r=0;r<a;++r){var o,l=s,c=i+e[t-1];for(o=0;o<a;++o)e[t+o]=l[c+e[n+o]];t+=32}}function ut(e,t){dt(e,t,4)}function mt(e,t){dt(e,t,8)}function ht(e,t){dt(e,t,16)}function pt(e,t){var a;for(a=0;16>a;++a)r(e,t+32*a,e,t-32,16)}function ft(e,t){var a;for(a=16;0<a;--a)n(e,t,e[t-1],16),t+=32}function xt(e,t,a){var r;for(r=0;16>r;++r)n(t,a+32*r,e,16)}function gt(e,t){var a,r=16;for(a=0;16>a;++a)r+=e[t-1+32*a]+e[t+a-32];xt(r>>5,e,t)}function yt(e,t){var a,r=8;for(a=0;16>a;++a)r+=e[t-1+32*a];xt(r>>4,e,t)}function vt(e,t){var a,r=8;for(a=0;16>a;++a)r+=e[t+a-32];xt(r>>4,e,t)}function bt(e,t){xt(128,e,t)}function _t(e,t,a){return e+2*t+a+2>>2}function jt(e,t){var a,n=t-32;for(n=new Uint8Array([_t(e[n-1],e[n+0],e[n+1]),_t(e[n+0],e[n+1],e[n+2]),_t(e[n+1],e[n+2],e[n+3]),_t(e[n+2],e[n+3],e[n+4])]),a=0;4>a;++a)r(e,t+32*a,n,0,n.length)}function wt(e,t){var a=e[t-1],r=e[t-1+32],n=e[t-1+64],s=e[t-1+96];L(e,t+0,16843009*_t(e[t-1-32],a,r)),L(e,t+32,16843009*_t(a,r,n)),L(e,t+64,16843009*_t(r,n,s)),L(e,t+96,16843009*_t(n,s,s))}function Nt(e,t){var a,r=4;for(a=0;4>a;++a)r+=e[t+a-32]+e[t-1+32*a];for(r>>=3,a=0;4>a;++a)n(e,t+32*a,r,4)}function kt(e,t){var a=e[t-1+0],r=e[t-1+32],n=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=_t(r,n,e[t-1+96]),e[t+1+96]=e[t+0+64]=_t(a,r,n),e[t+2+96]=e[t+1+64]=e[t+0+32]=_t(s,a,r),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=_t(i,s,a),e[t+3+64]=e[t+2+32]=e[t+1+0]=_t(o,i,s),e[t+3+32]=e[t+2+0]=_t(l,o,i),e[t+3+0]=_t(c,l,o)}function St(e,t){var a=e[t+1-32],r=e[t+2-32],n=e[t+3-32],s=e[t+4-32],i=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=_t(e[t+0-32],a,r),e[t+1+0]=e[t+0+32]=_t(a,r,n),e[t+2+0]=e[t+1+32]=e[t+0+64]=_t(r,n,s),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=_t(n,s,i),e[t+3+32]=e[t+2+64]=e[t+1+96]=_t(s,i,o),e[t+3+64]=e[t+2+96]=_t(i,o,l),e[t+3+96]=_t(o,l,l)}function Ct(e,t){var a=e[t-1+0],r=e[t-1+32],n=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=s+i+1>>1,e[t+1+0]=e[t+2+64]=i+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=_t(n,r,a),e[t+0+64]=_t(r,a,s),e[t+0+32]=e[t+1+96]=_t(a,s,i),e[t+1+32]=e[t+2+96]=_t(s,i,o),e[t+2+32]=e[t+3+96]=_t(i,o,l),e[t+3+32]=_t(o,l,c)}function At(e,t){var a=e[t+0-32],r=e[t+1-32],n=e[t+2-32],s=e[t+3-32],i=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=a+r+1>>1,e[t+1+0]=e[t+0+64]=r+n+1>>1,e[t+2+0]=e[t+1+64]=n+s+1>>1,e[t+3+0]=e[t+2+64]=s+i+1>>1,e[t+0+32]=_t(a,r,n),e[t+1+32]=e[t+0+96]=_t(r,n,s),e[t+2+32]=e[t+1+96]=_t(n,s,i),e[t+3+32]=e[t+2+96]=_t(s,i,o),e[t+3+64]=_t(i,o,l),e[t+3+96]=_t(o,l,c)}function Lt(e,t){var a=e[t-1+0],r=e[t-1+32],n=e[t-1+64],s=e[t-1+96];e[t+0+0]=a+r+1>>1,e[t+2+0]=e[t+0+32]=r+n+1>>1,e[t+2+32]=e[t+0+64]=n+s+1>>1,e[t+1+0]=_t(a,r,n),e[t+3+0]=e[t+1+32]=_t(r,n,s),e[t+3+32]=e[t+1+64]=_t(n,s,s),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=s}function Pt(e,t){var a=e[t-1+0],r=e[t-1+32],n=e[t-1+64],s=e[t-1+96],i=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=a+i+1>>1,e[t+0+32]=e[t+2+64]=r+a+1>>1,e[t+0+64]=e[t+2+96]=n+r+1>>1,e[t+0+96]=s+n+1>>1,e[t+3+0]=_t(o,l,c),e[t+2+0]=_t(i,o,l),e[t+1+0]=e[t+3+32]=_t(a,i,o),e[t+1+32]=e[t+3+64]=_t(r,a,i),e[t+1+64]=e[t+3+96]=_t(n,r,a),e[t+1+96]=_t(s,n,r)}function Et(e,t){var a;for(a=0;8>a;++a)r(e,t+32*a,e,t-32,8)}function Ft(e,t){var a;for(a=0;8>a;++a)n(e,t,e[t-1],8),t+=32}function Ot(e,t,a){var r;for(r=0;8>r;++r)n(t,a+32*r,e,8)}function It(e,t){var a,r=8;for(a=0;8>a;++a)r+=e[t+a-32]+e[t-1+32*a];Ot(r>>4,e,t)}function Rt(e,t){var a,r=4;for(a=0;8>a;++a)r+=e[t+a-32];Ot(r>>3,e,t)}function Dt(e,t){var a,r=4;for(a=0;8>a;++a)r+=e[t-1+32*a];Ot(r>>3,e,t)}function Mt(e,t){Ot(128,e,t)}function Tt(e,t,a){var r=e[t-a],n=e[t+0],s=3*(n-r)+Er[1020+e[t-2*a]-e[t+a]],i=Fr[112+(s+4>>3)];e[t-a]=Or[255+r+Fr[112+(s+3>>3)]],e[t+0]=Or[255+n-i]}function qt(e,t,a,r){var n=e[t+0],s=e[t+a];return Ir[255+e[t-2*a]-e[t-a]]>r||Ir[255+s-n]>r}function zt(e,t,a,r){return 4*Ir[255+e[t-a]-e[t+0]]+Ir[255+e[t-2*a]-e[t+a]]<=r}function Bt(e,t,a,r,n){var s=e[t-3*a],i=e[t-2*a],o=e[t-a],l=e[t+0],c=e[t+a],d=e[t+2*a],u=e[t+3*a];return 4*Ir[255+o-l]+Ir[255+i-c]>r?0:Ir[255+e[t-4*a]-s]<=n&&Ir[255+s-i]<=n&&Ir[255+i-o]<=n&&Ir[255+u-d]<=n&&Ir[255+d-c]<=n&&Ir[255+c-l]<=n}function Ut(e,t,a,r){var n=2*r+1;for(r=0;16>r;++r)zt(e,t+r,a,n)&&Tt(e,t+r,a)}function Ht(e,t,a,r){var n=2*r+1;for(r=0;16>r;++r)zt(e,t+r*a,1,n)&&Tt(e,t+r*a,1)}function Wt(e,t,a,r){var n;for(n=3;0<n;--n)Ut(e,t+=4*a,a,r)}function Vt(e,t,a,r){var n;for(n=3;0<n;--n)Ht(e,t+=4,a,r)}function Qt(e,t,a,r,n,s,i,o){for(s=2*s+1;0<n--;){if(Bt(e,t,a,s,i))if(qt(e,t,a,o))Tt(e,t,a);else{var l=e,c=t,d=a,u=l[c-2*d],m=l[c-d],h=l[c+0],p=l[c+d],f=l[c+2*d],x=27*(y=Er[1020+3*(h-m)+Er[1020+u-p]])+63>>7,g=18*y+63>>7,y=9*y+63>>7;l[c-3*d]=Or[255+l[c-3*d]+y],l[c-2*d]=Or[255+u+g],l[c-d]=Or[255+m+x],l[c+0]=Or[255+h-x],l[c+d]=Or[255+p-g],l[c+2*d]=Or[255+f-y]}t+=r}}function Jt(e,t,a,r,n,s,i,o){for(s=2*s+1;0<n--;){if(Bt(e,t,a,s,i))if(qt(e,t,a,o))Tt(e,t,a);else{var l=e,c=t,d=a,u=l[c-d],m=l[c+0],h=l[c+d],p=Fr[112+(4+(f=3*(m-u))>>3)],f=Fr[112+(f+3>>3)],x=p+1>>1;l[c-2*d]=Or[255+l[c-2*d]+x],l[c-d]=Or[255+u+f],l[c+0]=Or[255+m-p],l[c+d]=Or[255+h-x]}t+=r}}function Yt(e,t,a,r,n,s){Qt(e,t,a,1,16,r,n,s)}function Gt(e,t,a,r,n,s){Qt(e,t,1,a,16,r,n,s)}function Kt(e,t,a,r,n,s){var i;for(i=3;0<i;--i)Jt(e,t+=4*a,a,1,16,r,n,s)}function $t(e,t,a,r,n,s){var i;for(i=3;0<i;--i)Jt(e,t+=4,1,a,16,r,n,s)}function Xt(e,t,a,r,n,s,i,o){Qt(e,t,n,1,8,s,i,o),Qt(a,r,n,1,8,s,i,o)}function Zt(e,t,a,r,n,s,i,o){Qt(e,t,1,n,8,s,i,o),Qt(a,r,1,n,8,s,i,o)}function ea(e,t,a,r,n,s,i,o){Jt(e,t+4*n,n,1,8,s,i,o),Jt(a,r+4*n,n,1,8,s,i,o)}function ta(e,t,a,r,n,s,i,o){Jt(e,t+4,1,n,8,s,i,o),Jt(a,r+4,1,n,8,s,i,o)}function aa(){this.ba=new ie,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ra(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function na(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sa(){this.ua=0,this.Wa=new R,this.vb=new R,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new h,this.yc=new u}function ia(){this.xb=this.a=0,this.l=new Qe,this.ca=new ie,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new _,this.Pb=0,this.wd=new _,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sa,this.ab=0,this.gc=i(4,na),this.Oc=0}function oa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Qe,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function la(e,t,a,r,n,s,i){for(e=null==e?0:e[t+0],t=0;t<i;++t)n[s+t]=e+a[r+t]&255,e=n[s+t]}function ca(e,t,a,r,n,s,i){var o;if(null==e)la(null,null,a,r,n,s,i);else for(o=0;o<i;++o)n[s+o]=e[t+o]+a[r+o]&255}function da(e,t,a,r,n,s,i){if(null==e)la(null,null,a,r,n,s,i);else{var o,l=e[t+0],c=l,d=l;for(o=0;o<i;++o)c=d+(l=e[t+o])-c,d=a[r+o]+(-256&c?0>c?0:255:c)&255,c=l,n[s+o]=d}}function ua(e,a,n,i){var o=a.width,l=a.o;if(t(null!=e&&null!=a),0>n||0>=i||n+i>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new oa,(c=null==e.ga)||(c=a.width*a.o,t(0==e.Gb.length),e.Gb=s(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var d=e.Fa,u=e.P,m=e.qc,h=e.mb,p=e.nb,f=u+1,x=m-1,y=c.l;if(t(null!=d&&null!=h&&null!=a),xn[0]=null,xn[1]=la,xn[2]=ca,xn[3]=da,c.ca=h,c.tb=p,c.c=a.width,c.i=a.height,t(0<c.c&&0<c.i),1>=m)a=0;else if(c.$a=3&d[u+0],c.Z=d[u+0]>>2&3,c.Lc=d[u+0]>>4&3,u=d[u+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||u)a=0;else if(y.put=he,y.ac=me,y.bc=pe,y.ma=c,y.width=a.width,y.height=a.height,y.Da=a.Da,y.v=a.v,y.va=a.va,y.j=a.j,y.o=a.o,c.$a)e:{t(1==c.$a),a=Ae();t:for(;;){if(null==a){a=0;break e}if(t(null!=c),c.mc=a,a.c=c.c,a.i=c.i,a.l=c.l,a.l.ma=c,a.l.width=c.c,a.l.height=c.i,a.a=0,g(a.m,d,f,x),!Le(c.c,c.i,1,a,null))break t;if(1==a.ab&&3==a.gc[0].hc&&we(a.s)?(c.ic=1,d=a.c*a.i,a.Ta=null,a.Ua=0,a.V=s(d),a.Ba=0,null==a.V?(a.a=1,a=0):a=1):(c.ic=0,a=Pe(a,c.c)),!a)break t;a=1;break e}c.mc=null,a=0}else a=x>=c.c*c.i;c=!a}if(c)return null;1!=e.ga.Lc?e.Ga=0:i=l-n}t(null!=e.ga),t(n+i<=l);e:{if(a=(d=e.ga).c,l=d.l.o,0==d.$a){if(f=e.rc,x=e.Vc,y=e.Fa,u=e.P+1+n*a,m=e.mb,h=e.nb+n*a,t(u<=e.P+e.qc),0!=d.Z)for(t(null!=xn[d.Z]),c=0;c<i;++c)xn[d.Z](f,x,y,u,m,h,a),f=m,x=h,h+=a,u+=a;else for(c=0;c<i;++c)r(m,h,y,u,a),f=m,x=h,h+=a,u+=a;e.rc=f,e.Vc=x}else{if(t(null!=d.mc),a=n+i,t(null!=(c=d.mc)),t(a<=c.i),c.C>=a)a=1;else if(d.ic||xa(),d.ic){d=c.V,f=c.Ba,x=c.c;var v=c.i,b=(y=1,u=c.$/x,m=c.$%x,h=c.m,p=c.s,c.$),_=x*v,j=x*a,N=p.wc,S=b<j?be(p,m,u):null;t(b<=_),t(a<=v),t(we(p));t:for(;;){for(;!h.h&&b<j;){if(m&N||(S=be(p,m,u)),t(null!=S),k(h),256>(v=ye(S.G[0],S.H[0],h)))d[f+b]=v,++b,++m>=x&&(m=0,++u<=a&&!(u%16)&&ke(c,u));else{if(!(280>v)){y=0;break t}v=xe(v-256,h);var C,A=ye(S.G[4],S.H[4],h);if(k(h),!(b>=(A=ge(x,A=xe(A,h)))&&_-b>=v)){y=0;break t}for(C=0;C<v;++C)d[f+b+C]=d[f+b+C-A];for(b+=v,m+=v;m>=x;)m-=x,++u<=a&&!(u%16)&&ke(c,u);b<j&&m&N&&(S=be(p,m,u))}t(h.h==w(h))}ke(c,u>a?a:u);break t}!y||h.h&&b<_?(y=0,c.a=h.h?5:3):c.$=b,a=y}else a=Se(c,c.V,c.Ba,c.c,c.i,a,Ee);if(!a){i=0;break e}}n+i>=l&&(e.Cc=1),i=1}if(!i)return null;if(e.Cc&&(null!=(i=e.ga)&&(i.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+n*o}function ma(e,t,a,r,n,s){for(;0<n--;){var i,o=e,l=t+(a?1:0),c=e,d=t+(a?0:3);for(i=0;i<r;++i){var u=c[d+4*i];255!=u&&(u*=32897,o[l+4*i+0]=o[l+4*i+0]*u>>23,o[l+4*i+1]=o[l+4*i+1]*u>>23,o[l+4*i+2]=o[l+4*i+2]*u>>23)}t+=s}}function ha(e,t,a,r,n){for(;0<r--;){var s;for(s=0;s<a;++s){var i=e[t+2*s+0],o=15&(c=e[t+2*s+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*s+0]=(240&i|i>>4)*l>>16&240|(15&i|i<<4)*l>>16>>4&15,e[t+2*s+1]=240&c|o}t+=n}}function pa(e,t,a,r,n,s,i,o){var l,c,d=255;for(c=0;c<n;++c){for(l=0;l<r;++l){var u=e[t+l];s[i+4*l]=u,d&=u}t+=a,i+=o}return 255!=d}function fa(e,t,a,r,n){var s;for(s=0;s<n;++s)a[r+s]=e[t+s]>>8}function xa(){jr=ma,wr=ha,Nr=pa,kr=fa}function ga(a,r,n){e[a]=function(e,a,s,i,o,l,c,d,u,m,h,p,f,x,g,y,v){var b,_=v-1>>1,j=o[l+0]|c[d+0]<<16,w=u[m+0]|h[p+0]<<16;t(null!=e);var N=3*j+w+131074>>2;for(r(e[a+0],255&N,N>>16,f,x),null!=s&&(N=3*w+j+131074>>2,r(s[i+0],255&N,N>>16,g,y)),b=1;b<=_;++b){var k=o[l+b]|c[d+b]<<16,S=u[m+b]|h[p+b]<<16,C=j+k+w+S+524296,A=C+2*(k+w)>>3;N=A+j>>1,j=(C=C+2*(j+S)>>3)+k>>1,r(e[a+2*b-1],255&N,N>>16,f,x+(2*b-1)*n),r(e[a+2*b-0],255&j,j>>16,f,x+(2*b-0)*n),null!=s&&(N=C+w>>1,j=A+S>>1,r(s[i+2*b-1],255&N,N>>16,g,y+(2*b-1)*n),r(s[i+2*b+0],255&j,j>>16,g,y+(2*b+0)*n)),j=k,w=S}1&v||(N=3*j+w+131074>>2,r(e[a+v-1],255&N,N>>16,f,x+(v-1)*n),null!=s&&(N=3*w+j+131074>>2,r(s[i+v-1],255&N,N>>16,g,y+(v-1)*n)))}}function ya(){gn[Rr]=yn,gn[Dr]=bn,gn[Mr]=vn,gn[Tr]=_n,gn[qr]=jn,gn[zr]=wn,gn[Br]=Nn,gn[Ur]=bn,gn[Hr]=_n,gn[Wr]=jn,gn[Vr]=wn}function va(e){return e&~Pn?0>e?0:255:e>>Ln}function ba(e,t){return va((19077*e>>8)+(26149*t>>8)-14234)}function _a(e,t,a){return va((19077*e>>8)-(6419*t>>8)-(13320*a>>8)+8708)}function ja(e,t){return va((19077*e>>8)+(33050*t>>8)-17685)}function wa(e,t,a,r,n){r[n+0]=ba(e,a),r[n+1]=_a(e,t,a),r[n+2]=ja(e,t)}function Na(e,t,a,r,n){r[n+0]=ja(e,t),r[n+1]=_a(e,t,a),r[n+2]=ba(e,a)}function ka(e,t,a,r,n){var s=_a(e,t,a);t=s<<3&224|ja(e,t)>>3,r[n+0]=248&ba(e,a)|s>>5,r[n+1]=t}function Sa(e,t,a,r,n){var s=240&ja(e,t)|15;r[n+0]=240&ba(e,a)|_a(e,t,a)>>4,r[n+1]=s}function Ca(e,t,a,r,n){r[n+0]=255,wa(e,t,a,r,n+1)}function Aa(e,t,a,r,n){Na(e,t,a,r,n),r[n+3]=255}function La(e,t,a,r,n){wa(e,t,a,r,n),r[n+3]=255}function Ve(e,t){return 0>e?0:e>t?t:e}function Pa(t,a,r){e[t]=function(e,t,n,s,i,o,l,c,d){for(var u=c+(-2&d)*r;c!=u;)a(e[t+0],n[s+0],i[o+0],l,c),a(e[t+1],n[s+0],i[o+0],l,c+r),t+=2,++s,++o,c+=2*r;1&d&&a(e[t+0],n[s+0],i[o+0],l,c)}}function Ea(e,t,a){return 0==a?0==e?0==t?6:5:0==t?4:0:a}function Fa(e,t,a,r,n){switch(e>>>30){case 3:sr(t,a,r,n,0);break;case 2:ir(t,a,r,n);break;case 1:lr(t,a,r,n)}}function Oa(e,t){var a,s,i=t.M,o=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,u=e.pc+584,m=e.oc,h=e.pc+600;for(a=0;16>a;++a)l[c+32*a-1]=129;for(a=0;8>a;++a)d[u+32*a-1]=129,m[h+32*a-1]=129;for(0<i?l[c-1-32]=d[u-1-32]=m[h-1-32]=129:(n(l,c-32-1,127,21),n(d,u-32-1,127,9),n(m,h-32-1,127,9)),s=0;s<e.za;++s){var p=t.ya[t.aa+s];if(0<s){for(a=-1;16>a;++a)r(l,c+32*a-4,l,c+32*a+12,4);for(a=-1;8>a;++a)r(d,u+32*a-4,d,u+32*a+4,4),r(m,h+32*a-4,m,h+32*a+4,4)}var f=e.Gd,x=e.Hd+s,g=p.ad,y=p.Hc;if(0<i&&(r(l,c-32,f[x].y,0,16),r(d,u-32,f[x].f,0,8),r(m,h-32,f[x].ea,0,8)),p.Za){var v=l,b=c-32+16;for(0<i&&(s>=e.za-1?n(v,b,f[x].y[15],4):r(v,b,f[x+1].y,0,4)),a=0;4>a;a++)v[b+128+a]=v[b+256+a]=v[b+384+a]=v[b+0+a];for(a=0;16>a;++a,y<<=2)v=l,b=c+Tn[a],mn[p.Ob[a]](v,b),Fa(y,g,16*+a,v,b)}else if(v=Ea(s,i,p.Ob[0]),un[v](l,c),0!=y)for(a=0;16>a;++a,y<<=2)Fa(y,g,16*+a,l,c+Tn[a]);for(a=p.Gc,v=Ea(s,i,p.Dd),hn[v](d,u),hn[v](m,h),y=g,v=d,b=u,255&(p=a|0)&&(170&p?or(y,256,v,b):cr(y,256,v,b)),p=m,y=h,255&(a>>=8)&&(170&a?or(g,320,p,y):cr(g,320,p,y)),i<e.Ub-1&&(r(f[x].y,0,l,c+480,16),r(f[x].f,0,d,u+224,8),r(f[x].ea,0,m,h+224,8)),a=8*o*e.B,f=e.sa,x=e.ta+16*s+16*o*e.R,g=e.qa,p=e.ra+8*s+a,y=e.Ha,v=e.Ia+8*s+a,a=0;16>a;++a)r(f,x+a*e.R,l,c+32*a,16);for(a=0;8>a;++a)r(g,p+a*e.B,d,u+32*a,8),r(y,v+a*e.B,m,h+32*a,8)}}function Ia(e,r,n,s,i,o,l,c,d){var u=[0],m=[0],h=0,p=null!=d?d.kd:0,f=null!=d?d:new ra;if(null==e||12>n)return 7;f.data=e,f.w=r,f.ha=n,r=[r],n=[n],f.gb=[f.gb];e:{var x=r,y=n,v=f.gb;if(t(null!=e),t(null!=y),t(null!=v),v[0]=0,12<=y[0]&&!a(e,x[0],"RIFF")){if(a(e,x[0]+8,"WEBP")){v=3;break e}var b=F(e,x[0]+4);if(12>b||4294967286<b){v=3;break e}if(p&&b>y[0]-8){v=7;break e}v[0]=b,x[0]+=12,y[0]-=12}v=0}if(0!=v)return v;for(b=0<f.gb[0],n=n[0];;){e:{var j=e;y=r,v=n;var w=u,N=m,k=x=[0];if((A=h=[h])[0]=0,8>v[0])v=7;else{if(!a(j,y[0],"VP8X")){if(10!=F(j,y[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var S=F(j,y[0]+8),C=1+E(j,y[0]+12);if(2147483648<=C*(j=1+E(j,y[0]+15))){v=3;break e}null!=k&&(k[0]=S),null!=w&&(w[0]=C),null!=N&&(N[0]=j),y[0]+=18,v[0]-=18,A[0]=1}v=0}}if(h=h[0],x=x[0],0!=v)return v;if(y=!!(2&x),!b&&h)return 3;if(null!=o&&(o[0]=!!(16&x)),null!=l&&(l[0]=y),null!=c&&(c[0]=0),l=u[0],x=m[0],h&&y&&null==d){v=0;break}if(4>n){v=7;break}if(b&&h||!b&&!h&&!a(e,r[0],"ALPH")){n=[n],f.na=[f.na],f.P=[f.P],f.Sa=[f.Sa];e:{S=e,v=r,b=n;var A=f.gb;w=f.na,N=f.P,k=f.Sa,C=22,t(null!=S),t(null!=b),j=v[0];var L=b[0];for(t(null!=w),t(null!=k),w[0]=null,N[0]=null,k[0]=0;;){if(v[0]=j,b[0]=L,8>L){v=7;break e}var P=F(S,j+4);if(4294967286<P){v=3;break e}var O=8+P+1&-2;if(C+=O,0<A&&C>A){v=3;break e}if(!a(S,j,"VP8 ")||!a(S,j,"VP8L")){v=0;break e}if(L[0]<O){v=7;break e}a(S,j,"ALPH")||(w[0]=S,N[0]=j+8,k[0]=P),j+=O,L-=O}}if(n=n[0],f.na=f.na[0],f.P=f.P[0],f.Sa=f.Sa[0],0!=v)break}n=[n],f.Ja=[f.Ja],f.xa=[f.xa];e:if(A=e,v=r,b=n,w=f.gb[0],N=f.Ja,k=f.xa,S=v[0],j=!a(A,S,"VP8 "),C=!a(A,S,"VP8L"),t(null!=A),t(null!=b),t(null!=N),t(null!=k),8>b[0])v=7;else{if(j||C){if(A=F(A,S+4),12<=w&&A>w-12){v=3;break e}if(p&&A>b[0]-8){v=7;break e}N[0]=A,v[0]+=8,b[0]-=8,k[0]=C}else k[0]=5<=b[0]&&47==A[S+0]&&!(A[S+4]>>5),N[0]=b[0];v=0}if(n=n[0],f.Ja=f.Ja[0],f.xa=f.xa[0],r=r[0],0!=v)break;if(4294967286<f.Ja)return 3;if(null==c||y||(c[0]=f.xa?2:1),l=[l],x=[x],f.xa){if(5>n){v=7;break}c=l,p=x,y=o,null==e||5>n?e=0:5<=n&&47==e[r+0]&&!(e[r+4]>>5)?(b=[0],A=[0],w=[0],g(N=new _,e,r,n),fe(N,b,A,w)?(null!=c&&(c[0]=b[0]),null!=p&&(p[0]=A[0]),null!=y&&(y[0]=w[0]),e=1):e=0):e=0}else{if(10>n){v=7;break}c=x,null==e||10>n||!Ge(e,r+3,n-3)?e=0:(p=e[r+0]|e[r+1]<<8|e[r+2]<<16,y=16383&(e[r+7]<<8|e[r+6]),e=16383&(e[r+9]<<8|e[r+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=f.Ja||!y||!e?e=0:(l&&(l[0]=y),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],x=x[0],h&&(u[0]!=l||m[0]!=x))return 3;null!=d&&(d[0]=f,d.offset=r-d.w,t(4294967286>r-d.w),t(d.offset==d.ha-n));break}return 0==v||7==v&&h&&null==d?(null!=o&&(o[0]|=null!=f.na&&0<f.na.length),null!=s&&(s[0]=l),null!=i&&(i[0]=x),0):v}function Ra(e,t,a){var r=t.width,n=t.height,s=0,i=0,o=r,l=n;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,s=e.v,i=e.j,11>a||(s&=-2,i&=-2),0>s||0>i||0>=o||0>=l||s+o>r||i+l>n))return 0;if(t.v=s,t.j=i,t.va=s+o,t.o=i+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!D(o,l,a=[e.ib],s=[e.hb]))return 0;t.ib=a[0],t.hb=s[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*r/4&&t.hb<3*n/4,t.Kb=0),1}function Da(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Ma(e,t,a,r){if(null==r||0>=e||0>=t)return 2;if(null!=a){if(a.Da){var n=a.cd,i=a.bd,o=-2&a.v,l=-2&a.j;if(0>o||0>l||0>=n||0>=i||o+n>e||l+i>t)return 2;e=n,t=i}if(a.da){if(!D(e,t,n=[a.ib],i=[a.hb]))return 2;e=n[0],t=i[0]}}r.width=e,r.height=t;e:{var c=r.width,d=r.height;if(e=r.S,0>=c||0>=d||!(e>=Rr&&13>e))e=2;else{if(0>=r.Rd&&null==r.sd){o=i=n=t=0;var u=(l=c*Un[e])*d;if(11>e||(i=(d+1)/2*(t=(c+1)/2),12==e&&(o=(n=c)*d)),null==(d=s(u+2*i+o))){e=1;break e}r.sd=d,11>e?((c=r.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=u):((c=r.f.kb).y=d,c.O=0,c.fa=l,c.Fd=u,c.f=d,c.N=0+u,c.Ab=t,c.Cd=i,c.ea=d,c.W=0+u+i,c.Db=t,c.Ed=i,12==e&&(c.F=d,c.J=0+u+2*i),c.Tc=o,c.lb=n)}if(t=1,n=r.S,i=r.width,o=r.height,n>=Rr&&13>n)if(11>n)e=r.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+i<=e.size,t&=l>=i*Un[n],t&=null!=e.eb;else{e=r.f.kb,l=(i+1)/2,u=(o+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var m=Math.abs(e.Db),h=Math.abs(e.lb),p=h*(o-1)+i;t&=c*(o-1)+i<=e.Fd,t&=d*(u-1)+l<=e.Cd,t=(t&=m*(u-1)+l<=e.Ed)&c>=i&d>=l&m>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==n&&(t&=h>=i,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=a&&a.fd&&(e=Da(r)),e}var Ta=64,qa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],za=24,Ba=32,Ua=8,Ha=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];q("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,a){return t[a+0]},e.Predictor3=function(e,t,a){return t[a+1]},e.Predictor4=function(e,t,a){return t[a-1]},e.Predictor5=function(e,t,a){return B(B(e,t[a+1]),t[a+0])},e.Predictor6=function(e,t,a){return B(e,t[a-1])},e.Predictor7=function(e,t,a){return B(e,t[a+0])},e.Predictor8=function(e,t,a){return B(t[a-1],t[a+0])},e.Predictor9=function(e,t,a){return B(t[a+0],t[a+1])},e.Predictor10=function(e,t,a){return B(B(e,t[a-1]),B(t[a+0],t[a+1]))},e.Predictor11=function(e,t,a){var r=t[a+0];return 0>=W(r>>24&255,e>>24&255,(t=t[a-1])>>24&255)+W(r>>16&255,e>>16&255,t>>16&255)+W(r>>8&255,e>>8&255,t>>8&255)+W(255&r,255&e,255&t)?r:e},e.Predictor12=function(e,t,a){var r=t[a+0];return(U((e>>24&255)+(r>>24&255)-((t=t[a-1])>>24&255))<<24|U((e>>16&255)+(r>>16&255)-(t>>16&255))<<16|U((e>>8&255)+(r>>8&255)-(t>>8&255))<<8|U((255&e)+(255&r)-(255&t)))>>>0},e.Predictor13=function(e,t,a){var r=t[a-1];return(H((e=B(e,t[a+0]))>>24&255,r>>24&255)<<24|H(e>>16&255,r>>16&255)<<16|H(e>>8&255,r>>8&255)<<8|H(255&e,255&r))>>>0};var Wa=e.PredictorAdd0;e.PredictorAdd1=V,q("Predictor2","PredictorAdd2"),q("Predictor3","PredictorAdd3"),q("Predictor4","PredictorAdd4"),q("Predictor5","PredictorAdd5"),q("Predictor6","PredictorAdd6"),q("Predictor7","PredictorAdd7"),q("Predictor8","PredictorAdd8"),q("Predictor9","PredictorAdd9"),q("Predictor10","PredictorAdd10"),q("Predictor11","PredictorAdd11"),q("Predictor12","PredictorAdd12"),q("Predictor13","PredictorAdd13");var Va=e.PredictorAdd2;G("ColorIndexInverseTransform","MapARGB","32b",function(e){return e>>8&255},function(e){return e}),G("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(e){return e},function(e){return e>>8&255});var Qa,Ja=e.ColorIndexInverseTransform,Ya=e.MapARGB,Ga=e.VP8LColorIndexInverseTransformAlpha,Ka=e.MapAlpha,$a=e.VP8LPredictorsAdd=[];$a.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Xa,Za,er,tr,ar,rr,nr,sr,ir,or,lr,cr,dr,ur,mr,hr,pr,fr,xr,gr,yr,vr,br,_r,jr,wr,Nr,kr,Sr=s(511),Cr=s(2041),Ar=s(225),Lr=s(767),Pr=0,Er=Cr,Fr=Ar,Or=Lr,Ir=Sr,Rr=0,Dr=1,Mr=2,Tr=3,qr=4,zr=5,Br=6,Ur=7,Hr=8,Wr=9,Vr=10,Qr=[2,3,7],Jr=[3,3,11],Yr=[280,256,256,256,40],Gr=[0,1,1,1,0],Kr=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$r=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Xr=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zr=8,en=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],tn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],an=null,rn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],nn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],sn=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],on=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ln=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cn=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],dn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],un=[],mn=[],hn=[],pn=1,fn=2,xn=[],gn=[];ga("UpsampleRgbLinePair",wa,3),ga("UpsampleBgrLinePair",Na,3),ga("UpsampleRgbaLinePair",La,4),ga("UpsampleBgraLinePair",Aa,4),ga("UpsampleArgbLinePair",Ca,4),ga("UpsampleRgba4444LinePair",Sa,2),ga("UpsampleRgb565LinePair",ka,2);var yn=e.UpsampleRgbLinePair,vn=e.UpsampleBgrLinePair,bn=e.UpsampleRgbaLinePair,_n=e.UpsampleBgraLinePair,jn=e.UpsampleArgbLinePair,wn=e.UpsampleRgba4444LinePair,Nn=e.UpsampleRgb565LinePair,kn=16,Sn=1<<kn-1,Cn=-227,An=482,Ln=6,Pn=(256<<Ln)-1,En=0,Fn=s(256),On=s(256),In=s(256),Rn=s(256),Dn=s(An-Cn),Mn=s(An-Cn);Pa("YuvToRgbRow",wa,3),Pa("YuvToBgrRow",Na,3),Pa("YuvToRgbaRow",La,4),Pa("YuvToBgraRow",Aa,4),Pa("YuvToArgbRow",Ca,4),Pa("YuvToRgba4444Row",Sa,2),Pa("YuvToRgb565Row",ka,2);var Tn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],qn=[0,2,8],zn=[8,7,6,4,4,2,2,2,1,1,1,1],Bn=1;this.WebPDecodeRGBA=function(e,a,r,n,s){var i=Dr,o=new aa,l=new ie;o.ba=l,l.S=i,l.width=[l.width],l.height=[l.height];var c=l.width,d=l.height,u=new oe;if(null==u||null==e)var m=2;else t(null!=u),m=Ia(e,a,r,u.width,u.height,u.Pd,u.Qd,u.format,null);if(0!=m?c=0:(null!=c&&(c[0]=u.width[0]),null!=d&&(d[0]=u.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=n&&(n[0]=l.width),null!=s&&(s[0]=l.height);e:{if(n=new Qe,(s=new ra).data=e,s.w=a,s.ha=r,s.kd=1,a=[0],t(null!=s),(0==(e=Ia(s.data,s.w,s.ha,null,null,null,a,null,s))||7==e)&&a[0]&&(e=4),0==(a=e)){if(t(null!=o),n.data=s.data,n.w=s.w+s.offset,n.ha=s.ha-s.offset,n.put=he,n.ac=me,n.bc=pe,n.ma=o,s.xa){if(null==(e=Ae())){o=1;break e}if(function(e,a){var r=[0],n=[0],s=[0];t:for(;;){if(null==e)return 0;if(null==a)return e.a=2,0;if(e.l=a,e.a=0,g(e.m,a.data,a.w,a.ha),!fe(e.m,r,n,s)){e.a=3;break t}if(e.xb=fn,a.width=r[0],a.height=n[0],!Le(r[0],n[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,n)){if(n=0==(a=Ma(n.width,n.height,o.Oa,o.ba))){t:{n=e;a:for(;;){if(null==n){n=0;break t}if(t(null!=n.s.yc),t(null!=n.s.Ya),t(0<n.s.Wb),t(null!=(r=n.l)),t(null!=(s=r.ma)),0!=n.xb){if(n.ca=s.ba,n.tb=s.tb,t(null!=n.ca),!Ra(s.Oa,r,Tr)){n.a=2;break a}if(!Pe(n,r.width))break a;if(r.da)break a;if((r.da||re(n.ca.S))&&xa(),11>n.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=n.ca.f.kb.F&&xa()),n.Pb&&0<n.s.ua&&null==n.s.vb.X&&!O(n.s.vb,n.s.Wa.Xa)){n.a=1;break a}n.xb=0}if(!Se(n,n.V,n.Ba,n.c,n.i,r.o,je))break a;s.Dc=n.Ma,n=1;break t}t(0!=n.a),n=0}n=!n}n&&(a=e.a)}else a=e.a}else{if(null==(e=new Je)){o=1;break e}if(e.Fa=s.na,e.P=s.P,e.qc=s.Sa,Ke(e,n)){if(0==(a=Ma(n.width,n.height,o.Oa,o.ba))){if(e.Aa=0,r=o.Oa,t(null!=(s=e)),null!=r){if(0<(c=0>(c=r.Md)?0:100<c?255:255*c/100)){for(d=u=0;4>d;++d)12>(m=s.pb[d]).lc&&(m.ia=c*zn[0>m.lc?0:m.lc]>>3),u|=m.ia;u&&(alert("todo:VP8InitRandom"),s.ia=1)}s.Ga=r.Id,100<s.Ga?s.Ga=100:0>s.Ga&&(s.Ga=0)}Ze(e,n)||(a=e.a)}}else a=e.a}0==a&&null!=o.Oa&&o.Oa.fd&&(a=Da(o.ba))}o=a}i=0!=o?null:11>i?l.f.RGBA.eb:l.f.kb.y}else i=null;return i};var Un=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var a="",r=0;r<4;r++)a+=String.fromCharCode(e[t++]);return a}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var m=[0],h=[0],p=[],f=new l,x=e,g=function(e,t){var a={},r=0,n=!1,s=0,i=0;if(a.frames=[],!function(e,t){for(var a=0;a<4;a++)if(e[t+a]!="RIFF".charCodeAt(a))return!0;return!1}(e,t)){var o,l;for(u(e,t+=4),t+=8;t<e.length;){var m=c(e,t),h=u(e,t+=4);t+=4;var p=h+(1&h);switch(m){case"VP8 ":case"VP8L":void 0===a.frames[r]&&(a.frames[r]={}),(g=a.frames[r]).src_off=n?i:t-8,g.src_size=s+h+8,r++,n&&(n=!1,s=0,i=0);break;case"VP8X":(g=a.header={}).feature_flags=e[t];var f=t+4;g.canvas_width=1+d(e,f),f+=3,g.canvas_height=1+d(e,f),f+=3;break;case"ALPH":n=!0,s=p+8,i=t-8;break;case"ANIM":(g=a.header).bgcolor=u(e,t),f=t+4,g.loop_count=(o=e)[(l=f)+0]|o[l+1]<<8,f+=2;break;case"ANMF":var x,g;(g=a.frames[r]={}).offset_x=2*d(e,t),t+=3,g.offset_y=2*d(e,t),t+=3,g.width=1+d(e,t),t+=3,g.height=1+d(e,t),t+=3,g.duration=d(e,t),t+=3,x=e[t++],g.dispose=1&x,g.blend=x>>1&1}"ANMF"!=m&&(t+=p)}return a}}(x,0);g.response=x,g.rgbaoutput=!0,g.dataurl=!1;var y=g.header?g.header:null,v=g.frames?g.frames:null;if(y){y.loop_counter=y.loop_count,m=[y.canvas_height],h=[y.canvas_width];for(var b=0;b<v.length&&0!=v[b].blend;b++);}var _=v[0],j=f.WebPDecodeRGBA(x,_.src_off,_.src_size,h,m);_.rgba=j,_.imgwidth=h[0],_.imgheight=m[0];for(var w=0;w<h[0]*m[0]*4;w++)p[w]=j[w];return this.width=h,this.height=m,this.data=p,this}!function(e){var t=function(t,r,l,c){var d=4,u=s;switch(c){case e.image_compression.FAST:d=1,u=n;break;case e.image_compression.MEDIUM:d=6,u=i;break;case e.image_compression.SLOW:d=9,u=o}var m=fo(t=a(t,r,l,u),{level:d});return e.__addimage__.arrayBufferToBinaryString(m)},a=function(e,t,a,r){for(var n,s,i,o=e.length/t,l=new Uint8Array(e.length+o),u=c(),m=0;m<o;m+=1){if(i=m*t,n=e.subarray(i,i+t),r)l.set(r(n,a,s),i+m);else{for(var h,p=u.length,f=[];h<p;h+=1)f[h]=u[h](n,a,s);var x=d(f.concat());l.set(f[x],i+m)}s=n}return l},r=function(e){var t=Array.apply([],e);return t.unshift(0),t},n=function(e,t){var a,r=[],n=e.length;r[0]=1;for(var s=0;s<n;s+=1)a=e[s-t]||0,r[s+1]=e[s]-a+256&255;return r},s=function(e,t,a){var r,n=[],s=e.length;n[0]=2;for(var i=0;i<s;i+=1)r=a&&a[i]||0,n[i+1]=e[i]-r+256&255;return n},i=function(e,t,a){var r,n,s=[],i=e.length;s[0]=3;for(var o=0;o<i;o+=1)r=e[o-t]||0,n=a&&a[o]||0,s[o+1]=e[o]+256-(r+n>>>1)&255;return s},o=function(e,t,a){var r,n,s,i,o=[],c=e.length;o[0]=4;for(var d=0;d<c;d+=1)r=e[d-t]||0,n=a&&a[d]||0,s=a&&a[d-t]||0,i=l(r,n,s),o[d+1]=e[d]-i+256&255;return o},l=function(e,t,a){if(e===t&&t===a)return e;var r=Math.abs(t-a),n=Math.abs(e-a),s=Math.abs(e+t-a-a);return r<=n&&r<=s?e:n<=s?t:a},c=function(){return[r,n,s,i,o]},d=function(e){var t=e.map(function(e){return e.reduce(function(e,t){return e+Math.abs(t)},0)});return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(a,r,n,s){var i,o,l,c,d,u,m,h,p,f,x,g,y,v,b,_=this.decode.FLATE_DECODE,j="";if(this.__addimage__.isArrayBuffer(a)&&(a=new Uint8Array(a)),this.__addimage__.isArrayBufferView(a)){if(a=(l=new cc(a)).imgData,o=l.bits,i=l.colorSpace,d=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){p=(h=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,x=new Uint8Array(p*l.colors),f=new Uint8Array(p);var w,N=l.pixelBitlength-l.bits;for(v=0,b=0;v<p;v++){for(y=h[v],w=0;w<N;)x[b++]=y>>>w&255,w+=l.bits;f[v]=y>>>w&255}}if(16===l.bits){p=(h=new Uint32Array(l.decodePixels().buffer)).length,x=new Uint8Array(p*(32/l.pixelBitlength)*l.colors),f=new Uint8Array(p*(32/l.pixelBitlength)),g=l.colors>1,v=0,b=0;for(var k=0;v<p;)y=h[v++],x[b++]=y>>>0&255,g&&(x[b++]=y>>>16&255,y=h[v++],x[b++]=y>>>0&255),f[k++]=y>>>16&255;o=8}s!==e.image_compression.NONE?(a=t(x,l.width*l.colors,l.colors,s),m=t(f,l.width,1,s)):(a=x,m=f,_=void 0)}if(3===l.colorType&&(i=this.color_spaces.INDEXED,u=l.palette,l.transparency.indexed)){var S=l.transparency.indexed,C=0;for(v=0,p=S.length;v<p;++v)C+=S[v];if((C/=255)===p-1&&-1!==S.indexOf(0))c=[S.indexOf(0)];else if(C!==p){for(h=l.decodePixels(),f=new Uint8Array(h.length),v=0,p=h.length;v<p;v++)f[v]=S[h[v]];m=t(f,l.width,1)}}var A=function(t){var a;switch(t){case e.image_compression.FAST:a=11;break;case e.image_compression.MEDIUM:a=13;break;case e.image_compression.SLOW:a=14;break;default:a=12}return a}(s);return _===this.decode.FLATE_DECODE&&(j="/Predictor "+A+" "),j+="/Colors "+d+" /BitsPerComponent "+o+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a))&&(a=this.__addimage__.arrayBufferToBinaryString(a)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:n,data:a,index:r,filter:_,decodeParameters:j,transparency:c,palette:u,sMask:m,predictor:A,width:l.width,height:l.height,bitsPerComponent:o,colorSpace:i}}}}($o.API),function(e){e.processGIF89A=function(t,a,r,n){var s=new dc(t),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:i,height:o},d=new mc(100).encode(c,100);return e.processJPEG.call(this,d,a,r,n)},e.processGIF87A=e.processGIF89A}($o.API),hc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:r,blue:a,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},hc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){bo.log("bit decode error:"+e)}},hc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),a=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<t;n++)for(var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+8*n*4,o=0;o<8&&8*n+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}0!==a&&(this.pos+=4-a)}},hc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,n=0;n<e;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+2*n*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[i]=c.blue,this.data[i+1]=c.green,this.data[i+2]=c.red,this.data[i+3]=255,2*n+1>=this.width)break;c=this.palette[l],this.data[i+4]=c.blue,this.data[i+4+1]=c.green,this.data[i+4+2]=c.red,this.data[i+4+3]=255}0!==t&&(this.pos+=4-t)}},hc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=a*this.width*4+4*r;if(n<this.palette.length){var i=this.palette[n];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==e&&(this.pos+=4-e)}},hc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,n=0;n<this.width;n++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,d=r*this.width*4+4*n;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=c}this.pos+=e}},hc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),a=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&a)/a*255|0,c=(i>>11)/t*255|0,d=n*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},hc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*a;this.data[i]=s,this.data[i+1]=n,this.data[i+2]=r,this.data[i+3]=255}this.pos+=this.width%4}},hc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*a;this.data[o]=s,this.data[o+1]=n,this.data[o+2]=r,this.data[o+3]=i}},hc.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,a,r,n){var s=new hc(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},c=new mc(100).encode(l,100);return e.processJPEG.call(this,c,a,r,n)}}($o.API),pc.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,a,r,n){var s=new pc(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},c=new mc(100).encode(l,100);return e.processJPEG.call(this,c,a,r,n)}}($o.API),$o.API.processRGBA=function(e,t,a){for(var r=e.data,n=r.length,s=new Uint8Array(n/4*3),i=new Uint8Array(n/4),o=0,l=0,c=0;c<n;c+=4){var d=r[c],u=r[c+1],m=r[c+2],h=r[c+3];s[o++]=d,s[o++]=u,s[o++]=m,i[l++]=h}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:p,index:t,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},$o.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},nc=$o.API,sc=nc.getCharWidthsArray=function(e,t){var a,r,n=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:n.metadata.Unicode.widths,l=o.fof?o.fof:1,c=t.kerning?t.kerning:n.metadata.Unicode.kerning,d=c.fof?c.fof:1,u=!1!==t.doKerning,m=0,h=e.length,p=0,f=o[0]||l,x=[];for(a=0;a<h;a++)r=e.charCodeAt(a),"function"==typeof n.metadata.widthOfString?x.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(r))+i*(1e3/s)||0)/1e3):(m=u&&"object"===(0,bi.A)(c[r])&&!isNaN(parseInt(c[r][p],10))?c[r][p]/d:0,x.push((o[r]||f)/l+m)),p=r;return x},ic=nc.getStringUnitWidth=function(e,t){var a=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return nc.processArabic&&(e=nc.processArabic(e)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(e,a,n)/a:sc.apply(this,arguments).reduce(function(e,t){return e+t},0)},oc=function(e,t,a,r){for(var n=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<a;)o+=t[s],s++;n.push(e.slice(0,s));var l=s;for(o=0;s!==i;)o+t[s]>r&&(n.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&n.push(e.slice(l,s)),n},lc=function(e,t,a){a||(a={});var r,n,s,i,o,l,c,d=[],u=[d],m=a.textIndent||0,h=0,p=0,f=e.split(" "),x=sc.apply(this,[" ",a])[0];if(l=-1===a.lineIndent?f[0].length+2:a.lineIndent||0){var g=Array(l).join(" "),y=[];f.map(function(e){(e=e.split(/\s*\n/)).length>1?y=y.concat(e.map(function(e,t){return(t&&e.length?"\n":"")+e})):y.push(e[0])}),f=y,l=ic.apply(this,[g,a])}for(s=0,i=f.length;s<i;s++){var v=0;if(r=f[s],l&&"\n"==r[0]&&(r=r.substr(1),v=1),m+h+(p=(n=sc.apply(this,[r,a])).reduce(function(e,t){return e+t},0))>t||v){if(p>t){for(o=oc.apply(this,[r,n,t-(m+h),t]),d.push(o.shift()),d=[o.pop()];o.length;)u.push([o.shift()]);p=n.slice(r.length-(d[0]?d[0].length:0)).reduce(function(e,t){return e+t},0)}else d=[r];u.push(d),m=p+l,h=x}else d.push(r),m+=h+p,h=x}return c=l?function(e,t){return(t?g:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(c)},nc.splitTextToSize=function(e,t,a){var r,n=(a=a||{}).fontSize||this.internal.getFontSize(),s=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,a);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/n;s.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/n:0,s.lineIndent=a.lineIndent;var o,l,c=[];for(o=0,l=r.length;o<l;o++)c=c.concat(lc.apply(this,[r[o],i,s]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",a={},r={},n=0;n<16;n++)a[t[n]]="0123456789abcdef"[n],r["0123456789abcdef"[n]]=t[n];var s=function(e){return"0x"+parseInt(e,10).toString(16)},i=e.__fontmetrics__.compress=function(e){var t,a,n,o,l=["{"];for(var c in e){if(t=e[c],isNaN(parseInt(c,10))?a="'"+c+"'":(c=parseInt(c,10),a=(a=s(c).slice(2)).slice(0,-1)+r[a.slice(-1)]),"number"==typeof t)t<0?(n=s(t).slice(3),o="-"):(n=s(t).slice(2),o=""),n=o+n.slice(0,-1)+r[n.slice(-1)];else{if("object"!==(0,bi.A)(t))throw new Error("Don't know what to do with value type "+(0,bi.A)(t)+".");n=i(t)}l.push(a+n)}return l.push("}"),l.join("")},o=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,r,n,s,i={},o=1,l=i,c=[],d="",u="",m=e.length-1,h=1;h<m;h+=1)"'"==(s=e[h])?t?(n=t.join(""),t=void 0):t=[]:t?t.push(s):"{"==s?(c.push([l,n]),l={},n=void 0):"}"==s?((r=c.pop())[0][r[1]]=l,n=void 0,l=r[0]):"-"==s?o=-1:void 0===n?a.hasOwnProperty(s)?(d+=a[s],n=parseInt(d,16)*o,o=1,d=""):d+=s:a.hasOwnProperty(s)?(u+=a[s],l[n]=parseInt(u,16)*o,o=1,n=void 0,u=""):u+=s;return i},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,a=d.Unicode[t.postScriptName];a&&(t.metadata.Unicode={},t.metadata.Unicode.widths=a.widths,t.metadata.Unicode.kerning=a.kerning);var r=c.Unicode[t.postScriptName];r&&(t.metadata.Unicode.encoding=r,t.encoding=r.codePages[0])}])}($o.API),function(e){var t=function(e){for(var t=e.length,a=new Uint8Array(t),r=0;r<t;r++)a[r]=e.charCodeAt(r);return a};e.API.events.push(["addFont",function(a){var r=void 0,n=a.font,s=a.instance;if(!n.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if("string"!=typeof(r=!1===s.existsFileInVFS(n.postScriptName)?s.loadFile(n.postScriptName):s.getFileFromVFS(n.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");!function(a,r){r=/^\x00\x01\x00\x00/.test(r)?t(r):t(No(r)),a.metadata=e.API.TTFFont.open(r),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]}(n,r)}}])}($o),function(){function e(){return(yo.canvg?Promise.resolve(yo.canvg):a.e(455).then(a.bind(a,8455))).catch(function(e){return Promise.reject(new Error("Could not load canvg: "+e))}).then(function(e){return e.default?e.default:e})}$o.API.addSvgAsImage=function(t,a,r,n,s,i,o,l){if(isNaN(a)||isNaN(r))throw bo.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw bo.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=s;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(e){return e.fromString(d,t,u)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(e){return e.render(u)}).then(function(){m.addImage(c.toDataURL("image/jpeg",1),a,r,n,s,o,l)})}}(),$o.API.putTotalPages=function(e){var t,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),a=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var n=0;n<this.internal.pages[r].length;n++)this.internal.pages[r][n]=this.internal.pages[r][n].replace(t,a);return this},$o.API.viewerPreferences=function(e,t){var a;e=e||{},t=t||!1;var r,n,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],c=0,d=0,u=0;function m(e,t){var a,r=!1;for(a=0;a<e.length;a+=1)e[a]===t&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var h=o.length;for(u=0;u<h;u+=1)a[o[u]].value=a[o[u]].defaultValue,a[o[u]].explicitSet=!1}if("object"===(0,bi.A)(e))for(n in e)if(s=e[n],m(o,n)&&void 0!==s){if("boolean"===a[n].type&&"boolean"==typeof s)a[n].value=s;else if("name"===a[n].type&&m(a[n].valueSet,s))a[n].value=s;else if("integer"===a[n].type&&Number.isInteger(s))a[n].value=s;else if("array"===a[n].type){for(c=0;c<s.length;c+=1)if(r=!0,1===s[c].length&&"number"==typeof s[c][0])l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)"number"!=typeof s[c][d]&&(r=!1);!0===r&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}a[n].value="["+l.join(" ")+"]"}else a[n].value=a[n].defaultValue;a[n].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var e,t=[];for(e in a)!0===a[e].explicitSet&&("name"===a[e].type?t.push("/"+e+" /"+a[e].value):t.push("/"+e+" "+a[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(e)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),n=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),i=a.length+r.length+n.length+t.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i+" >>"),this.internal.write("stream"),this.internal.write(t+a+r+n+s),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,r){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",t)),this}}($o.API),function(e){var t=e.API,a=t.pdfEscape16=function(e,t){for(var a,r=t.metadata.Unicode.widths,n=["","0","00","000","0000"],s=[""],i=0,o=e.length;i<o;++i){if(a=t.metadata.characterToGlyph(e.charCodeAt(i)),t.metadata.glyIdsUsed.push(a),t.metadata.toUnicode[a]=e.charCodeAt(i),-1==r.indexOf(a)&&(r.push(a),r.push([parseInt(t.metadata.widthOfGlyph(a),10)])),"0"==a)return s.join("");a=a.toString(16),s.push(n[4-a.length],a)}return s.join("")},r=function(e){var t,a,r,n,s,i,o;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],i=0,o=(a=Object.keys(e).sort(function(e,t){return e-t})).length;i<o;i++)t=a[i],r.length>=100&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(n=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),r.push("<"+t+"><"+n+">"));return r.length&&(s+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var a=t.font,n=t.out,s=t.newObject,i=t.putStream;if(a.metadata instanceof e.API.TTFFont&&"Identity-H"===a.encoding){for(var o=a.metadata.Unicode.widths,l=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var u=s();i({data:c,addLength1:!0,objectId:u}),n("endobj");var m=s();i({data:r(a.metadata.toUnicode),addLength1:!0,objectId:m}),n("endobj");var h=s();n("<<"),n("/Type /FontDescriptor"),n("/FontName /"+Vo(a.fontName)),n("/FontFile2 "+u+" 0 R"),n("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),n("/Flags "+a.metadata.flags),n("/StemV "+a.metadata.stemV),n("/ItalicAngle "+a.metadata.italicAngle),n("/Ascent "+a.metadata.ascender),n("/Descent "+a.metadata.decender),n("/CapHeight "+a.metadata.capHeight),n(">>"),n("endobj");var p=s();n("<<"),n("/Type /Font"),n("/BaseFont /"+Vo(a.fontName)),n("/FontDescriptor "+h+" 0 R"),n("/W "+e.API.PDFObject.convert(o)),n("/CIDToGIDMap /Identity"),n("/DW 1000"),n("/Subtype /CIDFontType2"),n("/CIDSystemInfo"),n("<<"),n("/Supplement 0"),n("/Registry (Adobe)"),n("/Ordering ("+a.encoding+")"),n(">>"),n(">>"),n("endobj"),a.objectNumber=s(),n("<<"),n("/Type /Font"),n("/Subtype /Type0"),n("/ToUnicode "+m+" 0 R"),n("/BaseFont /"+Vo(a.fontName)),n("/Encoding /"+a.encoding),n("/DescendantFonts ["+p+" 0 R]"),n(">>"),n("endobj"),a.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var a=t.font,n=t.out,s=t.newObject,i=t.putStream;if(a.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===a.encoding){for(var o=a.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var d=s();i({data:l,addLength1:!0,objectId:d}),n("endobj");var u=s();i({data:r(a.metadata.toUnicode),addLength1:!0,objectId:u}),n("endobj");var m=s();n("<<"),n("/Descent "+a.metadata.decender),n("/CapHeight "+a.metadata.capHeight),n("/StemV "+a.metadata.stemV),n("/Type /FontDescriptor"),n("/FontFile2 "+d+" 0 R"),n("/Flags 96"),n("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),n("/FontName /"+Vo(a.fontName)),n("/ItalicAngle "+a.metadata.italicAngle),n("/Ascent "+a.metadata.ascender),n(">>"),n("endobj"),a.objectNumber=s();for(var h=0;h<a.metadata.hmtx.widths.length;h++)a.metadata.hmtx.widths[h]=parseInt(a.metadata.hmtx.widths[h]*(1e3/a.metadata.head.unitsPerEm));n("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+Vo(a.fontName)+"/FontDescriptor "+m+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),n("endobj"),a.isAlreadyPutted=!0}}(t)}]);var n=function(e){var t,r=e.text||"",n=e.x,s=e.y,i=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,d=o.fonts,u=c,m="",h=0,p="",f=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:r,x:n,y:s,options:i,mutex:o};for(p=r,u=c,Array.isArray(r)&&(p=r[0]),h=0;h<p.length;h+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[p[h].charCodeAt(0)]),t||p[h].charCodeAt(0)<256&&d[u].metadata.hasOwnProperty("Unicode")?m+=p[h]:m+="";var x="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===f?x=l(m,u).split("").map(function(e){return e.charCodeAt(0).toString(16)}).join(""):"Identity-H"===f&&(x=a(m,d[u])),o.isHex=!0,{text:x,x:n,y:s,options:i,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",a=[],r={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var s=0;for(s=0;s<t.length;s+=1)Array.isArray(t[s])&&3===t[s].length?a.push([n(Object.assign({},r,{text:t[s][0]})).text,t[s][1],t[s][2]]):a.push(n(Object.assign({},r,{text:t[s]})).text);e.text=a}else e.text=n(Object.assign({},r,{text:t})).text}])}($o),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,a){return t.call(this),this.internal.vFS[e]=a,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}($o.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var a,r,n,s,i,o,l,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},h={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,g=0;this.__bidiEngine__={};var y=function(e){var t=e.charCodeAt(),a=t>>8,r=h[a];return void 0!==r?c[256*r+(255&t)]:252===a||253===a?"AL":f.test(a)?"L":8===a?"R":"N"},v=function(e){for(var t,a=0;a<e.length;a++){if("L"===(t=y(e.charAt(a))))return!1;if("R"===t)return!0}return!1},b=function(e,t,i,o){var l,c,d,u,m=t[o];switch(m){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"N":case"AN":break;case"EN":x&&(m="AN");break;case"AL":x=!0,m="R";break;case"WS":case"BN":m="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=i[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?m="N":x&&(c="AN"),m=c===l?c:"N";break;case"ES":m="EN"===(l=o>0?i[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===i[o-1]){m="EN";break}if(x){m="N";break}for(d=o+1,u=t.length;d<u&&"ET"===t[d];)d++;m=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(n&&!s){for(u=t.length,d=o+1;d<u&&"NSM"===t[d];)d++;if(d<u){var h=e[o],p=h>=1425&&h<=2303||64286===h;if(l=t[d],p&&("R"===l||"AL"===l)){m="R";break}}}m=o<1||"B"===(l=t[o-1])?"N":i[o-1];break;case"B":x=!1,a=!0,m=g;break;case"S":r=!0,m="N"}return m},_=function(e,t,a){var r=e.split("");return a&&j(r,a,{hiLevel:g}),r.reverse(),t&&t.reverse(),r.join("")},j=function(e,t,n){var s,i,o,l,c,h=-1,p=e.length,f=0,v=[],_=g?u:d,j=[];for(x=!1,a=!1,r=!1,i=0;i<p;i++)j[i]=y(e[i]);for(o=0;o<p;o++){if(c=f,v[o]=b(e,j,v,o),s=240&(f=_[c][m[v[o]]]),f&=15,t[o]=l=_[f][5],s>0)if(16===s){for(i=h;i<o;i++)t[i]=1;h=-1}else h=-1;if(_[f][6])-1===h&&(h=o);else if(h>-1){for(i=h;i<o;i++)t[i]=l;h=-1}"B"===j[o]&&(t[o]=0),n.hiLevel|=l}r&&function(e,t,a){for(var r=0;r<a;r++)if("S"===e[r]){t[r]=g;for(var n=r-1;n>=0&&"WS"===e[n];n--)t[n]=g}}(j,t,p)},w=function(e,t,r,n,s){if(!(s.hiLevel<e)){if(1===e&&1===g&&!a)return t.reverse(),void(r&&r.reverse());for(var i,o,l,c,d=t.length,u=0;u<d;){if(n[u]>=e){for(l=u+1;l<d&&n[l]>=e;)l++;for(c=u,o=l-1;c<o;c++,o--)i=t[c],t[c]=t[o],t[o]=i,r&&(i=r[c],r[c]=r[o],r[o]=i);u=l}u++}}},N=function(e,t,a){var r=e.split(""),n={hiLevel:g};return a||(a=[]),j(r,a,n),function(e,t,a){if(0!==a.hiLevel&&l)for(var r,n=0;n<e.length;n++)1===t[n]&&(r=p.indexOf(e[n]))>=0&&(e[n]=p[r+1])}(r,a,n),w(2,r,t,a,n),w(1,r,t,a,n),r.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,a){if(function(e,t){if(t)for(var a=0;a<e.length;a++)t[a]=a;void 0===s&&(s=v(e)),void 0===o&&(o=v(e))}(e,t),n||!i||o)if(n&&i&&s^o)g=s?1:0,e=_(e,t,a);else if(!n&&i&&o)g=s?1:0,e=N(e,t,a),e=_(e,t);else if(!n||s||i||o){if(n&&!i&&s^o)e=_(e,t),s?(g=0,e=N(e,t,a)):(g=1,e=N(e,t,a),e=_(e,t));else if(n&&s&&!i&&o)g=1,e=N(e,t,a),e=_(e,t);else if(!n&&!i&&s^o){var r=l;s?(g=1,e=N(e,t,a),g=0,l=!1,e=N(e,t,a),l=r):(g=0,e=N(e,t,a),e=_(e,t),g=1,l=!1,e=N(e,t,a),l=r,e=_(e,t))}}else g=0,e=N(e,t,a);else g=s?1:0,e=N(e,t,a);return e},this.__bidiEngine__.setOptions=function(e){e&&(n=e.isInputVisual,i=e.isOutputVisual,s=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,r=(e.x,e.y,e.options||{}),n=(e.mutex,r.lang,[]);if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,a.setOptions(r),"[object Array]"===Object.prototype.toString.call(t)){var s=0;for(n=[],s=0;s<t.length;s+=1)"[object Array]"===Object.prototype.toString.call(t[s])?n.push([a.doBidiReorder(t[s][0]),t[s][1],t[s][2]]):n.push([a.doBidiReorder(t[s])]);e.text=n}else e.text=a.doBidiReorder(t);a.setOptions({isInputVisual:!0})}])}($o),$o.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new xc(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Rc(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new gc(this.contents),this.head=new bc(this),this.name=new Cc(this),this.cmap=new jc(this),this.toUnicode={},this.hhea=new wc(this),this.maxp=new Ac(this),this.hmtx=new Lc(this),this.post=new kc(this),this.os2=new Nc(this),this.loca=new Ic(this),this.glyf=new Ec(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,a,r,n;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,a,r,n;for(n=[],t=0,a=(r=this.bbox).length;t<a;t++)e=r[t],n.push(Math.round(e*this.scaleFactor));return n}.call(this),this.stemV=0,this.post.exists?(a=255&(r=this.post.italic_angle),0!=(32768&(t=r>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(n=this.familyClass)||2===n||3===n||4===n||5===n||7===n,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,a){var r,n,s,i;for(s=0,n=0,i=(e=""+e).length;0<=i?n<i:n>i;n=0<=i?++n:--n)r=e.charCodeAt(n),s+=this.widthOfGlyph(this.characterToGlyph(r))+a*(1e3/t)||0;return s*(t/1e3)},e.prototype.lineHeight=function(e,t){var a;return null==t&&(t=!1),a=t?this.lineGap:0,(this.ascender+a-this.decender)/1e3*e},e}();var fc,xc=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,a;for(a=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)a[t]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(e){var t,a,r;for(r=[],t=0,a=e.length;0<=a?t<a:t>a;t=0<=a?++t:--t)r.push(this.writeByte(e.charCodeAt(t)));return r},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,a,r,n,s,i,o;return e=this.readByte(),t=this.readByte(),a=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^a)+4294967296*(255^r)+16777216*(255^n)+65536*(255^s)+256*(255^i)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*a+4294967296*r+16777216*n+65536*s+256*i+o},e.prototype.writeLongLong=function(e){var t,a;return t=Math.floor(e/4294967296),a=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,a;for(t=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)t.push(this.readByte());return t},e.prototype.write=function(e){var t,a,r,n;for(n=[],a=0,r=e.length;a<r;a++)t=e[a],n.push(this.writeByte(t));return n},e}(),gc=function(){var e;function t(e){var t,a,r;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},a=0,r=this.tableCount;0<=r?a<r:a>r;a=0<=r?++a:--a)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var a,r,n,s,i,o,l,c,d,u,m,h,p;for(p in m=Object.keys(t).length,o=Math.log(2),d=16*Math.floor(Math.log(m)/o),s=Math.floor(d/o),c=16*m-d,(r=new xc).writeInt(this.scalarType),r.writeShort(m),r.writeShort(d),r.writeShort(s),r.writeShort(c),n=16*m,l=r.pos+n,i=null,h=[],t)for(u=t[p],r.writeString(p),r.writeInt(e(u)),r.writeInt(l),r.writeInt(u.length),h=h.concat(u),"head"===p&&(i=l),l+=u.length;l%4;)h.push(0),l++;return r.write(h),a=2981146554-e(r.data),r.pos=i+8,r.writeUInt32(a),r.data},e=function(e){var t,a,r,n;for(e=Pc.call(e);e.length%4;)e.push(0);for(r=new xc(e),a=0,t=0,n=e.length;t<n;t=t+=4)a+=r.readUInt32();return 4294967295&a},t}(),yc={}.hasOwnProperty,vc=function(e,t){for(var a in t)yc.call(t,a)&&(e[a]=t[a]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};fc=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var bc=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,fc),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new xc).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),_c=function(){function e(e,t){var a,r,n,s,i,o,l,c,d,u,m,h,p,f,x,g,y;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(m=e.readUInt16(),u=m/2,e.pos+=6,n=function(){var t,a;for(a=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)a.push(e.readUInt16());return a}(),e.pos+=2,p=function(){var t,a;for(a=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)a.push(e.readUInt16());return a}(),l=function(){var t,a;for(a=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)a.push(e.readUInt16());return a}(),c=function(){var t,a;for(a=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)a.push(e.readUInt16());return a}(),r=(this.length-e.pos+this.offset)/2,i=function(){var t,a;for(a=[],o=t=0;0<=r?t<r:t>r;o=0<=r?++t:--t)a.push(e.readUInt16());return a}(),o=x=0,y=n.length;x<y;o=++x)for(f=n[o],a=g=h=p[o];h<=f?g<=f:g>=f;a=h<=f?++g:--g)0===c[o]?s=a+l[o]:0!==(s=i[c[o]/2+(a-h)-(u-o)]||0)&&(s+=l[o]),this.codeMap[a]=65535&s}e.pos=d}return e.encode=function(e,t){var a,r,n,s,i,o,l,c,d,u,m,h,p,f,x,g,y,v,b,_,j,w,N,k,S,C,A,L,P,E,F,O,I,R,D,M,T,q,z,B,U,H,W,V,Q,J;switch(L=new xc,s=Object.keys(e).sort(function(e,t){return e-t}),t){case"macroman":for(p=0,f=function(){var e=[];for(h=0;h<256;++h)e.push(0);return e}(),g={0:0},n={},P=0,I=s.length;P<I;P++)null==g[W=e[r=s[P]]]&&(g[W]=++p),n[r]={old:e[r],new:g[e[r]]},f[r]=g[e[r]];return L.writeUInt16(1),L.writeUInt16(0),L.writeUInt32(12),L.writeUInt16(0),L.writeUInt16(262),L.writeUInt16(0),L.write(f),{charMap:n,subtable:L.data,maxGlyphID:p+1};case"unicode":for(C=[],d=[],y=0,g={},a={},x=l=null,E=0,R=s.length;E<R;E++)null==g[b=e[r=s[E]]]&&(g[b]=++y),a[r]={old:b,new:g[b]},i=g[b]-r,null!=x&&i===l||(x&&d.push(x),C.push(r),l=i),x=r;for(x&&d.push(x),d.push(65535),C.push(65535),k=2*(N=C.length),w=2*Math.pow(Math.log(N)/Math.LN2,2),u=Math.log(w/2)/Math.LN2,j=2*N-w,o=[],_=[],m=[],h=F=0,D=C.length;F<D;h=++F){if(S=C[h],c=d[h],65535===S){o.push(0),_.push(0);break}if(S-(A=a[S].new)>=32768)for(o.push(0),_.push(2*(m.length+N-h)),r=O=S;S<=c?O<=c:O>=c;r=S<=c?++O:--O)m.push(a[r].new);else o.push(A-S),_.push(0)}for(L.writeUInt16(3),L.writeUInt16(1),L.writeUInt32(12),L.writeUInt16(4),L.writeUInt16(16+8*N+2*m.length),L.writeUInt16(0),L.writeUInt16(k),L.writeUInt16(w),L.writeUInt16(u),L.writeUInt16(j),U=0,M=d.length;U<M;U++)r=d[U],L.writeUInt16(r);for(L.writeUInt16(0),H=0,T=C.length;H<T;H++)r=C[H],L.writeUInt16(r);for(V=0,q=o.length;V<q;V++)i=o[V],L.writeUInt16(i);for(Q=0,z=_.length;Q<z;Q++)v=_[Q],L.writeUInt16(v);for(J=0,B=m.length;J<B;J++)p=m[J],L.writeUInt16(p);return{charMap:a,subtable:L.data,maxGlyphID:y+1}}},e}(),jc=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,fc),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,a,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)t=new _c(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var a,r;return null==t&&(t="macroman"),a=_c.encode(e,t),(r=new xc).writeUInt16(0),r.writeUInt16(1),a.table=r.data.concat(a.subtable),a},e}(),wc=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,fc),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),Nc=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,fc),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,a;for(a=[],t=0;t<10;++t)a.push(e.readByte());return a}(),this.charRange=function(){var t,a;for(a=[],t=0;t<4;++t)a.push(e.readInt());return a}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,a;for(a=[],t=0;t<2;t=++t)a.push(e.readInt());return a}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),kc=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,fc),e.prototype.tag="post",e.prototype.parse=function(e){var t,a,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var n;for(a=e.readUInt16(),this.glyphNameIndex=[],n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)t=e.readByte(),r.push(this.names.push(e.readString(t)));return r;case 151552:return a=e.readUInt16(),this.offsets=e.read(a);case 262144:return this.map=function(){var t,a,r;for(r=[],n=t=0,a=this.file.maxp.numGlyphs;0<=a?t<a:t>a;n=0<=a?++t:--t)r.push(e.readUInt32());return r}.call(this)}},e}(),Sc=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Cc=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,fc),e.prototype.tag="name",e.prototype.parse=function(e){var t,a,r,n,s,i,o,l,c,d,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),i=e.readShort(),a=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)a.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+i+e.readShort()});for(o={},n=c=0,d=a.length;c<d;n=++c)r=a[n],e.pos=r.offset,l=e.readString(r.length),s=new Sc(l,r),null==o[u=r.nameID]&&(o[u]=[]),o[r.nameID].push(s);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),Ac=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,fc),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),Lc=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,fc),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,a,r,n,s,i,o;for(e.pos=this.offset,this.metrics=[],t=0,i=this.file.hhea.numberOfMetrics;0<=i?t<i:t>i;t=0<=i?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var a,n;for(n=[],t=a=0;0<=r?a<r:a>r;t=0<=r?++a:--a)n.push(e.readInt16());return n}(),this.widths=function(){var e,t,a,r;for(r=[],e=0,t=(a=this.metrics).length;e<t;e++)n=a[e],r.push(n.advance);return r}.call(this),a=this.widths[this.widths.length-1],o=[],t=s=0;0<=r?s<r:s>r;t=0<=r?++s:--s)o.push(this.widths.push(a));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),Pc=[].slice,Ec=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,fc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,a,r,n,s,i,o,l,c,d;return e in this.cache?this.cache[e]:(n=this.file.loca,t=this.file.contents,a=n.indexOf(e),0===(r=n.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+a,s=(i=new xc(t.read(r))).readShort(),l=i.readShort(),d=i.readShort(),o=i.readShort(),c=i.readShort(),this.cache[e]=-1===s?new Oc(i,l,d,o,c):new Fc(i,s,l,d,o,c),this.cache[e]))},e.prototype.encode=function(e,t,a){var r,n,s,i,o;for(s=[],n=[],i=0,o=t.length;i<o;i++)r=e[t[i]],n.push(s.length),r&&(s=s.concat(r.encode(a)));return n.push(s.length),{table:s,offsets:n}},e}(),Fc=function(){function e(e,t,a,r,n,s){this.raw=e,this.numberOfContours=t,this.xMin=a,this.yMin=r,this.xMax=n,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Oc=function(){function e(e,t,a,r,n){var s,i;for(this.raw=e,this.xMin=t,this.yMin=a,this.xMax=r,this.yMax=n,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;i=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&i;)s.pos+=1&i?4:2,128&i?s.pos+=8:64&i?s.pos+=4:8&i&&(s.pos+=2)}return e.prototype.encode=function(){var e,t,a;for(t=new xc(Pc.call(this.raw.data)),e=0,a=this.glyphIDs.length;e<a;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),Ic=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return vc(e,fc),e.prototype.tag="loca",e.prototype.parse=function(e){var t,a;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,r;for(r=[],a=0,t=this.length;a<t;a+=2)r.push(2*e.readUInt16());return r}.call(this):function(){var t,r;for(r=[],a=0,t=this.length;a<t;a+=4)r.push(e.readUInt32());return r}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var a=new Uint32Array(this.offsets.length),r=0,n=0,s=0;s<a.length;++s)if(a[s]=r,n<t.length&&t[n]==s){++n,a[s]=r;var i=this.offsets[s],o=this.offsets[s+1]-i;o>0&&(r+=o)}for(var l=new Array(4*a.length),c=0;c<a.length;++c)l[4*c+3]=255&a[c],l[4*c+2]=(65280&a[c])>>8,l[4*c+1]=(16711680&a[c])>>16,l[4*c]=(4278190080&a[c])>>24;return l},e}(),Rc=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,a,r,n;for(t in r=this.font.cmap.tables[0].codeMap,e={},n=this.subset)a=n[t],e[t]=r[a];return e},e.prototype.glyphsFor=function(e){var t,a,r,n,s,i,o;for(r={},s=0,i=e.length;s<i;s++)r[n=e[s]]=this.font.glyf.glyphFor(n);for(n in t=[],r)(null!=(a=r[n])?a.compound:void 0)&&t.push.apply(t,a.glyphIDs);if(t.length>0)for(n in o=this.glyphsFor(t))a=o[n],r[n]=a;return r},e.prototype.encode=function(e,t){var a,r,n,s,i,o,l,c,d,u,m,h,p,f,x;for(r in a=jc.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),m={0:0},x=a.charMap)m[(o=x[r]).old]=o.new;for(h in u=a.maxGlyphID,s)h in m||(m[h]=u++);return c=function(e){var t,a;for(t in a={},e)a[e[t]]=t;return a}(m),d=Object.keys(c).sort(function(e,t){return e-t}),p=function(){var e,t,a;for(a=[],e=0,t=d.length;e<t;e++)i=d[e],a.push(c[i]);return a}(),n=this.font.glyf.encode(s,p,m),l=this.font.loca.encode(n.offsets,p),f={cmap:this.font.cmap.raw(),glyf:n.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();$o.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(a){var r,n,s,i;if(Array.isArray(a))return"["+function(){var e,n,s;for(s=[],e=0,n=a.length;e<n;e++)r=a[e],s.push(t.convert(r));return s}().join(" ")+"]";if("string"==typeof a)return"/"+a;if(null!=a?a.isString:void 0)return"("+a+")";if(a instanceof Date)return"(D:"+e(a.getUTCFullYear(),4)+e(a.getUTCMonth(),2)+e(a.getUTCDate(),2)+e(a.getUTCHours(),2)+e(a.getUTCMinutes(),2)+e(a.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(a)){for(n in s=["<<"],a)i=a[n],s.push("/"+n+" "+t.convert(i));return s.push(">>"),s.join("\n")}return""+a},t}();const Dc=$o,Mc=e=>{if(!e)return"";try{const t=new Date(e);if(isNaN(t.getTime()))return e;const a=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),n=t.getFullYear();return"".concat(a,"-").concat(r,"-").concat(n)}catch(zh){return e}},Tc=e=>{if(!e||""===e||null===e||void 0===e)return"";const t=parseFloat(e);return isNaN(t)?"":"Rs ".concat(t.toLocaleString("en-IN"))},qc=e=>{if(!e||""===e||null===e||void 0===e)return"";const t=parseFloat(e);return isNaN(t)?"":t.toLocaleString("en-IN")},zc=async(e,t,a,r,n,s)=>{if(!t)return!1;try{let i=t;if(t.startsWith("data:image"))i=t;else if(t.startsWith("/")||t.startsWith("http"))return!1;const o=-1!==i.indexOf("image/png")?"PNG":"JPEG";return e.addImage(i,o,a,r,n,s),!0}catch(i){return console.error("Error adding image to PDF:",i),!1}},Bc=function(e,t,a,r,n,s){let i=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return e.setLineWidth(.2),i&&(o?(e.setFillColor(200,228,218),e.setDrawColor(160,200,190)):(e.setFillColor(245,245,245),e.setDrawColor(180,180,180)),e.rect(t,a,r,n,"FD"),e.rect(t,a,r,n,"S")),e.setFontSize(11),e.setFont("helvetica","bold"),e.setTextColor(0,0,0),e.text(s,t+4,a+n/2+1.5),e.setDrawColor(200,200,200),e.line(t,a+n,t+r,a+n),a+n},Uc=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{caseNumber:a="",userName:r="",caseId:n=""}=t;try{const{applicant:t,counsellor:n}=((e,t)=>{var a,r,n,s,i,o,l,c,d,u,m,h,p,f,x,g,y,v;const b=(e,t)=>e&&void 0!==e[t]&&null!==e[t]?e[t]:void 0;return{applicant:{name:null!==(a=b(e.applicant_details,"name"))&&void 0!==a?a:e.applicant_name,contact_number:null!==(r=b(e.applicant_details,"contact_number"))&&void 0!==r?r:e.applicant_contact_number,case_id:null!==(n=null!==(s=b(e.applicant_details,"case_id"))&&void 0!==s?s:e.applicant_case_id)&&void 0!==n?n:t,jamiat:null!==(i=b(e.applicant_details,"jamiat"))&&void 0!==i?i:e.applicant_jamiat,jamaat:null!==(o=b(e.applicant_details,"jamaat"))&&void 0!==o?o:e.applicant_jamaat,age:null!==(l=b(e.applicant_details,"age"))&&void 0!==l?l:e.applicant_age,its:null!==(c=b(e.applicant_details,"its"))&&void 0!==c?c:e.applicant_its,photo:null!==(d=b(e.applicant_details,"photo"))&&void 0!==d?d:e.applicant_photo},counsellor:{name:null!==(u=b(e.counsellor_details,"name"))&&void 0!==u?u:e.counsellor_name,contact_number:null!==(m=b(e.counsellor_details,"contact_number"))&&void 0!==m?m:e.counsellor_contact_number,jamiat:null!==(h=b(e.counsellor_details,"jamiat"))&&void 0!==h?h:e.counsellor_jamiat,jamaat:null!==(p=b(e.counsellor_details,"jamaat"))&&void 0!==p?p:e.counsellor_jamaat,age:null!==(f=b(e.counsellor_details,"age"))&&void 0!==f?f:e.counsellor_age,its:null!==(x=b(e.counsellor_details,"its"))&&void 0!==x?x:e.counsellor_its,certified:null!==(g=null!==(y=b(e.counsellor_details,"certified"))&&void 0!==y?y:e.counsellor_certified)&&void 0!==g&&g,photo:null!==(v=b(e.counsellor_details,"photo"))&&void 0!==v?v:e.counsellor_photo}}})(e,a),s=new Dc({orientation:"portrait",unit:"mm",format:"a4"}),i=210,o=297,l=12,c=i-2*l,d=8,u=5;let m=l;const h=e=>null===e||void 0===e?"":String(e),p=e=>m+e>o-l&&(s.addPage(),m=l,!0);s.setFontSize(16),s.setFont("helvetica","bold"),s.text("COVER LETTER",i/2,m+6,{align:"center"}),m+=10,s.setFontSize(11),s.setFont("helvetica","normal"),s.text("Baaseteen \u2014 1447H",i/2,m+4,{align:"center"}),m+=8,s.setFontSize(10),s.setTextColor(80,80,80);const f="Case No.: ".concat(h(t.case_id)),x="Date: ".concat(Mc((new Date).toISOString().slice(0,10)));s.text(f,l,m+4),s.text(x,i-l-s.getTextWidth(x),m+4),s.setTextColor(0,0,0),m+=12;const g=26,y=g+4,v=24,b=4.5,_=50,j=50;p(2*j+15);let w=Bc(s,l,m,c,d,"Applicant Details",!0,!0),N=w+u;const k=l+4;if(t.photo){await zc(s,t.photo,k,N,g,g)||(s.setDrawColor(200,200,200),s.rect(k,N,g,g,"S"),s.setFontSize(7),s.setTextColor(140,140,140),s.text("Applicant",k+3,N+g/2-2),s.text("Photo",k+5,N+g/2+2),s.setTextColor(0,0,0))}else s.setDrawColor(200,200,200),s.rect(k,N,g,g,"S"),s.setFontSize(7),s.setTextColor(140,140,140),s.text("Applicant",k+3,N+g/2-2),s.text("Photo",k+5,N+g/2+2),s.setTextColor(0,0,0);s.setFontSize(8),s.setFont("helvetica","bold"),s.text("ITS: ".concat(h(t.its)||"\u2014"),k+g/2,N+g+4,{align:"center"}),s.setFont("helvetica","normal");const S=l+y+2;s.setFontSize(9),s.setFont("helvetica","bold"),s.text("Name:",S,N+4),s.setFont("helvetica","normal");const C=h(t.name)||"\u2014",A=C.length>_?C.substring(0,_-1)+"\u2026":C;s.text(A,S+v,N+4);const L=[{label:"Contact",value:t.contact_number},{label:"Case Id",value:t.case_id},{label:"Jamiat",value:t.jamiat},{label:"Jamaat",value:t.jamaat},{label:"Age",value:t.age}];s.setFontSize(9),L.forEach((e,t)=>{const a=N+4+b+t*b;s.setFont("helvetica","bold"),s.text("".concat(e.label,":"),S,a),s.setFont("helvetica","normal");const r=h(e.value),n=r.length>24?r.substring(0,23)+"\u2026":r||"\u2014";s.text(n,S+v,a)}),s.setDrawColor(180,200,190),s.rect(l,m,c,j,"S"),s.setDrawColor(200,200,200),m+=j+8,p(j+5),w=Bc(s,l,m,c,d,"Counsellor Details",!0,!0),N=w+u;const P=l+4;if(n.photo){await zc(s,n.photo,P,N,g,g)||(s.setDrawColor(200,200,200),s.rect(P,N,g,g,"S"),s.setFontSize(7),s.setTextColor(140,140,140),s.text("Counsellor",P+2,N+g/2-2),s.text("Photo",P+5,N+g/2+2),s.setTextColor(0,0,0))}else s.setDrawColor(200,200,200),s.rect(P,N,g,g,"S"),s.setFontSize(7),s.setTextColor(140,140,140),s.text("Counsellor",P+2,N+g/2-2),s.text("Photo",P+5,N+g/2+2),s.setTextColor(0,0,0);s.setFontSize(8),s.setFont("helvetica","bold"),s.text("ITS: ".concat(h(n.its)||"\u2014"),P+g/2,N+g+4,{align:"center"}),s.setFont("helvetica","normal");const E=l+y+2;s.setFontSize(9),s.setFont("helvetica","bold"),s.text("Name:",E,N+4),s.setFont("helvetica","normal");const F=h(n.name)||"\u2014",O=F.length>_?F.substring(0,_-1)+"\u2026":F;s.text(O,E+v,N+4);const I=[{label:"Contact",value:n.contact_number},{label:"Jamiat",value:n.jamiat},{label:"Jamaat",value:n.jamaat},{label:"Age",value:n.age},{label:"Certified",value:n.certified?"Yes":"No"}];s.setFontSize(9),I.forEach((e,t)=>{const a=N+4+b+t*b;s.setFont("helvetica","bold"),s.text("".concat(e.label,":"),E,a),s.setFont("helvetica","normal");const r=h(e.value),n=r.length>24?r.substring(0,23)+"\u2026":r||"\u2014";s.text(n,E+v,a)}),s.setDrawColor(180,200,190),s.rect(l,m,c,j,"S"),m+=j+10,p(75);const R=m;w=Bc(s,l,m,c,d,"Financial and Business Overview"),m=w+u,s.setFontSize(9),s.setFont("helvetica","normal");const D=[{label:"Current Personal Income",value:Tc(e.current_personal_income)},{label:"Current Family Income",value:Tc(e.current_family_income)},{label:"Earning Family Members",value:qc(e.earning_family_members)},{label:"Dependents",value:qc(e.dependents)}];D.forEach((e,t)=>{s.setFont("helvetica","bold"),s.text("".concat(e.label,":"),l+4,m+4+5*t),s.setFont("helvetica","normal"),s.text(h(e.value),l+55,m+4+5*t)}),m+=5*D.length+4,s.setFont("helvetica","bold"),s.text("Assets (House / Shop / Gold / Machinery / Stock):",l+4,m+4),s.setFont("helvetica","normal"),s.text("".concat(Tc(e.asset_house)," / ").concat(Tc(e.asset_shop)," / ").concat(Tc(e.asset_gold)," / ").concat(Tc(e.asset_machinery)," / ").concat(Tc(e.asset_stock)),l+4,m+9),m+=16,s.setFont("helvetica","bold"),s.text("Liabilities (Qardan / Den / Others):",l+4,m+4),s.setFont("helvetica","normal"),s.text("".concat(Tc(e.liability_qardan)," / ").concat(Tc(e.liability_den)," / ").concat(Tc(e.liability_others)),l+4,m+9),m+=16,s.setFont("helvetica","bold"),s.text("Business Name & Year:",l+4,m+4),s.setFont("helvetica","normal"),s.text(h(e.business_name),l+45,m+4),m+=6,s.setFont("helvetica","bold"),s.text("Industry / Segment:",l+4,m+4),s.setFont("helvetica","normal"),s.text(h(e.industry_segment),l+45,m+4),m+=8,s.setFont("helvetica","bold"),s.text("Present Occupation / Business:",l+4,m+4),s.setFont("helvetica","normal");const M=h(e.present_occupation),T=s.splitTextToSize(M||"\u2014",c-12);s.text(T,l+4,m+8),m+=Math.max(8,5*T.length)+6,s.rect(l,R,c,m-R,"S"),m+=8,p(35);const q=m;w=Bc(s,l,m,c,d,"Summary of Proposed Upliftment Plan"),m=w+u,s.setFontSize(9),s.setFont("helvetica","normal");const z=h(e.proposed_upliftment_plan)||"\u2014",B=s.splitTextToSize(z,c-8);s.text(B,l+4,m+4),m+=Math.max(12,5*B.length)+6,s.rect(l,q,c,m-q,"S"),m+=8,p(35);const U=m;w=Bc(s,l,m,c,d,"Financial Assistance"),m=w+u;const H=28,W=(c-H)/3,V=l+H,Q=l+H+W,J=l+H+2*W,Y=8;s.setFontSize(9),s.setFont("helvetica","bold"),s.text("",l+2,m),s.text("Enayat Amount",V+3,m),s.text("Qardan Amount",Q+3,m),s.text("Total Amount",J+3,m),m+=Y,s.line(l,m,i-l,m),s.setFont("helvetica","normal"),s.setFont("helvetica","bold"),s.text("Requested",l+2,m+5),s.setFont("helvetica","normal"),s.text(Tc(e.requested_enayat)||"\u2014",V+3,m+5),s.text(Tc(e.requested_qardan)||"\u2014",Q+3,m+5),s.text(Tc(e.requested_total)||"\u2014",J+3,m+5),m+=Y,s.setFont("helvetica","bold"),s.text("Recommended",l+2,m+5),s.setFont("helvetica","normal"),s.text(Tc(e.recommended_enayat)||"\u2014",V+3,m+5),s.text(Tc(e.recommended_qardan)||"\u2014",Q+3,m+5),s.text(Tc(e.recommended_total)||"\u2014",J+3,m+5),m+=Y+4,s.setFont("helvetica","bold"),s.text("Non-financial Assistance:",l+2,m+4),s.setFont("helvetica","normal"),s.text(h(e.non_financial_assistance)||"\u2014",l+50,m+4),m+=10,s.rect(l,U,c,m-U,"S"),m+=8,p(40);const G=m;w=Bc(s,l,m,c,d,"Projected Income"),m=w+u;const K=(c-22)/5,$=7;s.setFontSize(8),s.setFont("helvetica","bold"),s.text("",l+2,m);for(let e=1;e<=5;e++)s.text("Year ".concat(e),l+22+(e-1)*K+3,m);m+=$,s.line(l,m,i-l,m),s.setFont("helvetica","normal"),s.setFont("helvetica","bold"),s.text("Applicant",l+2,m+4),s.setFont("helvetica","normal"),s.text(Tc(e.applicant_projected_income_after_1_year)||"\u2014",l+22+3,m+4),s.text(Tc(e.applicant_projected_income_after_2_years)||"\u2014",l+22+K+3,m+4),s.text(Tc(e.applicant_projected_income_after_3_years)||"\u2014",l+22+2*K+3,m+4),s.text(Tc(e.applicant_projected_income_after_4_years)||"\u2014",l+22+3*K+3,m+4),s.text(Tc(e.applicant_projected_income_after_5_years)||"\u2014",l+22+4*K+3,m+4),m+=$,s.setFont("helvetica","bold"),s.text("Family",l+2,m+4),s.setFont("helvetica","normal"),s.text(Tc(e.family_projected_income_after_1_year)||"\u2014",l+22+3,m+4),s.text(Tc(e.family_projected_income_after_2_years)||"\u2014",l+22+K+3,m+4),s.text(Tc(e.family_projected_income_after_3_years)||"\u2014",l+22+2*K+3,m+4),s.text(Tc(e.family_projected_income_after_4_years)||"\u2014",l+22+3*K+3,m+4),s.text(Tc(e.family_projected_income_after_5_years)||"\u2014",l+22+4*K+3,m+4),m+=$+4,s.rect(l,G,c,m-G,"S"),m+=8,p(30);const X=m;w=Bc(s,l,m,c,d,"Welfare Department Comments"),m=w+u,s.setFontSize(9),s.setFont("helvetica","normal");const Z=h(e.welfare_department_comments)||"\u2014",ee=s.splitTextToSize(Z,c-8);s.text(ee,l+4,m+4),m+=Math.max(10,5*ee.length)+6,s.rect(l,X,c,m-X,"S"),m+=8,p(45);const te=38,ae=m;s.setFillColor(232,245,233),s.rect(l,m,c,te,"F"),s.setDrawColor(160,180,160),s.rect(l,m,c,te,"S"),s.setFontSize(12),s.setFont("helvetica","bold"),s.setTextColor(0,100,0),s.text("Executive Approval (For Sign-off)",l+6,m+10),s.setTextColor(0,0,0),s.setFontSize(10),s.setFont("helvetica","normal"),s.text("Approved Enayat: ".concat(Tc(e.approved_enayat)),l+6,m+20),s.text("Approved Qardan: ".concat(Tc(e.approved_qardan)),l+6,m+28),s.text("QH Months: ".concat(h(e.approved_qh_months)||"\u2014"),l+6,m+36),m=ae+te+10,p(55),s.setFontSize(11),s.setFont("helvetica","bold"),s.text("Executive Management \u2014 Name, Signature and Date",l,m),m+=8;const re=c/3,ne=42,se=m;s.setDrawColor(180,180,180),s.rect(l,se,c,ne,"S"),s.line(l+re,se,l+re,se+ne),s.line(l+2*re,se,l+2*re,se+ne),s.line(l,se+10,i-l,se+10),s.setFontSize(9),s.setFont("helvetica","bold"),s.text("Welfare Department",l+5,se+7),s.text("Zonal In-charge",l+re+5,se+7),s.text("Operations Head",l+2*re+5,se+7);const ie=async(t,a)=>{let r=se+14;s.setFont("helvetica","normal"),s.setFontSize(8),s.text("Name:",t+5,r),s.text(h(e["".concat(a,"_name")])||"\u2014",t+18,r),r+=8,s.text("Signature:",t+5,r);const n=e["".concat(a,"_signature_drawing_data")]||e["".concat(a,"_signature_file_path")];if(n){await zc(s,n,t+18,r-4,28,10)||s.text("________________",t+18,r)}else s.text("________________",t+18,r);r+=10,s.text("Date:",t+5,r),s.text(Mc(e["".concat(a,"_date")])||"\u2014",t+18,r)};return await ie(l,"welfare_department"),await ie(l+re,"zonal_incharge"),await ie(l+2*re,"operations_head"),m=se+ne+10,p(12),s.setFontSize(9),s.setFont("helvetica","italic"),s.setTextColor(100,100,100),s.text("Cover letter prepared by ".concat(r||"System"),i/2,m,{align:"center"}),s.setTextColor(0,0,0),s}catch(s){throw console.error("Error in generateCoverLetterPDF:",s),s}},Hc=e=>{var t,a;let{caseId:n,isViewOnly:s=!1,onSuccess:i,onExposeSubmit:o=null}=e;const{user:l}=ar(),c=(0,Ce.useQueryClient)(),{hasPermission:d}=Cr("cover_letter_forms","create"),{hasPermission:u}=Cr("cover_letter_forms","update"),{hasPermission:m}=Cr("cover_letter_forms","submit"),{hasPermission:h}=Cr("cover_letter_forms","read"),[p,f]=(0,r.useState)({applicant_details:{name:"",jamiat:"",jamaat:"",age:"",contact_number:"",case_id:"",its:""},counsellor_details:{name:"",jamiat:"",jamaat:"",age:"",contact_number:"",certified:!1,its:""},current_personal_income:"",current_family_income:"",earning_family_members:"",dependents:"",asset_house:"",asset_shop:"",asset_gold:"",asset_machinery:"",asset_stock:"",liability_qardan:"",liability_den:"",liability_others:"",business_name:"",industry_segment:"",present_occupation:"",requested_enayat:"",requested_qardan:"",requested_total:"",recommended_enayat:"",recommended_qardan:"",recommended_total:"",proposed_upliftment_plan:"",non_financial_assistance:"",applicant_projected_income_after_1_year:"",applicant_projected_income_after_2_years:"",applicant_projected_income_after_3_years:"",applicant_projected_income_after_4_years:"",applicant_projected_income_after_5_years:"",family_projected_income_after_1_year:"",family_projected_income_after_2_years:"",family_projected_income_after_3_years:"",family_projected_income_after_4_years:"",family_projected_income_after_5_years:"",welfare_department_comments:"",approved_enayat:"",approved_qardan:"",approved_qh_months:"",welfare_department_its:"",welfare_department_name:"",welfare_department_signature_type:"draw",welfare_department_signature_file_path:"",welfare_department_signature_drawing_data:"",welfare_department_date:"",zonal_incharge_its:"",zonal_incharge_name:"",zonal_incharge_signature_type:"draw",zonal_incharge_signature_file_path:"",zonal_incharge_signature_drawing_data:"",zonal_incharge_date:"",operations_head_its:"",operations_head_name:"",operations_head_signature_type:"draw",operations_head_signature_file_path:"",operations_head_signature_drawing_data:"",operations_head_date:""}),[x,g]=(0,r.useState)({}),[y,v]=(0,r.useState)(""),[b,_]=(0,r.useState)(null),[j,w]=(0,r.useState)(null),N=e=>new Promise((t,a)=>{const r=new FileReader;r.readAsDataURL(e),r.onload=()=>t(r.result),r.onerror=e=>a(e)}),{data:k,isLoading:S}=(0,Ce.useQuery)(["coverLetterForm",n],()=>Za.get("/api/cover-letter-forms/case/".concat(n)).then(e=>e.data),{enabled:!!n,retry:!1,onSuccess:e=>{if(e.form)("applicant_name"in e.form||"counsellor_name"in e.form)&&(f(t=>Pe(Pe({},t),{},{applicant_details:{name:e.form.applicant_name||"",jamiat:e.form.applicant_jamiat||"",jamaat:e.form.applicant_jamaat||"",age:e.form.applicant_age||"",contact_number:e.form.applicant_contact_number||"",case_id:e.form.applicant_case_id||"",its:e.form.applicant_its||"",photo:e.form.applicant_photo||null},counsellor_details:{name:e.form.counsellor_name||"",jamiat:e.form.counsellor_jamiat||"",jamaat:e.form.counsellor_jamaat||"",age:e.form.counsellor_age||"",contact_number:e.form.counsellor_contact_number||"",its:e.form.counsellor_its||"",certified:e.form.counsellor_certified||!1,photo:e.form.counsellor_photo||null},current_personal_income:null!==e.form.current_personal_income&&void 0!==e.form.current_personal_income?String(e.form.current_personal_income):t.current_personal_income||"",current_family_income:null!==e.form.current_family_income&&void 0!==e.form.current_family_income?String(e.form.current_family_income):t.current_family_income||"",earning_family_members:null!==e.form.earning_family_members&&void 0!==e.form.earning_family_members?String(e.form.earning_family_members):t.earning_family_members||"",dependents:null!==e.form.dependents&&void 0!==e.form.dependents?String(e.form.dependents):t.dependents||"",asset_house:null!==e.form.asset_house&&void 0!==e.form.asset_house?String(e.form.asset_house):t.asset_house||"",asset_shop:null!==e.form.asset_shop&&void 0!==e.form.asset_shop?String(e.form.asset_shop):t.asset_shop||"",asset_gold:null!==e.form.asset_gold&&void 0!==e.form.asset_gold?String(e.form.asset_gold):t.asset_gold||"",asset_machinery:null!==e.form.asset_machinery&&void 0!==e.form.asset_machinery?String(e.form.asset_machinery):t.asset_machinery||"",asset_stock:null!==e.form.asset_stock&&void 0!==e.form.asset_stock?String(e.form.asset_stock):t.asset_stock||"",liability_qardan:null!==e.form.liability_qardan&&void 0!==e.form.liability_qardan?String(e.form.liability_qardan):t.liability_qardan||"",liability_den:null!==e.form.liability_den&&void 0!==e.form.liability_den?String(e.form.liability_den):t.liability_den||"",liability_others:null!==e.form.liability_others&&void 0!==e.form.liability_others?String(e.form.liability_others):t.liability_others||"",business_name:null!==e.form.business_name&&void 0!==e.form.business_name?String(e.form.business_name):t.business_name||"",industry_segment:null!==e.form.industry_segment&&void 0!==e.form.industry_segment?String(e.form.industry_segment):t.industry_segment||"",present_occupation:null!==e.form.present_occupation&&void 0!==e.form.present_occupation?String(e.form.present_occupation):t.present_occupation||"",requested_enayat:null!==e.form.requested_enayat&&void 0!==e.form.requested_enayat?String(e.form.requested_enayat):t.requested_enayat||"",requested_qardan:null!==e.form.requested_qardan&&void 0!==e.form.requested_qardan?String(e.form.requested_qardan):t.requested_qardan||"",requested_total:(()=>{const a=null!==e.form.requested_enayat&&void 0!==e.form.requested_enayat&&parseFloat(e.form.requested_enayat)||0,r=null!==e.form.requested_qardan&&void 0!==e.form.requested_qardan&&parseFloat(e.form.requested_qardan)||0;return a>0||r>0?String(a+r):null!==e.form.requested_total&&void 0!==e.form.requested_total?String(e.form.requested_total):t.requested_total||""})(),recommended_enayat:null!==e.form.recommended_enayat&&void 0!==e.form.recommended_enayat?String(e.form.recommended_enayat):t.recommended_enayat||"",recommended_qardan:null!==e.form.recommended_qardan&&void 0!==e.form.recommended_qardan?String(e.form.recommended_qardan):t.recommended_qardan||"",recommended_total:(()=>{const a=null!==e.form.recommended_enayat&&void 0!==e.form.recommended_enayat&&parseFloat(e.form.recommended_enayat)||0,r=null!==e.form.recommended_qardan&&void 0!==e.form.recommended_qardan&&parseFloat(e.form.recommended_qardan)||0;return a>0||r>0?String(a+r):null!==e.form.recommended_total&&void 0!==e.form.recommended_total?String(e.form.recommended_total):t.recommended_total||""})(),applicant_projected_income_after_1_year:null!==e.form.applicant_projected_income_after_1_year&&void 0!==e.form.applicant_projected_income_after_1_year?String(e.form.applicant_projected_income_after_1_year):t.applicant_projected_income_after_1_year||"",applicant_projected_income_after_2_years:null!==e.form.applicant_projected_income_after_2_years&&void 0!==e.form.applicant_projected_income_after_2_years?String(e.form.applicant_projected_income_after_2_years):t.applicant_projected_income_after_2_years||"",applicant_projected_income_after_3_years:null!==e.form.applicant_projected_income_after_3_years&&void 0!==e.form.applicant_projected_income_after_3_years?String(e.form.applicant_projected_income_after_3_years):t.applicant_projected_income_after_3_years||"",applicant_projected_income_after_4_years:null!==e.form.applicant_projected_income_after_4_years&&void 0!==e.form.applicant_projected_income_after_4_years?String(e.form.applicant_projected_income_after_4_years):t.applicant_projected_income_after_4_years||"",applicant_projected_income_after_5_years:null!==e.form.applicant_projected_income_after_5_years&&void 0!==e.form.applicant_projected_income_after_5_years?String(e.form.applicant_projected_income_after_5_years):t.applicant_projected_income_after_5_years||"",family_projected_income_after_1_year:null!==e.form.family_projected_income_after_1_year&&void 0!==e.form.family_projected_income_after_1_year?String(e.form.family_projected_income_after_1_year):t.family_projected_income_after_1_year||"",family_projected_income_after_2_years:null!==e.form.family_projected_income_after_2_years&&void 0!==e.form.family_projected_income_after_2_years?String(e.form.family_projected_income_after_2_years):t.family_projected_income_after_2_years||"",family_projected_income_after_3_years:null!==e.form.family_projected_income_after_3_years&&void 0!==e.form.family_projected_income_after_3_years?String(e.form.family_projected_income_after_3_years):t.family_projected_income_after_3_years||"",family_projected_income_after_4_years:null!==e.form.family_projected_income_after_4_years&&void 0!==e.form.family_projected_income_after_4_years?String(e.form.family_projected_income_after_4_years):t.family_projected_income_after_4_years||"",family_projected_income_after_5_years:null!==e.form.family_projected_income_after_5_years&&void 0!==e.form.family_projected_income_after_5_years?String(e.form.family_projected_income_after_5_years):t.family_projected_income_after_5_years||"",proposed_upliftment_plan:e.form.proposed_upliftment_plan||"",non_financial_assistance:e.form.non_financial_assistance||"",welfare_department_comments:e.form.welfare_department_comments||"",approved_enayat:null!==e.form.approved_enayat&&void 0!==e.form.approved_enayat?String(e.form.approved_enayat):t.approved_enayat||"",approved_qardan:null!==e.form.approved_qardan&&void 0!==e.form.approved_qardan?String(e.form.approved_qardan):t.approved_qardan||"",approved_qh_months:null!==e.form.approved_qh_months&&void 0!==e.form.approved_qh_months?String(e.form.approved_qh_months):t.approved_qh_months||"",welfare_department_its:e.form.welfare_department_its||t.welfare_department_its||"",welfare_department_name:e.form.welfare_department_name||t.welfare_department_name||"",welfare_department_signature_type:e.form.welfare_department_signature_type||t.welfare_department_signature_type||"draw",welfare_department_signature_file_path:e.form.welfare_department_signature_file_path||t.welfare_department_signature_file_path||"",welfare_department_signature_drawing_data:e.form.welfare_department_signature_drawing_data||t.welfare_department_signature_drawing_data||"",welfare_department_date:e.form.welfare_department_date&&null!==e.form.welfare_department_date?String(e.form.welfare_department_date):t.welfare_department_date||"",zonal_incharge_its:e.form.zonal_incharge_its||t.zonal_incharge_its||"",zonal_incharge_name:e.form.zonal_incharge_name||t.zonal_incharge_name||"",zonal_incharge_signature_type:e.form.zonal_incharge_signature_type||t.zonal_incharge_signature_type||"draw",zonal_incharge_signature_file_path:e.form.zonal_incharge_signature_file_path||t.zonal_incharge_signature_file_path||"",zonal_incharge_signature_drawing_data:e.form.zonal_incharge_signature_drawing_data||t.zonal_incharge_signature_drawing_data||"",zonal_incharge_date:e.form.zonal_incharge_date&&null!==e.form.zonal_incharge_date?String(e.form.zonal_incharge_date):t.zonal_incharge_date||"",operations_head_its:e.form.operations_head_its||t.operations_head_its||"",operations_head_name:e.form.operations_head_name||t.operations_head_name||"",operations_head_signature_type:e.form.operations_head_signature_type||t.operations_head_signature_type||"draw",operations_head_signature_file_path:e.form.operations_head_signature_file_path||t.operations_head_signature_file_path||"",operations_head_signature_drawing_data:e.form.operations_head_signature_drawing_data||t.operations_head_signature_drawing_data||"",operations_head_date:e.form.operations_head_date&&null!==e.form.operations_head_date?String(e.form.operations_head_date):t.operations_head_date||""})),e.form.applicant_photo&&_(e.form.applicant_photo),e.form.counsellor_photo&&w(e.form.counsellor_photo));else if(e.applicantData||e.counselorData||e.familyFinancialData||e.familyAssetsLiabilitiesData||e.personalOccupationData||e.financialAssistanceTotals){var t,a;f(t=>{var a,r,n,s,i,o,l,c,d,u,m,h,p,f,x,g,y,v,b,_,j,w,N,k,S,C,A,L,P,E,F,O,I,R,D,M,T,q,z,B,U,H,W,V,Q,J,Y,G,K,$,X,Z,ee,te;return Pe(Pe({},t),{},{applicant_details:Pe(Pe({},t.applicant_details),{},{name:(null===(a=e.applicantData)||void 0===a?void 0:a.name)||t.applicant_details.name,jamiat:(null===(r=e.applicantData)||void 0===r?void 0:r.jamiat)||t.applicant_details.jamiat,jamaat:(null===(n=e.applicantData)||void 0===n?void 0:n.jamaat)||t.applicant_details.jamaat,age:(null===(s=e.applicantData)||void 0===s?void 0:s.age)||t.applicant_details.age,contact_number:(null===(i=e.applicantData)||void 0===i?void 0:i.contact_number)||t.applicant_details.contact_number,its:(null===(o=e.applicantData)||void 0===o?void 0:o.its)||t.applicant_details.its,case_id:(null===(l=e.applicantData)||void 0===l?void 0:l.case_id)||t.applicant_details.case_id,photo:(null===(c=e.applicantData)||void 0===c?void 0:c.photo)||t.applicant_details.photo}),counsellor_details:Pe(Pe({},t.counsellor_details),{},{name:(null===(d=e.counselorData)||void 0===d?void 0:d.name)||t.counsellor_details.name,jamiat:(null===(u=e.counselorData)||void 0===u?void 0:u.jamiat)||t.counsellor_details.jamiat,jamaat:(null===(m=e.counselorData)||void 0===m?void 0:m.jamaat)||t.counsellor_details.jamaat,contact_number:(null===(h=e.counselorData)||void 0===h?void 0:h.contact_number)||t.counsellor_details.contact_number,its:(null===(p=e.counselorData)||void 0===p?void 0:p.its)||t.counsellor_details.its,photo:(null===(f=e.counselorData)||void 0===f?void 0:f.photo)||t.counsellor_details.photo}),current_personal_income:null!==(null===(x=e.familyFinancialData)||void 0===x?void 0:x.current_personal_income)&&void 0!==(null===(g=e.familyFinancialData)||void 0===g?void 0:g.current_personal_income)?String(e.familyFinancialData.current_personal_income):t.current_personal_income,current_family_income:null!==(null===(y=e.familyFinancialData)||void 0===y?void 0:y.current_family_income)&&void 0!==(null===(v=e.familyFinancialData)||void 0===v?void 0:v.current_family_income)?String(e.familyFinancialData.current_family_income):t.current_family_income,earning_family_members:null!==(null===(b=e.familyFinancialData)||void 0===b?void 0:b.earning_family_members)&&void 0!==(null===(_=e.familyFinancialData)||void 0===_?void 0:_.earning_family_members)?String(e.familyFinancialData.earning_family_members):t.earning_family_members,dependents:null!==(null===(j=e.familyFinancialData)||void 0===j?void 0:j.dependents)&&void 0!==(null===(w=e.familyFinancialData)||void 0===w?void 0:w.dependents)?String(e.familyFinancialData.dependents):t.dependents,asset_house:null!==(null===(N=e.familyAssetsLiabilitiesData)||void 0===N?void 0:N.asset_house)&&void 0!==(null===(k=e.familyAssetsLiabilitiesData)||void 0===k?void 0:k.asset_house)?String(e.familyAssetsLiabilitiesData.asset_house):t.asset_house,asset_shop:null!==(null===(S=e.familyAssetsLiabilitiesData)||void 0===S?void 0:S.asset_shop)&&void 0!==(null===(C=e.familyAssetsLiabilitiesData)||void 0===C?void 0:C.asset_shop)?String(e.familyAssetsLiabilitiesData.asset_shop):t.asset_shop,asset_gold:null!==(null===(A=e.familyAssetsLiabilitiesData)||void 0===A?void 0:A.asset_gold)&&void 0!==(null===(L=e.familyAssetsLiabilitiesData)||void 0===L?void 0:L.asset_gold)?String(e.familyAssetsLiabilitiesData.asset_gold):t.asset_gold,asset_machinery:null!==(null===(P=e.familyAssetsLiabilitiesData)||void 0===P?void 0:P.asset_machinery)&&void 0!==(null===(E=e.familyAssetsLiabilitiesData)||void 0===E?void 0:E.asset_machinery)?String(e.familyAssetsLiabilitiesData.asset_machinery):t.asset_machinery,asset_stock:null!==(null===(F=e.familyAssetsLiabilitiesData)||void 0===F?void 0:F.asset_stock)&&void 0!==(null===(O=e.familyAssetsLiabilitiesData)||void 0===O?void 0:O.asset_stock)?String(e.familyAssetsLiabilitiesData.asset_stock):t.asset_stock,liability_qardan:null!==(null===(I=e.familyAssetsLiabilitiesData)||void 0===I?void 0:I.liability_qardan)&&void 0!==(null===(R=e.familyAssetsLiabilitiesData)||void 0===R?void 0:R.liability_qardan)?String(e.familyAssetsLiabilitiesData.liability_qardan):t.liability_qardan,liability_den:null!==(null===(D=e.familyAssetsLiabilitiesData)||void 0===D?void 0:D.liability_den)&&void 0!==(null===(M=e.familyAssetsLiabilitiesData)||void 0===M?void 0:M.liability_den)?String(e.familyAssetsLiabilitiesData.liability_den):t.liability_den,liability_others:null!==(null===(T=e.familyAssetsLiabilitiesData)||void 0===T?void 0:T.liability_others)&&void 0!==(null===(q=e.familyAssetsLiabilitiesData)||void 0===q?void 0:q.liability_others)?String(e.familyAssetsLiabilitiesData.liability_others):t.liability_others,present_occupation:null!==e.personalOccupationData&&void 0!==e.personalOccupationData?String(e.personalOccupationData):t.present_occupation,requested_enayat:null!==(null===(z=e.financialAssistanceTotals)||void 0===z?void 0:z.total_enayat)&&void 0!==(null===(B=e.financialAssistanceTotals)||void 0===B?void 0:B.total_enayat)?String(e.financialAssistanceTotals.total_enayat):t.requested_enayat,requested_qardan:null!==(null===(U=e.financialAssistanceTotals)||void 0===U?void 0:U.total_qardan)&&void 0!==(null===(H=e.financialAssistanceTotals)||void 0===H?void 0:H.total_qardan)?String(e.financialAssistanceTotals.total_qardan):t.requested_qardan,requested_total:null!==(null===(W=e.financialAssistanceTotals)||void 0===W?void 0:W.total_enayat)&&null!==(null===(V=e.financialAssistanceTotals)||void 0===V?void 0:V.total_qardan)?String((parseFloat(e.financialAssistanceTotals.total_enayat)||0)+(parseFloat(e.financialAssistanceTotals.total_qardan)||0)):t.requested_total,applicant_projected_income_after_1_year:null!==(null===(Q=e.economicGrowthProfit)||void 0===Q?void 0:Q.profit_year1)&&void 0!==(null===(J=e.economicGrowthProfit)||void 0===J?void 0:J.profit_year1)?String(e.economicGrowthProfit.profit_year1):t.applicant_projected_income_after_1_year,applicant_projected_income_after_2_years:null!==(null===(Y=e.economicGrowthProfit)||void 0===Y?void 0:Y.profit_year2)&&void 0!==(null===(G=e.economicGrowthProfit)||void 0===G?void 0:G.profit_year2)?String(e.economicGrowthProfit.profit_year2):t.applicant_projected_income_after_2_years,applicant_projected_income_after_3_years:null!==(null===(K=e.economicGrowthProfit)||void 0===K?void 0:K.profit_year3)&&void 0!==(null===($=e.economicGrowthProfit)||void 0===$?void 0:$.profit_year3)?String(e.economicGrowthProfit.profit_year3):t.applicant_projected_income_after_3_years,applicant_projected_income_after_4_years:null!==(null===(X=e.economicGrowthProfit)||void 0===X?void 0:X.profit_year4)&&void 0!==(null===(Z=e.economicGrowthProfit)||void 0===Z?void 0:Z.profit_year4)?String(e.economicGrowthProfit.profit_year4):t.applicant_projected_income_after_4_years,applicant_projected_income_after_5_years:null!==(null===(ee=e.economicGrowthProfit)||void 0===ee?void 0:ee.profit_year5)&&void 0!==(null===(te=e.economicGrowthProfit)||void 0===te?void 0:te.profit_year5)?String(e.economicGrowthProfit.profit_year5):t.applicant_projected_income_after_5_years})}),null!==(t=e.applicantData)&&void 0!==t&&t.photo&&_(e.applicantData.photo),null!==(a=e.counselorData)&&void 0!==a&&a.photo&&w(e.counselorData.photo)}}}),{data:C}=(0,Ce.useQuery)(["case",n],()=>Za.get("/api/cases/".concat(n)).then(e=>e.data),{enabled:!!n&&!(null!==k&&void 0!==k&&k.form)&&!(null!==k&&void 0!==k&&k.applicantData),retry:!1,onSuccess:e=>{!e.case||null!==k&&void 0!==k&&k.form||null!==k&&void 0!==k&&k.applicantData||(f(t=>Pe(Pe({},t),{},{applicant_details:Pe(Pe({},t.applicant_details),{},{name:e.case.applicant_full_name||e.case.full_name||t.applicant_details.name,age:e.case.age||t.applicant_details.age,contact_number:e.case.phone||t.applicant_details.contact_number,case_id:e.case.case_number||t.applicant_details.case_id,its:e.case.its_number||t.applicant_details.its,photo:e.case.photo||t.applicant_details.photo}),counsellor_details:Pe(Pe({},t.counsellor_details),{},{name:e.case.counselor_full_name||t.counsellor_details.name,contact_number:e.case.counselor_phone||e.case.counselor_email||t.counsellor_details.contact_number,photo:e.case.counselor_photo||t.counsellor_details.photo})})),e.case.photo&&_(e.case.photo),e.case.counselor_photo&&w(e.case.counselor_photo))}}),A=(0,Ce.useMutation)(async e=>Za.post("/api/cover-letter-forms/case/".concat(n),e),{onSuccess:()=>{c.invalidateQueries(["coverLetterForm",n]),v("Cover letter form saved successfully!"),setTimeout(()=>v(""),5e3),i&&i()},onError:e=>{var t,a;g({submit:(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to save form"})}}),L=(0,Ce.useMutation)(async e=>Za.put("/api/cover-letter-forms/".concat(e,"/submit")),{onSuccess:async()=>{var e,t;c.invalidateQueries(["coverLetterForm",n]),c.invalidateQueries(["cases"]),v("Cover letter form submitted successfully!"),setTimeout(()=>v(""),5e3);let a="";null!==k&&void 0!==k&&k.case_number?a=k.case_number:null!==C&&void 0!==C&&null!==(e=C.case)&&void 0!==e&&e.case_number?a=C.case.case_number:null!==(t=p.applicant_details)&&void 0!==t&&t.case_id&&(a=p.applicant_details.case_id);const r=(null===l||void 0===l?void 0:l.full_name)||(null===l||void 0===l?void 0:l.username)||(null===l||void 0===l?void 0:l.name)||"System";try{const e=(await Uc(p,{caseNumber:a,userName:r,caseId:n})).output("blob");if(!e||0===e.size)throw new Error("PDF blob is empty");const t=URL.createObjectURL(e),s=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5),i="cover_letter_".concat(a||n||"unknown","_").concat(s,".pdf"),o=document.createElement("a");o.href=t,o.download=i,document.body.appendChild(o),o.click(),document.body.removeChild(o);window.open(t,"_blank")||g(e=>Pe(Pe({},e),{},{pdf:"PDF generated but popup was blocked. Please check your browser settings."})),setTimeout(()=>{URL.revokeObjectURL(t)},100)}catch(s){console.error("Error generating PDF:",s),g(e=>Pe(Pe({},e),{},{pdf:"PDF generation failed: ".concat(s.message,". Form was submitted successfully.")})),v("Form submitted successfully, but PDF generation failed: ".concat(s.message))}i&&i()},onError:e=>{var t,a;g({submit:(null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||e.message||"Failed to submit form"})}}),P=(e,t)=>{f(a=>{const r=e.split("."),n=Pe({},a);let s=n;for(let e=0;e<r.length-1;e++)s[r[e]]||(s[r[e]]={}),s=s[r[e]];if(s[r[r.length-1]]=t,"requested_enayat"===e||"requested_qardan"===e){const a=parseFloat("requested_enayat"===e?t:n.requested_enayat)||0,r=parseFloat("requested_qardan"===e?t:n.requested_qardan)||0;n.requested_total=String(a+r)}if("recommended_enayat"===e||"recommended_qardan"===e){const a=parseFloat("recommended_enayat"===e?t:n.recommended_enayat)||0,r=parseFloat("recommended_qardan"===e?t:n.recommended_qardan)||0;n.recommended_total=String(a+r)}return n}),x[e]&&g(t=>{const a=Pe({},t);return delete a[e],a})},E=async(e,t)=>{if(P("".concat(t,"_its"),e),!e||""===e.trim())return void P("".concat(t,"_name"),"");const a=e.trim();if(/^\d{8}$/.test(a))try{const e=await Za.get("/api/applicants/fetch-from-api/".concat(a));if(e.data&&e.data.data){const a=e.data.data.full_name||e.data.data.name||"";a&&P("".concat(t,"_name"),a)}}catch(r){console.error("Error fetching name for ITS ".concat(a,":"),r)}},F=async(e,t)=>{var a;const r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!r)return;if(!r.type.startsWith("image/"))return void g({["".concat(t,"_signature")]:"Please select an image file"});if(r.size>5242880)g({["".concat(t,"_signature")]:"Image size must be less than 5MB"});else try{const e=await N(r);P("".concat(t,"_signature_type"),"upload"),P("".concat(t,"_signature_file_path"),e),P("".concat(t,"_signature_drawing_data"),""),x["".concat(t,"_signature")]&&g(e=>{const a=Pe({},e);return delete a["".concat(t,"_signature")],a})}catch(n){g({["".concat(t,"_signature")]:"Failed to process image"})}},O=()=>{var e;null!==k&&void 0!==k&&null!==(e=k.form)&&void 0!==e&&e.id?(g({}),L.mutate(k.form.id)):g({submit:"Please save the form before submitting"})},I=(null===k||void 0===k||null===(t=k.form)||void 0===t?void 0:t.is_approved)||!1,R="super_admin"===(null===l||void 0===l?void 0:l.role),D="admin"===(null===l||void 0===l?void 0:l.role),M=m||"admin"===(null===l||void 0===l?void 0:l.role)||R;if((0,r.useEffect)(()=>{var e;o&&o({submit:O,canSubmit:M&&(null===k||void 0===k||null===(e=k.form)||void 0===e?void 0:e.id),isSubmitting:L.isLoading})},[O,M,null===k||void 0===k||null===(a=k.form)||void 0===a?void 0:a.id,L.isLoading,o]),S)return(0,er.jsx)(zr,{children:(0,er.jsx)(zr.Content,{children:(0,er.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})})});const T=null===k||void 0===k?void 0:k.form,q=!s&&(T?R||D||u:R||D||d)&&(!I||R);return(0,er.jsxs)(er.Fragment,{children:[y&&(0,er.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:(0,er.jsx)(Wr,{severity:"success",onClose:()=>v(""),autoClose:!0,duration:5e3,children:y})}),I&&(0,er.jsx)(Ur,{severity:R?"info":"warning",className:"mb-4",children:R?"This cover letter has been approved. You have super admin privileges to edit.":"This cover letter has been approved and cannot be edited."}),(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Applicant Details"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,{label:"Name",value:p.applicant_details.name,onChange:e=>P("applicant_details.name",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Jamiat",value:p.applicant_details.jamiat,onChange:e=>P("applicant_details.jamiat",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Jamaat",value:p.applicant_details.jamaat,onChange:e=>P("applicant_details.jamaat",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Age",type:"number",value:p.applicant_details.age,onChange:e=>P("applicant_details.age",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Contact Number",value:p.applicant_details.contact_number,onChange:e=>P("applicant_details.contact_number",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Case Id",value:p.applicant_details.case_id,onChange:e=>P("applicant_details.case_id",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"ITS",value:p.applicant_details.its,onChange:e=>P("applicant_details.its",e.target.value),disabled:!0,className:"bg-gray-50"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Applicant Photo"}),(0,er.jsxs)("div",{className:"flex items-start space-x-4",children:[b&&(0,er.jsxs)("div",{className:"relative",children:[(0,er.jsx)("img",{src:b,alt:"Applicant",className:"w-32 h-32 object-cover rounded-lg border border-gray-300"}),q&&(0,er.jsx)("button",{type:"button",onClick:()=>{P("applicant_details.photo",null),_(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"\xd7"})]}),q&&(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;if(!a.type.startsWith("image/"))return void g({applicant_photo:"Please select an image file"});if(a.size>5242880)g({applicant_photo:"Image size must be less than 5MB"});else try{const e=await N(a);P("applicant_details.photo",e),_(e),x.applicant_photo&&g(e=>{const t=Pe({},e);return delete t.applicant_photo,t})}catch(r){g({applicant_photo:"Failed to process image"})}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),x.applicant_photo&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.applicant_photo}),(0,er.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Max file size: 5MB"})]})]})]})]})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Counsellor Details"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,{label:"Name",value:p.counsellor_details.name,onChange:e=>P("counsellor_details.name",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Jamiat",value:p.counsellor_details.jamiat,onChange:e=>P("counsellor_details.jamiat",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Jamaat",value:p.counsellor_details.jamaat,onChange:e=>P("counsellor_details.jamaat",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Age",type:"number",value:p.counsellor_details.age,onChange:e=>P("counsellor_details.age",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Contact Number",value:p.counsellor_details.contact_number,onChange:e=>P("counsellor_details.contact_number",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"ITS",value:p.counsellor_details.its,onChange:e=>P("counsellor_details.its",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)("input",{type:"checkbox",id:"certified",checked:p.counsellor_details.certified,onChange:e=>P("counsellor_details.certified",e.target.checked),disabled:!q,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),(0,er.jsx)("label",{htmlFor:"certified",className:"text-sm font-medium text-gray-700",children:"Certified"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Counsellor Photo"}),(0,er.jsxs)("div",{className:"flex items-start space-x-4",children:[j&&(0,er.jsxs)("div",{className:"relative",children:[(0,er.jsx)("img",{src:j,alt:"Counsellor",className:"w-32 h-32 object-cover rounded-lg border border-gray-300"}),q&&(0,er.jsx)("button",{type:"button",onClick:()=>{P("counsellor_details.photo",null),w(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs hover:bg-red-600",children:"\xd7"})]}),q&&(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;if(!a.type.startsWith("image/"))return void g({counsellor_photo:"Please select an image file"});if(a.size>5242880)g({counsellor_photo:"Image size must be less than 5MB"});else try{const e=await N(a);P("counsellor_details.photo",e),w(e),x.counsellor_photo&&g(e=>{const t=Pe({},e);return delete t.counsellor_photo,t})}catch(r){g({counsellor_photo:"Failed to process image"})}},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),x.counsellor_photo&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.counsellor_photo}),(0,er.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Max file size: 5MB"})]})]})]})]})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial and Business Overview"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,{label:"Current Personal Income (Rs)",type:"number",value:p.current_personal_income,onChange:e=>P("current_personal_income",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Current Family Income (Rs)",type:"number",value:p.current_family_income,onChange:e=>P("current_family_income",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Earning Family Members",type:"number",value:p.earning_family_members,onChange:e=>P("earning_family_members",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Dependents",type:"number",value:p.dependents,onChange:e=>P("dependents",e.target.value),disabled:!0,className:"bg-gray-50"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assets"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,er.jsx)(Ir,{label:"House",type:"text",value:p.asset_house,onChange:e=>P("asset_house",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Shop",type:"text",value:p.asset_shop,onChange:e=>P("asset_shop",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Gold",type:"text",value:p.asset_gold,onChange:e=>P("asset_gold",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Machinery",type:"text",value:p.asset_machinery,onChange:e=>P("asset_machinery",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Stock",type:"text",value:p.asset_stock,onChange:e=>P("asset_stock",e.target.value),disabled:!0,className:"bg-gray-50"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Liabilities"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,er.jsx)(Ir,{label:"Qardan (Rs)",type:"number",value:p.liability_qardan,onChange:e=>P("liability_qardan",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Den (Rs)",type:"number",value:p.liability_den,onChange:e=>P("liability_den",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsx)(Ir,{label:"Others (Rs)",type:"number",value:p.liability_others,onChange:e=>P("liability_others",e.target.value),disabled:!0,className:"bg-gray-50"})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,{label:"Business Name & Year of Starting",value:p.business_name,onChange:e=>P("business_name",e.target.value),disabled:!q,placeholder:"Business name and year"}),(0,er.jsx)(Ir,{label:"Industry / Segment",value:p.industry_segment,onChange:e=>P("industry_segment",e.target.value),disabled:!q})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Present Occupation / Business"}),(0,er.jsx)("textarea",{value:p.present_occupation,onChange:e=>P("present_occupation",e.target.value),disabled:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent bg-gray-50 cursor-not-allowed",placeholder:"Products / Services, revenue, etc."})]})]})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Summary of Proposed Upliftment Plan"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("textarea",{value:p.proposed_upliftment_plan,onChange:e=>P("proposed_upliftment_plan",e.target.value),disabled:!q,rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter the proposed upliftment plan..."})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Assistance"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left"}),(0,er.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Enayat Amount"}),(0,er.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Qardan Amount"}),(0,er.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"Total Amount"})]})}),(0,er.jsxs)("tbody",{children:[(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:"Requested"}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.requested_enayat,onChange:e=>P("requested_enayat",e.target.value),disabled:!0,className:"border-0 p-0 bg-gray-50"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.requested_qardan,onChange:e=>P("requested_qardan",e.target.value),disabled:!0,className:"border-0 p-0 bg-gray-50"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.requested_total,onChange:()=>{},disabled:!0,className:"border-0 p-0 bg-gray-50",readOnly:!0})})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:"Recommended"}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.recommended_enayat,onChange:e=>P("recommended_enayat",e.target.value),disabled:!q,className:"border-0 p-0"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.recommended_qardan,onChange:e=>P("recommended_qardan",e.target.value),disabled:!q,className:"border-0 p-0"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.recommended_total,onChange:()=>{},disabled:!0,className:"border-0 p-0 bg-gray-50",readOnly:!0})})]})]})]})})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Non-financial Assistance"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("textarea",{value:p.non_financial_assistance,onChange:e=>P("non_financial_assistance",e.target.value),disabled:!q,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter non-financial assistance details..."})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Projected Income"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left"}),(0,er.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"After 1 year"}),(0,er.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"After 2 years"}),(0,er.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"After 3 years"}),(0,er.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"After 4 years"}),(0,er.jsx)("th",{className:"border border-gray-300 px-4 py-2 text-left",children:"After 5 years"})]})}),(0,er.jsxs)("tbody",{children:[(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:"Applicant"}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.applicant_projected_income_after_1_year,onChange:e=>P("applicant_projected_income_after_1_year",e.target.value),disabled:!0,className:"border-0 p-0 bg-gray-50"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.applicant_projected_income_after_2_years,onChange:e=>P("applicant_projected_income_after_2_years",e.target.value),disabled:!0,className:"border-0 p-0 bg-gray-50"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.applicant_projected_income_after_3_years,onChange:e=>P("applicant_projected_income_after_3_years",e.target.value),disabled:!0,className:"border-0 p-0 bg-gray-50"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.applicant_projected_income_after_4_years,onChange:e=>P("applicant_projected_income_after_4_years",e.target.value),disabled:!0,className:"border-0 p-0 bg-gray-50"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.applicant_projected_income_after_5_years,onChange:e=>P("applicant_projected_income_after_5_years",e.target.value),disabled:!0,className:"border-0 p-0 bg-gray-50"})})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2 font-medium",children:"Family"}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.family_projected_income_after_1_year,onChange:e=>P("family_projected_income_after_1_year",e.target.value),disabled:!q,className:"border-0 p-0"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.family_projected_income_after_2_years,onChange:e=>P("family_projected_income_after_2_years",e.target.value),disabled:!q,className:"border-0 p-0"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.family_projected_income_after_3_years,onChange:e=>P("family_projected_income_after_3_years",e.target.value),disabled:!q,className:"border-0 p-0"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.family_projected_income_after_4_years,onChange:e=>P("family_projected_income_after_4_years",e.target.value),disabled:!q,className:"border-0 p-0"})}),(0,er.jsx)("td",{className:"border border-gray-300 px-4 py-2",children:(0,er.jsx)(Ir,{type:"number",value:p.family_projected_income_after_5_years,onChange:e=>P("family_projected_income_after_5_years",e.target.value),disabled:!q,className:"border-0 p-0"})})]})]})]})})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Welfare Department Comments"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("textarea",{value:p.welfare_department_comments,onChange:e=>P("welfare_department_comments",e.target.value),disabled:!q,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter comments..."})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 text-red-600",children:"Executive Approval"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approved Amounts"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,er.jsx)(Ir,{label:"Enayat",type:"number",value:p.approved_enayat,onChange:e=>P("approved_enayat",e.target.value),disabled:!q}),(0,er.jsx)(Ir,{label:"Qardan",type:"number",value:p.approved_qardan,onChange:e=>P("approved_qardan",e.target.value),disabled:!q}),(0,er.jsx)(Ir,{label:"QH Months",type:"number",value:p.approved_qh_months,onChange:e=>P("approved_qh_months",e.target.value),disabled:!q})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Welfare Department"}),(0,er.jsx)(Ir,{label:"ITS",value:p.welfare_department_its,onChange:e=>E(e.target.value,"welfare_department"),onBlur:e=>{const t=e.target.value.trim();t&&/^\d{8}$/.test(t)&&E(t,"welfare_department")},disabled:!q,className:"mb-2"}),(0,er.jsx)(Ir,{label:"Name",value:p.welfare_department_name,onChange:e=>P("welfare_department_name",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsxs)("div",{className:"mt-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Signature"}),(0,er.jsx)("div",{className:"mb-2",children:(0,er.jsxs)("div",{className:"flex gap-4",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",{type:"radio",name:"welfare_department_signature_type",value:"draw",checked:"draw"===p.welfare_department_signature_type,onChange:e=>{P("welfare_department_signature_type","draw"),P("welfare_department_signature_file_path","")},disabled:!q,className:"mr-2"}),(0,er.jsx)("span",{className:"text-sm",children:"Draw Signature"})]}),(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",{type:"radio",name:"welfare_department_signature_type",value:"upload",checked:"upload"===p.welfare_department_signature_type,onChange:e=>{P("welfare_department_signature_type","upload"),P("welfare_department_signature_drawing_data","")},disabled:!q,className:"mr-2"}),(0,er.jsx)("span",{className:"text-sm",children:"Upload Signature"})]})]})}),"draw"===p.welfare_department_signature_type?(0,er.jsx)(vi,{value:p.welfare_department_signature_drawing_data,onChange:e=>P("welfare_department_signature_drawing_data",e),error:x.welfare_department_signature}):(0,er.jsxs)("div",{children:[(0,er.jsx)("input",{type:"file",accept:"image/*",onChange:e=>F(e,"welfare_department"),disabled:!q,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),p.welfare_department_signature_file_path&&(0,er.jsxs)("div",{className:"mt-2",children:[(0,er.jsx)("img",{src:p.welfare_department_signature_file_path,alt:"Uploaded signature",className:"max-w-full h-24 border border-gray-300 rounded"}),(0,er.jsx)("button",{type:"button",onClick:()=>{P("welfare_department_signature_file_path","")},disabled:!q,className:"mt-1 text-sm text-red-600 hover:text-red-800",children:"Remove"})]})]})]}),(0,er.jsx)(Ir,{label:"Date",type:"date",value:p.welfare_department_date,onChange:e=>P("welfare_department_date",e.target.value),disabled:!q,className:"mt-2"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zonal In-charge"}),(0,er.jsx)(Ir,{label:"ITS",value:p.zonal_incharge_its,onChange:e=>E(e.target.value,"zonal_incharge"),onBlur:e=>{const t=e.target.value.trim();t&&/^\d{8}$/.test(t)&&E(t,"zonal_incharge")},disabled:!q,className:"mb-2"}),(0,er.jsx)(Ir,{label:"Name",value:p.zonal_incharge_name,onChange:e=>P("zonal_incharge_name",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsxs)("div",{className:"mt-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Signature"}),(0,er.jsx)("div",{className:"mb-2",children:(0,er.jsxs)("div",{className:"flex gap-4",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",{type:"radio",name:"zonal_incharge_signature_type",value:"draw",checked:"draw"===p.zonal_incharge_signature_type,onChange:e=>{P("zonal_incharge_signature_type","draw"),P("zonal_incharge_signature_file_path","")},disabled:!q,className:"mr-2"}),(0,er.jsx)("span",{className:"text-sm",children:"Draw Signature"})]}),(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",{type:"radio",name:"zonal_incharge_signature_type",value:"upload",checked:"upload"===p.zonal_incharge_signature_type,onChange:e=>{P("zonal_incharge_signature_type","upload"),P("zonal_incharge_signature_drawing_data","")},disabled:!q,className:"mr-2"}),(0,er.jsx)("span",{className:"text-sm",children:"Upload Signature"})]})]})}),"draw"===p.zonal_incharge_signature_type?(0,er.jsx)(vi,{value:p.zonal_incharge_signature_drawing_data,onChange:e=>P("zonal_incharge_signature_drawing_data",e),error:x.zonal_incharge_signature}):(0,er.jsxs)("div",{children:[(0,er.jsx)("input",{type:"file",accept:"image/*",onChange:e=>F(e,"zonal_incharge"),disabled:!q,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),p.zonal_incharge_signature_file_path&&(0,er.jsxs)("div",{className:"mt-2",children:[(0,er.jsx)("img",{src:p.zonal_incharge_signature_file_path,alt:"Uploaded signature",className:"max-w-full h-24 border border-gray-300 rounded"}),(0,er.jsx)("button",{type:"button",onClick:()=>{P("zonal_incharge_signature_file_path","")},disabled:!q,className:"mt-1 text-sm text-red-600 hover:text-red-800",children:"Remove"})]})]})]}),(0,er.jsx)(Ir,{label:"Date",type:"date",value:p.zonal_incharge_date,onChange:e=>P("zonal_incharge_date",e.target.value),disabled:!q,className:"mt-2"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operations Head"}),(0,er.jsx)(Ir,{label:"ITS",value:p.operations_head_its,onChange:e=>E(e.target.value,"operations_head"),onBlur:e=>{const t=e.target.value.trim();t&&/^\d{8}$/.test(t)&&E(t,"operations_head")},disabled:!q,className:"mb-2"}),(0,er.jsx)(Ir,{label:"Name",value:p.operations_head_name,onChange:e=>P("operations_head_name",e.target.value),disabled:!0,className:"bg-gray-50"}),(0,er.jsxs)("div",{className:"mt-2",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Signature"}),(0,er.jsx)("div",{className:"mb-2",children:(0,er.jsxs)("div",{className:"flex gap-4",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",{type:"radio",name:"operations_head_signature_type",value:"draw",checked:"draw"===p.operations_head_signature_type,onChange:e=>{P("operations_head_signature_type","draw"),P("operations_head_signature_file_path","")},disabled:!q,className:"mr-2"}),(0,er.jsx)("span",{className:"text-sm",children:"Draw Signature"})]}),(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",{type:"radio",name:"operations_head_signature_type",value:"upload",checked:"upload"===p.operations_head_signature_type,onChange:e=>{P("operations_head_signature_type","upload"),P("operations_head_signature_drawing_data","")},disabled:!q,className:"mr-2"}),(0,er.jsx)("span",{className:"text-sm",children:"Upload Signature"})]})]})}),"draw"===p.operations_head_signature_type?(0,er.jsx)(vi,{value:p.operations_head_signature_drawing_data,onChange:e=>P("operations_head_signature_drawing_data",e),error:x.operations_head_signature}):(0,er.jsxs)("div",{children:[(0,er.jsx)("input",{type:"file",accept:"image/*",onChange:e=>F(e,"operations_head"),disabled:!q,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary-50 file:text-primary-700 hover:file:bg-primary-100"}),p.operations_head_signature_file_path&&(0,er.jsxs)("div",{className:"mt-2",children:[(0,er.jsx)("img",{src:p.operations_head_signature_file_path,alt:"Uploaded signature",className:"max-w-full h-24 border border-gray-300 rounded"}),(0,er.jsx)("button",{type:"button",onClick:()=>{P("operations_head_signature_file_path","")},disabled:!q,className:"mt-1 text-sm text-red-600 hover:text-red-800",children:"Remove"})]})]})]}),(0,er.jsx)(Ir,{label:"Date",type:"date",value:p.operations_head_date,onChange:e=>P("operations_head_date",e.target.value),disabled:!q,className:"mt-2"})]})]})]})})]}),x.submit&&(0,er.jsx)(Ur,{severity:"error",children:x.submit}),q&&(0,er.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{g({});const e={applicant_name:p.applicant_details.name||null,applicant_jamiat:p.applicant_details.jamiat||null,applicant_jamaat:p.applicant_details.jamaat||null,applicant_age:p.applicant_details.age||null,applicant_contact_number:p.applicant_details.contact_number||null,applicant_case_id:p.applicant_details.case_id||null,applicant_its:p.applicant_details.its||null,applicant_photo:p.applicant_details.photo||null,counsellor_name:p.counsellor_details.name||null,counsellor_jamiat:p.counsellor_details.jamiat||null,counsellor_jamaat:p.counsellor_details.jamaat||null,counsellor_age:p.counsellor_details.age||null,counsellor_contact_number:p.counsellor_details.contact_number||null,counsellor_its:p.counsellor_details.its||null,counsellor_certified:p.counsellor_details.certified||!1,counsellor_photo:p.counsellor_details.photo||null,current_personal_income:p.current_personal_income||null,current_family_income:p.current_family_income||null,earning_family_members:p.earning_family_members||null,dependents:p.dependents||null,asset_house:p.asset_house||null,asset_shop:p.asset_shop||null,asset_gold:p.asset_gold||null,asset_machinery:p.asset_machinery||null,asset_stock:p.asset_stock||null,liability_qardan:p.liability_qardan||null,liability_den:p.liability_den||null,liability_others:p.liability_others||null,business_name:p.business_name||null,industry_segment:p.industry_segment||null,present_occupation:p.present_occupation||null,requested_enayat:p.requested_enayat||null,requested_qardan:p.requested_qardan||null,recommended_enayat:p.recommended_enayat||null,recommended_qardan:p.recommended_qardan||null,applicant_projected_income_after_1_year:p.applicant_projected_income_after_1_year||null,applicant_projected_income_after_2_years:p.applicant_projected_income_after_2_years||null,applicant_projected_income_after_3_years:p.applicant_projected_income_after_3_years||null,applicant_projected_income_after_4_years:p.applicant_projected_income_after_4_years||null,applicant_projected_income_after_5_years:p.applicant_projected_income_after_5_years||null,family_projected_income_after_1_year:p.family_projected_income_after_1_year||null,family_projected_income_after_2_years:p.family_projected_income_after_2_years||null,family_projected_income_after_3_years:p.family_projected_income_after_3_years||null,family_projected_income_after_4_years:p.family_projected_income_after_4_years||null,family_projected_income_after_5_years:p.family_projected_income_after_5_years||null,proposed_upliftment_plan:p.proposed_upliftment_plan,non_financial_assistance:p.non_financial_assistance,welfare_department_comments:p.welfare_department_comments,approved_enayat:p.approved_enayat||null,approved_qardan:p.approved_qardan||null,approved_qh_months:p.approved_qh_months||null,welfare_department_its:p.welfare_department_its||null,welfare_department_name:p.welfare_department_name||null,welfare_department_signature_type:p.welfare_department_signature_type||null,welfare_department_signature_file_path:p.welfare_department_signature_file_path||null,welfare_department_signature_drawing_data:p.welfare_department_signature_drawing_data||null,welfare_department_date:p.welfare_department_date||null,zonal_incharge_its:p.zonal_incharge_its||null,zonal_incharge_name:p.zonal_incharge_name||null,zonal_incharge_signature_type:p.zonal_incharge_signature_type||null,zonal_incharge_signature_file_path:p.zonal_incharge_signature_file_path||null,zonal_incharge_signature_drawing_data:p.zonal_incharge_signature_drawing_data||null,zonal_incharge_date:p.zonal_incharge_date||null,operations_head_its:p.operations_head_its||null,operations_head_name:p.operations_head_name||null,operations_head_signature_type:p.operations_head_signature_type||null,operations_head_signature_file_path:p.operations_head_signature_file_path||null,operations_head_signature_drawing_data:p.operations_head_signature_drawing_data||null,operations_head_date:p.operations_head_date||null};A.mutate(e)},loading:A.isLoading,children:"Save"}),M&&(null===T||void 0===T?void 0:T.id)&&!I&&(0,er.jsx)(Fr,{variant:"primary",onClick:O,loading:L.isLoading,children:"Submit"})]})]})]})},Wc=e=>{let{slaInfo:t,slaValue:a,slaUnit:r}=e;if(!t||!a||!r)return null;const n=e=>{if(null===e||void 0===e)return"N/A";if(e<1){const t=Math.floor(60*e);return"".concat(t," min").concat(1!==t?"s":"")}if(e<24){const t=Math.floor(e),a=Math.floor(60*(e-t));return a>0?"".concat(t,"h ").concat(a,"m"):"".concat(t," hour").concat(1!==t?"s":"")}{const t=Math.floor(e/24),a=Math.floor(e%24);return a>0?"".concat(t," day").concat(1!==t?"s":""," ").concat(a," hour").concat(1!==a?"s":""):"".concat(t," day").concat(1!==t?"s":"")}},s=t.status||"on_time",i=t.hoursRemaining,o=t.hoursOverdue;return(0,er.jsxs)("div",{className:"flex flex-col items-start space-y-1",children:[(0,er.jsxs)(vn,{variant:"outline",className:"flex items-center space-x-1 text-xs ".concat((e=>{switch(e){case"on_time":return"bg-green-100 text-green-800 border-green-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"breached":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(s)),children:[(e=>{switch(e){case"on_time":return(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"warning":return(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"breached":return(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})});default:return null}})(s),(0,er.jsx)("span",{className:"font-medium",children:(e=>{switch(e){case"on_time":return"On Time";case"warning":return"Warning";case"breached":return"Breached";default:return"Unknown"}})(s)})]}),(0,er.jsx)("span",{className:"text-xs text-gray-600",children:"breached"===s?(0,er.jsxs)("span",{className:"text-red-600",children:[n(o)," overdue"]}):(0,er.jsxs)("span",{className:"warning"===s?"text-yellow-600":"text-green-600",children:[n(i)," remaining"]})})]})},Vc=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),Qc=()=>(0,er.jsxs)("svg",{className:"w-6 h-6",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",role:"img",preserveAspectRatio:"xMidYMid meet",children:[(0,er.jsx)("circle",{cx:"32",cy:"32",r:"30",fill:"#4fd1d9"}),(0,er.jsxs)("g",{fill:"#ffffff",children:[(0,er.jsx)("path",{d:"M27 27.8h10v24H27z"}),(0,er.jsx)("circle",{cx:"32",cy:"17.2",r:"5"})]})]}),Jc=()=>(0,er.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Yc=()=>(0,er.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Gc=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Kc=()=>{var e,t,a,n,s,i,o,l,c,d,u,m,h,p,f,x;const g=Z(),[y]=Se(),{user:v}=ar(),b=(0,Ce.useQueryClient)(),{hasAccess:_,loading:j}=Ar(),{hasPermission:w,loading:N}=Cr("cases","create"),{hasPermission:k}=Cr("cases","delete"),{hasPermission:S}=Cr("cases","assign_case"),{hasPermission:C}=Cr("cases","assign_counselor"),{hasPermission:A}=Cr("cases","change_assignee"),{hasPermission:L}=Cr("welfare_checklist","view"),{hasPermission:P}=Cr("welfare_checklist","create"),{hasPermission:E}=Cr("welfare_checklist","update"),{hasPermission:F}=Cr("welfare_checklist","all"),{hasPermission:O}=Cr("cover_letter_forms","create"),{hasPermission:I}=Cr("cover_letter_forms","update"),{hasPermission:R}=Cr("cover_letter_forms","read"),{hasPermission:D}=Cr("payment_management","read"),{hasPermission:M}=Cr("payment_management","update"),{hasPermission:T}=Cr("cases","close_case"),[q,z]=(0,r.useState)(1),[B,U]=(0,r.useState)(20),[H,W]=(0,r.useState)({status:"",case_type:"",search:"",jamiat_id:"",jamaat_id:"",assigned_roles:"",assigned_counselor_id:"",current_workflow_stage_id:""}),[V,Q]=(0,r.useState)(!1),[J,Y]=(0,r.useState)(""),[G,K]=(0,r.useState)(""),[$,X]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(""),[ae,re]=(0,r.useState)(""),[ne,se]=(0,r.useState)(""),[ie,oe]=(0,r.useState)(""),[le,ce]=(0,r.useState)(""),[de,ue]=(0,r.useState)(""),[me,he]=(0,r.useState)(!1),[pe,fe]=(0,r.useState)(null),[xe,ge]=(0,r.useState)(null),[ye,ve]=(0,r.useState)(null),[be,_e]=(0,r.useState)(null),[je,we]=(0,r.useState)(""),[Ne,ke]=(0,r.useState)(!1),[Ae,Le]=(0,r.useState)(!1),[Ee,Fe]=(0,r.useState)(!1),[Oe,Ie]=(0,r.useState)(!1),[Re,De]=(0,r.useState)(null),[Me,Te]=(0,r.useState)(""),[qe,ze]=(0,r.useState)(null),[Be,Ue]=(0,r.useState)(!1),[He,We]=(0,r.useState)(null),[Ve,Qe]=(0,r.useState)(null),[Je,Ye]=(0,r.useState)(!1),[Ge,Ke]=(0,r.useState)("assign"),[$e,Xe]=(0,r.useState)(null),[Ze,et]=(0,r.useState)(""),[tt,at]=(0,r.useState)(""),[rt,nt]=(0,r.useState)(!1),[st,it]=(0,r.useState)("assign"),[ot,lt]=(0,r.useState)(null),[ct,dt]=(0,r.useState)(""),[ut,mt]=(0,r.useState)(""),[ht,pt]=(0,r.useState)(""),[ft,xt]=(0,r.useState)(!1),[gt,yt]=(0,r.useState)(null),[vt,bt]=(0,r.useState)(!1),[_t,jt]=(0,r.useState)(null),[wt,Nt]=(0,r.useState)(""),[kt,St]=(0,r.useState)([]),[Ct,At]=(0,r.useState)(""),[Lt,Pt]=(0,r.useState)(!1),[Et,Ft]=(0,r.useState)(null),[Ot,It]=(0,r.useState)(!1),[Rt,Dt]=(0,r.useState)(!1),[Mt,Tt]=(0,r.useState)(!1),[qt,zt]=(0,r.useState)(""),[Bt,Ut]=(0,r.useState)(!1),[Ht,Wt]=(0,r.useState)(!1),[Vt,Qt]=(0,r.useState)(""),[Jt,Yt]=(0,r.useState)(!1),[Gt,Kt]=(0,r.useState)(null),[$t,Xt]=(0,r.useState)(""),{register:Zt,handleSubmit:ea,formState:{errors:ta},reset:aa,watch:ra,setValue:na}=xi();(0,r.useEffect)(()=>{const e=y.get("search")||"";e&&(W(t=>Pe(Pe({},t),{},{search:e})),z(1))},[y]);const sa=ra("its_number"),ia=(0,Ce.useMutation)(e=>{let{caseId:t,comments:a}=e;return Za.put("/api/cases/".concat(t,"/welfare-approve"),{comments:a})},{onSuccess:()=>{ke(!1),pt(""),De(null),wa()},onError:e=>{var t,a;console.error("Welfare approval error:",e);const r=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to approve case";Te(r),setTimeout(()=>Te(""),5e3)}}),oa=(0,Ce.useMutation)(e=>{let{caseId:t,comments:a}=e;return Za.put("/api/cases/".concat(t,"/welfare-reject"),{comments:a})},{onSuccess:()=>{Le(!1),pt(""),De(null),wa()},onError:e=>{console.error("Welfare rework error:",e)}}),la=(0,Ce.useMutation)(e=>{let{caseId:t,comments:a}=e;return Za.put("/api/cases/".concat(t,"/resubmit-welfare"),{comments:a})},{onSuccess:()=>{Fe(!1),pt(""),De(null),wa()},onError:e=>{console.error("Resubmit to welfare error:",e)}}),ca=(0,Ce.useMutation)(e=>{let{caseId:t,comments:a}=e;return Za.put("/api/cases/".concat(t,"/executive-approve"),{comments:a})},{onSuccess:()=>{It(!1),zt(""),De(null),wa()},onError:e=>{console.error("Executive approval error:",e)}}),da=(0,Ce.useMutation)(e=>{let{caseId:t,comments:a}=e;return Za.put("/api/cases/".concat(t,"/executive-rework"),{comments:a})},{onSuccess:()=>{Dt(!1),zt(""),De(null),wa()},onError:e=>{console.error("Executive rework error:",e)}}),ua=(0,Ce.useMutation)(e=>{let{caseId:t,comments:a}=e;return Za.put("/api/cases/".concat(t,"/welfare-forward-rework"),{comments:a})},{onSuccess:()=>{Tt(!1),pt(""),De(null),wa()},onError:e=>{console.error("Welfare forward rework error:",e)}}),ma=(0,Ce.useMutation)(e=>{let{caseId:t,comments:a}=e;return Za.put("/api/cases/".concat(t,"/zi-approve"),{comments:a})},{onSuccess:()=>{Ut(!1),Qt(""),De(null),wa()},onError:e=>{console.error("ZI approval error:",e)}}),ha=(0,Ce.useMutation)(e=>{let{caseId:t,comments:a}=e;return Za.put("/api/cases/".concat(t,"/zi-reject"),{comments:a})},{onSuccess:()=>{Wt(!1),Qt(""),De(null),wa()},onError:e=>{console.error("ZI reject error:",e)}}),pa=(0,Ce.useMutation)(e=>{let{caseId:t,action:a,comments:r}=e;return Za.put("/api/cases/".concat(t,"/workflow-action"),{action:a,comments:r})},{onSuccess:()=>{Yt(!1),Xt(""),De(null),Kt(null),wa(),b.invalidateQueries(["cases"])},onError:e=>{var t,a;console.error("Workflow action error:",e),alert((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to perform action")}}),fa=(0,Ce.useMutation)(e=>Za.delete("/api/cases/".concat(e)),{onSuccess:()=>{xt(!1),yt(null),wa()},onError:e=>{var t,a;console.error("Delete case error:",e),alert((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to delete case")}}),xa=(0,Ce.useMutation)(e=>{let{caseId:t,reason:a,documents:r}=e;const n=new FormData;return n.append("reason",a),(r||[]).forEach(e=>{n.append("documents",e)}),Za.post("/api/cases/".concat(t,"/close"),n)},{onSuccess:()=>{bt(!1),jt(null),Nt(""),St([]),At(""),wa(),b.invalidateQueries(["cases"])},onError:e=>{var t,a;console.error("Case closure error:",e);const r=(null===e||void 0===e||null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||(null===e||void 0===e?void 0:e.message)||"Failed to close case";At(r)}}),{data:ga,isLoading:ya}=(0,Ce.useQuery)(["case-closure",Et],()=>Za.get("/api/cases/".concat(Et,"/closure")).then(e=>e.data),{enabled:!!Et&&Lt}),va=(e,t)=>{De(e),Kt(t),Yt(!0)},{data:ba,isLoading:_a,error:ja,refetch:wa}=(0,Ce.useQuery)(["cases",q,H,B],()=>Za.get("/api/cases",{params:Pe({page:q,limit:B},H)}).then(e=>({cases:e.data.cases||[],pagination:e.data.pagination||{total:0,page:1,limit:20,pages:0}})),{keepPreviousData:!0}),{data:Na}=(0,Ce.useQuery)(["counseling-form-stage-permissions",null===ba||void 0===ba||null===(e=ba.cases)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id],async()=>{var e,t;const a=null===ba||void 0===ba||null===(e=ba.cases)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.id;if(!a)return null;return(await Za.get("/api/counseling-forms/case/".concat(a))).data},{enabled:!(null===ba||void 0===ba||null===(a=ba.cases)||void 0===a||!a.length),retry:!1}),ka=!0===(null===Na||void 0===Na||null===(n=Na.stage_permissions)||void 0===n||null===(s=n.manzoori)||void 0===s?void 0:s.can_read),Sa=(null===le||void 0===le?void 0:le.includes(" - "))?"":le,{data:Ca}=(0,Ce.useQuery)(["applicants",ne,ie,Sa],()=>{const e={};return ne&&(e.jamiat_id=ne),ie&&(e.jamaat_id=ie),Sa&&(e.search=Sa),e.limit=1e3,Za.get("/api/applicants",{params:e}).then(e=>e.data)},{select:e=>e.applicants||[]}),{data:Aa}=(0,Ce.useQuery)("caseTypes",()=>Za.get("/api/case-types").then(e=>e.data),{select:e=>e.caseTypes||[]}),{data:La}=(0,Ce.useQuery)(["users",Ze],()=>{const e={};return Ze&&(e.role=Ze),e.is_active="true",e.limit=500,e.page=1,Za.get("/api/users",{params:e}).then(e=>e.data)},{select:e=>e.users||[],enabled:!!Ze}),{data:Pa}=(0,Ce.useQuery)("roles",()=>Za.get("/api/users/roles").then(e=>e.data),{select:e=>e.roles||[]}),{data:Ea}=(0,Ce.useQuery)(["available-counselors",ot],()=>{const e={};return ot&&(e.caseId=ot),Za.get("/api/cases/available-counselors",{params:e}).then(e=>e.data)},{select:e=>e.counselors||[],enabled:!!ot&&rt}),{data:Fa}=(0,Ce.useQuery)("all-counselors",()=>Za.get("/api/users",{params:{role:"counselor",is_active:"true"}}).then(e=>e.data),{select:e=>e.users||[]}),{data:Oa}=(0,Ce.useQuery)("filter-users",()=>Za.get("/api/users",{params:{is_active:"true"}}).then(e=>e.data),{select:e=>e.users||[]}),{data:Ia}=(0,Ce.useQuery)("workflow-stages",()=>Za.get("/api/workflow-stages").then(e=>e.data),{select:e=>e.stages||[],onError:e=>{console.warn("Could not fetch workflow stages for filter:",e)}}),Ra=(0,Ce.useMutation)(e=>{let{caseId:t,assigned_roles:a,isReassign:r}=e;const n={assigned_roles:a};return r||(n.assigned_counselor_id=null),Za.put("/api/cases/".concat(t),n)},{onSuccess:()=>{b.invalidateQueries(["cases",q,H]),Ye(!1),Ke("assign"),Xe(null),et(""),at("")}}),Da=(0,Ce.useMutation)(e=>{let{caseId:t,assigned_counselor_id:a}=e;return Za.put("/api/cases/".concat(t),{assigned_counselor_id:a})},{onSuccess:(e,t)=>{const a=null===t.assigned_counselor_id;b.invalidateQueries(["cases",q,H]),b.invalidateQueries(["available-counselors",ot]),nt(!1),lt(null),dt(""),mt(a?"Counselor unassigned successfully!":"Counselor assigned successfully!"),setTimeout(()=>{mt("")},3e3)},onError:e=>{console.error("Assign counselor error:",e),mt("")}}),Ma=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"assign";Xe(e),Ke(t),Ye(!0)},Ta=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Da.reset(),lt(e),it(t?"reassign":"assign"),nt(!0),dt(t?String(t):"")},{data:qa,isLoading:za,error:Ba}=(0,Ce.useQuery)("jamiat",()=>Za.get("/api/jamiat").then(e=>e.data),{select:e=>{const t=e.jamiat||[],a=t.filter(e=>!0===e.is_active||1===e.is_active);return console.log("Jamiat data received:",{total:t.length,active:a.length,data:a}),a},onError:e=>{console.error("Error fetching jamiat:",e)}});(0,r.useEffect)(()=>{ne&&(na("jamaat_id",""),oe(""))},[ne,na]),(0,r.useEffect)(()=>{J||(K(""),Ja("jamaat_id",""))},[J]),(0,r.useEffect)(()=>{V&&(Y(H.jamiat_id||""),K(H.jamaat_id||""))},[V]),(0,r.useEffect)(()=>{if(sa&&sa!==je&&sa.length>=3){const e=setTimeout(()=>{Ga(sa)},500);return we(sa),()=>clearTimeout(e)}},[sa,je]);const{data:Ua,isLoading:Ha}=(0,Ce.useQuery)(["jamaat",ne],()=>{const e={};return ne&&(e.jamiat_id=ne),Za.get("/api/jamaat",{params:e}).then(e=>e.data)},{select:e=>{const t=e.jamaat||[];return ne?t.filter(e=>e.jamiat_id==ne):t},enabled:!0}),{data:Wa}=(0,Ce.useQuery)(["jamaat",J],()=>{const e={};return J&&(e.jamiat_id=J),Za.get("/api/jamaat",{params:e}).then(e=>e.data)},{select:e=>{const t=e.jamaat||[];return J?t.filter(e=>e.jamiat_id==J):t},enabled:!0});(0,r.useEffect)(()=>{Ua&&pe&&(na("jamaat_id",pe),fe(null))},[Ua,pe,na]);const Va=(0,Ce.useMutation)(e=>Za.post("/api/applicants",e),{onError:e=>{var t,a;te((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to create applicant"),re("")}}),Qa=(0,Ce.useMutation)(e=>Za.post("/api/cases",e),{onSuccess:e=>{re("Applicant and case created successfully!"),te(""),aa(),_e(null),X(!1),wa();const t=e.data.caseId;t&&setTimeout(()=>{g("/cases/".concat(t))},1500)},onError:e=>{var t,a,r,n;te((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||(null===(r=e.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to create case"),re("")}}),Ja=(e,t)=>{W(a=>Pe(Pe({},a),{},{[e]:t})),z(1)};(0,r.useEffect)(()=>{z(1)},[B]);const Ya=()=>{W({status:"",case_type:"",search:"",jamiat_id:"",jamaat_id:"",assigned_roles:"",assigned_counselor_id:"",current_workflow_stage_id:""}),Y(""),K(""),z(1)},Ga=async e=>{if(e&&""!==e.trim()){he(!0),ue("");try{const t=(await Za.get("/api/applicants/fetch-from-api/".concat(e))).data.data;console.log("\ud83d\udd0d API Response for ITS",e,":",t),console.log("\ud83d\udcf8 Photo data received:",t.photo?"YES (".concat((t.photo.length/1024).toFixed(2)," KB)"):"NO"),t.full_name&&na("full_name",t.full_name),t.age&&na("age",t.age),t.gender&&na("gender",t.gender),t.phone&&na("phone",t.phone),t.email&&na("email",t.email),t.photo?(console.log("\u2705 Setting photo in form and preview"),na("photo",t.photo),_e(t.photo)):(console.log("\u26a0\ufe0f No photo data available from API"),na("photo",null),_e(null)),t.address&&na("address",t.address),t.jamiat_name&&na("jamiat_name",t.jamiat_name),t.jamaat_name&&na("jamaat_name",t.jamaat_name),t.jamiat_id&&ge(t.jamiat_id),t.jamaat_id&&ve(t.jamaat_id),re("Data fetched successfully from external API!"),te("")}catch(ja){var t,a;console.error("\u274c Create API fetch error:",ja),ue((null===(t=ja.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to fetch data from external API")}finally{he(!1)}}},Ka=()=>{X(!1),te(""),re(""),ue(""),se(""),oe(""),ce(""),_e(null),ge(null),ve(null),fe(null),aa()},$a=e=>e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),Xa=[{id:"personal",label:"Personal Details"},{id:"family",label:"Family Details"},{id:"assessment",label:"Assessment"},{id:"financial",label:"Financial Assistance"},{id:"growth",label:"Economic Growth"},{id:"declaration",label:"Declaration"},{id:"attachments",label:"Attachments"}],tr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=0,r=[];const{personal_details_completed:n=!1,family_details_completed:s=!1,assessment_completed:i=!1,financial_assistance_completed:o=!1,economic_growth_completed:l=!1,declaration_completed:c=!1,attachments_completed:d=!1,all_sections_completed:u=!1}=t;if(u||n&&s&&i&&o&&l&&c&&d)return a=6,r=["personal","family","assessment","financial","growth","declaration","attachments"],{currentStep:a,completedSteps:r};n&&r.push("personal"),s&&r.push("family"),i&&r.push("assessment"),o&&r.push("financial"),l&&r.push("growth"),c&&r.push("declaration"),d&&r.push("attachments"),a=d||c?6:l?5:o?4:i?3:s?2:n?1:0;return["cover_letter_generated","submitted_to_welfare","welfare_approved","welfare_rejected","welfare_processing_rework","submitted_to_executive","submitted_to_executive_1","submitted_to_executive_2","submitted_to_executive_3","submitted_to_executive_4","executive_1_approved","executive_2_approved","executive_3_approved","executive_4_approved","executive_approved","executive_rejected","finance_disbursement","completed","closed"].includes(e)&&(a=6,r=["personal","family","assessment","financial","growth","declaration","attachments"]),{currentStep:a,completedSteps:r}},rr=function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{currentStep:r}=tr(e,a);return r>=Xa.length?"Completed":(null===(t=Xa[r])||void 0===t?void 0:t.label)||"Pending"};return ja?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)(Ur,{severity:"error",children:["Error loading cases: ",ja.message]})}):(0,er.jsxs)("div",{className:"px-2 py-4 bg-gray-50 min-h-screen relative z-0",children:[(0,er.jsx)("div",{className:"mb-8",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Cases"}),(0,er.jsx)("p",{className:"text-gray-600 text-lg",children:"Manage and track case information"})]}),w&&(0,er.jsxs)(Fr,{onClick:()=>X(!0),className:"flex items-center space-x-2 bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:[(0,er.jsx)(Vc,{}),(0,er.jsx)("span",{children:"Case Registration"})]})]})}),(0,er.jsx)(zr,{className:"mb-6 relative z-10",children:(0,er.jsx)("div",{className:"p-3",children:(0,er.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[(0,er.jsxs)("form",{onSubmit:e=>{e.preventDefault(),wa()},className:"flex-1 flex space-x-3",children:[(0,er.jsx)("div",{className:"flex-1",children:(0,er.jsx)(Ir,{placeholder:"Search cases, applicants, or case numbers...",value:H.search,onChange:e=>Ja("search",e.target.value),className:"border-2 border-gray-200 focus:border-primary-500 focus:ring-2 focus:ring-primary-200"})}),(0,er.jsx)(Fr,{type:"submit",variant:"primary",className:"px-6",children:"Search"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("label",{className:"text-sm text-gray-700 whitespace-nowrap",children:"Rows per page:"}),(0,er.jsxs)(ln,{value:B.toString(),onChange:e=>U(Number(e.target.value)),className:"w-32",children:[(0,er.jsx)(ln.Option,{value:"20",children:"20"}),(0,er.jsx)(ln.Option,{value:"50",children:"50"}),(0,er.jsx)(ln.Option,{value:"100",children:"100"}),(0,er.jsx)(ln.Option,{value:"500",children:"500"}),(0,er.jsx)(ln.Option,{value:"1500",children:"1500"}),(0,er.jsx)(ln.Option,{value:"2000",children:"2000"}),(0,er.jsx)(ln.Option,{value:"2500",children:"2500"})]})]}),(0,er.jsxs)(Fr,{variant:"outline",onClick:()=>Q(!0),className:"flex items-center space-x-2 border-2 border-gray-300 hover:border-primary-500",children:[(0,er.jsx)(Gc,{}),(0,er.jsx)("span",{children:"Filters"})]}),(0,er.jsx)(Fr,{variant:"secondary",onClick:Ya,className:"bg-gray-100 hover:bg-gray-200 text-gray-700",children:"Clear"})]})]})})}),ut&&(0,er.jsx)("div",{className:"mb-4",children:(0,er.jsx)(Ur,{severity:"success",onClose:()=>mt(""),children:ut})}),Me&&(0,er.jsx)("div",{className:"mb-4",children:(0,er.jsx)(Ur,{severity:"error",onClose:()=>Te(""),children:Me})}),(0,er.jsx)(zr,{children:(0,er.jsx)("div",{className:"p-3",children:_a?(0,er.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsxs)("h3",{className:"text-xl font-semibold text-gray-900",children:["Cases (",(null===ba||void 0===ba||null===(i=ba.pagination)||void 0===i?void 0:i.total)||0,")"]}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"View and manage all case records"})]}),(0,er.jsx)("div",{className:"overflow-x-hidden",children:(0,er.jsx)("div",{className:"overflow-x-hidden",children:(0,er.jsxs)("table",{className:"w-full table-fixed divide-y divide-gray-200",children:[(0,er.jsx)(rn.Head,{children:(0,er.jsxs)(rn.Row,{className:"bg-gray-50",children:[(0,er.jsx)(rn.Header,{className:"font-semibold text-gray-900 w-24 !px-2",children:"Case Number"}),(0,er.jsx)(rn.Header,{className:"font-semibold text-gray-900 w-44 !px-2",children:"Applicant"}),(0,er.jsx)(rn.Header,{className:"font-semibold text-gray-900 w-36 !px-2",children:"Jamaat"}),(0,er.jsx)(rn.Header,{className:"font-semibold text-gray-900 w-28 !px-2",children:"Case Type"}),(0,er.jsx)(rn.Header,{className:"font-semibold text-gray-900 w-28 !px-2",children:"Status"}),(0,er.jsx)(rn.Header,{className:"font-semibold text-gray-900 w-32 !px-2",children:"Assign to"}),(0,er.jsx)(rn.Header,{className:"font-semibold text-gray-900 w-36 !px-2",children:"Counselor"}),(0,er.jsx)(rn.Header,{align:"center",className:"font-semibold text-gray-900 w-28 !px-2 !text-center [&>div]:!justify-center",children:"Workflow"}),(0,er.jsx)(rn.Header,{className:"font-semibold text-gray-900 w-48 !px-1",children:"Case Stage"}),(0,er.jsx)(rn.Header,{className:"font-semibold text-gray-900 w-32 !px-1",children:"SLA Status"}),(0,er.jsx)(rn.Header,{align:"center",className:"font-semibold text-gray-900 w-24 !px-1 !text-center [&>div]:!justify-center",children:"Created Date"}),(0,er.jsx)(rn.Header,{align:"center",className:"font-semibold text-gray-900 min-w-[140px] !px-2 !text-center [&>div]:!justify-center",children:"Actions"})]})}),(0,er.jsx)(rn.Body,{children:null===ba||void 0===ba||null===(o=ba.cases)||void 0===o?void 0:o.filter(e=>e).map(e=>{var t,a,r,n,s,i,o;return(0,er.jsxs)(rn.Row,{hover:!0,className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,er.jsx)(rn.Cell,{className:"overflow-hidden !px-2",children:(0,er.jsx)("div",{className:"font-medium text-gray-900 break-words whitespace-normal",children:e.case_number})}),(0,er.jsx)(rn.Cell,{className:"overflow-hidden !px-2",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"font-medium text-gray-900 break-words whitespace-normal",children:e.applicant_full_name}),(0,er.jsxs)("div",{className:"text-sm text-gray-500 break-words whitespace-normal",children:["ITS: ",e.its_number]})]})}),(0,er.jsx)(rn.Cell,{className:"overflow-hidden !px-2",children:(0,er.jsx)("div",{className:"text-sm text-gray-900 break-words whitespace-normal",children:e.jamaat_name||"N/A"})}),(0,er.jsx)(rn.Cell,{className:"overflow-hidden !px-2",children:(0,er.jsx)("div",{className:"text-sm text-gray-900 break-words whitespace-normal",children:e.case_type_name||"N/A"})}),(0,er.jsx)(rn.Cell,{className:"overflow-hidden !px-2",children:e.status_name&&e.status_name.trim()?(0,er.jsx)(pn,{variant:(o=e.status_name,{draft:"default",assigned:"info",in_counseling:"warning",cover_letter_generated:"primary",submitted_to_welfare:"secondary",welfare_approved:"success",welfare_rejected:"error",welfare_processing_rework:"warning",submitted_to_zi:"success",submitted_to_zi_review:"success",zi_approved:"success",zi_rejected:"error",submitted_to_kg_review:"primary",submitted_to_operations_lead:"warning",submitted_to_executive_1:"info",executive_1_approved:"success",submitted_to_executive_2:"info",executive_2_approved:"success",submitted_to_executive_3:"info",executive_3_approved:"success",submitted_to_executive_4:"info",executive_4_approved:"success",executive_approved:"success",executive_rejected:"error",finance_disbursement:"success",completed:"success",closed:"default"}[o]||"default"),children:(0,er.jsx)("span",{className:"break-words whitespace-normal",children:$a(e.status_name)})}):(0,er.jsx)("span",{className:"text-gray-400 text-sm",children:"Not set"})}),(0,er.jsx)(rn.Cell,{className:"overflow-hidden !px-2",children:(0,er.jsx)("div",{className:"text-sm text-gray-900 break-words whitespace-normal",children:e.roles_full_name?(0,er.jsx)("span",{className:"font-medium",children:e.roles_full_name}):(0,er.jsx)("span",{className:"text-gray-400",children:"Unassigned"})})}),(0,er.jsx)(rn.Cell,{className:"overflow-hidden !px-2",children:(0,er.jsx)("div",{className:"text-sm text-gray-900 break-words whitespace-normal",children:e.counselor_full_name?(0,er.jsx)("span",{className:"font-medium text-blue-600",children:e.counselor_full_name}):(0,er.jsx)("span",{className:"text-gray-400",children:"Unassigned"})})}),(0,er.jsx)(rn.Cell,{align:"center",className:"overflow-hidden !px-2 !text-center",children:(0,er.jsx)("div",{className:"flex items-center justify-center w-full",children:_?(0,er.jsx)(er.Fragment,{children:e.all_sections_completed?(0,er.jsxs)(Fr,{variant:"primary",size:"sm",onClick:()=>g("/counseling-form/".concat(e.id)),className:"flex items-center space-x-1 text-xs",children:[(0,er.jsx)("span",{children:"\u25ba"}),(0,er.jsx)("span",{className:"break-words whitespace-normal",children:"View Form"})]}):"in_counseling"===e.status_name||e.counseling_form_completed?(0,er.jsxs)(Fr,{variant:"primary",size:"sm",onClick:()=>g("/counseling-form/".concat(e.id)),className:"flex items-center space-x-1 text-xs",children:[(0,er.jsx)("span",{children:"\u25ba"}),(0,er.jsx)("span",{className:"break-words whitespace-normal",children:"Continue"})]}):"assigned"===e.status_name&&e.roles_full_name&&!e.counseling_form_completed?(0,er.jsxs)(Fr,{variant:"primary",size:"sm",onClick:()=>g("/counseling-form/".concat(e.id,"?step=1")),className:"flex items-center space-x-1 text-xs",children:[(0,er.jsx)("span",{children:"\u25ba"}),(0,er.jsx)("span",{className:"break-words whitespace-normal",children:"Start"})]}):S&&"closed"!==e.status_name&&"completed"!==e.status_name&&("draft"===e.status_name||!e.roles_full_name||!e.roles||null===e.roles||""===e.roles||Array.isArray(e.roles)&&0===e.roles.length)?(0,er.jsxs)(Fr,{variant:"primary",size:"sm",onClick:()=>Ma(e.id),className:"flex items-center space-x-1 text-xs",children:[(0,er.jsx)("span",{children:"\u25ba"}),(0,er.jsx)("span",{className:"break-words whitespace-normal",children:"Assign Case"})]}):A&&"closed"!==e.status_name&&"completed"!==e.status_name&&e.roles?(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>Ma(e.id,"reassign"),className:"flex items-center space-x-1 text-xs",children:(0,er.jsx)("span",{className:"break-words whitespace-normal",children:"Change assignee"})}):"draft"===e.status_name?(0,er.jsx)("span",{className:"text-xs text-gray-500 break-words whitespace-normal",children:"Not applicable"}):("completed"===e.status_name||e.status_name,(0,er.jsx)("span",{className:"text-xs text-gray-500 break-words whitespace-normal",children:"Completed"}))}):(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>g("/cases/".concat(e.id)),className:"flex items-center justify-center w-10 h-10 border-0 hover:bg-primary-50 text-gray-600 hover:text-primary-600",title:"View Case",children:(0,er.jsx)(Qc,{})})})}),(0,er.jsx)(rn.Cell,{className:"overflow-hidden !px-1",children:(0,er.jsx)("div",{className:"flex flex-col items-start space-y-2 break-words whitespace-normal",children:"closed"===e.status_name||"completed"===e.status_name?(0,er.jsx)("div",{className:"text-sm text-gray-900 font-medium",children:"Closed"}):e.current_workflow_stage_name?(0,er.jsx)("div",{className:"text-sm text-gray-900 font-medium",children:e.current_workflow_stage_name}):e.status_name?(()=>{const t={personal_details_completed:e.personal_details_completed,family_details_completed:e.family_details_completed,assessment_completed:e.assessment_completed,financial_assistance_completed:e.financial_assistance_completed,economic_growth_completed:e.economic_growth_completed,declaration_completed:e.declaration_completed,attachments_completed:e.attachments_completed,all_sections_completed:e.all_sections_completed},a=tr(e.status_name,t);return(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)(kn,{steps:Xa,currentStep:a.currentStep,completedSteps:a.completedSteps,className:"!p-0 !border-none !bg-transparent",compact:!0}),(0,er.jsx)("span",{className:"text-xs text-gray-600 font-medium break-words whitespace-normal w-full",children:rr(e.status_name,t)})]})})():(0,er.jsx)("span",{className:"text-xs text-gray-400",children:"Not set"})})}),(0,er.jsx)(rn.Cell,{className:"overflow-hidden !px-1",children:"closed"===e.status_name||"completed"===e.status_name?(0,er.jsx)("div",{className:"text-sm text-gray-500 font-medium",children:"Closed"}):(0,er.jsx)(Wc,{slaInfo:e.slaInfo,slaValue:e.sla_value,slaUnit:e.sla_unit})}),(0,er.jsx)(rn.Cell,{align:"center",className:"overflow-hidden !px-1 !text-center",children:(0,er.jsx)("div",{className:"text-sm text-gray-900 break-words whitespace-normal text-center w-full",children:(i=e.created_at,new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))})}),(0,er.jsx)(rn.Cell,{align:"center",className:"!px-2 !text-center",children:(0,er.jsxs)("div",{className:"flex items-center justify-center space-x-1 flex-wrap gap-1 w-full min-w-0",children:[(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>g("/cases/".concat(e.id)),className:"flex items-center justify-center w-10 h-10 border-0 hover:bg-primary-50 text-gray-600 hover:text-primary-600",title:"View Case",children:(0,er.jsx)(Qc,{})}),"closed"!==e.status_name&&"completed"!==e.status_name&&(0,er.jsxs)(er.Fragment,{children:[("finance_disbursement"===e.status_name||"Finance Disbursement"===e.current_workflow_stage_name)&&D&&(0,er.jsxs)(Fr,{variant:"primary",size:"sm",onClick:()=>g("/cases/".concat(e.id,"/payment-schedule")),className:"flex items-center space-x-1 bg-primary-600 hover:bg-primary-700 text-white",title:"Manage Payment Schedule",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,er.jsx)("span",{className:"hidden sm:inline",children:"Payment"})]}),(()=>{const t="Cover Letter"===e.current_workflow_stage_name||"submitted_to_cover_letter"===e.status_name;return"finance_disbursement"!==e.status_name&&(e.cover_letter_form_exists||t)&&(O||I||R||"admin"===(null===v||void 0===v?void 0:v.role)||"super_admin"===(null===v||void 0===v?void 0:v.role))})()&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)(Fr,{variant:"primary",size:"sm",onClick:()=>{We(e.id),Ue(!0)},className:"flex items-center space-x-1 bg-purple-600 hover:bg-purple-700 text-white",title:e.cover_letter_form_exists?"View Cover Letter":"Fill Cover Letter",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,er.jsx)("span",{className:"hidden sm:inline",children:"Cover Letter"})]}),e.cover_letter_form_exists&&(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>(async(e,t)=>{try{var a;const r=(await Za.get("/api/cover-letter-forms/case/".concat(e))).data.form;if(!r)return void alert("Cover letter form not found");const n=JSON.parse(localStorage.getItem("user")),s=(null===n||void 0===n?void 0:n.full_name)||(null===n||void 0===n?void 0:n.username)||(null===n||void 0===n?void 0:n.name)||"System",i=(await Uc(r,{caseNumber:t||(null===(a=r.applicant_details)||void 0===a?void 0:a.case_id)||"#".concat(e),userName:s,caseId:e})).output("blob");if(!i||0===i.size)throw new Error("PDF blob is empty");const o=URL.createObjectURL(i),l=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,-5),c="cover_letter_".concat(t||e||"unknown","_").concat(l,".pdf"),d=document.createElement("a");d.href=o,d.download=c,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.open(o,"_blank"),setTimeout(()=>{URL.revokeObjectURL(o)},100)}catch(ja){console.error("Error generating PDF:",ja),alert("Failed to generate PDF: ".concat(ja.message))}})(e.id,e.case_number),className:"flex items-center space-x-1 border-gray-300 hover:bg-gray-50 text-gray-700 hover:text-gray-900",title:"Download Cover Letter PDF",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,er.jsx)("span",{className:"hidden sm:inline",children:"PDF"})]})]}),L&&"submitted_to_welfare"===e.status_name&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)(Fr,{variant:"success",size:"sm",onClick:()=>(async e=>{try{const t=(await Za.get("/api/welfare-checklist/status/".concat(e))).data;if(t.total>0&&0===t.filled)return Te("Submit the checklist and then approve the case."),void setTimeout(()=>Te(""),5e3);if(t.total>0&&t.filled>0&&!t.isComplete)return Te("Checklist incomplete. Please complete all checklist items before approving. (".concat(t.filled,"/").concat(t.total," completed)")),void setTimeout(()=>Te(""),5e3);De(e),ke(!0),Te("")}catch(ja){var t,a;404===(null===(t=ja.response)||void 0===t?void 0:t.status)||403===(null===(a=ja.response)||void 0===a?void 0:a.status)?(De(e),ke(!0),Te("")):(console.error("Error checking checklist status:",ja),De(e),ke(!0),Te(""))}})(e.id),className:"flex items-center space-x-1 bg-green-600 hover:bg-green-700 text-white",children:[(0,er.jsx)("span",{children:"\u2713"}),(0,er.jsx)("span",{children:"Approve"})]}),(0,er.jsxs)(Fr,{variant:"danger",size:"sm",onClick:()=>{return t=e.id,De(t),void Le(!0);var t},className:"flex items-center space-x-1 bg-red-600 hover:bg-red-700 text-white",children:[(0,er.jsx)("span",{children:"\u2717"}),(0,er.jsx)("span",{children:"Rework"})]}),(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,De(t),void Ie(!0);var t},className:"flex items-center space-x-1 border-blue-600 text-blue-600 hover:bg-blue-50",children:[(0,er.jsx)("span",{children:"\ud83d\udccb"}),(0,er.jsx)("span",{children:"Checklist"})]})]}),(0,er.jsxs)(xn,{isOpen:ft,onClose:()=>{xt(!1),yt(null)},title:"Delete Case",size:"md",children:[(0,er.jsx)("div",{className:"space-y-4",children:(0,er.jsx)(Ur,{severity:"warning",children:(0,er.jsxs)("p",{className:"break-words whitespace-normal",children:["Are you sure you want to delete case ",(0,er.jsx)("strong",{children:(null===gt||void 0===gt?void 0:gt.caseNumber)||""}),"? This action cannot be undone."]})})}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{xt(!1),yt(null)},children:"Cancel"}),(0,er.jsx)(Fr,{variant:"danger",onClick:()=>gt&&fa.mutate(gt.id),loading:fa.isLoading,children:"Delete"})]})})]}),(null===(t=e.workflowPermissions)||void 0===t?void 0:t.can_approve)&&(!(null===(s=e.status_name)||void 0===s?void 0:s.startsWith("submitted_to_executive"))||!e.current_executive_level||"super_admin"===(null===v||void 0===v?void 0:v.role)||"admin"===(null===v||void 0===v?void 0:v.role)||(null===v||void 0===v?void 0:v.executive_level)===e.current_executive_level)&&!(L&&"submitted_to_welfare"===e.status_name)&&(0,er.jsxs)(Fr,{variant:"success",size:"sm",onClick:()=>va(e.id,"approve"),className:"flex items-center space-x-1 bg-green-600 hover:bg-green-700 text-white",children:[(0,er.jsx)("span",{children:"\u2713"}),(0,er.jsx)("span",{children:"Approve"})]}),(Boolean(null===(a=e.workflowPermissions)||void 0===a?void 0:a.can_reject)||(t=>{const a=null===(t=e.status_name)||void 0===t?void 0:t.startsWith("submitted_to_executive"),r=null===v||void 0===v?void 0:v.role,n="Executive Management"===r||"super_admin"===r;if(a&&e.current_executive_level&&n){return"super_admin"===r||(null===v||void 0===v?void 0:v.executive_level)===e.current_executive_level}return!1})())&&!(L&&"submitted_to_welfare"===e.status_name)&&(0,er.jsxs)(Fr,{variant:"danger",size:"sm",onClick:()=>va(e.id,"reject"),className:"flex items-center space-x-1 bg-red-600 hover:bg-red-700 text-white",children:[(0,er.jsx)("span",{children:"\u2717"}),(0,er.jsx)("span",{children:"Reject"})]}),("ZI"===(null===v||void 0===v?void 0:v.role)||"super_admin"===(null===v||void 0===v?void 0:v.role))&&"submitted_to_zi"===e.status_name&&!(null!==(n=e.workflowPermissions)&&void 0!==n&&n.can_approve)&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)(Fr,{variant:"success",size:"sm",onClick:()=>{return t=e.id,De(t),void Ut(!0);var t},className:"flex items-center space-x-1 bg-green-600 hover:bg-green-700 text-white",children:[(0,er.jsx)("span",{children:"\u2713"}),(0,er.jsx)("span",{children:"Approve"})]}),(0,er.jsxs)(Fr,{variant:"danger",size:"sm",onClick:()=>{return t=e.id,De(t),void Wt(!0);var t},className:"flex items-center space-x-1 bg-red-600 hover:bg-red-700 text-white",children:[(0,er.jsx)("span",{children:"\u2717"}),(0,er.jsx)("span",{children:"Reject"})]})]}),(t=>{const a="Executive Management"===(null===v||void 0===v?void 0:v.role)||"super_admin"===(null===v||void 0===v?void 0:v.role),r=e.current_executive_level,n="submitted_to_executive_".concat(r),s=null===v||void 0===v?void 0:v.executive_level,i="super_admin"===(null===v||void 0===v?void 0:v.role)||s===r;return a&&e.status_name===n&&i&&!(null!==(t=e.workflowPermissions)&&void 0!==t&&t.can_approve)})()&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)(Fr,{variant:"success",size:"sm",onClick:()=>{return t=e.id,De(t),void It(!0);var t},className:"flex items-center space-x-1 bg-green-600 hover:bg-green-700 text-white",children:[(0,er.jsx)("span",{children:"\u2713"}),(0,er.jsx)("span",{children:"Approve"})]}),(0,er.jsxs)(Fr,{variant:"danger",size:"sm",onClick:()=>{return t=e.id,De(t),void Dt(!0);var t},className:"flex items-center space-x-1 bg-red-600 hover:bg-red-700 text-white",children:[(0,er.jsx)("span",{children:"\u2717"}),(0,er.jsx)("span",{children:"Rework"})]})]}),(t=>{const a=null===v||void 0===v||null===(t=v.role)||void 0===t?void 0:t.toLowerCase();return("welfare_reviewer"===a||"welfare"===a||"super_admin"===(null===v||void 0===v?void 0:v.role))&&"welfare_processing_rework"===e.status_name})()&&(0,er.jsxs)(Fr,{variant:"warning",size:"sm",onClick:()=>{return t=e.id,De(t),void Tt(!0);var t},className:"flex items-center space-x-1 bg-yellow-600 hover:bg-yellow-700 text-white",children:[(0,er.jsx)("span",{children:"\u21bb"}),(0,er.jsx)("span",{children:"Forward to DCM"})]}),("dcm"===(null===v||void 0===v||null===(r=v.role)||void 0===r?void 0:r.toLowerCase())||"Deputy Counseling Manager"===(null===v||void 0===v?void 0:v.role)||"ZI"===(null===v||void 0===v?void 0:v.role)||"super_admin"===(null===v||void 0===v?void 0:v.role))&&"welfare_rejected"===e.status_name&&(e.assigned_dcm_id===(null===v||void 0===v?void 0:v.id)||"super_admin"===(null===v||void 0===v?void 0:v.role))&&(0,er.jsxs)(Fr,{variant:"primary",size:"sm",onClick:()=>{return t=e.id,De(t),void Fe(!0);var t},className:"flex items-center space-x-1 bg-primary-600 hover:bg-primary-700 text-white",children:[(0,er.jsx)("span",{children:"\u21bb"}),(0,er.jsx)("span",{children:"Resubmit"})]}),("admin"===(null===v||void 0===v?void 0:v.role)||"super_admin"===(null===v||void 0===v?void 0:v.role))&&(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>g("/cases/".concat(e.id,"/edit")),className:"flex items-center justify-center w-10 h-10 border-0 hover:bg-primary-50 text-gray-600 hover:text-primary-600",title:"Edit Case",children:(0,er.jsx)(Jc,{})}),C&&!e.counselor_full_name&&(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>Ta(e.id),className:"flex items-center justify-center px-3 py-2 border-0 hover:bg-blue-50 text-gray-600 hover:text-blue-600",title:"Assign Counselor",children:(0,er.jsx)("span",{className:"text-xs font-medium",children:"\ud83d\udc64 Assign"})}),A&&e.counselor_full_name&&(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>Ta(e.id,e.assigned_counselor_id),className:"flex items-center justify-center px-3 py-2 border-0 hover:bg-blue-50 text-gray-600 hover:text-blue-600",title:"Change Counselor",children:(0,er.jsx)("span",{className:"text-xs font-medium",children:"\ud83d\udc64 Change"})}),ka&&e.manzoori_file_count>0&&(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(async e=>{try{var t;const a=(null===(t=(await Za.get("/api/attachments/case/".concat(e))).data.attachments)||void 0===t?void 0:t.filter(e=>"manzoori"===e.stage))||[];if(0===a.length)return void alert("No Manzoori files found for this case");for(const e of a)try{const t=await Za.get("/api/attachments/download/".concat(e.id),{responseType:"blob"}),a=t.headers["content-type"]||"application/pdf",r=new Blob([t.data],{type:a}),n=window.URL.createObjectURL(r);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}catch(Ki){console.error("Error opening Manzoori file:",Ki),alert("Failed to open one of the Manzoori files.")}}catch(ja){console.error("Error fetching Manzoori files:",ja),alert("Failed to open Manzoori files")}})(e.id),className:"flex items-center justify-center px-3 py-2 border-0 hover:bg-green-50 text-gray-600 hover:text-green-700",title:"Open Manzoori PDF",children:(0,er.jsx)("span",{className:"text-xs font-medium",children:"\ud83d\udcc4 Manzoori"})}),T&&"closed"!==e.status_name&&(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,a=e.case_number,jt({id:t,caseNumber:a}),Nt(""),St([]),At(""),void bt(!0);var t,a},className:"flex items-center justify-center px-3 py-2 border-0 hover:bg-orange-50 text-gray-600 hover:text-orange-600",title:"Close Case",children:(0,er.jsx)("span",{className:"text-xs font-medium",children:"\ud83d\udd12 Close"})}),k&&(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,a=e.case_number,yt({id:t,caseNumber:a}),void xt(!0);var t,a},className:"flex items-center justify-center w-10 h-10 border-0 hover:bg-red-50 text-gray-600 hover:text-red-600",title:"Delete Case",children:(0,er.jsx)(Yc,{})})]}),"closed"===e.status_name&&(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,Ft(t),void Pt(!0);var t},className:"flex items-center justify-center shrink-0 px-3 py-2 border-0 hover:bg-gray-100 text-gray-600 hover:text-gray-800",title:"Closure document",children:(0,er.jsx)("span",{className:"text-xs font-medium whitespace-nowrap",children:"\ud83d\udccb Closure document"})})]})})]},e.id)})})]})})}),(!(null!==ba&&void 0!==ba&&ba.cases)||0===ba.cases.length)&&(0,er.jsxs)("div",{className:"text-center py-16",children:[(0,er.jsx)("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,er.jsx)("svg",{className:"w-10 h-10 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,er.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"No cases found"}),(0,er.jsx)("p",{className:"text-gray-600 mb-6 text-lg",children:Object.values(H).some(e=>e)?"Try adjusting your search criteria or filters.":"Get started by creating your first case."}),("admin"===(null===v||void 0===v?void 0:v.role)||"super_admin"===(null===v||void 0===v?void 0:v.role))&&!Object.values(H).some(e=>e)&&(0,er.jsx)(Fr,{onClick:()=>X(!0),className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:"Create Case"})]}),(null===ba||void 0===ba||null===(l=ba.pagination)||void 0===l?void 0:l.pages)>1&&(0,er.jsx)("div",{className:"mt-6",children:(0,er.jsx)(gn,{currentPage:q,totalPages:ba.pagination.pages,onPageChange:z})})]})})}),(0,er.jsxs)(xn,{isOpen:V,onClose:()=>Q(!1),title:"Filter Cases",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)(ln,{label:"Status",value:H.status,onChange:e=>Ja("status",e.target.value),children:[(0,er.jsx)(ln.Option,{value:"",children:"All Statuses"}),(0,er.jsx)(ln.Option,{value:"draft",children:"Draft"}),(0,er.jsx)(ln.Option,{value:"assigned",children:"Assigned"}),(0,er.jsx)(ln.Option,{value:"in_counseling",children:"In Counseling"}),(0,er.jsx)(ln.Option,{value:"cover_letter_generated",children:"Cover Letter Generated"}),(0,er.jsx)(ln.Option,{value:"submitted_to_welfare",children:"Submitted to Welfare"}),(0,er.jsx)(ln.Option,{value:"welfare_approved",children:"Welfare Approved"}),(0,er.jsx)(ln.Option,{value:"welfare_rejected",children:"Welfare Rework"}),(0,er.jsx)(ln.Option,{value:"executive_approved",children:"Executive Approved"}),(0,er.jsx)(ln.Option,{value:"executive_rejected",children:"Executive Rework"}),(0,er.jsx)(ln.Option,{value:"finance_disbursement",children:"Finance Disbursement"})]}),(0,er.jsxs)(ln,{label:"Case Type",value:H.case_type,onChange:e=>Ja("case_type",e.target.value),children:[(0,er.jsx)(ln.Option,{value:"",children:"All Types"}),null===Aa||void 0===Aa?void 0:Aa.map(e=>(0,er.jsx)(ln.Option,{value:e.name,children:e.name},e.id))]}),(0,er.jsx)(mn,{label:"Jamiat",value:H.jamiat_id,onChange:e=>{Y(e),Ja("jamiat_id",e)},placeholder:"Select Jamiat...",options:(null===qa||void 0===qa?void 0:qa.map(e=>({value:e.id,label:e.name})))||[]}),J&&(0,er.jsx)(mn,{label:"Jamaat",value:H.jamaat_id,onChange:e=>{K(e),Ja("jamaat_id",e)},placeholder:"Select Jamaat...",options:(null===Wa||void 0===Wa?void 0:Wa.map(e=>({value:e.id,label:e.name})))||[]}),(0,er.jsx)(mn,{label:"Assign to",value:H.assigned_roles,onChange:e=>Ja("assigned_roles",e),placeholder:"Select User...",options:(null===Oa||void 0===Oa?void 0:Oa.map(e=>({value:e.id,label:"".concat(e.full_name," - ").concat(e.role)})))||[]}),(0,er.jsx)(mn,{label:"Counselor",value:H.assigned_counselor_id,onChange:e=>Ja("assigned_counselor_id",e),placeholder:"Select Counselor...",options:(null===Fa||void 0===Fa?void 0:Fa.map(e=>({value:e.id,label:e.full_name})))||[]}),(0,er.jsx)(mn,{label:"Case Stage",value:H.current_workflow_stage_id,onChange:e=>Ja("current_workflow_stage_id",e),placeholder:"Select Case Stage...",options:(null===Ia||void 0===Ia?void 0:Ia.map(e=>({value:e.id,label:e.stage_name})))||[]})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{variant:"secondary",onClick:Ya,children:"Clear All"}),(0,er.jsx)(Fr,{onClick:()=>{Q(!1),wa()},children:"Apply Filters"})]})})]}),(0,er.jsx)(xn,{isOpen:$,onClose:Ka,title:"Case Registration",size:"xl",children:(0,er.jsxs)("form",{onSubmit:ea(async e=>{if(!Va.isLoading&&!Qa.isLoading){te(""),re("");try{var t;const a=(null===(t=e.full_name)||void 0===t?void 0:t.trim().split(" "))||[],r=a[0]||"",n=a.slice(1).join(" ")||"",s={its_number:e.its_number,first_name:r,last_name:n,age:e.age,gender:e.gender,phone:e.phone,email:e.email,photo:e.photo||null,address:e.address,jamiat_name:e.jamiat_name,jamaat_name:e.jamaat_name,jamiat_id:xe,jamaat_id:ye},i={applicant_data:s,case_type_id:e.case_type_id,roles:null,assigned_counselor_id:null,jamiat_id:xe||null,jamaat_id:ye||null,assigned_role:null,description:e.description,notes:e.notes||null};console.log("\ud83d\udcbe Creating case with applicant data (bidirectional creation):",Pe(Pe({},i),{},{applicant_data:Pe(Pe({},s),{},{photo:s.photo?"Photo included (".concat((s.photo.length/1024).toFixed(2)," KB)"):"NO PHOTO"})})),await Qa.mutateAsync(i),console.log("\u2705 Case and applicant created successfully")}catch(ja){var a,r,n,s,i,o,l,c,d;console.error("\u274c Failed to create applicant or case:",ja),console.error("\u274c Error response:",null===(a=ja.response)||void 0===a?void 0:a.data),console.error("\u274c Error details:",(null===(r=ja.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.details)||(null===(s=ja.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.error));const t=(null===(o=ja.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.error)||(null===(c=ja.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||ja.message||"Failed to create applicant or case";te(t),re("")}}}),className:"space-y-6",children:[(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Basic personal details of the applicant"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)(Ir,Pe(Pe({label:"ITS Number",required:!0,error:null===(c=ta.its_number)||void 0===c?void 0:c.message},Zt("its_number",{required:"ITS number is required",pattern:{value:/^[0-9]{8}$/,message:"ITS number must be exactly 8 digits"},minLength:{value:8,message:"ITS number must be exactly 8 digits"},maxLength:{value:8,message:"ITS number must be exactly 8 digits"}})),{},{placeholder:"Enter 8-digit ITS number",maxLength:8,onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const t=e.target.value.trim();t&&t.length>=3?Ga(t):ue("Please enter a valid ITS number (minimum 3 characters)")}}})),(0,er.jsx)("p",{className:"text-xs text-gray-500",children:"Data will be automatically fetched as you type (minimum 3 characters) or press Enter"}),me&&(0,er.jsxs)("div",{className:"text-sm text-blue-600 flex items-center",children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Fetching data from API..."]})]}),(0,er.jsx)(Ir,Pe(Pe({label:"Full Name",required:!0,error:null===(d=ta.full_name)||void 0===d?void 0:d.message},Zt("full_name",{required:"Full name is required",pattern:{value:/^[A-Za-z\s]+$/,message:"Full name can only contain alphabets and spaces"},minLength:{value:2,message:"Full name must be at least 2 characters"},maxLength:{value:250,message:"Full name must not exceed 250 characters"}})),{},{placeholder:"Enter full name (alphabets only)",maxLength:250})),(0,er.jsx)(Ir,Pe(Pe({label:"Age",type:"number",error:null===(u=ta.age)||void 0===u?void 0:u.message},Zt("age",{min:{value:0,message:"Age must be at least 0"},max:{value:999,message:"Age must be less than 1000"},validate:e=>!e||(isNaN(e)||e<0||e>999?"Please enter a valid age (0-999)":!(e.toString().length>3)||"Age must be maximum 3 digits")})),{},{placeholder:"Enter age (max 3 digits)",maxLength:3}))]}),be&&(0,er.jsxs)("div",{className:"mt-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo (from API)"}),(0,er.jsx)("img",{src:be,alt:"Applicant",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200"})]})]}),(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Demographics"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Gender and marital status information"})]}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,er.jsxs)(ln,Pe(Pe({label:"Gender",error:null===(m=ta.gender)||void 0===m?void 0:m.message},Zt("gender")),{},{children:[(0,er.jsx)(ln.Option,{value:"",children:"Select gender"}),(0,er.jsx)(ln.Option,{value:"male",children:"Male"}),(0,er.jsx)(ln.Option,{value:"female",children:"Female"})]}))})]}),(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Contact Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Phone and email contact details"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Phone",type:"tel",error:null===(h=ta.phone)||void 0===h?void 0:h.message},Zt("phone",{pattern:{value:/^[\+]?[1-9][\d]{0,15}$/,message:"Please enter a valid phone number"}})),{},{placeholder:"Enter phone number"})),(0,er.jsx)(Ir,Pe(Pe({label:"Email",type:"email",error:null===(p=ta.email)||void 0===p?void 0:p.message},Zt("email",{pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email address"},validate:e=>{if(!e)return!0;return!!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)||"Please enter a valid email address"}})),{},{placeholder:"Enter email address"}))]})]}),(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Address Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Complete address details"})]}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Address",error:null===(f=ta.address)||void 0===f?void 0:f.message},Zt("address")),{},{placeholder:"Enter full address"})),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Jamiat"},Zt("jamiat_name")),{},{readOnly:!0,className:"bg-gray-50",placeholder:"Will be filled from API"})),(0,er.jsx)(Ir,Pe(Pe({label:"Jamaat"},Zt("jamaat_name")),{},{readOnly:!0,className:"bg-gray-50",placeholder:"Will be filled from API"}))]})]})]}),(0,er.jsxs)("div",{className:"mb-8 border-t border-gray-200 pt-6",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Case Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Case details for the new applicant"})]}),(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)(ln,Pe(Pe({label:"Case Type",required:!0,error:null===(x=ta.case_type_id)||void 0===x?void 0:x.message},Zt("case_type_id",{required:"Please select a case type"})),{},{children:[(0,er.jsx)(ln.Option,{value:"",children:"Select case type"}),null===Aa||void 0===Aa?void 0:Aa.map(e=>(0,er.jsx)(ln.Option,{value:e.id,children:e.name},e.id))]}))}),(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Case Description",(0,er.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,er.jsx)("textarea",Pe(Pe({},Zt("description",{required:"Please provide a case description"})),{},{rows:4,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent ".concat(ta.description?"border-red-300 focus:ring-red-500":"border-gray-300"),placeholder:"Describe the case details, requirements, and any relevant information..."})),ta.description&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:ta.description.message})]}),(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),(0,er.jsx)("textarea",Pe(Pe({},Zt("notes")),{},{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Any additional notes or special instructions..."}))]})]}),ee&&(0,er.jsx)(Ur,{severity:"error",className:"mb-4",children:ee}),de&&(0,er.jsx)(Ur,{severity:"error",className:"mb-4",children:de}),ae&&(0,er.jsx)(Ur,{severity:"success",className:"mb-4",children:ae}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:Ka,disabled:Va.isLoading||Qa.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",loading:Va.isLoading||Qa.isLoading,disabled:Va.isLoading||Qa.isLoading,children:Va.isLoading||Qa.isLoading?"Creating Applicant & Case...":"Create Case"})]})})]})}),(0,er.jsxs)(xn,{isOpen:Ne,onClose:()=>{ke(!1),Te("")},title:"Approve Case",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Are you sure you want to approve this case? You can add optional comments below."}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments (Optional)"}),(0,er.jsx)("textarea",{value:ht,onChange:e=>pt(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:4,placeholder:"Add any comments about the approval..."})]})]}),(0,er.jsxs)(xn.Footer,{children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>ke(!1),disabled:ia.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"button",variant:"success",onClick:()=>{Re&&ia.mutate({caseId:Re,comments:ht})},loading:ia.isLoading,disabled:ia.isLoading,children:ia.isLoading?"Approving...":"Approve Case"})]})]}),(0,er.jsxs)(xn,{isOpen:Ae,onClose:()=>Le(!1),title:"Rework Case",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Please provide a reason for sending this case back for rework. This will help the assigned user understand what needs to be changed."}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rework Reason ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("textarea",{value:ht,onChange:e=>pt(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:4,placeholder:"Please explain why this case needs rework and what needs to be changed...",required:!0})]})]}),(0,er.jsxs)(xn.Footer,{children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>Le(!1),disabled:oa.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"button",variant:"danger",onClick:()=>{Re&&ht.trim()&&oa.mutate({caseId:Re,comments:ht})},loading:oa.isLoading,disabled:oa.isLoading||!ht.trim(),children:oa.isLoading?"Sending for Rework...":"Send for Rework"})]})]}),(0,er.jsxs)(xn,{isOpen:Oe,onClose:()=>{Ie(!1),De(null)},title:"Welfare Checklist",size:"xl",className:"max-w-6xl",children:[(0,er.jsx)("div",{className:"max-h-[70vh] overflow-y-auto",children:Re&&(e=>{const t=null===ba||void 0===ba||null===(e=ba.cases)||void 0===e?void 0:e.find(e=>e.id===Re),a=null===t||void 0===t?void 0:t.status_name;return(0,er.jsx)(yi,{caseId:Re,isViewOnly:!(P||E||F||"admin"===(null===v||void 0===v?void 0:v.role)||"super_admin"===(null===v||void 0===v?void 0:v.role)),caseStatus:a,onExposeSubmit:ze,onSuccess:()=>{wa(),b.invalidateQueries(["cases"])}})})()}),(0,er.jsxs)(xn.Footer,{children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>{Ie(!1),De(null),ze(null),b.invalidateQueries(["cases"])},children:"Close"}),(null===qe||void 0===qe?void 0:qe.canSubmit)&&(0,er.jsx)(Fr,{type:"button",variant:"success",onClick:()=>null===qe||void 0===qe?void 0:qe.submit(),loading:null===qe||void 0===qe?void 0:qe.isSubmitting,disabled:null===qe||void 0===qe?void 0:qe.isSubmitting,className:"bg-primary-600 hover:bg-primary-700 text-white",children:null!==qe&&void 0!==qe&&qe.isSubmitting?"Submitting...":"Submit Checklist"})]})]}),(0,er.jsxs)(xn,{isOpen:Be,onClose:()=>{Ue(!1),We(null),Qe(null)},title:"Cover Letter",size:"xl",className:"max-w-6xl",children:[(0,er.jsx)("div",{className:"max-h-[70vh] overflow-y-auto",children:He&&(e=>{const t=null===ba||void 0===ba||null===(e=ba.cases)||void 0===e?void 0:e.find(e=>e.id===He),a=!(null===t||void 0===t||!t.cover_letter_form_approved)&&"super_admin"!==(null===v||void 0===v?void 0:v.role);return(0,er.jsx)(Hc,{caseId:He,isViewOnly:a,onExposeSubmit:Qe,onSuccess:()=>{wa(),b.invalidateQueries(["cases"]),Ue(!1),We(null)}})})()}),(0,er.jsxs)(xn.Footer,{children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>{Ue(!1),We(null),Qe(null),b.invalidateQueries(["cases"])},children:"Close"}),(null===Ve||void 0===Ve?void 0:Ve.canSubmit)&&(0,er.jsx)(Fr,{type:"button",variant:"primary",onClick:()=>null===Ve||void 0===Ve?void 0:Ve.submit(),loading:null===Ve||void 0===Ve?void 0:Ve.isSubmitting,disabled:null===Ve||void 0===Ve?void 0:Ve.isSubmitting,className:"bg-primary-600 hover:bg-primary-700 text-white",children:null!==Ve&&void 0!==Ve&&Ve.isSubmitting?"Submitting...":"Submit"})]})]}),(0,er.jsxs)(xn,{isOpen:Ee,onClose:()=>Fe(!1),title:"Resubmit Case to Welfare Department",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("p",{className:"text-gray-600",children:"You are resubmitting this case to the welfare department after addressing their feedback. You can add comments about the changes made."}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments (Optional)"}),(0,er.jsx)("textarea",{value:ht,onChange:e=>pt(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:4,placeholder:"Describe the changes made to address the welfare department feedback..."})]})]}),(0,er.jsxs)(xn.Footer,{children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>Fe(!1),disabled:la.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"button",variant:"primary",onClick:()=>{Re&&la.mutate({caseId:Re,comments:ht})},loading:la.isLoading,disabled:la.isLoading,children:la.isLoading?"Resubmitting...":"Resubmit Case"})]})]}),(0,er.jsxs)(xn,{isOpen:Bt,onClose:()=>{Ut(!1),Qt("")},title:"Approve Case - ZI Review",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Are you sure you want to approve this case? You can add optional comments below."}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments (Optional)"}),(0,er.jsx)("textarea",{value:Vt,onChange:e=>Qt(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:4,placeholder:"Add any comments about the approval..."})]})]}),(0,er.jsxs)(xn.Footer,{children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>{Ut(!1),Qt("")},disabled:ma.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"button",variant:"success",onClick:()=>{Re&&ma.mutate({caseId:Re,comments:Vt})},loading:ma.isLoading,disabled:ma.isLoading,children:ma.isLoading?"Approving...":"Approve Case"})]})]}),(0,er.jsxs)(xn,{isOpen:Ht,onClose:()=>{Wt(!1),Qt("")},title:"Reject Case - ZI Review",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Please provide a reason for rejecting this case. This will be sent back to the welfare department for review."}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rejection Reason ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("textarea",{value:Vt,onChange:e=>Qt(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:4,placeholder:"Please explain why this case is being rejected and what needs to be changed...",required:!0})]})]}),(0,er.jsxs)(xn.Footer,{children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>{Wt(!1),Qt("")},disabled:ha.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"button",variant:"danger",onClick:()=>{Re&&Vt.trim()&&ha.mutate({caseId:Re,comments:Vt})},loading:ha.isLoading,disabled:ha.isLoading||!Vt.trim(),children:ha.isLoading?"Rejecting...":"Reject Case"})]})]}),(0,er.jsxs)(xn,{isOpen:Jt,onClose:()=>{Yt(!1),Xt(""),Kt(null)},title:"approve"===Gt?"Approve Case":"Reject Case",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("p",{className:"text-gray-600",children:"approve"===Gt?"Are you sure you want to approve this case? You can add optional comments below.":"Please provide a reason for rejecting this case. Comments are required."}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Comments ","reject"===Gt&&(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("textarea",{value:$t,onChange:e=>Xt(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:4,placeholder:"approve"===Gt?"Add any comments about the approval...":"Please explain why this case is being rejected...",required:"reject"===Gt})]})]}),(0,er.jsxs)(xn.Footer,{children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>{Yt(!1),Xt(""),Kt(null)},disabled:pa.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"button",variant:"approve"===Gt?"success":"danger",onClick:()=>{if(Re&&Gt){if("reject"===Gt&&!$t.trim())return void alert("Comments are required when rejecting a case");pa.mutate({caseId:Re,action:Gt,comments:$t})}},loading:pa.isLoading,disabled:pa.isLoading||"reject"===Gt&&!$t.trim(),children:pa.isLoading?"approve"===Gt?"Approving...":"Rejecting...":"approve"===Gt?"Approve Case":"Reject Case"})]})]}),(0,er.jsxs)(xn,{isOpen:vt,onClose:()=>{bt(!1),jt(null),Nt(""),St([]),At("")},title:"Close Case",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[Ct&&(0,er.jsxs)(Ur,{severity:"error",className:"border-2 border-red-500",role:"alert",children:[(0,er.jsx)("p",{className:"break-words whitespace-normal font-medium",children:Ct}),(0,er.jsx)("p",{className:"text-sm mt-1",children:"Check that you entered a reason and attached at least one document, then try again."})]}),(0,er.jsx)(Ur,{severity:"warning",children:(0,er.jsxs)("p",{className:"break-words whitespace-normal",children:["You are about to close case ",(0,er.jsx)("strong",{children:(null===_t||void 0===_t?void 0:_t.caseNumber)||""}),". This will change the case status to ",(0,er.jsx)("strong",{children:"Closed"}),"."]})}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Reason for Closure ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("textarea",{value:wt,onChange:e=>Nt(e.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 text-sm",placeholder:"Please provide a reason for closing this case..."})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Supporting Documents ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"At least one document required. PDF, DOC, DOCX, XLS, XLSX, JPG, PNG up to 10MB each (max 10 files)."}),(0,er.jsx)("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md hover:border-primary-400 transition-colors",children:(0,er.jsxs)("div",{className:"space-y-1 text-center",children:[(0,er.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,er.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,er.jsxs)("label",{className:"relative cursor-pointer rounded-md font-medium text-primary-600 hover:text-primary-500 focus-within:outline-none text-sm",children:[(0,er.jsx)("span",{children:"Upload files"}),(0,er.jsx)("input",{type:"file",className:"sr-only",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",multiple:!0,onChange:e=>{(e=>{if(!e||!e.length)return;const t=[];for(let a=0;a<e.length;a++)e[a].size>10485760?At('File "'.concat(e[a].name,'" is too large. Maximum size is 10MB.')):t.push(e[a]);t.length&&At(""),St(e=>[...e,...t].slice(0,10))})(e.target.files?Array.from(e.target.files):[]),e.target.value=""}})]})]})}),kt.length>0&&(0,er.jsx)("ul",{className:"mt-2 space-y-2",children:kt.map((e,t)=>(0,er.jsxs)("li",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-md",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2 min-w-0",children:[(0,er.jsx)("svg",{className:"w-5 h-5 text-gray-500 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),(0,er.jsx)("span",{className:"text-sm text-gray-700 truncate",children:e.name}),(0,er.jsxs)("span",{className:"text-xs text-gray-500 flex-shrink-0",children:["(",(e.size/1024).toFixed(1)," KB)"]})]}),(0,er.jsx)("button",{type:"button",onClick:()=>(e=>{St(t=>t.filter((t,a)=>a!==e)),At("")})(t),className:"text-red-500 hover:text-red-700 text-sm font-medium flex-shrink-0 ml-2",children:"Remove"})]},t))})]})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{bt(!1),jt(null),Nt(""),St([]),At("")},children:"Cancel"}),(0,er.jsx)(Fr,{variant:"danger",onClick:()=>{At(""),wt.trim()?kt.length?_t&&xa.mutate({caseId:_t.id,reason:wt,documents:kt}):At("At least one supporting document is required"):At("Please provide a reason for closure")},loading:xa.isLoading,disabled:!wt.trim()||0===kt.length,children:"Close Case"})]})})]}),(0,er.jsxs)(xn,{isOpen:Lt,onClose:()=>{Pt(!1),Ft(null)},title:"Case closure details",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[ya&&(0,er.jsx)("p",{className:"text-gray-500",children:"Loading..."}),(null===ga||void 0===ga?void 0:ga.closure)&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for closure"}),(0,er.jsx)("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:ga.closure.reason})]}),(0,er.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[(0,er.jsxs)("span",{children:["Closed by: ",(0,er.jsx)("strong",{children:ga.closure.closed_by_name})]}),(0,er.jsxs)("span",{children:["Date: ",(0,er.jsx)("strong",{children:ga.closure.created_at?new Date(ga.closure.created_at).toLocaleString():"\u2014"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supporting documents"}),ga.closure.documents&&ga.closure.documents.length>0?(0,er.jsx)("ul",{className:"space-y-2",children:ga.closure.documents.map(e=>(0,er.jsxs)("li",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-md",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700 truncate flex-1",children:e.file_name}),(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(async(e,t,a)=>{try{const r=await Za.get("/api/cases/".concat(e,"/closure/documents/").concat(t),{responseType:"blob"}),n=window.URL.createObjectURL(new Blob([r.data])),s=document.createElement("a");s.href=n,s.setAttribute("download",a||"document"),document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(n)}catch(Ki){var r,n;console.error("Download failed:",Ki),alert((null===Ki||void 0===Ki||null===(r=Ki.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||"Failed to download document")}})(Et,e.id,e.file_name),className:"ml-2 flex-shrink-0",children:"Download"})]},e.id))}):(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"No documents on file."})]})]}),!ya&&!(null!==ga&&void 0!==ga&&ga.closure)&&(0,er.jsx)("p",{className:"text-gray-500",children:"No closure record found."})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{Pt(!1),Ft(null)},children:"Close"})})]}),(0,er.jsxs)(xn,{isOpen:Ot,onClose:()=>It(!1),title:"Approve Case - Executive Management",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Are you sure you want to approve this case? You can add optional comments below."}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments (Optional)"}),(0,er.jsx)("textarea",{value:qt,onChange:e=>zt(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:4,placeholder:"Add any comments about the approval..."})]})]}),(0,er.jsxs)(xn.Footer,{children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>It(!1),disabled:ca.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"button",variant:"success",onClick:()=>{Re&&ca.mutate({caseId:Re,comments:qt})},loading:ca.isLoading,disabled:ca.isLoading,children:ca.isLoading?"Approving...":"Approve Case"})]})]}),(0,er.jsxs)(xn,{isOpen:Rt,onClose:()=>Dt(!1),title:"Send Case for Rework - Executive Management",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Please provide a reason for sending this case back for rework. This will be forwarded to the welfare department for review."}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Rework Reason ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("textarea",{value:qt,onChange:e=>zt(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:4,placeholder:"Please explain why this case needs rework and what needs to be changed...",required:!0})]})]}),(0,er.jsxs)(xn.Footer,{children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>Dt(!1),disabled:da.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"button",variant:"danger",onClick:()=>{Re&&qt.trim()&&da.mutate({caseId:Re,comments:qt})},loading:da.isLoading,disabled:da.isLoading||!qt.trim(),children:da.isLoading?"Sending for Rework...":"Send for Rework"})]})]}),(0,er.jsxs)(xn,{isOpen:Mt,onClose:()=>Tt(!1),title:"Forward Rework to DCM - Welfare Department",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("p",{className:"text-gray-600",children:"Please review the executive feedback and provide your consolidated comments to forward to the DCM for rework."}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Consolidated Comments ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("textarea",{value:ht,onChange:e=>pt(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:4,placeholder:"Provide consolidated feedback for the DCM based on executive comments...",required:!0})]})]}),(0,er.jsxs)(xn.Footer,{children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>Tt(!1),disabled:ua.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"button",variant:"warning",onClick:()=>{Re&&ht.trim()&&ua.mutate({caseId:Re,comments:ht})},loading:ua.isLoading,disabled:ua.isLoading||!ht.trim(),children:ua.isLoading?"Forwarding...":"Forward to DCM"})]})]}),(0,er.jsxs)(xn,{isOpen:Je,onClose:()=>{Ye(!1),Ke("assign"),Xe(null),et(""),at("")},title:"reassign"===Ge?"Reassign":"Assign Case",size:"xl",children:[(0,er.jsxs)("div",{className:"space-y-4 min-h-[32rem]",children:[(0,er.jsxs)(ln,{label:"Role",value:Ze,onChange:e=>{et(e.target.value),at("")},required:!0,children:[(0,er.jsx)(ln.Option,{value:"",children:"Select Role"}),null===Pa||void 0===Pa?void 0:Pa.filter(e=>e.is_active).map(e=>(0,er.jsx)(ln.Option,{value:e.name,children:e.name},e.id))]}),(0,er.jsx)(mn,{label:"Assign To",value:tt,onChange:e=>at(e),placeholder:"Unassigned",required:!0,disabled:!Ze,options:[{value:"",label:"Unassigned"},...(La||[]).map(e=>({value:e.id,label:e.its_number?"".concat(e.full_name||e.username," - (").concat(e.its_number,")"):e.full_name||e.username})).sort((e,t)=>{const a=(e.label||"").toLowerCase(),r=(t.label||"").toLowerCase();return a.localeCompare(r)})]}),(0,er.jsx)(Ur,{severity:"info",children:"reassign"===Ge?'Select a new assignee. The case status will remain "Assigned".':'Assigning a user will automatically change the case status to "Assigned" when both role and user are selected.'})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{Ye(!1),Ke("assign"),Xe(null),et(""),at("")},children:"Cancel"}),(0,er.jsx)(Fr,{onClick:()=>{tt&&$e&&Ra.mutate({caseId:$e,assigned_roles:tt,isReassign:"reassign"===Ge})},loading:Ra.isLoading,disabled:!Ze||!tt||Ra.isLoading,children:"reassign"===Ge?"Reassign":"Assign Case"})]})})]}),(0,er.jsxs)(xn,{isOpen:rt,onClose:()=>{Da.reset(),nt(!1),lt(null),dt("")},title:"reassign"===st?"Reassign Counselor":"Assign Counselor",size:"xl",children:[(0,er.jsxs)("div",{className:"space-y-4 min-h-[32rem]",children:[(0,er.jsx)(mn,{label:"Select Counselor",value:ct,onChange:e=>dt(e),placeholder:"Unassigned",required:!0,options:[{value:"unassign",label:"Unassign Counselor"},...(Ea||[]).map(e=>({value:e.id,label:e.its_number?"".concat(e.full_name||e.username," - (").concat(e.its_number,")"):(e.full_name||e.username)+(e.email?" (".concat(e.email,")"):"")})).sort((e,t)=>(e.label||"").toLowerCase().localeCompare((t.label||"").toLowerCase()))]}),(0,er.jsx)(Ur,{severity:"info",children:"Select a counselor from the available list. Counselors are filtered by the case's location (Jamiat/Jamaat)."}),Ea&&0===Ea.length&&(0,er.jsx)(Ur,{severity:"warning",children:(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)("p",{className:"font-semibold",children:"No counselors available for this case."}),(0,er.jsx)("p",{className:"text-sm",children:"Possible reasons:"}),(0,er.jsxs)("ul",{className:"text-sm list-disc list-inside space-y-1 ml-2",children:[(0,er.jsx)("li",{children:"No counselors are assigned to the Counselor workflow stage"}),(0,er.jsx)("li",{children:"No counselors match this case's location (Jamiat/Jamaat)"}),(0,er.jsx)("li",{children:"The case doesn't have a Jamiat/Jamaat assigned"})]}),(0,er.jsxs)("p",{className:"text-sm mt-2",children:[(0,er.jsx)("strong",{children:"To fix:"})," Go to Workflow Stages \u2192 Counselor Stage \u2192 Users button, and add counselors there."]})]})})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{Da.reset(),nt(!1),lt(null),dt("")},children:"Cancel"}),(0,er.jsx)(Fr,{onClick:()=>{ct&&ot&&Da.mutate({caseId:ot,assigned_counselor_id:"unassign"===ct?null:ct})},loading:Da.isLoading,disabled:!ct||Da.isLoading||Da.isSuccess,children:Da.isLoading?"Assigning...":"unassign"===ct?"Unassign":"reassign"===st?"Reassign Counselor":"Assign Counselor"})]})})]})]})},$c=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Xc=e=>{var t,a;let{caseId:n,canEdit:s,canView:i}=e;const{user:o}=ar(),l=(0,Ce.useQueryClient)(),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),{data:f}=(0,Ce.useQuery)(["counseling-form-stage-permissions",n],()=>Za.get("/api/counseling-forms/case/".concat(n)).then(e=>e.data),{enabled:!!n,retry:!1,onError:()=>{}}),x=null===f||void 0===f||null===(t=f.stage_permissions)||void 0===t?void 0:t.manzoori,g=!0===(null===x||void 0===x?void 0:x.can_update),y=!0===(null===x||void 0===x?void 0:x.can_read),v=s||g||!1,b=!0===i||y||!1,{data:_,isLoading:j,refetch:w}=(0,Ce.useQuery)(["case-attachments",n],()=>Za.get("/api/attachments/case/".concat(n)).then(e=>e.data),{enabled:!!n&&b,retry:!1});if(!b)return null;const N=(null===_||void 0===_||null===(a=_.attachments)||void 0===a?void 0:a.filter(e=>"manzoori"===e.stage))||[],k=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},S=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(t){return"Invalid Date"}};return(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Manzoori Upload"}),v&&(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"file",id:"manzoori-file-input",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",onChange:async e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;if(!["application/pdf","image/jpeg","image/jpg","image/png","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(a.type))return void m("Invalid file type. Only PDF, DOC, DOCX, XLS, XLSX, JPG, and PNG files are allowed.");if(a.size>10485760)m("File size exceeds maximum allowed size of 10MB.");else{d(!0),m(""),p("");try{const t=new FormData;t.append("file",a),t.append("stage","manzoori"),await Za.post("/api/attachments/upload/".concat(n),t,{headers:{"Content-Type":"multipart/form-data"}}),p("File uploaded successfully!"),l.invalidateQueries(["case-attachments",n]),l.invalidateQueries(["case",n]),setTimeout(()=>p(""),3e3),e.target.value=""}catch(i){var r,s;console.error("Upload error:",i),m((null===(r=i.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.error)||i.message||"Failed to upload file. Please try again.")}finally{d(!1)}}},disabled:c,className:"hidden"}),(0,er.jsxs)(Fr,{variant:"primary",size:"sm",onClick:()=>{var e;return null===(e=document.getElementById("manzoori-file-input"))||void 0===e?void 0:e.click()},disabled:c,loading:c,className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,er.jsx)("span",{children:c?"Uploading...":"Upload File"})]})]})]})}),(0,er.jsxs)(zr.Content,{children:[u&&(0,er.jsx)(Ur,{severity:"error",className:"mb-4",onClose:()=>m(""),children:u}),h&&(0,er.jsx)(Ur,{severity:"success",className:"mb-4",onClose:()=>p(""),children:h}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Upload the manzoori document received for this case. Only authorized users can upload files."}),j?(0,er.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"})}):N.length>0?(0,er.jsx)("div",{className:"space-y-3",children:N.map(e=>(0,er.jsxs)("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[(0,er.jsx)("div",{className:"flex-shrink-0",children:(0,er.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,er.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.file_name}),(0,er.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500 mt-1",children:[(0,er.jsx)("span",{children:k(e.file_size)}),(0,er.jsxs)("span",{children:["Uploaded by ",e.uploaded_by_name||e.uploaded_by_full_name||"Unknown"]}),(0,er.jsx)("span",{children:S(e.created_at)})]})]})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>{window.open("/api/attachments/download/".concat(e.id),"_blank")},className:"flex items-center space-x-1",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),(0,er.jsx)("span",{children:"Download"})]}),v&&(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this file?"))try{await Za.delete("/api/attachments/".concat(e)),l.invalidateQueries(["case-attachments",n]),l.invalidateQueries(["case",n]),p("File deleted successfully!"),setTimeout(()=>p(""),3e3)}catch(r){var t,a;console.error("Delete error:",r),m((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||r.message||"Failed to delete file. Please try again.")}})(e.id),className:"flex items-center space-x-1 text-red-600 hover:text-red-700",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,er.jsx)("span",{children:"Delete"})]})]})]},e.id))}):(0,er.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,er.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,er.jsx)("p",{className:"text-sm",children:"No manzoori files uploaded yet"}),!v&&(0,er.jsx)("p",{className:"text-xs mt-1",children:"You don't have permission to upload files"})]})]})]})},Zc=e=>{var t;let{caseId:a}=e;const{user:n}=ar(),[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)("general"),c=(0,Ce.useQueryClient)(),{data:d,isLoading:u}=(0,Ce.useQuery)(["case-comments",a],()=>Za.get("/api/cases/".concat(a,"/comments")).then(e=>e.data),{enabled:!!a}),m=(0,Ce.useMutation)(e=>{let{comment:t,comment_type:r}=e;return Za.post("/api/cases/".concat(a,"/comments"),{comment:t,comment_type:r})},{onSuccess:()=>{c.invalidateQueries(["case-comments",a]),i(""),l("general")}}),h=e=>{switch(e){case"approval":return"success";case"rework":return"error";case"note":return"info";default:return"default"}};return(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"border rounded-lg p-4 bg-gray-50",children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Add Comment"}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,er.jsx)("option",{value:"general",children:"General Comment"}),(0,er.jsx)("option",{value:"note",children:"Note"}),(0,er.jsx)("option",{value:"approval",children:"Approval"}),(0,er.jsx)("option",{value:"rework",children:"Rework"})]}),(0,er.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),placeholder:"Add your comment...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:3}),(0,er.jsx)(Fr,{onClick:()=>{s.trim()&&m.mutate({comment:s.trim(),comment_type:o})},disabled:!s.trim()||m.isLoading,loading:m.isLoading,size:"sm",children:"Add Comment"})]})]}),(0,er.jsx)("div",{className:"space-y-3",children:u?(0,er.jsx)("div",{className:"text-center py-4 text-gray-500",children:"Loading comments..."}):(null===d||void 0===d||null===(t=d.comments)||void 0===t?void 0:t.length)>0?d.comments.map(e=>(0,er.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,er.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsxs)("span",{className:"font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),(0,er.jsx)(pn,{variant:h(e.comment_type),size:"sm",children:e.comment_type})]}),(0,er.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleString()})]}),(0,er.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:e.comment})]},e.id)):(0,er.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No comments yet"})})]})},ed=()=>{var e,t,a,n,s;const{caseId:i}=ee(),o=Z(),{user:l}=ar(),c=(0,Ce.useQueryClient)(),{hasPermission:d}=Cr("welfare_checklist","view"),{hasPermission:u}=Cr("welfare_checklist","create"),{hasPermission:m}=Cr("welfare_checklist","update"),{hasPermission:h}=Cr("cases","assign_case"),{hasPermission:p}=Cr("cases","assign_counselor"),{hasPermission:f}=Cr("cases","change_assignee"),{hasPermission:x}=Cr("payment_management","read"),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)("assign"),[_,j]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),[k,S]=(0,r.useState)(!1),[C,A]=(0,r.useState)("assign"),[L,P]=(0,r.useState)(""),{data:E,isLoading:F,error:O}=(0,Ce.useQuery)(["case",i],()=>Za.get("/api/cases/".concat(i)).then(e=>e.data),{enabled:!!i,refetchOnMount:!0}),{data:I}=(0,Ce.useQuery)(["case-closure",i],()=>Za.get("/api/cases/".concat(i,"/closure")).then(e=>e.data),{enabled:!!i&&"closed"===(null===E||void 0===E||null===(e=E.case)||void 0===e?void 0:e.status_name)}),{data:R}=(0,Ce.useQuery)(["users",_],()=>{const e={};return _&&(e.role=_),e.is_active="true",e.limit=500,e.page=1,Za.get("/api/users",{params:e}).then(e=>e.data)},{select:e=>e.users||[],enabled:!!_}),{data:D}=(0,Ce.useQuery)(["available-counselors",i],()=>{const e={};return i&&(e.caseId=i),Za.get("/api/cases/available-counselors",{params:e}).then(e=>e.data)},{select:e=>e.counselors||[],enabled:!!i&&k}),{data:M}=(0,Ce.useQuery)("roles",()=>Za.get("/api/users/roles").then(e=>e.data),{select:e=>e.roles||[]}),T=(0,Ce.useMutation)(e=>{let{caseId:t,assigned_roles:a,assigned_counselor_id:r}=e;const n={assigned_roles:a};return void 0!==r&&(n.assigned_counselor_id=r),Za.put("/api/cases/".concat(t),n)},{onSuccess:()=>{c.invalidateQueries(["case",i]),y(!1),b("assign"),j(""),N("")}}),q=(0,Ce.useMutation)(e=>{let{caseId:t,assigned_counselor_id:a}=e;return Za.put("/api/cases/".concat(t),{assigned_counselor_id:a})},{onSuccess:()=>{c.invalidateQueries(["case",i]),c.invalidateQueries(["available-counselors",i]),S(!1),P("")},onError:e=>{console.error("Assign counselor error:",e)}}),z=e=>{if(!e)return"N/A";let t;try{if("string"===typeof e)if(e.includes("T"))t=(e.includes("Z")||e.match(/[+-]\d{2}:\d{2}$/),new Date(e));else{const a=e.replace(" ","T");t=new Date(a)}else t=new Date(e);if(isNaN(t.getTime()))return console.error("Invalid date string:",e),"Invalid Date";const a=t.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),r=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return"".concat(a," at ").concat(r)}catch(O){return console.error("Error parsing date:",e,O),"Invalid Date"}};if(F)return(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})});if(O)return(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)(Ur,{severity:"error",children:["Error loading case: ",O.message]})});if(null===E||void 0===E||!E.case)return(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)(Ur,{severity:"error",children:"Case not found"})});const B=E.case,U=!(null!==B&&void 0!==B&&B.roles)||!(null!==B&&void 0!==B&&B.assigned_counselor_id);return(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsxs)(Fr,{variant:"outline",onClick:()=>o("/cases?search=".concat(encodeURIComponent(B.case_number||""))),className:"flex items-center space-x-2",children:[(0,er.jsx)($c,{}),(0,er.jsx)("span",{children:"Back to Cases"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Case ",B.case_number]}),(0,er.jsxs)("p",{className:"text-gray-600",children:["Created on ",z(B.created_at)]})]})]}),(0,er.jsx)("div",{className:"flex items-center space-x-3",children:(0,er.jsx)(pn,{variant:(H=B.status_name,{draft:"default",assigned:"info",in_counseling:"warning",cover_letter_generated:"primary",submitted_to_welfare:"secondary",welfare_approved:"success",welfare_rejected:"error",executive_approved:"success",executive_rejected:"error",finance_disbursement:"success",completed:"success",closed:"default"}[H]||"default"),children:(e=>e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()))(B.status_name)})})]})}),(0,er.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,er.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Case Information"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Case Type"}),(0,er.jsx)("p",{className:"text-sm text-gray-900",children:B.case_type_name||"N/A"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Assigned To"}),(0,er.jsxs)("div",{className:"flex items-center space-x-2 flex-wrap gap-2",children:[(0,er.jsx)("p",{className:"text-sm text-gray-900",children:B.dcm_full_name||B.counselor_full_name||"Unassigned"}),(h||p||f)&&"closed"!==B.status_name&&(0,er.jsxs)(er.Fragment,{children:[h&&U&&(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>{b("assign"),y(!0)},children:"Assign Case"}),f&&(null===B||void 0===B?void 0:B.roles)&&(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{b("reassign"),y(!0)},children:"Change assignee"}),p&&!(null!==B&&void 0!==B&&B.assigned_counselor_id)&&(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{A("assign"),S(!0),P("")},children:"Assign Counselor"}),f&&(null===B||void 0===B?void 0:B.assigned_counselor_id)&&(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{A("reassign"),S(!0),P(B.assigned_counselor_id||"")},children:"Change Counselor"})]})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Last Updated"}),(0,er.jsx)("p",{className:"text-sm text-gray-900",children:z(B.updated_at)})]})]})})]}),"closed"===B.status_name&&(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Closure details"})}),(0,er.jsx)(zr.Content,{children:null!==I&&void 0!==I&&I.closure?(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Reason for closure"}),(0,er.jsx)("p",{className:"text-sm text-gray-800 whitespace-pre-wrap",children:I.closure.reason})]}),(0,er.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[(0,er.jsxs)("span",{children:["Closed by: ",(0,er.jsx)("strong",{children:I.closure.closed_by_name})]}),(0,er.jsxs)("span",{children:["Date: ",(0,er.jsx)("strong",{children:I.closure.created_at?new Date(I.closure.created_at).toLocaleString():"\u2014"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-2",children:"Supporting documents"}),I.closure.documents&&I.closure.documents.length>0?(0,er.jsx)("ul",{className:"space-y-2",children:I.closure.documents.map(e=>(0,er.jsxs)("li",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-md",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700 truncate flex-1",children:e.file_name}),(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(async(e,t)=>{try{const a=await Za.get("/api/cases/".concat(i,"/closure/documents/").concat(e),{responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=r,n.setAttribute("download",t||"document"),document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(r)}catch(Ki){var a,r;console.error("Download failed:",Ki),alert((null===Ki||void 0===Ki||null===(a=Ki.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||"Failed to download document")}})(e.id,e.file_name),className:"ml-2 flex-shrink-0",children:"Download"})]},e.id))}):(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"No documents on file."})]})]}):(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"Loading closure details..."})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Description"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:B.description||"No description provided"})})]}),B.notes&&(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notes"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("p",{className:"text-gray-700 whitespace-pre-wrap",children:B.notes})})]}),d&&("submitted_to_welfare"===B.status_name||"welfare_approved"===B.status_name||(null===(t=B.status_name)||void 0===t?void 0:t.startsWith("submitted_to_executive"))||"executive_approved"===B.status_name||"executive_rejected"===B.status_name||"finance_disbursement"===B.status_name)&&(0,er.jsx)(yi,{caseId:i,isViewOnly:"submitted_to_welfare"!==B.status_name||!(u||m||"admin"===(null===l||void 0===l?void 0:l.role)||"super_admin"===(null===l||void 0===l?void 0:l.role))}),("finance_disbursement"===B.status_name||"Finance Disbursement"===B.current_workflow_stage_name)&&x&&(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Schedule"}),(0,er.jsx)(Fr,{variant:"primary",onClick:()=>o("/cases/".concat(i,"/payment-schedule")),children:"Manage Payment Schedule"})]})}),(0,er.jsxs)(zr.Content,{children:[(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Manage Qardan Hasana and Enayat payment schedules, including disbursements and repayment plans."}),(0,er.jsx)(Fr,{variant:"outline",onClick:()=>o("/cases/".concat(i,"/payment-schedule")),className:"w-full",children:"Open Payment Schedule \u2192"})]})]}),"Manzoori"===B.current_workflow_stage_name&&!(null!==(a=B.status_name)&&void 0!==a&&a.includes("approved"))&&"finance_disbursement"!==B.status_name&&(0,er.jsx)(Xc,{caseId:i,canEdit:(null===(n=B.workflowPermissions)||void 0===n?void 0:n.can_edit)||!1,canView:!1!==(null===(s=B.workflowPermissions)||void 0===s?void 0:s.can_view)}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Comments & Feedback"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)(Zc,{caseId:i})})]})]}),(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Applicant"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex items-start gap-4",children:[(0,er.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Name"}),(0,er.jsx)("p",{className:"text-sm text-gray-900",children:B.full_name||"".concat(B.first_name||""," ").concat(B.last_name||"").trim()||"N/A"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email"}),(0,er.jsx)("p",{className:"text-sm text-gray-900",children:B.email||"N/A"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Phone"}),(0,er.jsx)("p",{className:"text-sm text-gray-900",children:B.phone||"N/A"})]})]}),B.photo&&(0,er.jsx)("div",{className:"flex-shrink-0",children:(0,er.jsx)("img",{src:B.photo,alt:B.full_name||"".concat(B.first_name," ").concat(B.last_name),className:"w-32 h-40 rounded object-cover border-2 border-gray-200"})})]}),(0,er.jsx)(Fr,{variant:"outline",onClick:()=>o("/applicants/".concat(B.applicant_id)),className:"w-full",children:"View Applicant Details"})]})})]}),B.assigned_counselor_id&&B.counselor_full_name&&(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Counselor"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("div",{className:"space-y-4",children:(0,er.jsxs)("div",{className:"flex items-start gap-4",children:[(0,er.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Name"}),(0,er.jsx)("p",{className:"text-sm text-gray-900",children:B.counselor_full_name})]}),B.counselor_email&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Email"}),(0,er.jsx)("p",{className:"text-sm text-gray-900",children:B.counselor_email})]}),B.counselor_phone&&(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Mobile Number"}),(0,er.jsx)("p",{className:"text-sm text-gray-900",children:B.counselor_phone})]})]}),B.counselor_photo&&(0,er.jsx)("div",{className:"flex-shrink-0",children:(0,er.jsx)("img",{src:B.counselor_photo,alt:B.counselor_full_name,className:"w-32 h-40 rounded object-cover border-2 border-gray-200"})})]})})})]}),(0,er.jsxs)(zr,{children:[(0,er.jsx)(zr.Header,{children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Timeline"})}),(0,er.jsx)(zr.Content,{children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,er.jsx)("div",{className:"w-2 h-2 bg-primary-600 rounded-full mt-2"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Case Created"}),(0,er.jsx)("p",{className:"text-xs text-gray-500",children:z(B.created_at)})]})]}),B.assigned_at&&(0,er.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,er.jsx)("div",{className:"w-2 h-2 bg-blue-600 rounded-full mt-2"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Case Assigned"}),(0,er.jsx)("p",{className:"text-xs text-gray-500",children:z(B.assigned_at)})]})]}),(0,er.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,er.jsx)("div",{className:"w-2 h-2 bg-green-600 rounded-full mt-2"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Last Updated"}),(0,er.jsx)("p",{className:"text-xs text-gray-500",children:z(B.updated_at)})]})]})]})})]})]})]}),(0,er.jsxs)(xn,{isOpen:g,onClose:()=>{y(!1),b("assign"),j(""),N("")},title:"reassign"===v?"Reassign":"Assign Case",size:"xl",children:[(0,er.jsxs)("div",{className:"space-y-4 min-h-[32rem]",children:[(0,er.jsxs)(ln,{label:"Role",value:_,onChange:e=>{j(e.target.value),N("")},required:!0,children:[(0,er.jsx)(ln.Option,{value:"",children:"Select Role"}),null===M||void 0===M?void 0:M.map(e=>(0,er.jsx)(ln.Option,{value:e.name,children:e.name},e.id))]}),(0,er.jsx)(mn,{label:"Assign To",value:w,onChange:e=>N(e),placeholder:_?"Search or select user...":"Select Role first",required:!0,disabled:!_,options:[{value:"",label:_?"Select user":"Select Role first"},...(R||[]).map(e=>({value:e.id,label:e.its_number?"".concat(e.full_name||e.username," (").concat(e.its_number,")"):"".concat(e.full_name||e.username).concat(e.email?" (".concat(e.email,")"):"")})).sort((e,t)=>(e.label||"").toLowerCase().localeCompare((t.label||"").toLowerCase()))]}),(0,er.jsx)(Ur,{severity:"info",children:"reassign"===v?'Select a new assignee. The case status will remain "Assigned".':'Assigning a user will automatically change the case status to "Assigned" when both role and user are selected.'})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{y(!1),b("assign"),j(""),N("")},children:"Cancel"}),(0,er.jsx)(Fr,{onClick:()=>{_&&w&&T.mutate({caseId:i,assigned_roles:w,assigned_counselor_id:"reassign"===v?void 0:null})},loading:T.isLoading,disabled:!_||!w||T.isLoading,children:"reassign"===v?"Reassign":"Assign Case"})]})})]}),(0,er.jsxs)(xn,{isOpen:k,onClose:()=>{S(!1),P("")},title:"reassign"===C?"Reassign Counselor":"Assign Counselor",size:"xl",children:[(0,er.jsxs)("div",{className:"space-y-4 min-h-[32rem]",children:[(0,er.jsx)(mn,{label:"Select Counselor",value:L,onChange:e=>P(e),placeholder:"Unassigned",required:!0,options:[{value:"unassign",label:"Unassign Counselor"},...(D||[]).map(e=>({value:e.id,label:e.its_number?"".concat(e.full_name||e.username," - (").concat(e.its_number,")"):(e.full_name||e.username)+(e.email?" (".concat(e.email,")"):"")})).sort((e,t)=>(e.label||"").toLowerCase().localeCompare((t.label||"").toLowerCase()))]}),(0,er.jsx)(Ur,{severity:"info",children:"Select a counselor from the available list. Counselors are filtered by the case's location (Jamiat/Jamaat)."}),D&&0===D.length&&(0,er.jsx)(Ur,{severity:"warning",children:"No counselors available for this case. Make sure counselors are assigned to the Counselor workflow stage."})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{S(!1),P("")},children:"Cancel"}),(0,er.jsx)(Fr,{onClick:()=>{L&&i&&q.mutate({caseId:i,assigned_counselor_id:"unassign"===L?null:L})},loading:q.isLoading,disabled:!L||q.isLoading,children:"unassign"===L?"Unassign":"reassign"===C?"Reassign Counselor":"Assign Counselor"})]})})]})]});var H},td=()=>{var e,t,a,n,s,i,o,l,c,d,u,m,h,p,f,x;const g=Z(),y=(0,Ce.useQueryClient)(),[v,b]=(0,r.useState)(""),[_,j]=(0,r.useState)(1),[w,N]=(0,r.useState)(20),[k,S]=(0,r.useState)(!1),[C,A]=(0,r.useState)(""),[L,P]=(0,r.useState)(""),[E,F]=(0,r.useState)(""),[O,I]=(0,r.useState)(""),[R,D]=(0,r.useState)(!1),[M,T]=(0,r.useState)(null),[q,z]=(0,r.useState)(null),[B,U]=(0,r.useState)(null),[H,W]=(0,r.useState)(!1),[V,Q]=(0,r.useState)(null),[J,Y]=(0,r.useState)(""),[G,K]=(0,r.useState)(""),[$,X]=(0,r.useState)(""),[ee,te]=(0,r.useState)(""),[ae,re]=(0,r.useState)(!1),[ne,se]=(0,r.useState)(null),[ie,oe]=(0,r.useState)(null),[le,ce]=(0,r.useState)(null),[de,ue]=(0,r.useState)(null),[me,he]=(0,r.useState)(!1),[pe,fe]=(0,r.useState)(null),[xe,ge]=(0,r.useState)(null),[ye,ve]=(0,r.useState)(!1),[be,_e]=(0,r.useState)(null),[je,we]=(0,r.useState)(""),[Ne,ke]=(0,r.useState)(""),[Se,Ae]=(0,r.useState)(!1),[Le,Ee]=(0,r.useState)(null),[Fe,Oe]=(0,r.useState)(""),[Ie,Re]=(0,r.useState)(!1),[De,Me]=(0,r.useState)(null),[Te,qe]=(0,r.useState)(""),[ze,Be]=(0,r.useState)(0),[Ue,He]=(0,r.useState)(null),[We,Ve]=(0,r.useState)(!1),[Qe,Je]=(0,r.useState)(null),[Ye,Ge]=(0,r.useState)(""),{register:Ke,handleSubmit:$e,formState:{errors:Xe},reset:Ze,watch:et,setValue:tt,trigger:at}=xi(),{register:rt,handleSubmit:nt,formState:{errors:st},reset:it,watch:ot,setValue:lt,getValues:ct}=xi(),dt=et("its_number"),[ut,mt]=(0,r.useState)(""),ht=ot("its_number"),[pt,ft]=(0,r.useState)("");(0,r.useEffect)(()=>{if(dt&&dt!==ut&&dt.length>=3){const e=setTimeout(()=>{Ot(dt)},500);return mt(dt),()=>clearTimeout(e)}},[dt,ut]),(0,r.useEffect)(()=>{if(ht&&ht!==pt&&ht.length>=3){const e=setTimeout(()=>{Rt(ht)},500);return ft(ht),()=>clearTimeout(e)}},[ht,pt]);const{data:xt,isLoading:gt,error:yt,refetch:vt}=(0,Ce.useQuery)(["applicants",_,v,w],()=>Za.get("/api/applicants",{params:Pe({page:_,limit:w},v&&{search:v})}).then(e=>e.data),{keepPreviousData:!0}),{data:bt}=(0,Ce.useQuery)("jamiat",()=>Za.get("/api/jamiat").then(e=>e.data),{select:e=>e.jamiat||[]});(0,r.useEffect)(()=>{E&&tt("jamaat_id","")},[E,tt]),(0,r.useEffect)(()=>{$&&V&&$!==V.jamiat_id&&lt("jamaat_id","")},[$,lt,V]);const{data:_t,isLoading:jt,error:wt}=(0,Ce.useQuery)(["jamaat",E],()=>Za.get("/api/jamaat",{params:E?{jamiat_id:E}:{}}).then(e=>e.data),{select:e=>e.jamaat||[],enabled:!!E}),{data:Nt,isLoading:kt,error:St}=(0,Ce.useQuery)(["jamaat",$],()=>Za.get("/api/jamaat",{params:$?{jamiat_id:$}:{}}).then(e=>e.data),{select:e=>e.jamaat||[],enabled:!!$}),{data:Ct}=(0,Ce.useQuery)("caseTypes",()=>Za.get("/api/case-types").then(e=>e.data),{select:e=>e.caseTypes||[]});(0,r.useEffect)(()=>{if(Nt&&V&&V.jamaat_id){Nt.some(e=>e.id===V.jamaat_id)&&lt("jamaat_id",V.jamaat_id)}},[Nt,V,lt]),(0,r.useEffect)(()=>{_t&&M&&(tt("jamaat_id",M),T(null))},[_t,M,tt]),(0,r.useEffect)(()=>{Nt&&ne&&(lt("jamaat_id",ne),se(null))},[Nt,ne,lt]);const At=(0,Ce.useMutation)(e=>Za.post("/api/applicants",e),{onError:e=>{var t,a;A((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to create applicant"),P("")}}),Lt=(0,Ce.useMutation)(e=>Za.post("/api/cases",e),{onSuccess:e=>{P("Applicant and case created successfully!"),A(""),Ze(),fe(null),S(!1),vt();const t=e.data.caseId;t&&setTimeout(()=>{g("/cases/".concat(t))},1500)},onError:e=>{var t,a,r,n;A((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||(null===(r=e.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.message)||"Failed to create case"),P("")}}),Pt=(0,Ce.useMutation)(e=>{let{applicantId:t,applicantData:a}=e;return Za.put("/api/applicants/".concat(t),a)},{onSuccess:e=>{K("Applicant updated successfully!"),Y(""),it(),W(!1),Q(null),vt()},onError:e=>{var t,a;Y((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to update applicant"),K("")}}),Et=(0,Ce.useMutation)(e=>Za.delete("/api/applicants/".concat(e)),{onSuccess:()=>{ve(!1),_e(null),we(""),vt()},onError:e=>{var t,a;we((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to delete applicant")}});(0,r.useEffect)(()=>{j(1)},[v,w]);const Ft=()=>{S(!0)},Ot=async e=>{if(e&&""!==e.trim()){D(!0),I("");try{const t=(await Za.get("/api/applicants/fetch-from-api/".concat(e))).data.data;console.log("\ud83d\udd0d API Response for ITS",e,":",t),console.log("\ud83d\udcf8 Photo data received:",t.photo?"YES (".concat((t.photo.length/1024).toFixed(2)," KB)"):"NO"),t.full_name&&tt("full_name",t.full_name),t.age&&tt("age",t.age),t.gender&&tt("gender",t.gender),t.phone&&tt("phone",t.phone),t.email&&tt("email",t.email),t.photo?(console.log("\u2705 Setting photo in form and preview"),tt("photo",t.photo),fe(t.photo)):(console.log("\u26a0\ufe0f No photo data available from API"),tt("photo",null),fe(null)),t.address&&tt("address",t.address),t.jamiat_name&&tt("jamiat_name",t.jamiat_name),t.jamaat_name&&tt("jamaat_name",t.jamaat_name),t.jamiat_id&&z(t.jamiat_id),t.jamaat_id&&U(t.jamaat_id),P("Data fetched successfully from external API!"),A("")}catch(yt){var t,a;console.error("\u274c Create API fetch error:",yt),I((null===(t=yt.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to fetch data from external API")}finally{D(!1)}}},It=()=>{ve(!1),_e(null),we("")},Rt=async e=>{if(e&&""!==e.trim()){re(!0),te("");try{const t=(await Za.get("/api/applicants/fetch-from-api/".concat(e))).data.data;console.log("\ud83d\udd0d EDIT - API Response for ITS",e,":",t),console.log("\ud83d\udcf8 EDIT - Photo data received:",t.photo?"YES (".concat((t.photo.length/1024).toFixed(2)," KB)"):"NO"),t.full_name&&lt("full_name",t.full_name),t.age&&lt("age",t.age),t.gender&&lt("gender",t.gender),t.phone&&lt("phone",t.phone),t.email&&lt("email",t.email),t.photo?(console.log("\u2705 EDIT - Setting photo in form and preview"),lt("photo",t.photo),ge(t.photo)):(console.log("\u26a0\ufe0f EDIT - No photo data available from API"),lt("photo",null),ge(null)),t.address&&lt("address",t.address),t.jamiat_name&&lt("jamiat_name",t.jamiat_name),t.jamaat_name&&lt("jamaat_name",t.jamaat_name),t.jamiat_id&&oe(t.jamiat_id),t.jamaat_id&&ce(t.jamaat_id),ue(t),he(!0),K("Data fetched successfully from external API!"),Y("")}catch(yt){var t,a;console.error("\u274c EDIT - API fetch error:",yt),te((null===(t=yt.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to fetch data from external API"),ue(null),he(!1)}finally{re(!1)}}},Dt=()=>{S(!1),A(""),P(""),I(""),F(""),fe(null),Ze()},Mt=()=>{W(!1),Y(""),K(""),X(""),Q(null),ge(null),he(!1),ue(null),it()},Tt=async()=>{try{const e=await Za.get("/api/applicants/meta/pending-count");Be(e.data.pendingCount)}catch(yt){console.error("Error fetching pending count:",yt)}};(0,r.useEffect)(()=>{Tt()},[]),(0,r.useEffect)(()=>{if(null!==xt&&void 0!==xt&&xt.applicants){const e=xt.applicants.filter(e=>!e.full_name||!e.phone||!e.email).length;Be(e)}},[xt]);const qt=[{key:"photo",label:"Photo",render:e=>(0,er.jsx)("div",{className:"flex items-center justify-center",children:e.photo&&(0,er.jsx)("img",{src:e.photo,alt:e.full_name,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-200"})})},{key:"its_number",label:"ITS Number",render:e=>(0,er.jsx)("span",{className:"font-medium text-gray-900",children:e.its_number})},{key:"name",label:"Name",render:e=>(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"font-medium text-gray-900",children:e.full_name}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})},{key:"contact",label:"Contact",render:e=>(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm text-gray-900",children:e.phone||"N/A"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:e.email||"N/A"})]})},{key:"jamiat",label:"Jamiat",render:e=>(0,er.jsx)("span",{className:"text-sm text-gray-900",children:e.jamiat_name||"N/A"})},{key:"jamaat",label:"Jamaat",render:e=>(0,er.jsx)("span",{className:"text-sm text-gray-900",children:e.jamaat_name||"N/A"})},{key:"actions",label:"Actions",render:e=>(0,er.jsxs)("div",{className:"flex items-center gap-2",children:[(0,er.jsx)(Fr,{size:"sm",variant:"secondary",onClick:()=>(e=>{Q(e),X(e.jamiat_id||""),Y(""),K(""),te(""),it({its_number:e.its_number,full_name:e.full_name,age:e.age,gender:e.gender,phone:e.phone||"",email:e.email,photo:e.photo||"",address:e.address,jamiat_name:e.jamiat_name||"",jamaat_name:e.jamaat_name||""}),e.photo?ge(e.photo):ge(null),W(!0)})(e),children:"Edit"}),(0,er.jsx)(Fr,{size:"sm",variant:"danger",onClick:()=>(e=>{_e(e),we(""),ve(!0)})(e),children:"Delete"})]})}];return gt?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,er.jsxs)("div",{className:"text-center",children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Loading applicants..."})]})})}):yt?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)(Ur,{severity:"error",children:"Failed to load applicants. Please try again."})}):(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Applicants"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage applicant information"})]}),(0,er.jsx)(Fr,{onClick:Ft,children:"Case Registration"})]})}),(0,er.jsx)(zr,{className:"mb-6",children:(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Bulk Import & API Fetch"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Import ITS Numbers (one per line or comma-separated)"}),(0,er.jsx)("textarea",{value:Ne,onChange:e=>ke(e.target.value),placeholder:"Enter ITS numbers, one per line or separated by commas...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:6,disabled:Se})]}),(0,er.jsx)(Fr,{onClick:async()=>{if(Ne.trim()){Ae(!0),Oe(""),Ee(null);try{const e=Ne.split(/[\n,\s]+/).map(e=>e.trim()).filter(e=>e.length>0);if(0===e.length)return Oe("No valid ITS numbers found"),void Ae(!1);const t=await Za.post("/api/applicants/bulk-import",{its_numbers:e});Ee(t.data.summary),ke(""),vt(),Tt()}catch(yt){var e,t;Oe((null===(e=yt.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to import ITS numbers")}finally{Ae(!1)}}else Oe("Please enter ITS numbers")},disabled:Se||!Ne.trim(),loading:Se,className:"w-full",children:Se?"Importing...":"Bulk Import"}),Fe&&(0,er.jsx)(Ur,{variant:"error",onClose:()=>Oe(""),children:Fe}),Le&&(0,er.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:(0,er.jsxs)("p",{className:"text-sm text-green-800",children:[(0,er.jsx)("strong",{children:"Import Complete:"})," ",Le.inserted," inserted, ",Le.skipped," skipped",Le.errors&&Le.errors.length>0&&(0,er.jsxs)("span",{className:"block mt-1 text-red-600",children:[Le.errors.length," error(s) occurred"]})]})})]}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Import from Excel File"}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:e=>He(e.target.files[0]),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",disabled:We}),(0,er.jsx)(Fr,{variant:"secondary",onClick:async()=>{try{const e=await Za.get("/api/applicants/export-template",{responseType:"blob",validateStatus:e=>e<500});if(e.status>=400){let a="";try{a=await e.data.text();const t=JSON.parse(a);throw new Error(t.error||"Failed to download template")}catch(t){let a="Failed to download template";throw 401===e.status?a="Authentication required. Please log in again.":403===e.status?a="You do not have permission to download the template.":404===e.status?a="Template not found.":e.status>=500&&(a="Server error. Please try again later."),new Error(a)}}const a=e.headers["content-type"]||"";if(!a.includes("spreadsheet")&&!a.includes("excel")&&!a.includes("application/vnd.openxmlformats"))try{const t=await e.data.text(),a=JSON.parse(t);throw new Error(a.error||"Invalid file format received")}catch(t){}const r=window.URL.createObjectURL(e.data),n=document.createElement("a");n.href=r,n.setAttribute("download","its_numbers_template.xlsx"),document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(r)}catch(yt){console.error("Error downloading template:",yt);let r="Failed to download template";var e;if(yt.response)if(yt.response.data instanceof Blob)try{const e=await yt.response.data.text();r=JSON.parse(e).error||r}catch(t){401===yt.response.status?r="Authentication required. Please log in again.":403===yt.response.status?r="You do not have permission to download the template.":yt.response.status>=500&&(r="Server error. Please try again later.")}else null!==(e=yt.response.data)&&void 0!==e&&e.error?r=yt.response.data.error:401===yt.response.status?r="Authentication required. Please log in again.":403===yt.response.status?r="You do not have permission to download the template.":yt.response.status>=500&&(r="Server error. Please try again later.");else yt.message&&(r=yt.message);alert(r)}},disabled:We,children:"Download Sample"})]}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Download sample Excel template to see the required format"})]}),(0,er.jsx)(Fr,{onClick:async()=>{if(Ue){Ve(!0),Ge(""),Je(null);try{const e=new FormData;e.append("file",Ue);const t=await Za.post("/api/applicants/import-excel",e,{headers:{"Content-Type":"multipart/form-data"}});Je(t.data.summary),He(null),vt(),Tt()}catch(yt){var e,t;Ge((null===(e=yt.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to import Excel file")}finally{Ve(!1)}}else Ge("Please select an Excel file")},disabled:We||!Ue,loading:We,className:"w-full",children:We?"Importing...":"Import from Excel"}),Ye&&(0,er.jsx)(Ur,{variant:"error",onClose:()=>Ge(""),children:Ye}),Qe&&(0,er.jsx)("div",{className:"p-3 bg-green-50 border border-green-200 rounded-md",children:(0,er.jsxs)("p",{className:"text-sm text-green-800",children:[(0,er.jsx)("strong",{children:"Import Complete:"})," ",Qe.inserted," inserted, ",Qe.skipped," skipped",Qe.errors&&Qe.errors.length>0&&(0,er.jsxs)("span",{className:"block mt-1 text-red-600",children:[Qe.errors.length," error(s) occurred"]})]})})]})]}),(0,er.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Fetch Details from API"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Fetches remaining details (photo, name, contact, etc.) for up to 30 pending applicants. Rate limit: 20 requests per 3 minutes."}),ze>0&&(0,er.jsxs)("p",{className:"text-sm text-blue-600 mt-1",children:[ze," applicant(s) pending data fetch"]})]}),(0,er.jsx)(Fr,{onClick:async()=>{Re(!0),qe(""),Me(null);try{const e=await Za.post("/api/applicants/bulk-fetch");Me(e.data.summary),vt(),Tt()}catch(yt){var e,t;qe((null===(e=yt.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.error)||"Failed to fetch details from API")}finally{Re(!1)}},disabled:Ie||0===ze,loading:Ie,variant:"primary",children:Ie?"Fetching...":"Fetch Details from API"})]}),Te&&(0,er.jsx)(Ur,{variant:"error",onClose:()=>qe(""),children:Te}),De&&(0,er.jsx)("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,er.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,er.jsx)("strong",{children:"Fetch Complete:"})," ",De.fetched," fetched, ",De.failed," failed",De.errors&&De.errors.length>0&&(0,er.jsxs)("span",{className:"block mt-1 text-red-600",children:[De.errors.length," error(s) occurred"]})]})})]})]})}),(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsxs)("div",{className:"relative",children:[(0,er.jsx)(Ir,{placeholder:"Search applicants...",value:v,onChange:e=>b(e.target.value),className:"pl-10 w-64"}),(0,er.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,er.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("label",{className:"text-sm text-gray-700 whitespace-nowrap",children:"Rows per page:"}),(0,er.jsxs)(ln,{value:w.toString(),onChange:e=>N(Number(e.target.value)),className:"w-32",children:[(0,er.jsx)(ln.Option,{value:"20",children:"20"}),(0,er.jsx)(ln.Option,{value:"50",children:"50"}),(0,er.jsx)(ln.Option,{value:"100",children:"100"}),(0,er.jsx)(ln.Option,{value:"500",children:"500"}),(0,er.jsx)(ln.Option,{value:"1500",children:"1500"}),(0,er.jsx)(ln.Option,{value:"2000",children:"2000"}),(0,er.jsx)(ln.Option,{value:"2500",children:"2500"})]})]})]}),(0,er.jsx)("div",{className:"text-sm text-gray-600",children:null!==xt&&void 0!==xt&&xt.pagination?(0,er.jsxs)(er.Fragment,{children:["Showing ",(xt.pagination.page-1)*xt.pagination.limit+1," to ",Math.min(xt.pagination.page*xt.pagination.limit,xt.pagination.total)," of ",xt.pagination.total," applicants"]}):(0,er.jsx)(er.Fragment,{children:"0 applicants"})})]})}),(0,er.jsx)(zr,{children:null!==xt&&void 0!==xt&&xt.applicants&&0!==xt.applicants.length?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)(rn,{data:xt.applicants,columns:qt,keyField:"id"}),(null===xt||void 0===xt||null===(e=xt.pagination)||void 0===e?void 0:e.pages)>1&&(0,er.jsx)("div",{className:"mt-6",children:(0,er.jsx)(gn,{currentPage:_,totalPages:xt.pagination.pages,onPageChange:j})})]}):(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,er.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:v?"No applicants found":"No applicants yet"}),(0,er.jsx)("p",{className:"text-gray-600 mb-4",children:v?"Try adjusting your search terms":"Get started by creating your first applicant"}),!v&&(0,er.jsx)(Fr,{onClick:Ft,children:"Case Registration"})]})}),(0,er.jsx)(xn,{isOpen:k,onClose:Dt,title:"Case Registration",size:"xl",children:(0,er.jsxs)("form",{onSubmit:$e(async e=>{if(!At.isLoading&&!Lt.isLoading){A(""),P("");try{var t;const a=(null===(t=e.full_name)||void 0===t?void 0:t.trim().split(" "))||[],r=a[0]||"",n=a.slice(1).join(" ")||"",s={its_number:e.its_number,first_name:r,last_name:n,age:e.age,gender:e.gender,phone:e.phone,email:e.email,photo:e.photo||null,address:e.address,jamiat_name:e.jamiat_name,jamaat_name:e.jamaat_name,jamiat_id:q,jamaat_id:B},i={case_type_id:e.case_type_id,roles:null,assigned_counselor_id:null,jamiat_id:q||null,jamaat_id:B||null,assigned_role:null,description:e.description,notes:e.notes||null},o=Pe(Pe({},s),{},{case_data:i});console.log("\ud83d\udcbe Creating applicant with case data (bidirectional creation):",Pe(Pe({},o),{},{photo:o.photo?"Photo included (".concat((o.photo.length/1024).toFixed(2)," KB)"):"NO PHOTO"}));const l=await Za.post("/api/applicants",o);if(!l.data.applicantId)throw new Error("Failed to get applicant ID from response");console.log("\u2705 Applicant created successfully with ID:",l.data.applicantId),l.data.caseId?(console.log("\u2705 Case auto-created successfully with ID:",l.data.caseId),y.invalidateQueries(["applicants"]),P("Applicant and case created successfully!")):P("Applicant created successfully!"),Ze(),S(!1)}catch(yt){var a,r,n,s,i,o,l,c,d;console.error("\u274c Failed to create applicant or case:",yt),console.error("\u274c Error response:",null===(a=yt.response)||void 0===a?void 0:a.data),console.error("\u274c Error details:",(null===(r=yt.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.details)||(null===(s=yt.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.error));const t=(null===(o=yt.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.error)||(null===(c=yt.response)||void 0===c||null===(d=c.data)||void 0===d?void 0:d.message)||yt.message||"Failed to create applicant or case";A(t),P("")}}}),className:"space-y-6",children:[(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Basic personal details of the applicant"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)(Ir,Pe(Pe({label:"ITS Number",required:!0,error:null===(t=Xe.its_number)||void 0===t?void 0:t.message},Ke("its_number",{required:"ITS number is required",pattern:{value:/^[0-9]{8}$/,message:"ITS number must be exactly 8 digits"},minLength:{value:8,message:"ITS number must be exactly 8 digits"},maxLength:{value:8,message:"ITS number must be exactly 8 digits"}})),{},{placeholder:"Enter 8-digit ITS number",maxLength:8,onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const t=e.target.value.trim();t&&t.length>=3?Ot(t):I("Please enter a valid ITS number (minimum 3 characters)")}}})),(0,er.jsx)("p",{className:"text-xs text-gray-500",children:"Data will be automatically fetched as you type (minimum 3 characters) or press Enter"}),R&&(0,er.jsxs)("div",{className:"text-sm text-blue-600 flex items-center",children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Fetching data from API..."]})]}),(0,er.jsx)(Ir,Pe(Pe({label:"Full Name",required:!0,error:null===(a=Xe.full_name)||void 0===a?void 0:a.message},Ke("full_name",{required:"Full name is required",pattern:{value:/^[A-Za-z\s]+$/,message:"Full name can only contain alphabets and spaces"},minLength:{value:2,message:"Full name must be at least 2 characters"},maxLength:{value:250,message:"Full name must not exceed 250 characters"}})),{},{placeholder:"Enter full name (alphabets only)",maxLength:250})),(0,er.jsx)(Ir,Pe(Pe({label:"Age",type:"number",error:null===(n=Xe.age)||void 0===n?void 0:n.message},Ke("age",{min:{value:0,message:"Age must be at least 0"},max:{value:999,message:"Age must be less than 1000"},validate:e=>!e||(isNaN(e)||e<0||e>999?"Please enter a valid age (0-999)":!(e.toString().length>3)||"Age must be maximum 3 digits")})),{},{placeholder:"Enter age (max 3 digits)",maxLength:3}))]}),pe&&(0,er.jsxs)("div",{className:"mt-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo (from API)"}),(0,er.jsx)("img",{src:pe,alt:"Applicant",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200"})]})]}),(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Demographics"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Gender and marital status information"})]}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,er.jsxs)(ln,Pe(Pe({label:"Gender",error:null===(s=Xe.gender)||void 0===s?void 0:s.message},Ke("gender")),{},{children:[(0,er.jsx)(ln.Option,{value:"",children:"Select gender"}),(0,er.jsx)(ln.Option,{value:"male",children:"Male"}),(0,er.jsx)(ln.Option,{value:"female",children:"Female"})]}))})]}),(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Contact Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Phone and email contact details"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Phone",type:"tel",error:null===(i=Xe.phone)||void 0===i?void 0:i.message},Ke("phone",{pattern:{value:/^[\+]?[1-9][\d]{0,15}$/,message:"Please enter a valid phone number"}})),{},{placeholder:"Enter phone number"})),(0,er.jsx)(Ir,Pe(Pe({label:"Email",type:"email",error:null===(o=Xe.email)||void 0===o?void 0:o.message},Ke("email",{pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email address"},validate:e=>{if(!e)return!0;return!!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)||"Please enter a valid email address"}})),{},{placeholder:"Enter email address"}))]})]}),(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Address Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Complete address details"})]}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Address",error:null===(l=Xe.address)||void 0===l?void 0:l.message},Ke("address")),{},{placeholder:"Enter full address"})),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Jamiat"},Ke("jamiat_name")),{},{readOnly:!0,className:"bg-gray-50",placeholder:"Will be filled from API"})),(0,er.jsx)(Ir,Pe(Pe({label:"Jamaat"},Ke("jamaat_name")),{},{readOnly:!0,className:"bg-gray-50",placeholder:"Will be filled from API"}))]})]})]}),(0,er.jsxs)("div",{className:"mb-8 border-t border-gray-200 pt-6",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Case Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Case details for the new applicant"})]}),(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)(ln,Pe(Pe({label:"Case Type",required:!0,error:null===(c=Xe.case_type_id)||void 0===c?void 0:c.message},Ke("case_type_id",{required:"Please select a case type"})),{},{children:[(0,er.jsx)(ln.Option,{value:"",children:"Select case type"}),null===Ct||void 0===Ct?void 0:Ct.map(e=>(0,er.jsx)(ln.Option,{value:e.id,children:e.name},e.id))]}))}),(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Case Description",(0,er.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,er.jsx)("textarea",Pe(Pe({},Ke("description",{required:"Please provide a case description"})),{},{rows:4,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent ".concat(Xe.description?"border-red-300 focus:ring-red-500":"border-gray-300"),placeholder:"Describe the case details, requirements, and any relevant information..."})),Xe.description&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:Xe.description.message})]}),(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Additional Notes"}),(0,er.jsx)("textarea",Pe(Pe({},Ke("notes")),{},{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Any additional notes or special instructions..."}))]})]}),C&&(0,er.jsx)(Ur,{severity:"error",className:"mb-4",children:C}),O&&(0,er.jsx)(Ur,{severity:"error",className:"mb-4",children:O}),L&&(0,er.jsx)(Ur,{severity:"success",className:"mb-4",children:L}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:Dt,disabled:At.isLoading||Lt.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",loading:At.isLoading||Lt.isLoading,disabled:At.isLoading||Lt.isLoading,children:At.isLoading||Lt.isLoading?"Creating Applicant & Case...":"Create Case"})]})})]})}),(0,er.jsx)(xn,{isOpen:H,onClose:Mt,title:"Edit Applicant",size:"xl",children:(0,er.jsxs)("form",{onSubmit:nt(async e=>{Y(""),K("");try{var t;const a=(null===(t=e.full_name)||void 0===t?void 0:t.trim().split(" "))||[],r=a[0]||"",n=a.slice(1).join(" ")||"",s=ct("jamaat_name")||e.jamaat_name||(null===de||void 0===de?void 0:de.jamaat_name)||"",i=ct("jamiat_name")||e.jamiat_name||(null===de||void 0===de?void 0:de.jamiat_name)||"",o={its_number:e.its_number,first_name:r,last_name:n,age:e.age,gender:e.gender,phone:e.phone,email:e.email,photo:e.photo||null,address:e.address,jamiat_name:i,jamaat_name:s,jamiat_id:ie,jamaat_id:le,refresh_from_api:me};await Za.put("/api/applicants/".concat(V.id),o),he(!1),ue(null),K("Applicant updated successfully!"),it(),ge(null),W(!1),Q(null),he(!1),ue(null),vt()}catch(yt){var a,r;Y((null===(a=yt.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.error)||"Failed to update applicant"),K("")}}),className:"space-y-6",children:[(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Basic personal details of the applicant"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)(Ir,Pe(Pe({label:"ITS Number",required:!0,error:null===(d=st.its_number)||void 0===d?void 0:d.message},rt("its_number",{required:"ITS number is required",pattern:{value:/^[0-9]{8}$/,message:"ITS number must be exactly 8 digits"},minLength:{value:8,message:"ITS number must be exactly 8 digits"},maxLength:{value:8,message:"ITS number must be exactly 8 digits"}})),{},{placeholder:"Enter 8-digit ITS number",maxLength:8,onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const t=e.target.value.trim();t&&t.length>=3?Rt(t):te("Please enter a valid ITS number (minimum 3 characters)")}}})),(0,er.jsx)("p",{className:"text-xs text-gray-500",children:"Data will be automatically fetched as you type (minimum 3 characters) or press Enter"}),ae&&(0,er.jsxs)("div",{className:"text-sm text-blue-600 flex items-center",children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Fetching data from API..."]}),(0,er.jsx)(Fr,{type:"button",variant:"secondary",size:"sm",onClick:async()=>{if(!V)return void te("No applicant selected");const e=ot("its_number");if(!e||e.trim().length<3)return void te("Please enter a valid ITS number (minimum 3 characters)");ot("full_name"),ot("age"),ot("gender"),ot("phone"),ot("email"),ot("address"),ot("jamiat_name"),ot("jamaat_name"),V.full_name,V.age,V.gender,V.phone,V.email,V.address,V.jamiat_name,V.jamaat_name;await Rt(e.trim())},disabled:ae||!ot("its_number")||ot("its_number").trim().length<3,loading:ae,className:"mt-2",children:ae?"Refreshing...":"Refresh Details"})]}),(0,er.jsx)(Ir,Pe(Pe({label:"Full Name",required:!0,error:null===(u=st.full_name)||void 0===u?void 0:u.message},rt("full_name",{required:"Full name is required",pattern:{value:/^[A-Za-z\s]+$/,message:"Full name can only contain alphabets and spaces"},minLength:{value:2,message:"Full name must be at least 2 characters"},maxLength:{value:250,message:"Full name must not exceed 250 characters"}})),{},{placeholder:"Enter full name (alphabets only)",maxLength:250})),(0,er.jsx)(Ir,Pe(Pe({label:"Age",type:"number",error:null===(m=st.age)||void 0===m?void 0:m.message},rt("age",{min:{value:0,message:"Age must be at least 0"},max:{value:999,message:"Age must be less than 1000"},validate:e=>!e||(isNaN(e)||e<0||e>999?"Please enter a valid age (0-999)":!(e.toString().length>3)||"Age must be maximum 3 digits")})),{},{placeholder:"Enter age (max 3 digits)",maxLength:3}))]}),xe&&(0,er.jsxs)("div",{className:"mt-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo (from API)"}),(0,er.jsx)("img",{src:xe,alt:"Applicant",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200"})]})]}),(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Demographics"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Gender and marital status information"})]}),(0,er.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,er.jsxs)(ln,Pe(Pe({label:"Gender",error:null===(h=st.gender)||void 0===h?void 0:h.message},rt("gender")),{},{children:[(0,er.jsx)(ln.Option,{value:"",children:"Select gender"}),(0,er.jsx)(ln.Option,{value:"male",children:"Male"}),(0,er.jsx)(ln.Option,{value:"female",children:"Female"})]}))})]}),(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Contact Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Phone and email contact details"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Phone",type:"tel",error:null===(p=st.phone)||void 0===p?void 0:p.message},rt("phone",{pattern:{value:/^[\+]?[1-9][\d]{0,15}$/,message:"Please enter a valid phone number"}})),{},{placeholder:"Enter phone number"})),(0,er.jsx)(Ir,Pe(Pe({label:"Email",type:"email",error:null===(f=st.email)||void 0===f?void 0:f.message},rt("email",{pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Please enter a valid email address"},validate:e=>{if(!e)return!0;return!!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e)||"Please enter a valid email address"}})),{},{placeholder:"Enter email address"}))]})]}),(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4 mb-6",children:[(0,er.jsx)("h4",{className:"text-lg font-medium text-gray-900",children:"Address Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Complete address details"})]}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Address",error:null===(x=st.address)||void 0===x?void 0:x.message},rt("address")),{},{placeholder:"Enter full address"})),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Jamiat"},rt("jamiat_name")),{},{readOnly:!0,className:"bg-gray-50",placeholder:"Will be filled from API"})),(0,er.jsx)(Ir,Pe(Pe({label:"Jamaat"},rt("jamaat_name")),{},{readOnly:!0,className:"bg-gray-50",placeholder:"Will be filled from API"}))]})]})]}),J&&(0,er.jsx)(Ur,{severity:"error",className:"mb-4",children:J}),ee&&(0,er.jsx)(Ur,{severity:"error",className:"mb-4",children:ee}),G&&(0,er.jsx)(Ur,{severity:"success",className:"mb-4",children:G}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:Mt,disabled:Pt.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",loading:Pt.isLoading,disabled:Pt.isLoading,children:Pt.isLoading?"Updating...":"Update Applicant"})]})})]})}),(0,er.jsx)(xn,{isOpen:ye,onClose:It,title:"Delete Applicant",size:"sm",children:(0,er.jsxs)("div",{className:"space-y-4",children:[je&&(0,er.jsx)(Ur,{variant:"error",onClose:()=>we(""),children:je}),(0,er.jsxs)("div",{className:"text-center py-4",children:[(0,er.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:(0,er.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Are you sure?"}),be&&(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"You are about to delete:"}),(0,er.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:be.full_name}),(0,er.jsxs)("p",{className:"text-xs text-gray-500",children:["ITS: ",be.its_number]})]}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"This action cannot be undone. All data associated with this applicant will be permanently deleted."})]}),(0,er.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t border-gray-200",children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:It,disabled:Et.isLoading,children:"Cancel"}),(0,er.jsx)(Fr,{type:"button",variant:"danger",onClick:()=>{be&&Et.mutate(be.id)},loading:Et.isLoading,disabled:Et.isLoading,children:Et.isLoading?"Deleting...":"Delete"})]})]})})]})},ad=e=>{let{caseId:t,workflowStep:a}=e;const{user:n}=ar(),[s,i]=(0,r.useState)(""),o=(0,Ce.useQueryClient)(),{data:l,isLoading:c}=(0,Ce.useQuery)(["workflow-comments",t,a],()=>Za.get("/api/cases/".concat(t,"/workflow-comments/").concat(a)).then(e=>e.data),{enabled:!!t&&!!a,staleTime:3e4}),d=(0,Ce.useMutation)(e=>{let{comment:r}=e;return Za.post("/api/cases/".concat(t,"/workflow-comments"),{comment:r,comment_type:"general",workflow_step:a})},{onSuccess:()=>{i(""),o.invalidateQueries(["workflow-comments",t,a])}}),u=(null===l||void 0===l?void 0:l.comments)||[];return(0,er.jsxs)(zr,{className:"mt-4",children:[(0,er.jsx)(zr.Header,{children:(0,er.jsxs)("h4",{className:"text-sm font-medium text-gray-900",children:["Comments for ",a.replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())]})}),(0,er.jsx)(zr.Content,{children:(0,er.jsxs)("div",{className:"space-y-4",children:[c?(0,er.jsx)("div",{className:"text-center py-4",children:(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Loading comments..."})}):u.length>0?(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsx)("h5",{className:"text-sm font-medium text-gray-700",children:"Previous Comments:"}),u.map(e=>(0,er.jsx)("div",{className:"border-l-4 border-blue-200 pl-4 py-2 bg-gray-50 rounded-r",children:(0,er.jsx)("div",{className:"flex justify-between items-start",children:(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("p",{className:"text-sm text-gray-800",children:e.comment}),(0,er.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[(0,er.jsx)("span",{className:"font-medium",children:e.full_name}),(0,er.jsx)("span",{className:"mx-2",children:"\u2022"}),(0,er.jsx)("span",{children:new Date(e.created_at).toLocaleString()})]})]})})},e.id))]}):(0,er.jsx)("div",{className:"text-center py-4",children:(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"No comments yet. Be the first to add one!"})}),(0,er.jsx)("div",{className:"border rounded-lg p-3 bg-gray-50",children:(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsx)("textarea",{value:s,onChange:e=>i(e.target.value),placeholder:"Add your comment for this workflow step...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",rows:3}),(0,er.jsx)(Fr,{onClick:()=>{s.trim()&&d.mutate({comment:s.trim()})},disabled:!s.trim()||d.isLoading,loading:d.isLoading,size:"sm",variant:"primary",children:"Add Comment"})]})})]})})]})},rd=5242880,nd=10485760,sd=5242880,id=5242880,od=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},ld=e=>{const t=(e=>{const t=e.toLowerCase().split(".").pop();return["png","jpg","jpeg","gif"].includes(t)?rd:"pdf"===t?nd:["doc","docx","xls","xlsx","txt","csv"].includes(t)?sd:id})(e.name);return e.size>t?'File "'.concat(e.name,'" exceeds maximum size. Maximum size is ').concat(od(t),". Your file is ").concat(od(e.size),"."):null},cd=e=>{const t=String.fromCharCode(e.which);/[0-9]/.test(t)||e.preventDefault()},dd=e=>{String.fromCharCode(e.which);const t=e.target.value;8!==e.which&&46!==e.which&&9!==e.which&&27!==e.which&&13!==e.which&&(190!==e.which&&110!==e.which||-1!==t.indexOf("."))&&(e.shiftKey||e.which<48||e.which>57)&&(e.which<96||e.which>105)&&e.preventDefault()},ud=()=>{var e,t,a,n,s,i,o,l,c,d,u,m,h,p,f,x,g,y,v,b,_,j,w,N,k,S,C,A,L,P,E,F,O,I,R,D,M,T,q,z,B,U,H,W,V,Q,J,Y,G,K,$,X,te,ae,re,ne,se,ie,oe,le,ce,de,ue,me,he,pe,fe,xe,ge,ye,ve,be,_e,je,we,Ne,ke,Ae,Le,Ee,Fe,Oe,Ie,Re,De,Me,Te,qe,ze,Be,Ue,He,We,Ve,Qe,Je,Ye,Ge,Ke,$e,Xe,Ze,et,tt,at,rt,nt,st,it,ot,lt,ct,dt,ut,mt,ht,pt,ft,xt,gt,yt,vt,bt,_t,jt,wt,Nt,kt,St,Ct,At,Lt,Pt,Et,Ft,Ot,It,Rt,Dt,Mt,Tt,qt,zt,Bt,Ut,Ht,Wt,Vt,Qt,Jt,Yt,Gt,Kt,$t,Xt,Zt,ea,ta,aa,ra;const{caseId:na}=ee(),sa=Z(),[ia,oa]=Se(),{user:la}=ar(),[ca,da]=(0,r.useState)(""),[ua,ma]=(0,r.useState)(""),[ha,pa]=(0,r.useState)("personal"),[fa,xa]=(0,r.useState)(!1),[ga,ya]=(0,r.useState)(!1),[va,ba]=(0,r.useState)(!1),[_a,ja]=(0,r.useState)({}),{hasPermission:wa}=Cr("counseling_forms","comment"),Na=[{id:"personal",number:1,title:"Personal Details",date:null},{id:"family",number:2,title:"Family Details",date:null},{id:"assessment",number:3,title:"Assessment",date:null},{id:"financial",number:4,title:"Financial Assistance",date:null},{id:"growth",number:5,title:"Economic Growth",date:null},{id:"declaration",number:6,title:"Declaration",date:null},{id:"attachments",number:7,title:"Attachments",date:null}],[ka,Sa]=(0,r.useState)([{id:1,name:"QH1",year1:"",year2:"",year3:"",year4:"",year5:""},{id:2,name:"QH2",year1:"",year2:"",year3:"",year4:"",year5:""},{id:3,name:"QH3",year1:"",year2:"",year3:"",year4:"",year5:""},{id:4,name:"Local QH",year1:"",year2:"",year3:"",year4:"",year5:""}]),[Ca,Aa]=(0,r.useState)({upto_1st_year_end:[{id:Date.now()+Math.random(),action_text:""}],"2nd_and_3rd_year":[{id:Date.now()+Math.random()+1,action_text:""}],"4th_and_5th_year":[{id:Date.now()+Math.random()+2,action_text:""}]}),[La,Pa]=(0,r.useState)({immediate:[{id:Date.now()+Math.random()+10,purpose_cost:"",enayat:"",qardan:"",months:""}],after_1st_yr:[{id:Date.now()+Math.random()+11,purpose_cost:"",enayat:"",qardan:"",months:""}],after_2nd_yr:[{id:Date.now()+Math.random()+12,purpose_cost:"",enayat:"",qardan:"",months:""}],after_3rd_yr:[{id:Date.now()+Math.random()+13,purpose_cost:"",enayat:"",qardan:"",months:""}],after_4th_yr:[{id:Date.now()+Math.random()+14,purpose_cost:"",enayat:"",qardan:"",months:""}],"5th_yr":[{id:Date.now()+Math.random()+15,purpose_cost:"",enayat:"",qardan:"",months:""}]}),[Ea,Fa]=(0,r.useState)(""),[Oa,Ia]=(0,r.useState)(!1),[Ra,Da]=(0,r.useState)(""),[Ma,Ta]=(0,r.useState)(""),[qa,za]=(0,r.useState)(!1),[Ba,Ua]=(0,r.useState)(""),{data:Ha}=(0,Ce.useQuery)("relations",()=>Za.get("/api/relations").then(e=>e.data),{staleTime:3e5}),{data:Wa,error:Va,isLoading:Qa}=(0,Ce.useQuery)(["attachments",na],()=>Za.get("/api/attachments/case/".concat(na)).then(e=>e.data.attachments),{enabled:!!na,staleTime:3e5,onSuccess:e=>{},onError:e=>{console.error("Error loading attachments:",e)}}),{data:Ja}=(0,Ce.useQuery)("educationLevels",()=>Za.get("/api/education-levels").then(e=>e.data),{staleTime:3e5}),{data:Ya}=(0,Ce.useQuery)("occupations",()=>Za.get("/api/occupations").then(e=>e.data),{staleTime:3e5}),{register:Ga,handleSubmit:Ka,control:$a,formState:{errors:Xa},setValue:tr,watch:rr,reset:nr,trigger:sr}=xi({defaultValues:{personal_details:{its_number:"",name:"",age:"",education:"",jamiat:"",jamaat:"",contact_number:"",email:"",residential_address:"",present_occupation:"",occupation_address:"",other_info:""},family_details:{family_members:[],other_details:"",wellbeing:{food:"",housing:"",education:"",health:"",deeni:""},income_expense:{income:{business_monthly:"",business_yearly:"",salary_monthly:"",salary_yearly:"",home_industry_monthly:"",home_industry_yearly:"",others_monthly:"",others_yearly:""},expenses:{food_monthly:"",food_yearly:"",housing_monthly:"",housing_yearly:"",health_monthly:"",health_yearly:"",transport_monthly:"",transport_yearly:"",education_monthly:"",education_yearly:"",deeni_monthly:"",deeni_yearly:"",essentials_monthly:"",essentials_yearly:"",non_essentials_monthly:"",non_essentials_yearly:"",others_monthly:"",others_yearly:"",total_monthly:"",total_yearly:""},surplus_monthly:"",surplus_yearly:"",deficit_monthly:"",deficit_yearly:"",scholarship_monthly:"",scholarship_yearly:"",borrowing_monthly:"",borrowing_yearly:""},assets_liabilities:{assets:{residential:"",shop_godown_land:"",machinery_vehicle:"",stock_raw_material:"",goods_sold_credit:"",others:""},liabilities:{borrowing_qardan:"",goods_credit:"",others:"",total:""}}},assessment:{background:{education:"",work_experience:"",family_business:"",skills_knowledge:"",counselor_assessment:""},proposed_business:{present_business_condition:"",trade_mark:"",online_presence:"",digital_marketing:"",store_location:"",sourcing:"",selling:"",major_expenses:"",goods_purchase:"",revenue:"",profit_margin:""},counselor_assessment:{demand_supply:"",growth_potential:"",competition_strategy:"",support_needed:[]}},financial_assistance:{assistance_required:"",timeline:[],self_funding:"",rahen_available:"",repayment_schedule:{year1:"",year2:"",year3:"",year4:"",year5:""},support_needed:[],support_industry_knowledge_desc:"",support_sourcing_desc:"",support_sales_market_desc:"",support_internship_desc:"",support_mentoring_handholding_desc:"",support_bookkeeping_desc:"",support_mentors:[]},economic_growth:{projections:[],cash_in_hand_last_year:0,cash_in_hand_year1:0,cash_in_hand_year2:0,cash_in_hand_year3:0,cash_in_hand_year4:0,cash_in_hand_year5:0,raw_materials_last_year:0,raw_materials_year1:0,raw_materials_year2:0,raw_materials_year3:0,raw_materials_year4:0,raw_materials_year5:0,sale_on_credit_last_year:0,sale_on_credit_year1:0,sale_on_credit_year2:0,sale_on_credit_year3:0,sale_on_credit_year4:0,sale_on_credit_year5:0,machines_equipment_last_year:0,machines_equipment_year1:0,machines_equipment_year2:0,machines_equipment_year3:0,machines_equipment_year4:0,machines_equipment_year5:0,vehicles_last_year:0,vehicles_year1:0,vehicles_year2:0,vehicles_year3:0,vehicles_year4:0,vehicles_year5:0,shop_godown_last_year:0,shop_godown_year1:0,shop_godown_year2:0,shop_godown_year3:0,shop_godown_year4:0,shop_godown_year5:0,trademark_goodwill_last_year:0,trademark_goodwill_year1:0,trademark_goodwill_year2:0,trademark_goodwill_year3:0,trademark_goodwill_year4:0,trademark_goodwill_year5:0,purchase_on_credit_last_year:0,purchase_on_credit_year1:0,purchase_on_credit_year2:0,purchase_on_credit_year3:0,purchase_on_credit_year4:0,purchase_on_credit_year5:0,revenue_sales_last_year:0,revenue_sales_year1:0,revenue_sales_year2:0,revenue_sales_year3:0,revenue_sales_year4:0,revenue_sales_year5:0,expenses_raw_material_last_year:0,expenses_raw_material_year1:0,expenses_raw_material_year2:0,expenses_raw_material_year3:0,expenses_raw_material_year4:0,expenses_raw_material_year5:0,expenses_labor_salary_last_year:0,expenses_labor_salary_year1:0,expenses_labor_salary_year2:0,expenses_labor_salary_year3:0,expenses_labor_salary_year4:0,expenses_labor_salary_year5:0,expenses_rent_last_year:0,expenses_rent_year1:0,expenses_rent_year2:0,expenses_rent_year3:0,expenses_rent_year4:0,expenses_rent_year5:0,expenses_overhead_misc_last_year:0,expenses_overhead_misc_year1:0,expenses_overhead_misc_year2:0,expenses_overhead_misc_year3:0,expenses_overhead_misc_year4:0,expenses_overhead_misc_year5:0,expenses_repair_maintenance_depreciation_last_year:0,expenses_repair_maintenance_depreciation_year1:0,expenses_repair_maintenance_depreciation_year2:0,expenses_repair_maintenance_depreciation_year3:0,expenses_repair_maintenance_depreciation_year4:0,expenses_repair_maintenance_depreciation_year5:0,total_expenses_last_year:0,total_expenses_year1:0,total_expenses_year2:0,total_expenses_year3:0,total_expenses_year4:0,total_expenses_year5:0,profit_last_year:0,profit_year1:0,profit_year2:0,profit_year3:0,profit_year4:0,profit_year5:0,profit_fund_blocked_last_year:0,profit_fund_blocked_year1:0,profit_fund_blocked_year2:0,profit_fund_blocked_year3:0,profit_fund_blocked_year4:0,profit_fund_blocked_year5:0,profit_qardan_repayment_last_year:0,profit_qardan_repayment_year1:0,profit_qardan_repayment_year2:0,profit_qardan_repayment_year3:0,profit_qardan_repayment_year4:0,profit_qardan_repayment_year5:0,profit_other_income_last_year:0,profit_other_income_year1:0,profit_other_income_year2:0,profit_other_income_year3:0,profit_other_income_year4:0,profit_other_income_year5:0,profit_household_expense_last_year:0,profit_household_expense_year1:0,profit_household_expense_year2:0,profit_household_expense_year3:0,profit_household_expense_year4:0,profit_household_expense_year5:0,cash_surplus_last_year:0,cash_surplus_year1:0,cash_surplus_year2:0,cash_surplus_year3:0,cash_surplus_year4:0,cash_surplus_year5:0,cash_surplus_additional_enayat_last_year:0,cash_surplus_additional_enayat_year1:0,cash_surplus_additional_enayat_year2:0,cash_surplus_additional_enayat_year3:0,cash_surplus_additional_enayat_year4:0,cash_surplus_additional_enayat_year5:0,cash_surplus_additional_qardan_last_year:0,cash_surplus_additional_qardan_year1:0,cash_surplus_additional_qardan_year2:0,cash_surplus_additional_qardan_year3:0,cash_surplus_additional_qardan_year4:0,cash_surplus_additional_qardan_year5:0},declaration:{applicant_confirmation:"",other_comments:"",applicant_signature:"",counselor_confirmation:"",counselor_comments:"",counselor_signature:"",tr_committee_signature:""},attachments:{work_place_photo:!1,work_place_photo_files:[],quotation:!1,quotation_file:null,product_brochure:!1,product_brochure_files:[],income_tax_return:!1,income_tax_return_file:null,financial_statements:!1,financial_statements_file:null,cancelled_cheque:!1,cancelled_cheque_file:null,pan_card:!1,pan_card_file:null,aadhar_card:!1,aadhar_card_file:null,other_documents:!1,other_documents_files:[]}}}),{fields:ir,append:or,remove:lr,replace:cr}=fi({control:$a,name:"family_details.family_members"}),{fields:dr,append:ur,remove:mr,replace:hr}=fi({control:$a,name:"financial_assistance.timeline"}),{fields:pr,append:fr,remove:xr,replace:gr}=fi({control:$a,name:"economic_growth.projections"}),yr=(e,t,a)=>{Sa(ka.map(r=>r.id===e?Pe(Pe({},r),{},{[t]:a}):r))},vr=e=>{const t=Date.now()+Math.random();Aa(a=>Pe(Pe({},a),{},{[e]:[...a[e],{id:t,action_text:""}]}))},br=(e,t)=>{0!==t&&Aa(a=>a[e].length<=1?a:Pe(Pe({},a),{},{[e]:a[e].filter((e,a)=>a!==t)}))},_r=(e,t,a)=>{Aa(r=>Pe(Pe({},r),{},{[e]:r[e].map((e,r)=>r===t?Pe(Pe({},e),{},{action_text:a}):e)}))},jr=(e,t)=>{const a=["upto_1st_year_end","2nd_and_3rd_year","4th_and_5th_year"],r=a.indexOf(e);let n=1;for(let s=0;s<r;s++)n+=Ca[a[s]].length;return n+t},wr=e=>{const t=Date.now()+Math.random();Pa(a=>Pe(Pe({},a),{},{[e]:[...a[e],{id:t,purpose_cost:"",enayat:"",qardan:"",months:""}]}))},Nr=(e,t)=>{0!==t&&Pa(a=>a[e].length<=1?a:Pe(Pe({},a),{},{[e]:a[e].filter((e,a)=>a!==t)}))},kr=(e,t,a,r)=>{Pa(n=>Pe(Pe({},n),{},{[e]:n[e].map((e,n)=>n===t?Pe(Pe({},e),{},{[a]:r}):e)}))},Sr=(e,t)=>{const a=["immediate","after_1st_yr","after_2nd_yr","after_3rd_yr","after_4th_yr","5th_yr"],r=a.indexOf(e);let n=1;for(let s=0;s<r;s++)n+=La[a[s]].length;return n+t},Ar=()=>{const e=(parseFloat(rr("family_details.income_expense.income.business_monthly"))||0)+(parseFloat(rr("family_details.income_expense.income.salary_monthly"))||0)+(parseFloat(rr("family_details.income_expense.income.home_industry_monthly"))||0)+(parseFloat(rr("family_details.income_expense.income.others_monthly"))||0),t=12*e;tr("family_details.income_expense.income.total_monthly",e,{shouldDirty:!1}),tr("family_details.income_expense.income.total_yearly",t,{shouldDirty:!1}),Pr()},Lr=()=>{const e=(parseFloat(rr("family_details.income_expense.expenses.food_monthly"))||0)+(parseFloat(rr("family_details.income_expense.expenses.housing_monthly"))||0)+(parseFloat(rr("family_details.income_expense.expenses.health_monthly"))||0)+(parseFloat(rr("family_details.income_expense.expenses.education_monthly"))||0)+(parseFloat(rr("family_details.income_expense.expenses.transport_monthly"))||0)+(parseFloat(rr("family_details.income_expense.expenses.deeni_monthly"))||0)+(parseFloat(rr("family_details.income_expense.expenses.others_monthly"))||0),t=12*e;tr("family_details.income_expense.expenses.total_monthly",e,{shouldDirty:!1}),tr("family_details.income_expense.expenses.total_yearly",t,{shouldDirty:!1}),Pr()},Pr=()=>{const e=(parseFloat(rr("family_details.income_expense.income.total_monthly"))||0)-(parseFloat(rr("family_details.income_expense.expenses.total_monthly"))||0);e>0?(tr("family_details.income_expense.surplus_monthly",e,{shouldDirty:!1}),tr("family_details.income_expense.surplus_yearly",12*e,{shouldDirty:!1}),tr("family_details.income_expense.deficit_monthly",0,{shouldDirty:!1}),tr("family_details.income_expense.deficit_yearly",0,{shouldDirty:!1})):e<0?(tr("family_details.income_expense.deficit_monthly",Math.abs(e),{shouldDirty:!1}),tr("family_details.income_expense.deficit_yearly",12*Math.abs(e),{shouldDirty:!1}),tr("family_details.income_expense.surplus_monthly",0,{shouldDirty:!1}),tr("family_details.income_expense.surplus_yearly",0,{shouldDirty:!1})):(tr("family_details.income_expense.surplus_monthly",0,{shouldDirty:!1}),tr("family_details.income_expense.surplus_yearly",0,{shouldDirty:!1}),tr("family_details.income_expense.deficit_monthly",0,{shouldDirty:!1}),tr("family_details.income_expense.deficit_yearly",0,{shouldDirty:!1}))},Er=(e,t,a)=>{void 0!==t&&tr("family_details.income_expense.expenses.".concat(e,"_yearly"),12*t),void 0!==a&&tr("family_details.income_expense.expenses.".concat(e,"_monthly"),a/12),Lr()},Or=()=>{const e=parseFloat(rr("family_details.assets_liabilities.liabilities.borrowing_qardan"))||0,t=parseFloat(rr("family_details.assets_liabilities.liabilities.goods_credit"))||0,a=parseFloat(rr("family_details.assets_liabilities.liabilities.others"))||0;tr("family_details.assets_liabilities.liabilities.total",e+t+a,{shouldDirty:!1})},Rr=()=>{const e=parseFloat(rr("economic_growth.expenses_raw_material_last_year"))||0,t=parseFloat(rr("economic_growth.expenses_raw_material_year1"))||0,a=parseFloat(rr("economic_growth.expenses_raw_material_year2"))||0,r=parseFloat(rr("economic_growth.expenses_raw_material_year3"))||0,n=parseFloat(rr("economic_growth.expenses_raw_material_year4"))||0,s=parseFloat(rr("economic_growth.expenses_raw_material_year5"))||0,i=parseFloat(rr("economic_growth.expenses_labor_salary_last_year"))||0,o=parseFloat(rr("economic_growth.expenses_labor_salary_year1"))||0,l=parseFloat(rr("economic_growth.expenses_labor_salary_year2"))||0,c=parseFloat(rr("economic_growth.expenses_labor_salary_year3"))||0,d=parseFloat(rr("economic_growth.expenses_labor_salary_year4"))||0,u=parseFloat(rr("economic_growth.expenses_labor_salary_year5"))||0,m=parseFloat(rr("economic_growth.expenses_rent_last_year"))||0,h=parseFloat(rr("economic_growth.expenses_rent_year1"))||0,p=parseFloat(rr("economic_growth.expenses_rent_year2"))||0,f=parseFloat(rr("economic_growth.expenses_rent_year3"))||0,x=parseFloat(rr("economic_growth.expenses_rent_year4"))||0,g=parseFloat(rr("economic_growth.expenses_rent_year5"))||0,y=parseFloat(rr("economic_growth.expenses_overhead_misc_last_year"))||0,v=parseFloat(rr("economic_growth.expenses_overhead_misc_year1"))||0,b=parseFloat(rr("economic_growth.expenses_overhead_misc_year2"))||0,_=parseFloat(rr("economic_growth.expenses_overhead_misc_year3"))||0,j=parseFloat(rr("economic_growth.expenses_overhead_misc_year4"))||0,w=parseFloat(rr("economic_growth.expenses_overhead_misc_year5"))||0,N=parseFloat(rr("economic_growth.expenses_repair_maintenance_depreciation_last_year"))||0,k=t+o+h+v+(parseFloat(rr("economic_growth.expenses_repair_maintenance_depreciation_year1"))||0),S=a+l+p+b+(parseFloat(rr("economic_growth.expenses_repair_maintenance_depreciation_year2"))||0),C=r+c+f+_+(parseFloat(rr("economic_growth.expenses_repair_maintenance_depreciation_year3"))||0),A=n+d+x+j+(parseFloat(rr("economic_growth.expenses_repair_maintenance_depreciation_year4"))||0),L=s+u+g+w+(parseFloat(rr("economic_growth.expenses_repair_maintenance_depreciation_year5"))||0);tr("economic_growth.total_expenses_last_year",e+i+m+y+N,{shouldDirty:!1}),tr("economic_growth.total_expenses_year1",k,{shouldDirty:!1}),tr("economic_growth.total_expenses_year2",S,{shouldDirty:!1}),tr("economic_growth.total_expenses_year3",C,{shouldDirty:!1}),tr("economic_growth.total_expenses_year4",A,{shouldDirty:!1}),tr("economic_growth.total_expenses_year5",L,{shouldDirty:!1}),Dr()},Dr=()=>{const e=parseFloat(rr("economic_growth.revenue_sales_last_year"))||0,t=parseFloat(rr("economic_growth.revenue_sales_year1"))||0,a=parseFloat(rr("economic_growth.revenue_sales_year2"))||0,r=parseFloat(rr("economic_growth.revenue_sales_year3"))||0,n=parseFloat(rr("economic_growth.revenue_sales_year4"))||0,s=parseFloat(rr("economic_growth.revenue_sales_year5"))||0,i=parseFloat(rr("economic_growth.total_expenses_last_year"))||0,o=t-(parseFloat(rr("economic_growth.total_expenses_year1"))||0),l=a-(parseFloat(rr("economic_growth.total_expenses_year2"))||0),c=r-(parseFloat(rr("economic_growth.total_expenses_year3"))||0),d=n-(parseFloat(rr("economic_growth.total_expenses_year4"))||0),u=s-(parseFloat(rr("economic_growth.total_expenses_year5"))||0);tr("economic_growth.profit_last_year",e-i,{shouldDirty:!1}),tr("economic_growth.profit_year1",o,{shouldDirty:!1}),tr("economic_growth.profit_year2",l,{shouldDirty:!1}),tr("economic_growth.profit_year3",c,{shouldDirty:!1}),tr("economic_growth.profit_year4",d,{shouldDirty:!1}),tr("economic_growth.profit_year5",u,{shouldDirty:!1}),Mr()},Mr=()=>{const e=parseFloat(rr("economic_growth.profit_last_year"))||0,t=parseFloat(rr("economic_growth.profit_year1"))||0,a=parseFloat(rr("economic_growth.profit_year2"))||0,r=parseFloat(rr("economic_growth.profit_year3"))||0,n=parseFloat(rr("economic_growth.profit_year4"))||0,s=parseFloat(rr("economic_growth.profit_year5"))||0,i=parseFloat(rr("economic_growth.profit_qardan_repayment_last_year"))||0,o=parseFloat(rr("economic_growth.profit_qardan_repayment_year1"))||0,l=parseFloat(rr("economic_growth.profit_qardan_repayment_year2"))||0,c=parseFloat(rr("economic_growth.profit_qardan_repayment_year3"))||0,d=parseFloat(rr("economic_growth.profit_qardan_repayment_year4"))||0,u=parseFloat(rr("economic_growth.profit_qardan_repayment_year5"))||0,m=parseFloat(rr("economic_growth.profit_household_expense_last_year"))||0,h=parseFloat(rr("economic_growth.profit_household_expense_year1"))||0,p=parseFloat(rr("economic_growth.profit_household_expense_year2"))||0,f=parseFloat(rr("economic_growth.profit_household_expense_year3"))||0,x=parseFloat(rr("economic_growth.profit_household_expense_year4"))||0,g=parseFloat(rr("economic_growth.profit_household_expense_year5"))||0,y=parseFloat(rr("economic_growth.profit_other_income_last_year"))||0,v=t-o-h+(parseFloat(rr("economic_growth.profit_other_income_year1"))||0),b=a-l-p+(parseFloat(rr("economic_growth.profit_other_income_year2"))||0),_=r-c-f+(parseFloat(rr("economic_growth.profit_other_income_year3"))||0),j=n-d-x+(parseFloat(rr("economic_growth.profit_other_income_year4"))||0),w=s-u-g+(parseFloat(rr("economic_growth.profit_other_income_year5"))||0);tr("economic_growth.cash_surplus_last_year",e-i-m+y,{shouldDirty:!1}),tr("economic_growth.cash_surplus_year1",v,{shouldDirty:!1}),tr("economic_growth.cash_surplus_year2",b,{shouldDirty:!1}),tr("economic_growth.cash_surplus_year3",_,{shouldDirty:!1}),tr("economic_growth.cash_surplus_year4",j,{shouldDirty:!1}),tr("economic_growth.cash_surplus_year5",w,{shouldDirty:!1})},{data:Tr,isLoading:qr,isError:Br,error:Hr,refetch:Vr}=(0,Ce.useQuery)(["counseling-form",na],()=>Za.get("/api/counseling-forms/case/".concat(na)).then(e=>e.data),{onSuccess:e=>{if(e.stage_permissions&&ja(e.stage_permissions),e.form){const t=e.form;if(t.personal_details_id&&tr("personal_details_id",t.personal_details_id),t.family_details_id&&tr("family_details_id",t.family_details_id),t.assessment_id&&tr("assessment_id",t.assessment_id),t.financial_assistance_id&&tr("financial_assistance_id",t.financial_assistance_id),t.economic_growth_id&&tr("economic_growth_id",t.economic_growth_id),t.declaration_id&&tr("declaration_id",t.declaration_id),t.attachments_id&&tr("attachments_id",t.attachments_id),t.personal_details){const e="string"===typeof t.personal_details?JSON.parse(t.personal_details):t.personal_details;if(tr("personal_details",e),t.applicant_info&&(tr("declaration.applicant_name",t.applicant_info.full_name||""),tr("declaration.applicant_contact",t.applicant_info.phone||"")),e&&e.its_number&&tr("declaration.applicant_its",e.its_number),t.counselor_info){const e=rr("declaration.counselor_name"),a=rr("declaration.counselor_contact");!e&&t.counselor_info.name&&tr("declaration.counselor_name",t.counselor_info.name),!a&&t.counselor_info.contact&&tr("declaration.counselor_contact",t.counselor_info.contact),t.counselor_info.its_number&&tr("declaration.counselor_its",t.counselor_info.its_number)}}if(t.family_details){const e="string"===typeof t.family_details?JSON.parse(t.family_details):t.family_details;if(e.family_members&&(e.family_members=e.family_members.map(e=>e.age_relation||e.education_occupation?{name:e.name||"",age:e.age||"",relation_id:e.relation_id||"",education_id:e.education_id||"",occupation_id:e.occupation_id||"",annual_income:e.annual_income||""}:e)),e.income_expense){const t=e.income_expense;if(t.income&&t.income.business&&!t.income.business_monthly){const e=t.income;t.income={business_monthly:e.business||"",business_yearly:e.business||"",salary_monthly:e.salary||"",salary_yearly:e.salary||"",home_industry_monthly:e.home_industry||"",home_industry_yearly:e.home_industry||"",others_monthly:e.others||"",others_yearly:e.others||""}}if(t.expenses&&t.expenses.food&&!t.expenses.food_monthly){const e=t.expenses;t.expenses={food_monthly:e.food||"",food_yearly:e.food||"",housing_monthly:e.housing||"",housing_yearly:e.housing||"",health_monthly:e.health||"",health_yearly:e.health||"",transport_monthly:e.transport||"",transport_yearly:e.transport||"",education_monthly:e.education||"",education_yearly:e.education||"",deeni_monthly:e.deeni||"",deeni_yearly:e.deeni||"",essentials_monthly:e.essentials||"",essentials_yearly:e.essentials||"",non_essentials_monthly:e.non_essentials||"",non_essentials_yearly:e.non_essentials||"",others_monthly:e.others||"",others_yearly:e.others||"",total_monthly:e.total||"",total_yearly:e.total||""}}t.surplus&&!t.surplus_monthly&&(t.surplus_monthly=t.surplus||"",t.surplus_yearly=t.surplus||""),t.deficit&&!t.deficit_monthly&&(t.deficit_monthly=t.deficit||"",t.deficit_yearly=t.deficit||""),t.scholarship&&!t.scholarship_monthly&&(t.scholarship_monthly=t.scholarship||"",t.scholarship_yearly=t.scholarship||""),t.borrowing&&!t.borrowing_monthly&&(t.borrowing_monthly=t.borrowing||"",t.borrowing_yearly=t.borrowing||"")}tr("family_details",e),setTimeout(()=>{Ar(),Lr(),Or(),Rr(),Dr()},100)}if(t.assessment){const e="string"===typeof t.assessment?JSON.parse(t.assessment):t.assessment;tr("assessment",e)}if(t.financial_assistance){const e="string"===typeof t.financial_assistance?JSON.parse(t.financial_assistance):t.financial_assistance;tr("financial_assistance",e)}if(t.economic_growth){const e="string"===typeof t.economic_growth?JSON.parse(t.economic_growth):t.economic_growth;tr("economic_growth",e),setTimeout(()=>{Rr(),Dr()},100)}if(t.declaration){const e="string"===typeof t.declaration?JSON.parse(t.declaration):t.declaration,a=e=>{if(null==e||""===e)return e;return("string"===typeof e?e:e.toISOString?e.toISOString():String(e)).slice(0,10)};if(e.declaration_date=a(e.declaration_date),e.counselor_date=a(e.counselor_date),e.tr_committee_date=a(e.tr_committee_date),t.counselor_info&&(!e.counselor_name&&t.counselor_info.name&&(e.counselor_name=t.counselor_info.name),!e.counselor_contact&&t.counselor_info.contact&&(e.counselor_contact=t.counselor_info.contact),!e.counselor_its&&t.counselor_info.its_number&&(e.counselor_its=t.counselor_info.its_number)),t.personal_details){const a="string"===typeof t.personal_details?JSON.parse(t.personal_details):t.personal_details;a&&a.its_number&&!e.applicant_its&&(e.applicant_its=a.its_number)}tr("declaration",e)}else t.counselor_info&&(t.counselor_info.name&&tr("declaration.counselor_name",t.counselor_info.name),t.counselor_info.contact&&tr("declaration.counselor_contact",t.counselor_info.contact));if(t.attachments){const e="string"===typeof t.attachments?JSON.parse(t.attachments):t.attachments;tr("attachments.work_place_photo",e.work_place_photo||!1),tr("attachments.quotation",e.quotation||!1),tr("attachments.product_brochure",e.product_brochure||!1),tr("attachments.income_tax_return",e.income_tax_return||!1),tr("attachments.financial_statements",e.financial_statements||!1),tr("attachments.cancelled_cheque",e.cancelled_cheque||!1),tr("attachments.pan_card",e.pan_card||!1),tr("attachments.aadhar_card",e.aadhar_card||!1),tr("attachments.other_documents",e.other_documents||!1)}}},onError:e=>{var t,a;da((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to load counseling form")}});(0,r.useEffect)(()=>{if(null!==Tr&&void 0!==Tr&&Tr.form){const e=Tr.form,t=rr("personal_details")||e.personal_details,a=e.applicant_info||{},r=null===Ha||void 0===Ha?void 0:Ha.find(e=>{var t;return"self"===(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())});if(e.family_details){const n="string"===typeof e.family_details?JSON.parse(e.family_details):e.family_details;if(n.family_members&&n.family_members.length>0){const e=[...n.family_members];e[0]?e[0]=Pe(Pe({},e[0]),{},{name:a.full_name||(null===t||void 0===t?void 0:t.its_number)||e[0].name||"",age:(null===t||void 0===t?void 0:t.age)||e[0].age||"",relation_id:(null===r||void 0===r?void 0:r.id)||e[0].relation_id||"",education_id:e[0].education_id||"",occupation_id:e[0].occupation_id||"",annual_income:e[0].annual_income||""}):e.unshift({name:a.full_name||(null===t||void 0===t?void 0:t.its_number)||"",age:(null===t||void 0===t?void 0:t.age)||"",relation_id:(null===r||void 0===r?void 0:r.id)||"",education_id:"",occupation_id:"",annual_income:""}),cr(e)}else{const e={name:a.full_name||(null===t||void 0===t?void 0:t.its_number)||"",age:(null===t||void 0===t?void 0:t.age)||"",relation_id:(null===r||void 0===r?void 0:r.id)||"",education_id:"",occupation_id:"",annual_income:""};cr([e])}}else if(t||a.full_name){const e={name:a.full_name||(null===t||void 0===t?void 0:t.its_number)||"",age:(null===t||void 0===t?void 0:t.age)||"",relation_id:(null===r||void 0===r?void 0:r.id)||"",education_id:"",occupation_id:"",annual_income:""};cr([e])}if(setTimeout(()=>{Ar(),Lr(),Or(),Rr(),Dr()},200),e.financial_assistance){const t="string"===typeof e.financial_assistance?JSON.parse(e.financial_assistance):e.financial_assistance;if(t.timeline&&t.timeline.length>0?hr(t.timeline):hr([{timeline:"",purpose:"",amount:"",support_document:""}]),t.timeline_assistance&&"object"===typeof t.timeline_assistance){const e=["immediate","after_1st_yr","after_2nd_yr","after_3rd_yr","after_4th_yr","5th_yr"],a=Pe({},t.timeline_assistance);e.forEach(e=>{a[e]&&0!==a[e].length||(a[e]=[{id:Date.now()+Math.random(),purpose_cost:"",enayat:"",qardan:"",months:""}])}),Pa(a)}else Pa({immediate:[{id:Date.now()+Math.random()+10,purpose_cost:"",enayat:"",qardan:"",months:""}],after_1st_yr:[{id:Date.now()+Math.random()+11,purpose_cost:"",enayat:"",qardan:"",months:""}],after_2nd_yr:[{id:Date.now()+Math.random()+12,purpose_cost:"",enayat:"",qardan:"",months:""}],after_3rd_yr:[{id:Date.now()+Math.random()+13,purpose_cost:"",enayat:"",qardan:"",months:""}],after_4th_yr:[{id:Date.now()+Math.random()+14,purpose_cost:"",enayat:"",qardan:"",months:""}],"5th_yr":[{id:Date.now()+Math.random()+15,purpose_cost:"",enayat:"",qardan:"",months:""}]});if(t.action_plan&&Array.isArray(t.action_plan)&&t.action_plan.length>0){const e={upto_1st_year_end:[],"2nd_and_3rd_year":[],"4th_and_5th_year":[]};t.action_plan.forEach(t=>{t.timeline_period&&e[t.timeline_period]&&e[t.timeline_period].push({id:t.id||Date.now()+Math.random(),action_text:t.action_text||""})});["upto_1st_year_end","2nd_and_3rd_year","4th_and_5th_year"].forEach(t=>{0===e[t].length&&(e[t]=[{id:Date.now()+Math.random(),action_text:""}])}),Aa(e)}else Aa({upto_1st_year_end:[{id:Date.now()+Math.random(),action_text:""}],"2nd_and_3rd_year":[{id:Date.now()+Math.random()+1,action_text:""}],"4th_and_5th_year":[{id:Date.now()+Math.random()+2,action_text:""}]}),Pa({immediate:[{id:Date.now()+Math.random()+10,purpose_cost:"",enayat:"",qardan:"",months:""}],after_1st_yr:[{id:Date.now()+Math.random()+11,purpose_cost:"",enayat:"",qardan:"",months:""}],after_2nd_yr:[{id:Date.now()+Math.random()+12,purpose_cost:"",enayat:"",qardan:"",months:""}],after_3rd_yr:[{id:Date.now()+Math.random()+13,purpose_cost:"",enayat:"",qardan:"",months:""}],after_4th_yr:[{id:Date.now()+Math.random()+14,purpose_cost:"",enayat:"",qardan:"",months:""}],"5th_yr":[{id:Date.now()+Math.random()+15,purpose_cost:"",enayat:"",qardan:"",months:""}]})}else hr([{timeline:"",purpose:"",amount:"",support_document:""}]),Aa({upto_1st_year_end:[{id:Date.now()+Math.random(),action_text:""}],"2nd_and_3rd_year":[{id:Date.now()+Math.random()+1,action_text:""}],"4th_and_5th_year":[{id:Date.now()+Math.random()+2,action_text:""}]}),Pa({immediate:[{id:Date.now()+Math.random()+10,purpose_cost:"",enayat:"",qardan:"",months:""}],after_1st_yr:[{id:Date.now()+Math.random()+11,purpose_cost:"",enayat:"",qardan:"",months:""}],after_2nd_yr:[{id:Date.now()+Math.random()+12,purpose_cost:"",enayat:"",qardan:"",months:""}],after_3rd_yr:[{id:Date.now()+Math.random()+13,purpose_cost:"",enayat:"",qardan:"",months:""}],after_4th_yr:[{id:Date.now()+Math.random()+14,purpose_cost:"",enayat:"",qardan:"",months:""}],"5th_yr":[{id:Date.now()+Math.random()+15,purpose_cost:"",enayat:"",qardan:"",months:""}]});if(e.financial_assistance){const t="string"===typeof e.financial_assistance?JSON.parse(e.financial_assistance):e.financial_assistance;if(t.qh_fields&&Array.isArray(t.qh_fields)&&t.qh_fields.length>0){const e=["QH1","QH2","QH3","Local QH"],a=t.qh_fields.map(e=>Pe(Pe({},e),{},{name:e.name||e.qh_name||""}));e.forEach((e,t)=>{const r=a.find(t=>t.name===e||t.name===e.replace(" ","")||"Local QH"===e&&(t.name||"").toLowerCase().includes("local"));r||a.push({id:Math.max(...a.map(e=>e.id),0)+t+1,name:e,year1:"",year2:"",year3:"",year4:"",year5:""})}),Sa(a)}else Sa([{id:1,name:"QH1",year1:"",year2:"",year3:"",year4:"",year5:""},{id:2,name:"QH2",year1:"",year2:"",year3:"",year4:"",year5:""},{id:3,name:"QH3",year1:"",year2:"",year3:"",year4:"",year5:""},{id:4,name:"Local QH",year1:"",year2:"",year3:"",year4:"",year5:""}])}else Sa([{id:1,name:"QH1",year1:"",year2:"",year3:"",year4:"",year5:""},{id:2,name:"QH2",year1:"",year2:"",year3:"",year4:"",year5:""},{id:3,name:"QH3",year1:"",year2:"",year3:"",year4:"",year5:""},{id:4,name:"Local QH",year1:"",year2:"",year3:"",year4:"",year5:""}]);if(e.economic_growth){const t="string"===typeof e.economic_growth?JSON.parse(e.economic_growth):e.economic_growth;t.projections&&t.projections.length>0&&gr(t.projections)}}},[Tr,cr,hr,gr]);rr(["family_details.income_expense.income.business_monthly","family_details.income_expense.income.salary_monthly","family_details.income_expense.income.home_industry_monthly","family_details.income_expense.income.others_monthly"]),rr(["family_details.income_expense.expenses.food_monthly","family_details.income_expense.expenses.housing_monthly","family_details.income_expense.expenses.health_monthly","family_details.income_expense.expenses.education_monthly","family_details.income_expense.expenses.transport_monthly","family_details.income_expense.expenses.deeni_monthly","family_details.income_expense.expenses.others_monthly"]),rr(["family_details.assets_liabilities.liabilities.borrowing_qardan","family_details.assets_liabilities.liabilities.goods_credit","family_details.assets_liabilities.liabilities.others"]);const Qr=rr(["economic_growth.expenses_raw_material_last_year","economic_growth.expenses_raw_material_year1","economic_growth.expenses_raw_material_year2","economic_growth.expenses_raw_material_year3","economic_growth.expenses_raw_material_year4","economic_growth.expenses_raw_material_year5","economic_growth.expenses_labor_salary_last_year","economic_growth.expenses_labor_salary_year1","economic_growth.expenses_labor_salary_year2","economic_growth.expenses_labor_salary_year3","economic_growth.expenses_labor_salary_year4","economic_growth.expenses_labor_salary_year5","economic_growth.expenses_rent_last_year","economic_growth.expenses_rent_year1","economic_growth.expenses_rent_year2","economic_growth.expenses_rent_year3","economic_growth.expenses_rent_year4","economic_growth.expenses_rent_year5","economic_growth.expenses_overhead_misc_last_year","economic_growth.expenses_overhead_misc_year1","economic_growth.expenses_overhead_misc_year2","economic_growth.expenses_overhead_misc_year3","economic_growth.expenses_overhead_misc_year4","economic_growth.expenses_overhead_misc_year5","economic_growth.expenses_repair_maintenance_depreciation_last_year","economic_growth.expenses_repair_maintenance_depreciation_year1","economic_growth.expenses_repair_maintenance_depreciation_year2","economic_growth.expenses_repair_maintenance_depreciation_year3","economic_growth.expenses_repair_maintenance_depreciation_year4","economic_growth.expenses_repair_maintenance_depreciation_year5"]),Jr=rr(["economic_growth.revenue_sales_last_year","economic_growth.revenue_sales_year1","economic_growth.revenue_sales_year2","economic_growth.revenue_sales_year3","economic_growth.revenue_sales_year4","economic_growth.revenue_sales_year5","economic_growth.total_expenses_last_year","economic_growth.total_expenses_year1","economic_growth.total_expenses_year2","economic_growth.total_expenses_year3","economic_growth.total_expenses_year4","economic_growth.total_expenses_year5"]);(0,r.useEffect)(()=>{"growth"===ha&&null!==Tr&&void 0!==Tr&&Tr.form&&Rr()},[Qr,ha,Tr]),(0,r.useEffect)(()=>{"growth"===ha&&null!==Tr&&void 0!==Tr&&Tr.form&&Dr()},[Jr,ha,Tr]);const Yr=rr(["economic_growth.profit_last_year","economic_growth.profit_year1","economic_growth.profit_year2","economic_growth.profit_year3","economic_growth.profit_year4","economic_growth.profit_year5","economic_growth.profit_qardan_repayment_last_year","economic_growth.profit_qardan_repayment_year1","economic_growth.profit_qardan_repayment_year2","economic_growth.profit_qardan_repayment_year3","economic_growth.profit_qardan_repayment_year4","economic_growth.profit_qardan_repayment_year5","economic_growth.profit_household_expense_last_year","economic_growth.profit_household_expense_year1","economic_growth.profit_household_expense_year2","economic_growth.profit_household_expense_year3","economic_growth.profit_household_expense_year4","economic_growth.profit_household_expense_year5","economic_growth.profit_other_income_last_year","economic_growth.profit_other_income_year1","economic_growth.profit_other_income_year2","economic_growth.profit_other_income_year3","economic_growth.profit_other_income_year4","economic_growth.profit_other_income_year5"]);(0,r.useEffect)(()=>{"growth"===ha&&null!==Tr&&void 0!==Tr&&Tr.form&&Mr()},[Yr,ha,Tr]),(0,r.useEffect)(()=>{var e,t;if("declaration"===ha&&null!==Tr&&void 0!==Tr&&null!==(e=Tr.form)&&void 0!==e&&e.counselor_info){const e=Tr.form.counselor_info,t=rr("declaration.counselor_name"),a=rr("declaration.counselor_contact"),r=rr("declaration.counselor_its");!t&&e.name&&tr("declaration.counselor_name",e.name),!a&&e.contact&&tr("declaration.counselor_contact",e.contact),!r&&e.its_number&&tr("declaration.counselor_its",e.its_number)}if("declaration"===ha&&null!==Tr&&void 0!==Tr&&null!==(t=Tr.form)&&void 0!==t&&t.personal_details){const e="string"===typeof Tr.form.personal_details?JSON.parse(Tr.form.personal_details):Tr.form.personal_details;!rr("declaration.applicant_its")&&null!==e&&void 0!==e&&e.its_number&&tr("declaration.applicant_its",e.its_number)}},[ha,Tr,rr,tr]),(0,r.useEffect)(()=>{const e=rr("declaration.tr_committee_its");e&&!Ma&&Ta(e)},[rr("declaration.tr_committee_its"),Ma]),(0,r.useEffect)(()=>{null!==Tr&&void 0!==Tr&&Tr.form&&!va&&setTimeout(()=>{if("1"===ia.get("step"))return pa("personal"),ba(!0),void oa({});const e=Tr.form,t={personal:"personal_details_id",family:"family_details_id",assessment:"assessment_id",financial:"financial_assistance_id",growth:"economic_growth_id",declaration:"declaration_id",attachments:"attachments_id"};if(e.is_complete)return pa("personal"),void ba(!0);for(const a of Na){if(!e[t[a.id]])return pa(a.id),void ba(!0)}pa(Na[Na.length-1].id),ba(!0)},300)},[Tr,va,Na,ia,oa]),(0,r.useEffect)(()=>{if(Wa&&Wa.length>0){const e=Wa.reduce((e,t)=>(e[t.stage]||(e[t.stage]=[]),e[t.stage].push(t),e),{});Object.keys(e).forEach(t=>{const a=e[t].map(e=>({name:e.file_name,size:e.file_size,type:e.file_type,path:e.file_path,id:e.id}));switch(t){case"work_place_photo":tr("attachments.work_place_photo_files",a),tr("attachments.work_place_photo",!0);break;case"quotation":tr("attachments.quotation_file",a[0]||null),tr("attachments.quotation",!0);break;case"product_brochure":tr("attachments.product_brochure_files",a),tr("attachments.product_brochure",!0);break;case"income_tax_return":tr("attachments.income_tax_return_file",a[0]||null),tr("attachments.income_tax_return",!0);break;case"financial_statements":tr("attachments.financial_statements_file",a[0]||null),tr("attachments.financial_statements",!0);break;case"cancelled_cheque":tr("attachments.cancelled_cheque_file",a[0]||null),tr("attachments.cancelled_cheque",!0);break;case"pan_card":tr("attachments.pan_card_file",a[0]||null),tr("attachments.pan_card",!0);break;case"aadhar_card":tr("attachments.aadhar_card_file",a[0]||null),tr("attachments.aadhar_card",!0);break;case"other_documents":tr("attachments.other_documents_files",a),tr("attachments.other_documents",!0)}})}},[Wa,tr,Tr]);const Gr=(0,Ce.useMutation)(e=>{var t;let{section:a,data:r}=e;return Za.put("/api/counseling-forms/".concat(null===Tr||void 0===Tr||null===(t=Tr.form)||void 0===t?void 0:t.id,"/section/").concat(a),r)},{onSuccess:()=>{ma("Section saved successfully!"),da(""),setTimeout(()=>ma(""),3e3)},onError:e=>{var t,a,r,n,s,i,o,l;403===(null===(t=e.response)||void 0===t?void 0:t.status)||null!==(a=e.response)&&void 0!==a&&null!==(r=a.data)&&void 0!==r&&null!==(n=r.error)&&void 0!==n&&n.includes("permission")?da("You do not have permission"):da((null===(s=e.response)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.error)||(null===(o=e.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.message)||"Failed to save section");ma("")}}),{hasPermission:Kr,loading:$r}=Cr("counseling_forms","complete"),Xr="super_admin"===(null===la||void 0===la?void 0:la.role)||Kr,Zr=(0,Ce.useMutation)(()=>{var e;return Za.put("/api/counseling-forms/".concat(null===Tr||void 0===Tr||null===(e=Tr.form)||void 0===e?void 0:e.id,"/complete"))},{onSuccess:()=>{ma("Form completed successfully and submitted to welfare department!"),da(""),setTimeout(()=>{sa("/cases")},2e3)},onError:e=>{var t,a;da((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Failed to complete form"),ma("")}}),en={personal_details:"personal",family_details:"family",assessment:"assessment",financial_assistance:"financial",economic_growth:"growth",declaration:"declaration",attachments:"attachments"},tn={personal_details:"personal_details",family_details:"family_details",assessment:"assessment",financial_assistance:"financial_assistance",economic_growth:"economic_growth",declaration:"declaration",attachments:"attachments"},an=async(e,t)=>{const a=en[e];if(!a||on(a))try{"attachments"===e?await nn(t,Wa):await Gr.mutateAsync({section:e,data:t}),ma("Draft saved successfully!")}catch(ca){var r,n;console.error("Error saving draft:",ca),da((null===(r=ca.response)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.error)||"Failed to save draft")}else da("You do not have permission")},rn=async(e,t)=>{const a=en[e];if(a&&!on(a))return void da("You do not have permission");const r=tn[e];if(r){if(!await sr(r)){da("Please fill in all required fields before saving");const e=Object.keys(Xa).find(e=>e.startsWith(r));if(e){const t=document.querySelector('[name="'.concat(e,'"]'));t&&t.scrollIntoView({behavior:"smooth",block:"center"})}return}}try{var n;"attachments"===e?await nn(t,Wa):await Gr.mutateAsync({section:e,data:t});const a=await Vr();if(null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.form){const e=a.data.form,t={personal:"personal_details_id",family:"family_details_id",assessment:"assessment_id",financial:"financial_assistance_id",growth:"economic_growth_id",declaration:"declaration_id",attachments:"attachments_id"};let r=null;for(const a of Na){if(!e[t[a.id]]){r=a.id;break}}r||(r=Na[Na.length-1].id),r&&r!==ha&&(pa(r),window.scrollTo({top:0,behavior:"smooth"}))}}catch(ca){console.error("Error saving section:",ca)}},nn=async(e,t)=>{try{var a,r,n,s;ya(!0);const i=null===Tr||void 0===Tr||null===(a=Tr.form)||void 0===a?void 0:a.case_id;if(!i)throw new Error("Case ID not found");const o=[],l=[],c=(e,t,a)=>{const r=Array.isArray(t)?t:t?[t]:[],n=new Set(r.filter(e=>e.id).map(e=>e.id));a.filter(t=>t.stage===e&&!n.has(t.id)).forEach(e=>{l.push(Za.delete("/api/attachments/".concat(e.id)).then(()=>{}).catch(t=>{console.error("Failed to delete file: ".concat(e.file_name),t)}))})};if(t&&t.length>0&&(c("work_place_photo",e.work_place_photo_files,t),c("quotation",e.quotation_file,t),c("product_brochure",e.product_brochure_files,t),c("income_tax_return",e.income_tax_return_file,t),c("financial_statements",e.financial_statements_file,t),c("cancelled_cheque",e.cancelled_cheque_file,t),c("pan_card",e.pan_card_file,t),c("aadhar_card",e.aadhar_card_file,t),c("other_documents",e.other_documents_files,t)),(null===(r=e.work_place_photo_files)||void 0===r?void 0:r.length)>0){const t=e.work_place_photo_files.filter(e=>!e.id);if(t.length>0){const e=new FormData;t.forEach(t=>{e.append("files",t)}),e.append("stage","work_place_photo"),o.push(Za.post("/api/attachments/upload-multiple/".concat(i),e,{headers:{"Content-Type":"multipart/form-data"}}))}}if(e.quotation_file&&!e.quotation_file.id){const t=new FormData;t.append("file",e.quotation_file),t.append("stage","quotation"),o.push(Za.post("/api/attachments/upload/".concat(i),t,{headers:{"Content-Type":"multipart/form-data"}}))}if((null===(n=e.product_brochure_files)||void 0===n?void 0:n.length)>0){const t=e.product_brochure_files.filter(e=>!e.id);if(t.length>0){const e=new FormData;t.forEach(t=>{e.append("files",t)}),e.append("stage","product_brochure"),o.push(Za.post("/api/attachments/upload-multiple/".concat(i),e,{headers:{"Content-Type":"multipart/form-data"}}))}}if(e.income_tax_return_file&&!e.income_tax_return_file.id){const t=new FormData;t.append("file",e.income_tax_return_file),t.append("stage","income_tax_return"),o.push(Za.post("/api/attachments/upload/".concat(i),t,{headers:{"Content-Type":"multipart/form-data"}}))}if(e.financial_statements_file&&!e.financial_statements_file.id){const t=new FormData;t.append("file",e.financial_statements_file),t.append("stage","financial_statements"),o.push(Za.post("/api/attachments/upload/".concat(i),t,{headers:{"Content-Type":"multipart/form-data"}}))}if(e.cancelled_cheque_file&&!e.cancelled_cheque_file.id){const t=new FormData;t.append("file",e.cancelled_cheque_file),t.append("stage","cancelled_cheque"),o.push(Za.post("/api/attachments/upload/".concat(i),t,{headers:{"Content-Type":"multipart/form-data"}}))}if(e.pan_card_file&&!e.pan_card_file.id){const t=new FormData;t.append("file",e.pan_card_file),t.append("stage","pan_card"),o.push(Za.post("/api/attachments/upload/".concat(i),t,{headers:{"Content-Type":"multipart/form-data"}}))}if(e.aadhar_card_file&&!e.aadhar_card_file.id){const t=new FormData;t.append("file",e.aadhar_card_file),t.append("stage","aadhar_card"),o.push(Za.post("/api/attachments/upload/".concat(i),t,{headers:{"Content-Type":"multipart/form-data"}}))}if((null===(s=e.other_documents_files)||void 0===s?void 0:s.length)>0){const t=e.other_documents_files.filter(e=>!e.id);if(t.length>0){const e=new FormData;t.forEach(t=>{e.append("files",t)}),e.append("stage","other_documents"),o.push(Za.post("/api/attachments/upload-multiple/".concat(i),e,{headers:{"Content-Type":"multipart/form-data"}}))}}const d=[...o,...l];d.length>0&&(await Promise.all(d),l.length>0&&ma("".concat(l.length," file(s) deleted successfully")));const u={work_place_photo:e.work_place_photo,quotation:e.quotation,product_brochure:e.product_brochure,income_tax_return:e.income_tax_return,financial_statements:e.financial_statements,cancelled_cheque:e.cancelled_cheque,pan_card:e.pan_card,aadhar_card:e.aadhar_card,other_documents:e.other_documents};await Gr.mutateAsync({section:"attachments",data:u})}catch(ca){throw console.error("Error saving attachments:",ca),ca}finally{ya(!1)}},sn={personal:"personal",family:"family",assessment:"assessment",financial:"financial",growth:"growth",declaration:"declaration",attachments:"attachments"},on=e=>{var t,a;if("super_admin"===(null===la||void 0===la?void 0:la.role))return!0;if(null!==Tr&&void 0!==Tr&&null!==(t=Tr.form)&&void 0!==t&&t.is_complete&&"welfare_rejected"!==(null===Tr||void 0===Tr||null===(a=Tr.form)||void 0===a?void 0:a.case_status))return!1;const r=sn[e];if(!r)return!0;const n=_a[r];return!n||!0===n.can_update},cn=e=>{var t,a,r,n,s,i,o,l,c,d,u,m,h;const p=rr();switch(e){case"personal":return p.personal_details_id||(null===(t=p.personal_details)||void 0===t?void 0:t.its_number)&&(null===(a=p.personal_details)||void 0===a?void 0:a.age)&&(null===(r=p.personal_details)||void 0===r?void 0:r.present_occupation);case"family":return p.family_details_id||(null===(n=p.family_details)||void 0===n||null===(s=n.family_members)||void 0===s?void 0:s.length)>0&&(null===(i=p.family_details)||void 0===i||null===(o=i.family_members)||void 0===o?void 0:o.some(e=>e.name&&e.age&&e.relation_id));case"assessment":return p.assessment_id||(null===(l=p.assessment)||void 0===l||null===(c=l.background)||void 0===c?void 0:c.education);case"financial":return p.financial_assistance_id||(null===(d=p.financial_assistance)||void 0===d?void 0:d.assistance_required);case"growth":return p.economic_growth_id||p.economic_growth&&((null===(u=p.economic_growth.projections)||void 0===u?void 0:u.length)>0||p.economic_growth.revenue_sales_last_year>0||p.economic_growth.revenue_sales_year1>0||p.economic_growth.cash_in_hand_last_year>0||p.economic_growth.cash_in_hand_year1>0||p.economic_growth.raw_materials_last_year>0||p.economic_growth.raw_materials_year1>0||p.economic_growth.sale_on_credit_last_year>0||p.economic_growth.sale_on_credit_year1>0||p.economic_growth.machines_equipment_last_year>0||p.economic_growth.machines_equipment_year1>0||p.economic_growth.vehicles_last_year>0||p.economic_growth.vehicles_year1>0||p.economic_growth.shop_godown_last_year>0||p.economic_growth.shop_godown_year1>0||p.economic_growth.trademark_goodwill_last_year>0||p.economic_growth.trademark_goodwill_year1>0||p.economic_growth.purchase_on_credit_last_year>0||p.economic_growth.purchase_on_credit_year1>0||p.economic_growth.expenses_raw_material_last_year>0||p.economic_growth.expenses_raw_material_year1>0);case"declaration":return p.declaration_id||(null===(m=p.declaration)||void 0===m?void 0:m.applicant_confirmation)&&""!==p.declaration.applicant_confirmation.trim();case"attachments":return p.attachments_id||(null===(h=p.attachments)||void 0===h?void 0:h.work_place_photo);default:return!1}},dn=()=>Na.filter(e=>cn(e.id)).length;return qr?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):Br?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,er.jsx)(Ur,{severity:"error",className:"mb-4",onClose:()=>window.location.reload(),children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"font-medium",children:"Error Loading Counseling Form"}),(0,er.jsx)("p",{className:"text-sm mt-1",children:(null===Hr||void 0===Hr||null===(un=Hr.response)||void 0===un||null===(mn=un.data)||void 0===mn?void 0:mn.error)||"Failed to load counseling form data"}),(0,er.jsxs)("p",{className:"text-xs mt-2 text-gray-600",children:["Error details: ",(null===Hr||void 0===Hr?void 0:Hr.message)||"Unknown error"]})]}),(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>Vr(),className:"ml-4",children:"Retry"})]})}),(0,er.jsx)("div",{className:"text-center",children:(0,er.jsx)(Fr,{variant:"outline",onClick:()=>sa("/cases"),className:"mt-4",children:"Back to Cases"})})]})}):(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Application and Assessment Form (Program: SHND)"}),(0,er.jsxs)("p",{className:"text-gray-600",children:["Case ID: ",na]})]}),(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(vn,{variant:null!==Tr&&void 0!==Tr&&null!==(e=Tr.form)&&void 0!==e&&e.is_complete?"success":"warning",children:null!==Tr&&void 0!==Tr&&null!==(t=Tr.form)&&void 0!==t&&t.is_complete?"Completed":"In Progress"}),!(null!==Tr&&void 0!==Tr&&null!==(a=Tr.form)&&void 0!==a&&a.is_complete)&&Xr&&(0,er.jsx)(Fr,{onClick:async()=>{window.confirm("Are you sure you want to complete this form and submit it to the welfare department? This action cannot be undone.")&&await Zr.mutateAsync()},variant:"primary",disabled:Zr.isLoading||dn()!==Na.length,children:"Mark as Complete & Submit"})]})]})}),ca&&(0,er.jsx)(Ur,{severity:"error",className:"mb-4",onClose:()=>da(""),children:ca}),ua&&(0,er.jsx)("div",{className:"fixed top-4 right-4 z-50 max-w-sm",children:(0,er.jsx)(Wr,{severity:"success",onClose:()=>ma(""),autoClose:!0,duration:4e3,children:ua})}),(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)(kn,{steps:Na,currentStep:(()=>{const e=Na.findIndex(e=>e.id===ha);return e>=0?e:0})(),completedSteps:Na.filter(e=>cn(e.id)).map(e=>e.id),onStepClick:(e,t)=>{pa(e)}}),(0,er.jsx)("div",{className:"mt-4 text-center",children:(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:["Progress: ",dn()," of ",Na.length," sections completed"]})})]}),(0,er.jsxs)("form",{onSubmit:Ka(async e=>{xa(!0);try{const t=["personal_details","family_details","assessment","financial_assistance","economic_growth","declaration","attachments"];for(const a of t)e[a]&&await rn(a,e[a]);ma("All sections saved successfully!")}catch(ca){da("Failed to save form data")}finally{xa(!1)}}),children:[(0,er.jsx)(Nn,{tabs:[{id:"personal",label:"Personal Details",icon:"\ud83d\udc64"},{id:"family",label:"Family Details",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"},{id:"assessment",label:"Assessment",icon:"\ud83d\udccb"},{id:"financial",label:"Financial Assistance",icon:"\ud83d\udcb0"},{id:"growth",label:"Economic Growth",icon:"\ud83d\udcc8"},{id:"declaration",label:"Declaration",icon:"\ud83d\udcdd"},{id:"attachments",label:"Attachments",icon:"\ud83d\udcce"}],activeTab:ha,onTabChange:pa,className:"mb-6"}),(0,er.jsxs)(zr,{className:"p-6",children:["personal"===ha&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)("div",{className:"border-b border-gray-200 pb-4",children:(0,er.jsx)("div",{className:"flex items-center justify-between",children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"1. Personal Details"})})}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"ITS Number",required:!0},Ga("personal_details.its_number",{required:"ITS number is required"})),{},{error:null===(n=Xa.personal_details)||void 0===n||null===(s=n.its_number)||void 0===s?void 0:s.message,disabled:!0,className:"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Name",required:!0},Ga("personal_details.name",{required:"Name is required"})),{},{error:null===(i=Xa.personal_details)||void 0===i||null===(o=i.name)||void 0===o?void 0:o.message,disabled:!0,className:"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Age",type:"number",required:!0},Ga("personal_details.age",{required:"Age is required"})),{},{error:null===(l=Xa.personal_details)||void 0===l||null===(c=l.age)||void 0===c?void 0:c.message,disabled:!0,className:"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Education"},Ga("personal_details.education")),{},{error:null===(d=Xa.personal_details)||void 0===d||null===(u=d.education)||void 0===u?void 0:u.message,disabled:!on("personal"),className:on("personal")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Jamiat",required:!0},Ga("personal_details.jamiat",{required:"Jamiat is required"})),{},{error:null===(m=Xa.personal_details)||void 0===m||null===(h=m.jamiat)||void 0===h?void 0:h.message,disabled:!0,className:"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Jamaat",required:!0},Ga("personal_details.jamaat",{required:"Jamaat is required"})),{},{error:null===(p=Xa.personal_details)||void 0===p||null===(f=p.jamaat)||void 0===f?void 0:f.message,disabled:!0,className:"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Contact Number",required:!0},Ga("personal_details.contact_number",{required:"Contact number is required"})),{},{error:null===(x=Xa.personal_details)||void 0===x||null===(g=x.contact_number)||void 0===g?void 0:g.message,disabled:!on("personal"),className:on("personal")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Email ID",type:"email",required:!0},Ga("personal_details.email",{required:"Email ID is required"})),{},{error:null===(y=Xa.personal_details)||void 0===y||null===(v=y.email)||void 0===v?void 0:v.message,disabled:!on("personal"),className:on("personal")?"":"bg-gray-100"}))]}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Residential Address",required:!0},Ga("personal_details.residential_address",{required:"Residential address is required"})),{},{error:null===(b=Xa.personal_details)||void 0===b||null===(_=b.residential_address)||void 0===_?void 0:_.message,disabled:!on("personal"),className:on("personal")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Present Occupation",required:!0},Ga("personal_details.present_occupation",{required:"Present occupation is required"})),{},{error:null===(j=Xa.personal_details)||void 0===j||null===(w=j.present_occupation)||void 0===w?void 0:w.message,disabled:!on("personal"),className:on("personal")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Occupation Address",required:!0},Ga("personal_details.occupation_address",{required:"Occupation address is required"})),{},{error:null===(N=Xa.personal_details)||void 0===N||null===(k=N.occupation_address)||void 0===k?void 0:k.message,disabled:!on("personal"),className:on("personal")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Other Relevant Information",required:!0},Ga("personal_details.other_info",{required:"Other relevant information is required"})),{},{error:null===(S=Xa.personal_details)||void 0===S||null===(C=S.other_info)||void 0===C?void 0:C.message,disabled:!on("personal"),className:on("personal")?"":"bg-gray-100"}))]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>an("personal_details",rr("personal_details")),disabled:Gr.isLoading||!on("personal"),className:on("personal")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save as Draft"}),(0,er.jsx)(Fr,{type:"button",onClick:()=>rn("personal_details",rr("personal_details")),disabled:Gr.isLoading||!on("personal"),className:on("personal")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save and Next"})]})]}),"personal"===ha&&wa&&(0,er.jsx)(ad,{caseId:na,workflowStep:"personal"}),"family"===ha&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)("div",{className:"border-b border-gray-200 pb-4",children:(0,er.jsx)("div",{className:"flex items-center justify-between",children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"2. Family Details"})})}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900",children:"2.1 Family Members"}),(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>or({name:"",age:"",relation_id:"",education_id:"",occupation_id:"",annual_income:""}),disabled:!on("family"),className:on("family")?"":"opacity-50 cursor-not-allowed",children:"Add Member"})]}),(0,er.jsx)("div",{className:"space-y-4",children:ir.map((e,t)=>{var a,r,n,s,i,o,l,c,d,u,m,h,p,f,x,g,y,v,b,_,j,w,N,k;const S=0===t,C=!on("family"),A=S||C;return(0,er.jsx)(zr,{className:"p-4",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Name",required:!0},Ga("family_details.family_members.".concat(t,".name"),{required:"Name is required"})),{},{error:null===(a=Xa.family_details)||void 0===a||null===(r=a.family_members)||void 0===r||null===(n=r[t])||void 0===n||null===(s=n.name)||void 0===s?void 0:s.message,disabled:A,className:A?"bg-gray-100":""})),(0,er.jsx)(Ir,Pe(Pe({label:"Age",type:"number",required:!0,onKeyPress:cd},Ga("family_details.family_members.".concat(t,".age"),{required:"Age is required"})),{},{error:null===(i=Xa.family_details)||void 0===i||null===(o=i.family_members)||void 0===o||null===(l=o[t])||void 0===l||null===(c=l.age)||void 0===c?void 0:c.message,disabled:A,className:A?"bg-gray-100":""})),(0,er.jsxs)(ln,Pe(Pe({label:"Relation",required:!0},Ga("family_details.family_members.".concat(t,".relation_id"),{required:"Relation is required"})),{},{error:null===(d=Xa.family_details)||void 0===d||null===(u=d.family_members)||void 0===u||null===(m=u[t])||void 0===m||null===(h=m.relation_id)||void 0===h?void 0:h.message,disabled:A,className:A?"bg-gray-100":"",children:[(0,er.jsx)("option",{value:"",children:"Select Relation"}),null===Ha||void 0===Ha?void 0:Ha.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})),(0,er.jsxs)(ln,Pe(Pe({label:"Education",required:!0},Ga("family_details.family_members.".concat(t,".education_id"),{required:"Education is required"})),{},{error:null===(p=Xa.family_details)||void 0===p||null===(f=p.family_members)||void 0===f||null===(x=f[t])||void 0===x||null===(g=x.education_id)||void 0===g?void 0:g.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100",children:[(0,er.jsx)("option",{value:"",children:"Select Education"}),null===Ja||void 0===Ja?void 0:Ja.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})),(0,er.jsxs)(ln,Pe(Pe({label:"Occupation",required:!0},Ga("family_details.family_members.".concat(t,".occupation_id"),{required:"Occupation is required"})),{},{error:null===(y=Xa.family_details)||void 0===y||null===(v=y.family_members)||void 0===v||null===(b=v[t])||void 0===b||null===(_=b.occupation_id)||void 0===_?void 0:_.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100",children:[(0,er.jsx)("option",{value:"",children:"Select Occupation"}),null===Ya||void 0===Ya?void 0:Ya.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})),(0,er.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Annual Income",type:"number",required:!0,onKeyPress:dd},Ga("family_details.family_members.".concat(t,".annual_income"),{required:"Annual income is required"})),{},{error:null===(j=Xa.family_details)||void 0===j||null===(w=j.family_members)||void 0===w||null===(N=w[t])||void 0===N||null===(k=N.annual_income)||void 0===k?void 0:k.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"})),S?null:(0,er.jsx)(Fr,{type:"button",variant:"danger",onClick:()=>lr(t),disabled:!on("family"),className:on("family")?"":"opacity-50 cursor-not-allowed",children:"Remove"})]})]})},e.id)})}),(0,er.jsxs)("div",{className:"mt-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Other Details"}),(0,er.jsx)("textarea",Pe(Pe({rows:3,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all duration-200 ".concat(null!==(A=Xa.family_details)&&void 0!==A&&null!==(L=A.other_details)&&void 0!==L&&L.message?"border-red-300 focus:ring-red-500":"border-gray-300 hover:border-gray-400"," ").concat(on("family")?"bg-white":"bg-gray-100 cursor-not-allowed")},Ga("family_details.other_details")),{},{disabled:!on("family")})),(null===(P=Xa.family_details)||void 0===P||null===(E=P.other_details)||void 0===E?void 0:E.message)&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:Xa.family_details.other_details.message})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"2.2 Present Family Wellbeing/Lifestyle"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Food",required:!0},Ga("family_details.wellbeing.food",{required:"Food is required"})),{},{error:null===(F=Xa.family_details)||void 0===F||null===(O=F.wellbeing)||void 0===O||null===(I=O.food)||void 0===I?void 0:I.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Housing",required:!0},Ga("family_details.wellbeing.housing",{required:"Housing is required"})),{},{error:null===(R=Xa.family_details)||void 0===R||null===(D=R.wellbeing)||void 0===D||null===(M=D.housing)||void 0===M?void 0:M.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Education",required:!0},Ga("family_details.wellbeing.education",{required:"Education is required"})),{},{error:null===(T=Xa.family_details)||void 0===T||null===(q=T.wellbeing)||void 0===q||null===(z=q.education)||void 0===z?void 0:z.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Health",required:!0},Ga("family_details.wellbeing.health",{required:"Health is required"})),{},{error:null===(B=Xa.family_details)||void 0===B||null===(U=B.wellbeing)||void 0===U||null===(H=U.health)||void 0===H?void 0:H.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Deeni",required:!0},Ga("family_details.wellbeing.deeni",{required:"Deeni is required"})),{},{error:null===(W=Xa.family_details)||void 0===W||null===(V=W.wellbeing)||void 0===V||null===(Q=V.deeni)||void 0===Q?void 0:Q.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"}))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-lg font-bold italic text-blue-600 mb-4",children:"2.3. Present Household Income and Expense"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-green-100",children:[(0,er.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-center text-blue-600 font-bold text-sm",children:"Sr No"}),(0,er.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-center text-blue-600 font-bold text-sm",children:"Category and Subcategory"}),(0,er.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-center text-blue-600 font-bold text-sm",children:"Monthly"}),(0,er.jsx)("th",{className:"border border-gray-300 px-3 py-2 text-center text-blue-600 font-bold text-sm",children:"Yearly"})]})}),(0,er.jsxs)("tbody",{className:"bg-green-50",children:[(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center font-bold text-blue-600",children:"1"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 font-bold text-blue-600",children:"INCOME"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2"})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"a"}),(0,er.jsxs)("td",{className:"border border-gray-300 px-3 py-2",children:["Business ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(on("family")?"":"bg-gray-100 cursor-not-allowed")},Ga("family_details.income_expense.income.business_monthly",{required:"Business monthly income is required",valueAsNumber:!0})),{},{disabled:!on("family"),onKeyPress:dd,onChange:e=>{if(!on("family"))return;const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.income.business_yearly",12*t),Ar()}}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.income.business_yearly",{required:"Business yearly income is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.income.business_monthly",t/12),Ar()}}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"b"}),(0,er.jsxs)("td",{className:"border border-gray-300 px-3 py-2",children:["Salary ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.income.salary_monthly",{required:"Salary monthly income is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.income.salary_yearly",12*t),Ar()}}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.income.salary_yearly",{required:"Salary yearly income is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.income.salary_monthly",t/12),Ar()}}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"c"}),(0,er.jsxs)("td",{className:"border border-gray-300 px-3 py-2",children:["Home Industry ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.income.home_industry_monthly",{required:"Home industry monthly income is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.income.home_industry_yearly",12*t),Ar()}}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.income.home_industry_yearly",{required:"Home industry yearly income is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.income.home_industry_monthly",t/12),Ar()}}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"d"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:"Others"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.income.others_monthly",{valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.income.others_yearly",12*t),Ar()}}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.income.others_yearly",{valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.income.others_monthly",t/12),Ar()}}))})]}),(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 font-bold",children:"Total Income"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 font-bold bg-gray-100"},Ga("family_details.income_expense.income.total_monthly")),{},{readOnly:!0}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 font-bold bg-gray-100"},Ga("family_details.income_expense.income.total_yearly")),{},{readOnly:!0}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center font-bold text-blue-600",children:"2"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 font-bold text-blue-600",children:"EXPENSES"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2"})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"a"}),(0,er.jsxs)("td",{className:"border border-gray-300 px-3 py-2",children:["Food: Groceries plus others ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.food_monthly",{required:"Food monthly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.expenses.food_yearly",12*t),Lr()}}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.food_yearly",{required:"Food yearly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.expenses.food_monthly",t/12),Lr()}}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"b"}),(0,er.jsxs)("td",{className:"border border-gray-300 px-3 py-2",children:["Housing: Rent, Maintenance, Electricity etc. ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.housing_monthly",{required:"Housing monthly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.expenses.housing_yearly",12*t),Lr()}}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.housing_yearly",{required:"Housing yearly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.expenses.housing_monthly",t/12),Lr()}}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"c"}),(0,er.jsxs)("td",{className:"border border-gray-300 px-3 py-2",children:["Health: Doctor, Medicine ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.health_monthly",{required:"Health monthly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>Er("health",parseFloat(e.target.value)||0)}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.health_yearly",{required:"Health yearly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>Er("health",void 0,parseFloat(e.target.value)||0)}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"d"}),(0,er.jsxs)("td",{className:"border border-gray-300 px-3 py-2",children:["Education: Fees, Books, Tuitions, etc. ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.education_monthly",{required:"Education monthly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>Er("education",parseFloat(e.target.value)||0)}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.education_yearly",{required:"Education yearly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>Er("education",void 0,parseFloat(e.target.value)||0)}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"e"}),(0,er.jsxs)("td",{className:"border border-gray-300 px-3 py-2",children:["Others Essentials: Clothes, Personal Care, Local Transport, Misc etc. ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.transport_monthly",{required:"Others Essentials monthly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>Er("transport",parseFloat(e.target.value)||0)}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.transport_yearly",{required:"Others Essentials yearly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>Er("transport",void 0,parseFloat(e.target.value)||0)}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"f"}),(0,er.jsxs)("td",{className:"border border-gray-300 px-3 py-2",children:["Deeni: Sabeel, Wajebaat, Niyaaz etc. ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.deeni_monthly",{required:"Deeni monthly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>Er("deeni",parseFloat(e.target.value)||0)}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.deeni_yearly",{required:"Deeni yearly expense is required",valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>Er("deeni",void 0,parseFloat(e.target.value)||0)}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"g"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:"Others"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.others_monthly",{valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>Er("others",parseFloat(e.target.value)||0)}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.expenses.others_yearly",{valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>Er("others",void 0,parseFloat(e.target.value)||0)}))})]}),(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 font-bold",children:"Total Family Expenses"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 font-bold bg-gray-100"},Ga("family_details.income_expense.expenses.total_monthly")),{},{readOnly:!0}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 font-bold bg-gray-100"},Ga("family_details.income_expense.expenses.total_yearly")),{},{readOnly:!0}))})]}),(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 font-bold",children:"Surplus"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 font-bold bg-gray-100"},Ga("family_details.income_expense.surplus_monthly")),{},{readOnly:!0}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 font-bold bg-gray-100"},Ga("family_details.income_expense.surplus_yearly")),{},{readOnly:!0}))})]}),(0,er.jsxs)("tr",{className:"bg-gray-100",children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 font-bold",children:"Deficit"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 font-bold bg-gray-100"},Ga("family_details.income_expense.deficit_monthly")),{},{readOnly:!0}))}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 font-bold bg-gray-100"},Ga("family_details.income_expense.deficit_yearly")),{},{readOnly:!0}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"3"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:"Scholarship (Enayat/Muwasat Etc.)"}),(0,er.jsxs)("td",{className:"border border-gray-300 px-3 py-2",children:[(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.scholarship_monthly",{valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.scholarship_yearly",12*t)}})),(null===(J=Xa.family_details)||void 0===J||null===(Y=J.income_expense)||void 0===Y?void 0:Y.scholarship_monthly)&&(0,er.jsx)("span",{className:"text-red-500 text-xs",children:Xa.family_details.income_expense.scholarship_monthly.message})]}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.scholarship_yearly",{valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.scholarship_monthly",t/12)}}))})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2 text-center",children:"4"}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:"Borrowing/Qardan etc."}),(0,er.jsxs)("td",{className:"border border-gray-300 px-3 py-2",children:[(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.borrowing_monthly",{valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.borrowing_yearly",12*t)}})),(null===(G=Xa.family_details)||void 0===G||null===(K=G.income_expense)||void 0===K?void 0:K.borrowing_monthly)&&(0,er.jsx)("span",{className:"text-red-500 text-xs",children:Xa.family_details.income_expense.borrowing_monthly.message})]}),(0,er.jsx)("td",{className:"border border-gray-300 px-3 py-2",children:(0,er.jsx)("input",Pe(Pe({type:"number",className:"w-full px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"},Ga("family_details.income_expense.borrowing_yearly",{valueAsNumber:!0})),{},{onKeyPress:dd,onChange:e=>{const t=parseFloat(e.target.value)||0;tr("family_details.income_expense.borrowing_monthly",t/12)}}))})]})]})]})})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"2.4 Present Assets and Liability"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"ASSETS"}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Residential",required:!0},Ga("family_details.assets_liabilities.assets.residential",{required:"Residential assets is required"})),{},{error:null===($=Xa.family_details)||void 0===$||null===(X=$.assets_liabilities)||void 0===X||null===(te=X.assets)||void 0===te||null===(ae=te.residential)||void 0===ae?void 0:ae.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Shop/Godown/Land",required:!0},Ga("family_details.assets_liabilities.assets.shop_godown_land",{required:"Shop/Godown/Land is required"})),{},{error:null===(re=Xa.family_details)||void 0===re||null===(ne=re.assets_liabilities)||void 0===ne||null===(se=ne.assets)||void 0===se||null===(ie=se.shop_godown_land)||void 0===ie?void 0:ie.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Machinery/Vehicle",required:!0},Ga("family_details.assets_liabilities.assets.machinery_vehicle",{required:"Machinery/Vehicle is required"})),{},{error:null===(oe=Xa.family_details)||void 0===oe||null===(le=oe.assets_liabilities)||void 0===le||null===(ce=le.assets)||void 0===ce||null===(de=ce.machinery_vehicle)||void 0===de?void 0:de.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Stock/Raw material",required:!0},Ga("family_details.assets_liabilities.assets.stock_raw_material",{required:"Stock/Raw material is required"})),{},{error:null===(ue=Xa.family_details)||void 0===ue||null===(me=ue.assets_liabilities)||void 0===me||null===(he=me.assets)||void 0===he||null===(pe=he.stock_raw_material)||void 0===pe?void 0:pe.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Goods sold on credit",required:!0},Ga("family_details.assets_liabilities.assets.goods_sold_credit",{required:"Goods sold on credit is required"})),{},{error:null===(fe=Xa.family_details)||void 0===fe||null===(xe=fe.assets_liabilities)||void 0===xe||null===(ge=xe.assets)||void 0===ge||null===(ye=ge.goods_sold_credit)||void 0===ye?void 0:ye.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"Others"},Ga("family_details.assets_liabilities.assets.others")),{},{error:null===(ve=Xa.family_details)||void 0===ve||null===(be=ve.assets_liabilities)||void 0===be||null===(_e=be.assets)||void 0===_e||null===(je=_e.others)||void 0===je?void 0:je.message,disabled:!on("family"),className:on("family")?"":"bg-gray-100"}))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"LIABILITY"}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Borrowing/Qardan",type:"number",required:!0,onKeyPress:dd},Ga("family_details.assets_liabilities.liabilities.borrowing_qardan",{required:"Borrowing/Qardan is required",valueAsNumber:!0})),{},{error:null===(we=Xa.family_details)||void 0===we||null===(Ne=we.assets_liabilities)||void 0===Ne||null===(ke=Ne.liabilities)||void 0===ke||null===(Ae=ke.borrowing_qardan)||void 0===Ae?void 0:Ae.message,onChange:e=>{tr("family_details.assets_liabilities.liabilities.borrowing_qardan",parseFloat(e.target.value)||0),Or()}})),(0,er.jsx)(Ir,Pe(Pe({label:"Goods taken on credit",type:"number",required:!0,onKeyPress:dd},Ga("family_details.assets_liabilities.liabilities.goods_credit",{required:"Goods taken on credit is required",valueAsNumber:!0})),{},{error:null===(Le=Xa.family_details)||void 0===Le||null===(Ee=Le.assets_liabilities)||void 0===Ee||null===(Fe=Ee.liabilities)||void 0===Fe||null===(Oe=Fe.goods_credit)||void 0===Oe?void 0:Oe.message,onChange:e=>{tr("family_details.assets_liabilities.liabilities.goods_credit",parseFloat(e.target.value)||0),Or()}})),(0,er.jsx)(Ir,Pe(Pe({label:"Others",type:"number",onKeyPress:dd},Ga("family_details.assets_liabilities.liabilities.others",{valueAsNumber:!0})),{},{error:null===(Ie=Xa.family_details)||void 0===Ie||null===(Re=Ie.assets_liabilities)||void 0===Re||null===(De=Re.liabilities)||void 0===De||null===(Me=De.others)||void 0===Me?void 0:Me.message,onChange:e=>{tr("family_details.assets_liabilities.liabilities.others",parseFloat(e.target.value)||0),Or()}})),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Total Liabilities"}),(0,er.jsx)("input",Pe(Pe({type:"number"},Ga("family_details.assets_liabilities.liabilities.total")),{},{readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-100 font-bold focus:outline-none focus:ring-2 focus:ring-blue-500"}))]})]})]})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>an("family_details",rr("family_details")),disabled:Gr.isLoading||!on("family"),className:on("family")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save as Draft"}),(0,er.jsx)(Fr,{type:"button",onClick:()=>rn("family_details",rr("family_details")),disabled:Gr.isLoading||!on("family"),className:on("family")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save and Next"})]})]}),"family"===ha&&wa&&(0,er.jsx)(ad,{caseId:na,workflowStep:"family"}),"assessment"===ha&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)("div",{className:"border-b border-gray-200 pb-4",children:(0,er.jsx)("div",{className:"flex items-center justify-between",children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"3. Assessment & Counseling"})})}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-lg font-bold italic text-blue-600 mb-4",children:"3.1. Applicant's Background"}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"3.1.1. Education",required:!0},Ga("assessment.background.education",{required:"Education is required"})),{},{error:null===(Te=Xa.assessment)||void 0===Te||null===(qe=Te.background)||void 0===qe||null===(ze=qe.education)||void 0===ze?void 0:ze.message,disabled:!on("assessment"),className:on("assessment")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"3.1.2. Past Business/Service Experience",required:!0},Ga("assessment.background.work_experience",{required:"Work experience is required"})),{},{error:null===(Be=Xa.assessment)||void 0===Be||null===(Ue=Be.background)||void 0===Ue||null===(He=Ue.work_experience)||void 0===He?void 0:He.message,disabled:!on("assessment"),className:on("assessment")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"3.1.3. Current Business/Service",required:!0},Ga("assessment.background.family_business",{required:"Present Business/Family Business is required"})),{},{error:null===(We=Xa.assessment)||void 0===We||null===(Ve=We.background)||void 0===Ve||null===(Qe=Ve.family_business)||void 0===Qe?void 0:Qe.message,disabled:!on("assessment"),className:on("assessment")?"":"bg-gray-100"})),(0,er.jsx)(Ir,Pe(Pe({label:"3.1.4. Skills and Knowledge",required:!0},Ga("assessment.background.skills_knowledge",{required:"Skills and Knowledge is required"})),{},{error:null===(Je=Xa.assessment)||void 0===Je||null===(Ye=Je.background)||void 0===Ye||null===(Ge=Ye.skills_knowledge)||void 0===Ge?void 0:Ge.message,disabled:!on("assessment"),className:on("assessment")?"":"bg-gray-100"})),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["3.1.5. Counselor's assessment of applicant's profile ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("textarea",Pe(Pe({className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(on("assessment")?"":"bg-gray-100 cursor-not-allowed"),rows:4},Ga("assessment.background.counselor_assessment",{required:"Counselor assessment is required"})),{},{placeholder:"Any specific positive/negative points, strength/weakness etc.",disabled:!on("assessment")})),(null===(Ke=Xa.assessment)||void 0===Ke||null===($e=Ke.background)||void 0===$e?void 0:$e.counselor_assessment)&&(0,er.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Xa.assessment.background.counselor_assessment.message})]})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-lg font-bold italic text-blue-600 mb-4",children:"3.2. Applicant's Present Business"}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"3.2.1. Present Business Condition",required:!0},Ga("assessment.proposed_business.present_business_condition",{required:"Present Business Condition is required"})),{},{error:null===(Xe=Xa.assessment)||void 0===Xe||null===(Ze=Xe.proposed_business)||void 0===Ze||null===(et=Ze.present_business_condition)||void 0===et?void 0:et.message,disabled:!on("assessment"),className:on("assessment")?"":"bg-gray-100"})),(0,er.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,er.jsx)("u",{children:"Trade Mark"})," (if any) ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",Pe(Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},Ga("assessment.proposed_business.trade_mark",{required:"Trade mark is required"})),{},{placeholder:"Enter trade mark if any"})),(null===(tt=Xa.assessment)||void 0===tt||null===(at=tt.proposed_business)||void 0===at?void 0:at.trade_mark)&&(0,er.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Xa.assessment.proposed_business.trade_mark.message})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Online Presence (if any) ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",Pe(Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},Ga("assessment.proposed_business.online_presence",{required:"Online presence is required"})),{},{placeholder:"Website, social media, etc."})),(null===(rt=Xa.assessment)||void 0===rt||null===(nt=rt.proposed_business)||void 0===nt?void 0:nt.online_presence)&&(0,er.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Xa.assessment.proposed_business.online_presence.message})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Digital / Social Media Marketing (if any) ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",Pe(Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},Ga("assessment.proposed_business.digital_marketing",{required:"Digital marketing is required"})),{},{placeholder:"Digital marketing strategies"})),(null===(st=Xa.assessment)||void 0===st||null===(it=st.proposed_business)||void 0===it?void 0:it.digital_marketing)&&(0,er.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Xa.assessment.proposed_business.digital_marketing.message})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Physical Store Location ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",Pe(Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},Ga("assessment.proposed_business.store_location",{required:"Store location is required"})),{},{placeholder:"Physical store address"})),(null===(ot=Xa.assessment)||void 0===ot||null===(lt=ot.proposed_business)||void 0===lt?void 0:lt.store_location)&&(0,er.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Xa.assessment.proposed_business.store_location.message})]})]})}),(0,er.jsx)(Ir,Pe(Pe({label:"3.2.2. Sourcing: Typical Suppliers & Credit period",required:!0},Ga("assessment.proposed_business.sourcing",{required:"Sourcing is required"})),{},{error:null===(ct=Xa.assessment)||void 0===ct||null===(dt=ct.proposed_business)||void 0===dt||null===(ut=dt.sourcing)||void 0===ut?void 0:ut.message})),(0,er.jsx)(Ir,Pe(Pe({label:"3.2.3. Selling: Typical Customers & Competitors",required:!0},Ga("assessment.proposed_business.selling",{required:"Selling is required"})),{},{error:null===(mt=Xa.assessment)||void 0===mt||null===(ht=mt.proposed_business)||void 0===ht||null===(pt=ht.selling)||void 0===pt?void 0:pt.message})),(0,er.jsx)(Ir,Pe(Pe({label:"3.2.4. Business Expenses"},Ga("assessment.proposed_business.major_expenses")),{},{error:null===(ft=Xa.assessment)||void 0===ft||null===(xt=ft.proposed_business)||void 0===xt||null===(gt=xt.major_expenses)||void 0===gt?void 0:gt.message,disabled:!on("assessment"),className:on("assessment")?"":"bg-gray-100"})),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3.2.5. From where goods purchase/credit period/cash, products/services"}),(0,er.jsx)("textarea",Pe(Pe({className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4},Ga("assessment.proposed_business.goods_purchase")),{},{placeholder:"Enter details about goods purchase, credit period, cash, products/services",disabled:!on("assessment")})),(null===(yt=Xa.assessment)||void 0===yt||null===(vt=yt.proposed_business)||void 0===vt?void 0:vt.goods_purchase)&&(0,er.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Xa.assessment.proposed_business.goods_purchase.message})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"3.2.6. Revenue"}),(0,er.jsx)("textarea",Pe(Pe({className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4},Ga("assessment.proposed_business.revenue")),{},{placeholder:"Enter revenue details",disabled:!on("assessment")})),(null===(bt=Xa.assessment)||void 0===bt||null===(_t=bt.proposed_business)||void 0===_t?void 0:_t.revenue)&&(0,er.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Xa.assessment.proposed_business.revenue.message})]}),(0,er.jsx)(Ir,Pe(Pe({label:"3.2.7. Profit Margin"},Ga("assessment.proposed_business.profit_margin")),{},{error:null===(jt=Xa.assessment)||void 0===jt||null===(wt=jt.proposed_business)||void 0===wt||null===(Nt=wt.profit_margin)||void 0===Nt?void 0:Nt.message,disabled:!on("assessment"),className:on("assessment")?"":"bg-gray-100"}))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-lg font-bold italic text-blue-600 mb-4",children:"3.3. Counsellor's Assessment of Proposed Business"}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["3.3.1. Demand supply scenario of given product and services in target market ",(0,er.jsx)("span",{className:"text-red-500",children:"*"}),(0,er.jsx)("span",{className:"text-gray-500 text-xs ml-2",children:"(min 100 characters)"})]}),(0,er.jsx)("textarea",Pe({className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3},Ga("assessment.counselor_assessment.demand_supply",{required:"Demand supply scenario is required",minLength:{value:100,message:"Minimum 100 characters required"}}))),(null===(kt=Xa.assessment)||void 0===kt||null===(St=kt.counselor_assessment)||void 0===St?void 0:St.demand_supply)&&(0,er.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Xa.assessment.counselor_assessment.demand_supply.message})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["3.3.2. Future growth potential considering applicant's present income ",(0,er.jsx)("span",{className:"text-red-500",children:"*"}),(0,er.jsx)("span",{className:"text-gray-500 text-xs ml-2",children:"(min 100 characters)"})]}),(0,er.jsx)("textarea",Pe({className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3},Ga("assessment.counselor_assessment.growth_potential",{required:"Growth potential is required",minLength:{value:100,message:"Minimum 100 characters required"}}))),(null===(Ct=Xa.assessment)||void 0===Ct||null===(At=Ct.counselor_assessment)||void 0===At?void 0:At.growth_potential)&&(0,er.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Xa.assessment.counselor_assessment.growth_potential.message})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["3.3.3. How the applicant will grow business? How will he compete in market and increase number of customers & profit over the years? ",(0,er.jsx)("span",{className:"text-red-500",children:"*"}),(0,er.jsx)("span",{className:"text-gray-500 text-xs ml-2",children:"(min 100 characters)"})]}),(0,er.jsx)("textarea",Pe({className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3},Ga("assessment.counselor_assessment.competition_strategy",{required:"Competition strategy is required",minLength:{value:100,message:"Minimum 100 characters required"}}))),(null===(Lt=Xa.assessment)||void 0===Lt||null===(Pt=Lt.counselor_assessment)||void 0===Pt?void 0:Pt.competition_strategy)&&(0,er.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Xa.assessment.counselor_assessment.competition_strategy.message})]})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>an("assessment",rr("assessment")),disabled:Gr.isLoading||!on("assessment"),className:on("assessment")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save as Draft"}),(0,er.jsx)(Fr,{type:"button",onClick:()=>rn("assessment",rr("assessment")),disabled:Gr.isLoading||!on("assessment"),className:on("assessment")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save and Next"})]})]}),"assessment"===ha&&wa&&(0,er.jsx)(ad,{caseId:na,workflowStep:"assessment"}),"financial"===ha&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)("div",{className:"border-b border-gray-200 pb-4",children:(0,er.jsx)("div",{className:"flex items-center justify-between",children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"4. Financial Assistance and Likely Growth"})})}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Financial assistance required"}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["What financials assistance may be needed to implement above mentioned business plan? ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("textarea",Pe(Pe({className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4},Ga("financial_assistance.assistance_required",{required:"Financial assistance required is required"})),{},{placeholder:"Applicant may require investment in machinery, stock, raw material, furniture, shop (rent), packaging, promotion and marketing, business registration, etc."})),(null===(Et=Xa.financial_assistance)||void 0===Et?void 0:Et.assistance_required)&&(0,er.jsx)("p",{className:"text-red-500 text-sm mt-1",children:Xa.financial_assistance.assistance_required.message})]}),(0,er.jsxs)("div",{className:"mt-6",children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"4.1 Action Plan"}),(0,er.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4 mb-6",children:(0,er.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,er.jsx)("p",{className:"font-medium text-gray-800",children:"How the applicant can take advantage of available opportunity in phased manner?"}),(0,er.jsx)("p",{className:"font-medium text-gray-800",children:"What action plan is proposed over next 3 to 5 year to increase income 3 to 5 times by taking advantage of above-mentioned business opportunity?"})]})}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Time-line"}),(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Actions"})]})}),(0,er.jsxs)("tbody",{children:[(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top w-1/4",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"upto 1st year end"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsxs)("div",{className:"space-y-2",children:[Ca.upto_1st_year_end.map((e,t)=>(0,er.jsxs)("div",{className:"flex items-start gap-2",children:[(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex-shrink-0 pt-1",children:[jr("upto_1st_year_end",t),"."]}),(0,er.jsx)("div",{className:"flex-1",children:(0,er.jsx)(Ir,{value:e.action_text,onChange:e=>_r("upto_1st_year_end",t,e.target.value),className:"w-full"})}),t>0&&(0,er.jsx)(Fr,{type:"button",variant:"danger",size:"sm",onClick:()=>br("upto_1st_year_end",t),className:"flex-shrink-0",children:"Remove"})]},e.id)),(0,er.jsx)(Fr,{type:"button",variant:"outline",size:"sm",onClick:()=>vr("upto_1st_year_end"),children:"Add Action"})]})})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top w-1/4",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"2nd and 3rd year"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsxs)("div",{className:"space-y-2",children:[Ca["2nd_and_3rd_year"].map((e,t)=>(0,er.jsxs)("div",{className:"flex items-start gap-2",children:[(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex-shrink-0 pt-1",children:[jr("2nd_and_3rd_year",t),"."]}),(0,er.jsx)("div",{className:"flex-1",children:(0,er.jsx)(Ir,{value:e.action_text,onChange:e=>_r("2nd_and_3rd_year",t,e.target.value),className:"w-full"})}),t>0&&(0,er.jsx)(Fr,{type:"button",variant:"danger",size:"sm",onClick:()=>br("2nd_and_3rd_year",t),className:"flex-shrink-0",children:"Remove"})]},e.id)),(0,er.jsx)(Fr,{type:"button",variant:"outline",size:"sm",onClick:()=>vr("2nd_and_3rd_year"),children:"Add Action"})]})})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top w-1/4",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"4th and 5th year"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsxs)("div",{className:"space-y-2",children:[Ca["4th_and_5th_year"].map((e,t)=>(0,er.jsxs)("div",{className:"flex items-start gap-2",children:[(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex-shrink-0 pt-1",children:[jr("4th_and_5th_year",t),"."]}),(0,er.jsx)("div",{className:"flex-1",children:(0,er.jsx)(Ir,{value:e.action_text,onChange:e=>_r("4th_and_5th_year",t,e.target.value),className:"w-full"})}),t>0&&(0,er.jsx)(Fr,{type:"button",variant:"danger",size:"sm",onClick:()=>br("4th_and_5th_year",t),className:"flex-shrink-0",children:"Remove"})]},e.id)),(0,er.jsx)(Fr,{type:"button",variant:"outline",size:"sm",onClick:()=>vr("4th_and_5th_year"),children:"Add Action"})]})})]})]})]})})]}),(0,er.jsxs)("div",{className:"mt-6",children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"4.2 Financial and non-financial assistance required"}),(0,er.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4 mb-6",children:(0,er.jsxs)("div",{className:"text-sm text-gray-800",children:[(0,er.jsxs)("p",{className:"mb-2",children:[(0,er.jsx)("strong",{children:"What financials assistance may be needed to implement the upliftment plan?"})," Applicant may require investment in machinery, stock, raw material, furniture, shop (rent), packaging, promotion and marketing, business registration, etc."]}),(0,er.jsx)("p",{children:"Wherever applicable, provide support documents for financial assistance such as quotation, photographs, descriptions etc. in attachments."})]})}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Time line (Tentative)"}),(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Purpose (end-use) & Cost"}),(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Enayat"}),(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Qardan & Months**"})]})}),(0,er.jsxs)("tbody",{children:[(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top w-1/5",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"Immediate"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsxs)("div",{className:"space-y-2",children:[La.immediate.map((e,t)=>(0,er.jsxs)("div",{className:"flex items-start gap-2",children:[(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex-shrink-0 pt-1",children:[Sr("immediate",t),"."]}),(0,er.jsx)("div",{className:"flex-1",children:(0,er.jsx)(Ir,{value:e.purpose_cost,onChange:e=>kr("immediate",t,"purpose_cost",e.target.value),className:"w-full"})}),t>0&&(0,er.jsx)(Fr,{type:"button",variant:"danger",size:"sm",onClick:()=>Nr("immediate",t),className:"flex-shrink-0",children:"Remove"})]},e.id)),(0,er.jsx)(Fr,{type:"button",variant:"outline",size:"sm",onClick:()=>wr("immediate"),children:"Add Action"})]})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:La.immediate.map((e,t)=>(0,er.jsx)("div",{children:(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.enayat,onChange:e=>kr("immediate",t,"enayat",e.target.value),onKeyPress:dd,className:"w-full"})},e.id))})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:La.immediate.map((e,t)=>(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.qardan,onChange:e=>kr("immediate",t,"qardan",e.target.value),onKeyPress:dd,placeholder:"Qardan",className:"flex-1"}),(0,er.jsx)(Ir,{type:"number",value:e.months,onChange:e=>kr("immediate",t,"months",e.target.value),onKeyPress:cd,placeholder:"Months",className:"w-24"})]},e.id))})})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top w-1/5",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"after 1st year"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsxs)("div",{className:"space-y-2",children:[La.after_1st_yr.map((e,t)=>(0,er.jsxs)("div",{className:"flex items-start gap-2",children:[(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex-shrink-0 pt-1",children:[Sr("after_1st_yr",t),"."]}),(0,er.jsx)("div",{className:"flex-1",children:(0,er.jsx)(Ir,{value:e.purpose_cost,onChange:e=>kr("after_1st_yr",t,"purpose_cost",e.target.value),className:"w-full"})}),t>0&&(0,er.jsx)(Fr,{type:"button",variant:"danger",size:"sm",onClick:()=>Nr("after_1st_yr",t),className:"flex-shrink-0",children:"Remove"})]},e.id)),(0,er.jsx)(Fr,{type:"button",variant:"outline",size:"sm",onClick:()=>wr("after_1st_yr"),children:"Add Action"})]})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:La.after_1st_yr.map((e,t)=>(0,er.jsx)("div",{children:(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.enayat,onChange:e=>kr("after_1st_yr",t,"enayat",e.target.value),onKeyPress:dd,className:"w-full"})},e.id))})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:La.after_1st_yr.map((e,t)=>(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.qardan,onChange:e=>kr("after_1st_yr",t,"qardan",e.target.value),onKeyPress:dd,placeholder:"Qardan",className:"flex-1"}),(0,er.jsx)(Ir,{type:"number",value:e.months,onChange:e=>kr("after_1st_yr",t,"months",e.target.value),onKeyPress:cd,placeholder:"Months",className:"w-24"})]},e.id))})})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top w-1/5",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"after 2nd year"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsxs)("div",{className:"space-y-2",children:[La.after_2nd_yr.map((e,t)=>(0,er.jsxs)("div",{className:"flex items-start gap-2",children:[(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex-shrink-0 pt-1",children:[Sr("after_2nd_yr",t),"."]}),(0,er.jsx)("div",{className:"flex-1",children:(0,er.jsx)(Ir,{value:e.purpose_cost,onChange:e=>kr("after_2nd_yr",t,"purpose_cost",e.target.value),className:"w-full"})}),t>0&&(0,er.jsx)(Fr,{type:"button",variant:"danger",size:"sm",onClick:()=>Nr("after_2nd_yr",t),className:"flex-shrink-0",children:"Remove"})]},e.id)),(0,er.jsx)(Fr,{type:"button",variant:"outline",size:"sm",onClick:()=>wr("after_2nd_yr"),children:"Add Action"})]})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:La.after_2nd_yr.map((e,t)=>(0,er.jsx)("div",{children:(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.enayat,onChange:e=>kr("after_2nd_yr",t,"enayat",e.target.value),onKeyPress:dd,className:"w-full"})},e.id))})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:La.after_2nd_yr.map((e,t)=>(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.qardan,onChange:e=>kr("after_2nd_yr",t,"qardan",e.target.value),onKeyPress:dd,placeholder:"Qardan",className:"flex-1"}),(0,er.jsx)(Ir,{type:"number",value:e.months,onChange:e=>kr("after_2nd_yr",t,"months",e.target.value),onKeyPress:cd,placeholder:"Months",className:"w-24"})]},e.id))})})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top w-1/5",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"# after 3rd year"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsxs)("div",{className:"space-y-2",children:[La.after_3rd_yr.map((e,t)=>(0,er.jsxs)("div",{className:"flex items-start gap-2",children:[(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex-shrink-0 pt-1",children:[Sr("after_3rd_yr",t),"."]}),(0,er.jsx)("div",{className:"flex-1",children:(0,er.jsx)(Ir,{value:e.purpose_cost,onChange:e=>kr("after_3rd_yr",t,"purpose_cost",e.target.value),className:"w-full"})}),t>0&&(0,er.jsx)(Fr,{type:"button",variant:"danger",size:"sm",onClick:()=>Nr("after_3rd_yr",t),className:"flex-shrink-0",children:"Remove"})]},e.id)),(0,er.jsx)(Fr,{type:"button",variant:"outline",size:"sm",onClick:()=>wr("after_3rd_yr"),children:"Add Action"})]})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:La.after_3rd_yr.map((e,t)=>(0,er.jsx)("div",{children:(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.enayat,onChange:e=>kr("after_3rd_yr",t,"enayat",e.target.value),onKeyPress:dd,className:"w-full"})},e.id))})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:La.after_3rd_yr.map((e,t)=>(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.qardan,onChange:e=>kr("after_3rd_yr",t,"qardan",e.target.value),onKeyPress:dd,placeholder:"Qardan",className:"flex-1"}),(0,er.jsx)(Ir,{type:"number",value:e.months,onChange:e=>kr("after_3rd_yr",t,"months",e.target.value),onKeyPress:cd,placeholder:"Months",className:"w-24"})]},e.id))})})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top w-1/5",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"after 4th year"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsxs)("div",{className:"space-y-2",children:[(La.after_4th_yr||[]).map((e,t)=>(0,er.jsxs)("div",{className:"flex items-start gap-2",children:[(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex-shrink-0 pt-1",children:[Sr("after_4th_yr",t),"."]}),(0,er.jsx)("div",{className:"flex-1",children:(0,er.jsx)(Ir,{value:e.purpose_cost,onChange:e=>kr("after_4th_yr",t,"purpose_cost",e.target.value),className:"w-full"})}),t>0&&(0,er.jsx)(Fr,{type:"button",variant:"danger",size:"sm",onClick:()=>Nr("after_4th_yr",t),className:"flex-shrink-0",children:"Remove"})]},e.id)),(0,er.jsx)(Fr,{type:"button",variant:"outline",size:"sm",onClick:()=>wr("after_4th_yr"),children:"Add Action"})]})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:(La.after_4th_yr||[]).map((e,t)=>(0,er.jsx)("div",{children:(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.enayat,onChange:e=>kr("after_4th_yr",t,"enayat",e.target.value),onKeyPress:dd,className:"w-full"})},e.id))})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:(La.after_4th_yr||[]).map((e,t)=>(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.qardan,onChange:e=>kr("after_4th_yr",t,"qardan",e.target.value),onKeyPress:dd,placeholder:"Qardan",className:"flex-1"}),(0,er.jsx)(Ir,{type:"number",value:e.months,onChange:e=>kr("after_4th_yr",t,"months",e.target.value),onKeyPress:cd,placeholder:"Months",className:"w-24"})]},e.id))})})]}),(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top w-1/5",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"5th year"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsxs)("div",{className:"space-y-2",children:[(La["5th_yr"]||[]).map((e,t)=>(0,er.jsxs)("div",{className:"flex items-start gap-2",children:[(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-700 flex-shrink-0 pt-1",children:[Sr("5th_yr",t),"."]}),(0,er.jsx)("div",{className:"flex-1",children:(0,er.jsx)(Ir,{value:e.purpose_cost,onChange:e=>kr("5th_yr",t,"purpose_cost",e.target.value),className:"w-full"})}),t>0&&(0,er.jsx)(Fr,{type:"button",variant:"danger",size:"sm",onClick:()=>Nr("5th_yr",t),className:"flex-shrink-0",children:"Remove"})]},e.id)),(0,er.jsx)(Fr,{type:"button",variant:"outline",size:"sm",onClick:()=>wr("5th_yr"),children:"Add Action"})]})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:(La["5th_yr"]||[]).map((e,t)=>(0,er.jsx)("div",{children:(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.enayat,onChange:e=>kr("5th_yr",t,"enayat",e.target.value),onKeyPress:dd,className:"w-full"})},e.id))})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("div",{className:"space-y-2",children:(La["5th_yr"]||[]).map((e,t)=>(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)(Ir,{type:"number",step:"0.01",value:e.qardan,onChange:e=>kr("5th_yr",t,"qardan",e.target.value),onKeyPress:dd,placeholder:"Qardan",className:"flex-1"}),(0,er.jsx)(Ir,{type:"number",value:e.months,onChange:e=>kr("5th_yr",t,"months",e.target.value),onKeyPress:cd,placeholder:"Months",className:"w-24"})]},e.id))})})]}),(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top w-1/5",children:(0,er.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"TOTAL"})}),(0,er.jsx)("td",{className:"bg-gray-50 border border-gray-300 px-4 py-4 align-top"}),(0,er.jsx)("td",{className:"bg-gray-50 border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(()=>{let e=0;return["immediate","after_1st_yr","after_2nd_yr","after_3rd_yr","after_4th_yr","5th_yr"].forEach(t=>{var a;null===(a=La[t])||void 0===a||a.forEach(t=>{const a=parseFloat(t.enayat)||0;e+=a})}),e})().toFixed(2),disabled:!0,className:"w-full bg-gray-100"})}),(0,er.jsx)("td",{className:"bg-gray-50 border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(()=>{let e=0;return["immediate","after_1st_yr","after_2nd_yr","after_3rd_yr","after_4th_yr","5th_yr"].forEach(t=>{var a;null===(a=La[t])||void 0===a||a.forEach(t=>{const a=parseFloat(t.qardan)||0;e+=a})}),e})().toFixed(2),disabled:!0,className:"w-full bg-gray-100"})})]})]})]})}),(0,er.jsxs)("div",{className:"mt-4 space-y-2 text-sm text-gray-700",children:[(0,er.jsx)("p",{children:"# After 3rd year or before local Qardan can be extended to support business needs or avoid capital reduction due to ongoing Qardan repayment"}),(0,er.jsx)("p",{children:"** Repayment can be staggered. Need NOT be equal amount during all years."})]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Self-funding Available",required:!0},Ga("financial_assistance.self_funding",{required:"Self-funding available is required"})),{},{error:null===(Ft=Xa.financial_assistance)||void 0===Ft||null===(Ot=Ft.self_funding)||void 0===Ot?void 0:Ot.message})),(0,er.jsx)(Ir,Pe(Pe({label:"Rahen Available",required:!0},Ga("financial_assistance.rahen_available",{required:"Rahen available is required"})),{},{error:null===(It=Xa.financial_assistance)||void 0===It||null===(Rt=It.rahen_available)||void 0===Rt?void 0:Rt.message}))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"mb-4",children:(0,er.jsx)("h5",{className:"text-sm font-medium text-gray-700",children:"Yearly Repayment Schedule from the date of disbursement"})}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"w-full border-collapse border border-gray-300",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Repayment"}),(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Year 1"}),(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Year 2"}),(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Year 3"}),(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Year 4"}),(0,er.jsx)("th",{className:"bg-yellow-100 border border-gray-300 px-4 py-3 text-left text-sm font-semibold text-gray-900",children:"Year 5"})]})}),(0,er.jsxs)("tbody",{children:[(()=>{const e=ka.find(e=>"QH1"===e.name||"QH 1"===e.name)||ka[0];return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"QH 1"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year1)||"",onChange:t=>yr(e.id,"year1",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year2)||"",onChange:t=>yr(e.id,"year2",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year3)||"",onChange:t=>yr(e.id,"year3",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year4)||"",onChange:t=>yr(e.id,"year4",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year5)||"",onChange:t=>yr(e.id,"year5",t.target.value),className:"w-full"})})]})})(),(()=>{const e=ka.find(e=>"QH2"===e.name||"QH 2"===e.name)||ka[1];return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"QH 2"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year1)||"",onChange:t=>yr(e.id,"year1",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year2)||"",onChange:t=>yr(e.id,"year2",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year3)||"",onChange:t=>yr(e.id,"year3",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year4)||"",onChange:t=>yr(e.id,"year4",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year5)||"",onChange:t=>yr(e.id,"year5",t.target.value),className:"w-full"})})]})})(),(()=>{const e=ka.find(e=>"QH3"===e.name||"QH 3"===e.name)||ka[2];return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"QH 3"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year1)||"",onChange:t=>yr(e.id,"year1",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year2)||"",onChange:t=>yr(e.id,"year2",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year3)||"",onChange:t=>yr(e.id,"year3",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year4)||"",onChange:t=>yr(e.id,"year4",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year5)||"",onChange:t=>yr(e.id,"year5",t.target.value),className:"w-full"})})]})})(),(()=>{const e=ka.find(e=>(e.name||"").toLowerCase().includes("local")||"Local QH"===e.name)||ka[3];return(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"Local QH"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year1)||"",onChange:t=>yr(e.id,"year1",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year2)||"",onChange:t=>yr(e.id,"year2",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year3)||"",onChange:t=>yr(e.id,"year3",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year4)||"",onChange:t=>yr(e.id,"year4",t.target.value),className:"w-full"})}),(0,er.jsx)("td",{className:"bg-white border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:(null===e||void 0===e?void 0:e.year5)||"",onChange:t=>yr(e.id,"year5",t.target.value),className:"w-full"})})]})})(),(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("td",{className:"bg-yellow-50 border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:"TOTAL"})}),[1,2,3,4,5].map(e=>{const t=ka.reduce((t,a)=>t+(parseFloat(a["year".concat(e)])||0),0);return(0,er.jsx)("td",{className:"bg-gray-50 border border-gray-300 px-4 py-4 align-top",children:(0,er.jsx)(Ir,{value:t.toFixed(2),disabled:!0,className:"w-full bg-gray-100"})},e)})]})]})]})})]}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Support needed in below mentioned areas"}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"border border-gray-200 rounded-md p-3",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox",value:"Industry/Product Knowledge"},Ga("financial_assistance.support_needed")),{},{className:"mr-2"})),(0,er.jsx)("span",{className:"text-sm font-medium",children:"Industry/Product Knowledge"})]}),(null===(Dt=rr("financial_assistance.support_needed"))||void 0===Dt?void 0:Dt.includes("Industry/Product Knowledge"))&&(0,er.jsx)("textarea",Pe({className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:2,placeholder:"What Industry/Product Knowledge support is needed?"},Ga("financial_assistance.support_industry_knowledge_desc")))]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-md p-3",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox",value:"Sourcing Support"},Ga("financial_assistance.support_needed")),{},{className:"mr-2"})),(0,er.jsx)("span",{className:"text-sm font-medium",children:"Sourcing Support"})]}),(null===(Mt=rr("financial_assistance.support_needed"))||void 0===Mt?void 0:Mt.includes("Sourcing Support"))&&(0,er.jsx)("textarea",Pe({className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:2,placeholder:"What Sourcing Support is needed?"},Ga("financial_assistance.support_sourcing_desc")))]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-md p-3",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox",value:"Sales/Market Access"},Ga("financial_assistance.support_needed")),{},{className:"mr-2"})),(0,er.jsx)("span",{className:"text-sm font-medium",children:"Sales/Market Access"})]}),(null===(Tt=rr("financial_assistance.support_needed"))||void 0===Tt?void 0:Tt.includes("Sales/Market Access"))&&(0,er.jsx)("textarea",Pe({className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:2,placeholder:"What Sales/Market Access support is needed?"},Ga("financial_assistance.support_sales_market_desc")))]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-md p-3",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox",value:"Internship/Skill Development"},Ga("financial_assistance.support_needed")),{},{className:"mr-2"})),(0,er.jsx)("span",{className:"text-sm font-medium",children:"Internship/Skill Development"})]}),(null===(qt=rr("financial_assistance.support_needed"))||void 0===qt?void 0:qt.includes("Internship/Skill Development"))&&(0,er.jsx)("textarea",Pe({className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:2,placeholder:"What Internship/Skill Development support is needed?"},Ga("financial_assistance.support_internship_desc")))]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-md p-3",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox",value:"Mentoring & Handholding"},Ga("financial_assistance.support_needed")),{},{className:"mr-2"})),(0,er.jsx)("span",{className:"text-sm font-medium",children:"Mentoring & Handholding"})]}),(null===(zt=rr("financial_assistance.support_needed"))||void 0===zt?void 0:zt.includes("Mentoring & Handholding"))&&(0,er.jsx)("textarea",Pe({className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:2,placeholder:"What Mentoring & Handholding support is needed?"},Ga("financial_assistance.support_mentoring_handholding_desc")))]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-md p-3",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox",value:"Book keeping"},Ga("financial_assistance.support_needed")),{},{className:"mr-2"})),(0,er.jsx)("span",{className:"text-sm font-medium",children:"Book keeping"})]}),(null===(Bt=rr("financial_assistance.support_needed"))||void 0===Bt?void 0:Bt.includes("Book keeping"))&&(0,er.jsx)("textarea",Pe({className:"w-full mt-2 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:2,placeholder:"What Book keeping support is needed?"},Ga("financial_assistance.support_bookkeeping_desc")))]})]}),(null===(Ut=rr("financial_assistance.support_needed"))||void 0===Ut?void 0:Ut.length)>0&&(0,er.jsxs)("div",{className:"mt-6 border-t pt-4",children:[(0,er.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-4",children:"Add Mentor"}),(0,er.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("input",{type:"text",value:Ea,onChange:e=>{Fa(e.target.value.replace(/\D/g,"").slice(0,8)),Da("")},onKeyPress:async e=>{if("Enter"===e.key){if(e.preventDefault(),8!==Ea.length)return void Da("ITS number must be 8 digits");Ia(!0),Da("");try{const e=await Za.get("/api/applicants/lookup/".concat(Ea));if(e.data.success){const t=e.data.data,a=rr("financial_assistance.support_mentors")||[];a.some(e=>e.its_number===t.its_number)?Da("This mentor is already added"):(tr("financial_assistance.support_mentors",[...a,t]),Fa(""))}}catch(ca){var t,a;Da((null===(t=ca.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to find ITS number")}Ia(!1)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter ITS Number (8 digits) and press Enter",maxLength:8}),Ra&&(0,er.jsx)("p",{className:"text-red-500 text-xs mt-1",children:Ra})]}),Oa&&(0,er.jsx)("div",{className:"flex items-center",children:(0,er.jsx)("span",{className:"text-gray-500 text-sm",children:"Loading..."})})]}),(0,er.jsx)("div",{className:"space-y-4",children:(rr("financial_assistance.support_mentors")||[]).map((e,t)=>(0,er.jsx)("div",{className:"border border-gray-200 rounded-md p-4 bg-gray-50",children:(0,er.jsxs)("div",{className:"flex gap-4",children:[(0,er.jsx)("div",{className:"flex-shrink-0",children:e.photo?(0,er.jsx)("img",{src:e.photo,alt:e.name,className:"w-20 h-20 rounded-md object-cover"}):(0,er.jsx)("div",{className:"w-20 h-20 rounded-md bg-gray-200 flex items-center justify-center",children:(0,er.jsx)("span",{className:"text-gray-400 text-xs",children:"No Photo"})})}),(0,er.jsxs)("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-xs text-gray-500",children:"ITS Number"}),(0,er.jsx)("input",{type:"text",value:e.its_number||"",readOnly:!0,className:"w-full px-2 py-1 text-sm border border-gray-300 rounded bg-gray-100"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-xs text-gray-500",children:"Name"}),(0,er.jsx)("input",{type:"text",value:e.name||"",onChange:e=>{const a=[...rr("financial_assistance.support_mentors")||[]];a[t].name=e.target.value,tr("financial_assistance.support_mentors",a)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-xs text-gray-500",children:"Contact Number"}),(0,er.jsx)("input",{type:"text",value:e.contact_number||"",onChange:e=>{const a=[...rr("financial_assistance.support_mentors")||[]];a[t].contact_number=e.target.value,tr("financial_assistance.support_mentors",a)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-xs text-gray-500",children:"Email"}),(0,er.jsx)("input",{type:"email",value:e.email||"",onChange:e=>{const a=[...rr("financial_assistance.support_mentors")||[]];a[t].email=e.target.value,tr("financial_assistance.support_mentors",a)},className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-primary-500"})]})]}),(0,er.jsx)("div",{className:"flex-shrink-0",children:(0,er.jsx)("button",{type:"button",onClick:()=>{const e=(rr("financial_assistance.support_mentors")||[]).filter((e,a)=>a!==t);tr("financial_assistance.support_mentors",e)},className:"text-red-500 hover:text-red-700 text-sm",children:"Remove"})})]})},t))})]})]})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>{const e=rr("financial_assistance");e.qh_fields=ka,e.timeline=dr,e.action_plan=Ca,e.timeline_assistance=La,an("financial_assistance",e)},disabled:Gr.isLoading||!on("financial"),className:on("financial")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save as Draft"}),(0,er.jsx)(Fr,{type:"button",onClick:()=>{const e=rr("financial_assistance");e.qh_fields=ka,e.timeline=dr,e.action_plan=Ca,e.timeline_assistance=La,rn("financial_assistance",e)},disabled:Gr.isLoading||!on("financial"),className:on("financial")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save and Next"})]})]}),"financial"===ha&&wa&&(0,er.jsx)(ad,{caseId:na,workflowStep:"financial"}),"growth"===ha&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)("div",{className:"border-b border-gray-200 pb-4",children:(0,er.jsx)("div",{className:"flex items-center justify-between",children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Targeted Economic Growth"})})}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"1. REVENUE / Sales (Amount)"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the projected revenue/sales amounts for each year."}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Present (last yr actual)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 1 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 2 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 3 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 4 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 5 (proj)"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["REVENUE / Sales (Amount) (1) ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.revenue_sales_last_year",{required:"Revenue/Sales last year is required",valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.revenue_sales_year1",{required:"Revenue/Sales year 1 is required",valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.revenue_sales_year2",{required:"Revenue/Sales year 2 is required",valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.revenue_sales_year3",{required:"Revenue/Sales year 3 is required",valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.revenue_sales_year4",{required:"Revenue/Sales year 4 is required",valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.revenue_sales_year5",{required:"Revenue/Sales year 5 is required",valueAsNumber:!0})))})]})})]})})]}),(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"2. EXPENSES"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the projected expenses for each category and year."}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category and Subcategory"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Present (last yr actual)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 1 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 2 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 3 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 4 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 5 (proj)"})]})}),(0,er.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["a) Total Cost of goods sold (COGS) ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Cost of raw materials and inventory"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_raw_material_last_year",{required:"Raw material expenses last year is required",valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_raw_material_year1",{required:"Raw material expenses year 1 is required",valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_raw_material_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_raw_material_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_raw_material_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_raw_material_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"b) Labor / salary"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Employee wages and salaries"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_labor_salary_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_labor_salary_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_labor_salary_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_labor_salary_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_labor_salary_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_labor_salary_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"c) Rent"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Rental costs for premises"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_rent_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_rent_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_rent_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_rent_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_rent_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_rent_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"d) Overhead & Misc. (others & unforeseen)"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"General overheads and miscellaneous expenses"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_overhead_misc_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_overhead_misc_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_overhead_misc_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_overhead_misc_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_overhead_misc_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_overhead_misc_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"e) Repair, Maintenance and depreciation"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Repairs, maintenance and asset depreciation"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_repair_maintenance_depreciation_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_repair_maintenance_depreciation_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_repair_maintenance_depreciation_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_repair_maintenance_depreciation_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_repair_maintenance_depreciation_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.expenses_repair_maintenance_depreciation_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-blue-50 border-t-2 border-blue-200",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)("div",{className:"text-sm font-bold text-gray-900",children:"Total Expenses (2)"})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.total_expenses_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.total_expenses_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.total_expenses_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.total_expenses_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.total_expenses_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.total_expenses_year5",{valueAsNumber:!0})))})]})]})]})})]}),(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"3. PROFIT [(1)-(2)]"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the projected profit and deductions for each year."}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category and Subcategory"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Present (last yr actual)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 1 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 2 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 3 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 4 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 5 (proj)"})]})}),(0,er.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(0,er.jsxs)("tr",{className:"bg-green-50 border-t-2 border-green-200",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)("div",{className:"text-sm font-bold text-gray-900",children:"PROFIT [(1)-(2)]"})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.profit_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.profit_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.profit_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.profit_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.profit_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.profit_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"(-) Fund blocked in Credit & Dead stock"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Funds tied up in credit or unsellable inventory"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_fund_blocked_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_fund_blocked_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_fund_blocked_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_fund_blocked_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_fund_blocked_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_fund_blocked_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"(-) Qardan Repayment"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Repayment of Qardan loans"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_qardan_repayment_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_qardan_repayment_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_qardan_repayment_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_qardan_repayment_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_qardan_repayment_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_qardan_repayment_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"(-) Other Income"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Family Income and others"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_other_income_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_other_income_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_other_income_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_other_income_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_other_income_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_other_income_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"(-) House hold expense"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Household expenses drawn from business profits"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_household_expense_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_household_expense_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_household_expense_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_household_expense_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_household_expense_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.profit_household_expense_year5",{valueAsNumber:!0})))})]})]})]})})]}),(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"4. CASH SURPLUS"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Enter the projected cash surplus and additional Qardan for each year."}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category and Subcategory"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Present (last yr actual)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 1 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 2 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 3 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 4 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 5 (proj)"})]})}),(0,er.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(0,er.jsxs)("tr",{className:"bg-yellow-50 border-t-2 border-yellow-200",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)("div",{className:"text-sm font-bold text-gray-900",children:"CASH SURPLUS"})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.cash_surplus_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.cash_surplus_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.cash_surplus_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.cash_surplus_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.cash_surplus_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",disabled:!0,className:"w-full text-center font-semibold bg-gray-100"},Ga("economic_growth.cash_surplus_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)("div",{children:(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"(+) Additional Enayat"})})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_enayat_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_enayat_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_enayat_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_enayat_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_enayat_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_enayat_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)("div",{children:(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"(+) Additional Qardan"})})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_qardan_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_qardan_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_qardan_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_qardan_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_qardan_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_surplus_additional_qardan_year5",{valueAsNumber:!0})))})]})]})]})}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-4",children:"** In the years if there is deficit in initial years, provision for additional Qardan may be kept at the end of the year to fill the deficit. Also, the applicant will be eligible to take additional local qardan if his business grows and exiting qardan is insufficient for available growth opportunity."})]}),(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-2",children:"5. Business assets owned (at the end of the year)"}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Enter the projected values for business assets and liabilities for each year."})]}),(0,er.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,er.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category and Subcategory"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Year / As of now (actual)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 1 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 2 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 3 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 4 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 5 (proj)"})]})}),(0,er.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"a) Cash in Hand"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Cash available in hand"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_in_hand_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_in_hand_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_in_hand_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_in_hand_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_in_hand_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.cash_in_hand_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"b) Raw materials / stock"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Raw materials and stock inventory"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.raw_materials_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.raw_materials_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.raw_materials_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.raw_materials_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.raw_materials_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.raw_materials_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"c) Sale on Credit **"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Amount receivable from credit sales"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.sale_on_credit_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.sale_on_credit_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.sale_on_credit_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.sale_on_credit_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.sale_on_credit_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.sale_on_credit_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"d) Machines / Equip."}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Machinery and equipment value"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.machines_equipment_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.machines_equipment_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.machines_equipment_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.machines_equipment_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.machines_equipment_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.machines_equipment_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"e) Vehicles"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Vehicle assets value"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.vehicles_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.vehicles_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.vehicles_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.vehicles_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.vehicles_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.vehicles_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"f) Shop / Godown etc."}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Shop, godown and property value"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.shop_godown_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.shop_godown_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.shop_godown_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.shop_godown_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.shop_godown_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.shop_godown_year5",{valueAsNumber:!0})))})]}),(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"g) Trademark / Goodwill"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Trademark and goodwill value"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.trademark_goodwill_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.trademark_goodwill_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.trademark_goodwill_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.trademark_goodwill_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.trademark_goodwill_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.trademark_goodwill_year5",{valueAsNumber:!0})))})]})]})]})}),(0,er.jsxs)("div",{className:"mt-8",children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"6. Business liability - other than Qardan"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full bg-white border border-gray-200",children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category and Subcategory"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Year / As of now (actual)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 1 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 2 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 3 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 4 (proj)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Year 5 (proj)"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:(0,er.jsxs)("tr",{className:"bg-white",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:"h) Purchase on Credit **"}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:"Amount payable for credit purchases"})]})}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.purchase_on_credit_last_year",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.purchase_on_credit_year1",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.purchase_on_credit_year2",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.purchase_on_credit_year3",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.purchase_on_credit_year4",{valueAsNumber:!0})))}),(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},Ga("economic_growth.purchase_on_credit_year5",{valueAsNumber:!0})))})]})})]})})]})]}),(0,er.jsx)("div",{className:"mb-4 mt-4",children:(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"** The applicant is encouraged to do Sale and Purchase both on CASH and NOT on Credit"})}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>an("economic_growth",rr("economic_growth")),disabled:Gr.isLoading||!on("growth"),className:on("growth")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save as Draft"}),(0,er.jsx)(Fr,{type:"button",onClick:()=>rn("economic_growth",rr("economic_growth")),disabled:Gr.isLoading||!on("growth"),className:on("growth")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save and Next"})]})]}),"growth"===ha&&wa&&(0,er.jsx)(ad,{caseId:na,workflowStep:"growth"}),"declaration"===ha&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)("div",{className:"border-b border-gray-200 pb-4",children:(0,er.jsx)("div",{className:"flex items-center justify-between",children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"5. Declaration"})})}),(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"block text-sm font-medium text-gray-700 mb-3",children:"The applicant hereby confirms that:"}),(0,er.jsx)("div",{className:"bg-gray-50 p-4 rounded-md border",children:(0,er.jsxs)("div",{className:"text-sm text-gray-800 space-y-2",children:[(0,er.jsx)("p",{children:"1. The information provided about his personal, family and present business are correct and free of any error"}),(0,er.jsx)("p",{children:"2. He/she has understood the details filled in this form and purpose and content of Economic Upliftment Plan."}),(0,er.jsx)("p",{children:"3. By signing this form, he is applying for Enayat and Qardan amount as mentioned in 4.2 above"}),(0,er.jsx)("p",{children:"4. Any amount granted against this application will be utilized only for economic upliftment purpose as mentioned in this application."})]})})]}),(0,er.jsx)(Ir,Pe(Pe({label:"Any other comments"},Ga("declaration.other_comments")),{},{error:null===(Ht=Xa.declaration)||void 0===Ht||null===(Wt=Ht.other_comments)||void 0===Wt?void 0:Wt.message})),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-700 border-b border-gray-200 pb-2",children:"Applicant Information"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ITS Number"}),(0,er.jsx)("input",Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600",value:rr("declaration.applicant_its")||"Loading...",readOnly:!0},Ga("declaration.applicant_its")))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Applicant Name"}),(0,er.jsx)("input",Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600",value:rr("declaration.applicant_name")||"Loading...",readOnly:!0},Ga("declaration.applicant_name")))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,er.jsx)("input",Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600",value:rr("declaration.applicant_contact")||"Loading...",readOnly:!0},Ga("declaration.applicant_contact")))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Declaration Date ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",Pe({type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},Ga("declaration.declaration_date",{required:"Declaration date is required"})))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Signature"}),(0,er.jsx)("div",{className:"mb-4",children:(0,er.jsxs)("div",{className:"flex space-x-4",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"radio",value:"draw"},Ga("declaration.signature_type",{value:"draw"})),{},{className:"mr-2",defaultChecked:!0})),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Draw Signature"})]}),(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"radio",value:"upload"},Ga("declaration.signature_type",{value:"upload"})),{},{className:"mr-2"})),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Upload Signature"})]})]})}),"draw"===rr("declaration.signature_type")?(0,er.jsx)(vi,{value:rr("declaration.signature_drawing_data"),onChange:e=>tr("declaration.signature_drawing_data",e),error:null===(Vt=Xa.declaration)||void 0===Vt||null===(Qt=Vt.signature_drawing_data)||void 0===Qt?void 0:Qt.message}):(0,er.jsx)("div",{children:rr("declaration.signature_file_path")?(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)("img",{src:rr("declaration.signature_file_path"),alt:"Applicant signature",className:"max-h-24 border border-gray-200 rounded object-contain bg-gray-50"}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Signature image uploaded"}),(0,er.jsx)("button",{type:"button",onClick:()=>tr("declaration.signature_file_path",""),className:"text-sm text-primary-600 hover:underline",children:"Change signature"})]}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("input",{type:"file",accept:"image/*",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{tr("declaration.signature_file_path",e.target.result)},e.readAsDataURL(t)}}}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a signature image file (PNG, JPG, etc.)"})]})})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"block text-sm font-medium text-gray-700 mb-3",children:"The counsellor hereby confirms that:"}),(0,er.jsx)("div",{className:"bg-gray-50 p-4 rounded-md border",children:(0,er.jsxs)("div",{className:"text-sm text-gray-800 space-y-2",children:[(0,er.jsx)("p",{children:"1. The applicant's potential has been assessed and proposed action plan has been explained to the applicant along with the larger objective of the upliftment program."}),(0,er.jsx)("p",{children:"2. The proposed business/economic activity has potential in the suggested location and will increase income of the applicant over next three to five year in sustainable manner."}),(0,er.jsx)("p",{children:"3. The recommended economic upliftment plan is realistic and feasible in local mauze context."})]})})]}),(0,er.jsx)(Ir,Pe(Pe({label:"Any other comments"},Ga("declaration.counselor_comments")),{},{error:null===(Jt=Xa.declaration)||void 0===Jt||null===(Yt=Jt.counselor_comments)||void 0===Yt?void 0:Yt.message})),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-700 border-b border-gray-200 pb-2",children:"Counselor Information"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ITS Number"}),(0,er.jsx)("input",Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600",value:rr("declaration.counselor_its")||"Loading...",readOnly:!0},Ga("declaration.counselor_its")))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Counselor Name"}),(0,er.jsx)("input",Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600",value:rr("declaration.counselor_name")||"Loading...",readOnly:!0},Ga("declaration.counselor_name")))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,er.jsx)("input",Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 text-gray-600",value:rr("declaration.counselor_contact")||"Loading...",readOnly:!0},Ga("declaration.counselor_contact")))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,er.jsx)("input",Pe({type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},Ga("declaration.counselor_date")))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Signature"}),(0,er.jsx)("div",{className:"mb-4",children:(0,er.jsxs)("div",{className:"flex space-x-4",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"radio",value:"draw"},Ga("declaration.counselor_signature_type",{value:"draw"})),{},{className:"mr-2",defaultChecked:!0})),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Draw Signature"})]}),(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"radio",value:"upload"},Ga("declaration.counselor_signature_type",{value:"upload"})),{},{className:"mr-2"})),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Upload Signature"})]})]})}),"draw"===rr("declaration.counselor_signature_type")?(0,er.jsx)(vi,{value:rr("declaration.counselor_signature_drawing_data"),onChange:e=>tr("declaration.counselor_signature_drawing_data",e),error:null===(Gt=Xa.declaration)||void 0===Gt||null===(Kt=Gt.counselor_signature_drawing_data)||void 0===Kt?void 0:Kt.message}):(0,er.jsx)("div",{children:rr("declaration.counselor_signature_file_path")?(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)("img",{src:rr("declaration.counselor_signature_file_path"),alt:"Counselor signature",className:"max-h-24 border border-gray-200 rounded object-contain bg-gray-50"}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Signature image uploaded"}),(0,er.jsx)("button",{type:"button",onClick:()=>tr("declaration.counselor_signature_file_path",""),className:"text-sm text-primary-600 hover:underline",children:"Change signature"})]}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("input",{type:"file",accept:"image/*",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{tr("declaration.counselor_signature_file_path",e.target.result)},e.readAsDataURL(t)}}}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a signature image file (PNG, JPG, etc.)"})]})})]})]}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-700 border-b border-gray-200 pb-2",children:"TR Committee Member Information"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ITS Number"}),(0,er.jsxs)("div",{className:"flex gap-2",children:[(0,er.jsx)("input",{type:"text",value:Ma||rr("declaration.tr_committee_its")||"",onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,8);Ta(t),Ua("")},onKeyPress:async e=>{if("Enter"===e.key){e.preventDefault();const r=Ma||rr("declaration.tr_committee_its")||"";if(!r||8!==r.length)return void Ua("ITS number must be 8 digits");za(!0),Ua("");try{const e=await Za.get("/api/applicants/lookup/".concat(r));if(e.data.success){const t=e.data.data;tr("declaration.tr_committee_its",t.its_number),tr("declaration.tr_committee_name",t.name),tr("declaration.tr_committee_contact",t.contact_number),Ta("")}}catch(ca){var t,a;Ua((null===(t=ca.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to find ITS number")}za(!1)}},onBlur:()=>{Ma&&tr("declaration.tr_committee_its",Ma)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Enter ITS Number (8 digits) and press Enter",maxLength:8}),qa&&(0,er.jsx)("div",{className:"flex items-center",children:(0,er.jsx)("span",{className:"text-gray-500 text-sm",children:"Loading..."})})]}),Ba&&(0,er.jsx)("p",{className:"text-red-500 text-xs mt-1",children:Ba})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"TR Committee Member Name"}),(0,er.jsx)("input",Pe(Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(rr("declaration.tr_committee_name")?"bg-gray-50 text-gray-600":""),value:rr("declaration.tr_committee_name")||"",readOnly:!!rr("declaration.tr_committee_name")},Ga("declaration.tr_committee_name")),{},{placeholder:"Enter TR committee member name or lookup by ITS"}))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),(0,er.jsx)("input",Pe(Pe({type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(rr("declaration.tr_committee_contact")?"bg-gray-50 text-gray-600":""),value:rr("declaration.tr_committee_contact")||"",readOnly:!!rr("declaration.tr_committee_contact")},Ga("declaration.tr_committee_contact")),{},{placeholder:"Enter contact number or lookup by ITS"}))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),(0,er.jsx)("input",Pe({type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},Ga("declaration.tr_committee_date")))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Signature"}),(0,er.jsx)("div",{className:"mb-4",children:(0,er.jsxs)("div",{className:"flex space-x-4",children:[(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"radio",value:"draw"},Ga("declaration.tr_committee_signature_type",{value:"draw"})),{},{className:"mr-2",defaultChecked:!0})),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Draw Signature"})]}),(0,er.jsxs)("label",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"radio",value:"upload"},Ga("declaration.tr_committee_signature_type",{value:"upload"})),{},{className:"mr-2"})),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Upload Signature"})]})]})}),"draw"===rr("declaration.tr_committee_signature_type")?(0,er.jsx)(vi,{value:rr("declaration.tr_committee_signature_drawing_data"),onChange:e=>tr("declaration.tr_committee_signature_drawing_data",e),error:null===($t=Xa.declaration)||void 0===$t||null===(Xt=$t.tr_committee_signature_drawing_data)||void 0===Xt?void 0:Xt.message}):(0,er.jsx)("div",{children:rr("declaration.tr_committee_signature_file_path")?(0,er.jsxs)("div",{className:"space-y-2",children:[(0,er.jsx)("img",{src:rr("declaration.tr_committee_signature_file_path"),alt:"TR Committee signature",className:"max-h-24 border border-gray-200 rounded object-contain bg-gray-50"}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Signature image uploaded"}),(0,er.jsx)("button",{type:"button",onClick:()=>tr("declaration.tr_committee_signature_file_path",""),className:"text-sm text-primary-600 hover:underline",children:"Change signature"})]}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("input",{type:"file",accept:"image/*",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{tr("declaration.tr_committee_signature_file_path",e.target.result)},e.readAsDataURL(t)}}}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Upload a signature image file (PNG, JPG, etc.)"})]})})]})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>an("declaration",rr("declaration")),disabled:Gr.isLoading||!on("declaration"),className:on("declaration")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save as Draft"}),(0,er.jsx)(Fr,{type:"button",onClick:()=>rn("declaration",rr("declaration")),disabled:Gr.isLoading||!on("declaration"),className:on("declaration")?"":"opacity-50 cursor-not-allowed",children:Gr.isLoading?"Saving...":"Save and Next"})]})]}),"declaration"===ha&&wa&&(0,er.jsx)(ad,{caseId:na,workflowStep:"declaration"}),"attachments"===ha&&(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,er.jsx)("div",{className:"flex items-center justify-between",children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"6. Attachments"})}),Qa&&(0,er.jsx)("p",{className:"text-sm text-blue-600 mt-2",children:"Loading existing attachments..."}),Va&&(0,er.jsxs)("p",{className:"text-sm text-red-600 mt-2",children:["Error loading attachments: ",Va.message]}),Wa&&(0,er.jsxs)("p",{className:"text-sm text-green-600 mt-2",children:["Found ",Wa.length," existing attachments"]})]}),(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Mandatory"}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,er.jsxs)("label",{className:"flex items-center mb-3",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox"},Ga("attachments.work_place_photo")),{},{className:"mr-3"})),(0,er.jsx)("span",{className:"font-medium",children:"Photograph of existing place of work and proposed place of business"})]}),(0,er.jsxs)("div",{className:"ml-6 space-y-2",children:[null===(Zt=rr("attachments.work_place_photo_files"))||void 0===Zt?void 0:Zt.map((e,t)=>(0,er.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700",children:e.name}),e.id&&(0,er.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Uploaded"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[e.id&&(0,er.jsx)("button",{type:"button",onClick:async()=>{try{const t=await Za.get("/api/attachments/download/".concat(e.id),{responseType:"blob"}),a=t.headers["content-type"]||"application/octet-stream",r=new Blob([t.data],{type:a}),n=window.URL.createObjectURL(r);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}catch(ca){console.error("Error downloading file:",ca),da("Failed to download file")}},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View"}),(0,er.jsx)("button",{type:"button",onClick:()=>{if(!on("attachments"))return void da("You do not have permission");const e=(rr("attachments.work_place_photo_files")||[]).filter((e,a)=>a!==t);tr("attachments.work_place_photo_files",e)},disabled:!on("attachments"),className:"text-red-600 hover:text-red-800 text-sm ".concat(on("attachments")?"":"opacity-50 cursor-not-allowed"),children:"Remove"})]})]},e.id||t)),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",className:"text-sm ".concat(on("attachments")?"":"opacity-50 cursor-not-allowed"),disabled:!on("attachments"),onChange:e=>{if(!on("attachments"))return void(e.target.value="");const t=Array.from(e.target.files),a=[];if(t.forEach(e=>{const t=ld(e);t&&a.push(t)}),a.length>0)return da(a.join("\n")),void(e.target.value="");const r=rr("attachments.work_place_photo_files")||[];tr("attachments.work_place_photo_files",[...r,...t]),e.target.value=""}}),(0,er.jsx)("button",{type:"button",disabled:!on("attachments"),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 ".concat(on("attachments")?"":"opacity-50 cursor-not-allowed"),onClick:()=>{if(!on("attachments"))return void da("You do not have permission");const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="image/*,.pdf,.doc,.docx",e.onchange=e=>{const t=Array.from(e.target.files),a=[];if(t.forEach(e=>{const t=ld(e);t&&a.push(t)}),a.length>0)return void da(a.join("\n"));const r=rr("attachments.work_place_photo_files")||[];tr("attachments.work_place_photo_files",[...r,...t])},e.click()},children:"+"})]})]})]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,er.jsxs)("label",{className:"flex items-center mb-3",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox"},Ga("attachments.quotation")),{},{className:"mr-3",disabled:!on("attachments")})),(0,er.jsx)("span",{className:"font-medium",children:"Quotation of end-use of Qardan amount whenever possible"})]}),(0,er.jsxs)("div",{className:"ml-6",children:[rr("attachments.quotation_file")&&(0,er.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded mb-2",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700",children:rr("attachments.quotation_file").name}),rr("attachments.quotation_file").id&&(0,er.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Uploaded"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[rr("attachments.quotation_file").id&&(0,er.jsx)("button",{type:"button",onClick:async()=>{try{const e=rr("attachments.quotation_file").id,t=await Za.get("/api/attachments/download/".concat(e),{responseType:"blob"}),a=t.headers["content-type"]||"application/octet-stream",r=new Blob([t.data],{type:a}),n=window.URL.createObjectURL(r);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}catch(ca){console.error("Error downloading file:",ca),da("Failed to download file")}},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View"}),(0,er.jsx)("button",{type:"button",onClick:()=>{on("attachments")?tr("attachments.quotation_file",null):da("You do not have permission")},disabled:!on("attachments"),className:"text-red-600 hover:text-red-800 text-sm ".concat(on("attachments")?"":"opacity-50 cursor-not-allowed"),children:"Remove"})]})]}),(0,er.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx",className:"text-sm ".concat(on("attachments")?"":"opacity-50 cursor-not-allowed"),disabled:!on("attachments"),onChange:e=>{if(!on("attachments"))return void(e.target.value="");const t=e.target.files[0];if(t){const a=ld(t);if(a)return da(a),void(e.target.value="");tr("attachments.quotation_file",t)}}})]})]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,er.jsxs)("label",{className:"flex items-center mb-3",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox"},Ga("attachments.product_brochure")),{},{className:"mr-3",disabled:!on("attachments")})),(0,er.jsx)("span",{className:"font-medium",children:"Product brochure / marketing material / photograph (if any)"})]}),(0,er.jsxs)("div",{className:"ml-6 space-y-2",children:[null===(ea=rr("attachments.product_brochure_files"))||void 0===ea?void 0:ea.map((e,t)=>(0,er.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700",children:e.name}),e.id&&(0,er.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Uploaded"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[e.id&&(0,er.jsx)("button",{type:"button",onClick:async()=>{try{const t=await Za.get("/api/attachments/download/".concat(e.id),{responseType:"blob"}),a=t.headers["content-type"]||"application/octet-stream",r=new Blob([t.data],{type:a}),n=window.URL.createObjectURL(r);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}catch(ca){console.error("Error downloading file:",ca),da("Failed to download file")}},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View"}),(0,er.jsx)("button",{type:"button",onClick:()=>{if(!on("attachments"))return void da("You do not have permission");const e=(rr("attachments.product_brochure_files")||[]).filter((e,a)=>a!==t);tr("attachments.product_brochure_files",e)},disabled:!on("attachments"),className:"text-red-600 hover:text-red-800 text-sm ".concat(on("attachments")?"":"opacity-50 cursor-not-allowed"),children:"Remove"})]})]},e.id||t)),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx",className:"text-sm ".concat(on("attachments")?"":"opacity-50 cursor-not-allowed"),disabled:!on("attachments"),onChange:e=>{if(!on("attachments"))return void(e.target.value="");const t=Array.from(e.target.files),a=[];if(t.forEach(e=>{const t=ld(e);t&&a.push(t)}),a.length>0)return da(a.join("\n")),void(e.target.value="");const r=rr("attachments.product_brochure_files")||[];tr("attachments.product_brochure_files",[...r,...t]),e.target.value=""}}),(0,er.jsx)("button",{type:"button",disabled:!on("attachments"),className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 ".concat(on("attachments")?"":"opacity-50 cursor-not-allowed"),onClick:()=>{if(!on("attachments"))return void da("You do not have permission");const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="image/*,.pdf,.doc,.docx",e.onchange=e=>{const t=Array.from(e.target.files),a=[];if(t.forEach(e=>{const t=ld(e);t&&a.push(t)}),a.length>0)return void da(a.join("\n"));const r=rr("attachments.product_brochure_files")||[];tr("attachments.product_brochure_files",[...r,...t])},e.click()},children:"+"})]})]})]})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"Optional"}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,er.jsxs)("label",{className:"flex items-center mb-3",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox"},Ga("attachments.income_tax_return")),{},{className:"mr-3"})),(0,er.jsx)("span",{className:"font-medium",children:"Income Tax Return"})]}),(0,er.jsxs)("div",{className:"ml-6",children:[rr("attachments.income_tax_return_file")&&(0,er.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded mb-2",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700",children:rr("attachments.income_tax_return_file").name}),rr("attachments.income_tax_return_file").id&&(0,er.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Uploaded"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[rr("attachments.income_tax_return_file").id&&(0,er.jsx)("button",{type:"button",onClick:async()=>{try{const e=rr("attachments.income_tax_return_file").id,t=await Za.get("/api/attachments/download/".concat(e),{responseType:"blob"}),a=t.headers["content-type"]||"application/octet-stream",r=new Blob([t.data],{type:a}),n=window.URL.createObjectURL(r);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}catch(ca){console.error("Error downloading file:",ca),da("Failed to download file")}},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View"}),(0,er.jsx)("button",{type:"button",onClick:()=>tr("attachments.income_tax_return_file",null),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]}),(0,er.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx",className:"text-sm",onChange:e=>{const t=e.target.files[0];if(t){const a=ld(t);if(a)return da(a),void(e.target.value="");tr("attachments.income_tax_return_file",t)}}})]})]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,er.jsxs)("label",{className:"flex items-center mb-3",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox"},Ga("attachments.financial_statements")),{},{className:"mr-3"})),(0,er.jsx)("span",{className:"font-medium",children:"Financial Statements (P&L and Balance sheet)"})]}),(0,er.jsxs)("div",{className:"ml-6",children:[rr("attachments.financial_statements_file")&&(0,er.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded mb-2",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700",children:rr("attachments.financial_statements_file").name}),rr("attachments.financial_statements_file").id&&(0,er.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Uploaded"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[rr("attachments.financial_statements_file").id&&(0,er.jsx)("button",{type:"button",onClick:async()=>{try{const e=rr("attachments.financial_statements_file").id,t=await Za.get("/api/attachments/download/".concat(e),{responseType:"blob"}),a=t.headers["content-type"]||"application/octet-stream",r=new Blob([t.data],{type:a}),n=window.URL.createObjectURL(r);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}catch(ca){console.error("Error downloading file:",ca),da("Failed to download file")}},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View"}),(0,er.jsx)("button",{type:"button",onClick:()=>tr("attachments.financial_statements_file",null),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]}),(0,er.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx",className:"text-sm",onChange:e=>{const t=e.target.files[0];if(t){const a=ld(t);if(a)return da(a),void(e.target.value="");tr("attachments.financial_statements_file",t)}}})]})]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,er.jsxs)("label",{className:"flex items-center mb-3",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox"},Ga("attachments.cancelled_cheque")),{},{className:"mr-3"})),(0,er.jsx)("span",{className:"font-medium",children:"Cancelled Cheque"})]}),(0,er.jsxs)("div",{className:"ml-6",children:[rr("attachments.cancelled_cheque_file")&&(0,er.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded mb-2",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700",children:rr("attachments.cancelled_cheque_file").name}),rr("attachments.cancelled_cheque_file").id&&(0,er.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Uploaded"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[rr("attachments.cancelled_cheque_file").id&&(0,er.jsx)("button",{type:"button",onClick:async()=>{try{const e=rr("attachments.cancelled_cheque_file").id,t=await Za.get("/api/attachments/download/".concat(e),{responseType:"blob"}),a=t.headers["content-type"]||"application/octet-stream",r=new Blob([t.data],{type:a}),n=window.URL.createObjectURL(r);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}catch(ca){console.error("Error downloading file:",ca),da("Failed to download file")}},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View"}),(0,er.jsx)("button",{type:"button",onClick:()=>tr("attachments.cancelled_cheque_file",null),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]}),(0,er.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",className:"text-sm",onChange:e=>{const t=e.target.files[0];if(t){const a=ld(t);if(a)return da(a),void(e.target.value="");tr("attachments.cancelled_cheque_file",t)}}})]})]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,er.jsxs)("label",{className:"flex items-center mb-3",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox"},Ga("attachments.pan_card")),{},{className:"mr-3"})),(0,er.jsx)("span",{className:"font-medium",children:"PAN Card"})]}),(0,er.jsxs)("div",{className:"ml-6",children:[rr("attachments.pan_card_file")&&(0,er.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded mb-2",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700",children:rr("attachments.pan_card_file").name}),rr("attachments.pan_card_file").id&&(0,er.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Uploaded"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[rr("attachments.pan_card_file").id&&(0,er.jsx)("button",{type:"button",onClick:async()=>{try{const e=rr("attachments.pan_card_file").id,t=await Za.get("/api/attachments/download/".concat(e),{responseType:"blob"}),a=t.headers["content-type"]||"application/octet-stream",r=new Blob([t.data],{type:a}),n=window.URL.createObjectURL(r);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}catch(ca){console.error("Error downloading file:",ca),da("Failed to download file")}},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View"}),(0,er.jsx)("button",{type:"button",onClick:()=>tr("attachments.pan_card_file",null),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]}),(0,er.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",className:"text-sm",onChange:e=>{const t=e.target.files[0];if(t){const a=ld(t);if(a)return da(a),void(e.target.value="");tr("attachments.pan_card_file",t)}}})]})]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,er.jsxs)("label",{className:"flex items-center mb-3",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox"},Ga("attachments.aadhar_card")),{},{className:"mr-3"})),(0,er.jsx)("span",{className:"font-medium",children:"Aadhar Card"})]}),(0,er.jsxs)("div",{className:"ml-6",children:[rr("attachments.aadhar_card_file")&&(0,er.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded mb-2",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700",children:rr("attachments.aadhar_card_file").name}),rr("attachments.aadhar_card_file").id&&(0,er.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Uploaded"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[rr("attachments.aadhar_card_file").id&&(0,er.jsx)("button",{type:"button",onClick:async()=>{try{const e=rr("attachments.aadhar_card_file").id,t=await Za.get("/api/attachments/download/".concat(e),{responseType:"blob"}),a=t.headers["content-type"]||"application/octet-stream",r=new Blob([t.data],{type:a}),n=window.URL.createObjectURL(r);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}catch(ca){console.error("Error downloading file:",ca),da("Failed to download file")}},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View"}),(0,er.jsx)("button",{type:"button",onClick:()=>tr("attachments.aadhar_card_file",null),className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]}),(0,er.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png",className:"text-sm",onChange:e=>{const t=e.target.files[0];if(t){const a=ld(t);if(a)return da(a),void(e.target.value="");tr("attachments.aadhar_card_file",t)}}})]})]}),(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,er.jsxs)("label",{className:"flex items-center mb-3",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox"},Ga("attachments.other_documents")),{},{className:"mr-3"})),(0,er.jsx)("span",{className:"font-medium",children:"Any other documents applicant/counselor may wish to attach"})]}),(0,er.jsxs)("div",{className:"ml-6 space-y-2",children:[null===(ta=rr("attachments.other_documents_files"))||void 0===ta?void 0:ta.map((e,t)=>(0,er.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700",children:e.name}),e.id&&(0,er.jsx)("span",{className:"text-xs text-green-600 bg-green-100 px-2 py-1 rounded",children:"Uploaded"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[e.id&&(0,er.jsx)("button",{type:"button",onClick:async()=>{try{const t=await Za.get("/api/attachments/download/".concat(e.id),{responseType:"blob"}),a=t.headers["content-type"]||"application/octet-stream",r=new Blob([t.data],{type:a}),n=window.URL.createObjectURL(r);window.open(n,"_blank"),setTimeout(()=>window.URL.revokeObjectURL(n),1e3)}catch(ca){console.error("Error downloading file:",ca),da("Failed to download file")}},className:"text-blue-600 hover:text-blue-800 text-sm",children:"View"}),(0,er.jsx)("button",{type:"button",onClick:()=>{const e=(rr("attachments.other_documents_files")||[]).filter((e,a)=>a!==t);tr("attachments.other_documents_files",e)},className:"text-red-600 hover:text-red-800 text-sm",children:"Remove"})]})]},e.id||t)),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"file",multiple:!0,accept:"*/*",className:"text-sm",onChange:e=>{const t=Array.from(e.target.files),a=[];if(t.forEach(e=>{const t=ld(e);t&&a.push(t)}),a.length>0)return da(a.join("\n")),void(e.target.value="");const r=rr("attachments.other_documents_files")||[];tr("attachments.other_documents_files",[...r,...t]),e.target.value=""}}),(0,er.jsx)("button",{type:"button",onClick:()=>{const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="*/*",e.onchange=e=>{const t=Array.from(e.target.files),a=[];if(t.forEach(e=>{const t=ld(e);t&&a.push(t)}),a.length>0)return void da(a.join("\n"));const r=rr("attachments.other_documents_files")||[];tr("attachments.other_documents_files",[...r,...t])},e.click()},className:"bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600",children:"+"})]})]})]})]})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>an("attachments",rr("attachments")),disabled:Gr.isLoading||ga||!on("attachments"),className:on("attachments")?"":"opacity-50 cursor-not-allowed",children:ga?"Uploading Files...":Gr.isLoading?"Saving...":"Save as Draft"}),(0,er.jsx)(Fr,{type:"button",onClick:()=>rn("attachments",rr("attachments")),disabled:Gr.isLoading||ga||!on("attachments"),className:on("attachments")?"":"opacity-50 cursor-not-allowed",children:ga?"Uploading Files...":Gr.isLoading?"Saving...":"Save"})]})]}),"attachments"===ha&&wa&&(0,er.jsx)(ad,{caseId:na,workflowStep:"attachments"})]}),(0,er.jsxs)("div",{className:"flex justify-between mt-6",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>{var e;return sa("/cases?search=".concat(encodeURIComponent((null===Tr||void 0===Tr||null===(e=Tr.form)||void 0===e?void 0:e.case_number)||na||"")))},children:"Back to Cases"}),(0,er.jsx)(Fr,{type:"submit",variant:"primary",disabled:fa||(null===Tr||void 0===Tr||null===(aa=Tr.form)||void 0===aa?void 0:aa.is_complete)&&"welfare_rejected"!==(null===Tr||void 0===Tr||null===(ra=Tr.form)||void 0===ra?void 0:ra.case_status),children:fa?"Saving...":"Save All Sections"})]})]})]});var un,mn},md=()=>{const e=Z(),[t,a]=(0,r.useState)(""),[n,s]=(0,r.useState)("all"),{data:i,isLoading:o,error:l}=(0,Ce.useQuery)("cases-with-counseling-forms",()=>Za.get("/api/cases").then(e=>e.data),{select:e=>e.cases||[]}),{data:c}=(0,Ce.useQuery)("counseling-forms-stats",()=>Za.get("/api/counseling-forms/stats").then(e=>e.data),{select:e=>e.stats||{}}),d=(null===i||void 0===i?void 0:i.filter(e=>{var a,r,s;const i=(null===(a=e.applicant_full_name)||void 0===a?void 0:a.toLowerCase().includes(t.toLowerCase()))||(null===(r=e.its_number)||void 0===r?void 0:r.includes(t))||(null===(s=e.case_number)||void 0===s?void 0:s.toLowerCase().includes(t.toLowerCase())),o="all"===n||"completed"===n&&e.counseling_form_completed||"in_progress"===n&&"in_counseling"===e.status||"not_started"===n&&!e.counseling_form_completed&&"in_counseling"!==e.status;return i&&o}))||[],u=e=>e.counseling_form_completed?(0,er.jsx)(vn,{variant:"success",children:"Completed"}):"in_counseling"===e.status?(0,er.jsx)(vn,{variant:"warning",children:"In Progress"}):(0,er.jsx)(vn,{variant:"secondary",children:"Not Started"});return o?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):l?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)(Ur,{variant:"error",children:["Failed to load counseling forms: ",l.message]})}):(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Counseling Forms"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage and track counseling form progress"})]}),c&&(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,er.jsx)(zr,{className:"p-6",children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,er.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,er.jsxs)("div",{className:"ml-4",children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Forms"}),(0,er.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.total_forms||0})]})]})}),(0,er.jsx)(zr,{className:"p-6",children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,er.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,er.jsxs)("div",{className:"ml-4",children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),(0,er.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.completed_forms||0})]})]})}),(0,er.jsx)(zr,{className:"p-6",children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("div",{className:"p-3 bg-yellow-100 rounded-full",children:(0,er.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,er.jsxs)("div",{className:"ml-4",children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),(0,er.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:c.incomplete_forms||0})]})]})})]}),(0,er.jsx)(zr,{className:"p-6 mb-6",children:(0,er.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,er.jsx)("div",{className:"flex-1",children:(0,er.jsx)(Ir,{placeholder:"Search by applicant name, ITS number, or case number...",value:t,onChange:e=>a(e.target.value)})}),(0,er.jsx)("div",{className:"w-full md:w-48",children:(0,er.jsxs)(ln,{value:n,onChange:e=>s(e.target.value),children:[(0,er.jsx)("option",{value:"all",children:"All Status"}),(0,er.jsx)("option",{value:"completed",children:"Completed"}),(0,er.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,er.jsx)("option",{value:"not_started",children:"Not Started"})]})})]})}),(0,er.jsx)(zr,{className:"p-6",children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)(rn,{children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{children:"Case Number"}),(0,er.jsx)("th",{children:"Applicant Name"}),(0,er.jsx)("th",{children:"ITS Number"}),(0,er.jsx)("th",{children:"Status"}),(0,er.jsx)("th",{children:"Assigned To"}),(0,er.jsx)("th",{children:"Created Date"}),(0,er.jsx)("th",{children:"Actions"})]})}),(0,er.jsx)("tbody",{children:0===d.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"7",className:"text-center py-8 text-gray-500",children:"No cases found matching your criteria"})}):d.map(t=>(0,er.jsxs)("tr",{children:[(0,er.jsx)("td",{className:"font-medium",children:t.case_number}),(0,er.jsx)("td",{children:t.applicant_full_name}),(0,er.jsx)("td",{children:t.its_number}),(0,er.jsx)("td",{children:u(t)}),(0,er.jsx)("td",{children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium",children:t.counselor_full_name||"Unassigned"}),t.dcm_full_name&&(0,er.jsxs)("div",{className:"text-xs text-gray-500",children:["DCM: ",t.dcm_full_name]})]})}),(0,er.jsx)("td",{children:new Date(t.created_at).toLocaleDateString()}),(0,er.jsx)("td",{children:(0,er.jsx)("div",{className:"flex space-x-2",children:t.counseling_form_completed?(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{return a=t.id,void e("/counseling-form/".concat(a));var a},children:"View Form"}):(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>{return a=t.id,void e("/counseling-form/".concat(a));var a},children:"in_counseling"===t.status?"Continue Form":"Start Form"})})})]},t.id))})]})})})]})},hd=()=>{const{token:e}=ar(),[t,a]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)({}),[m,h]=(0,r.useState)(!0),[p,f]=(0,r.useState)(""),[x,g]=(0,r.useState)(""),[y,v]=(0,r.useState)({role:"",is_active:"",search:""}),[b,_]=(0,r.useState)(1),[j,w]=(0,r.useState)(10),[N,k]=(0,r.useState)(0),[S,C]=(0,r.useState)(!1),[A,L]=(0,r.useState)(!1),[P,E]=(0,r.useState)(!1),[F,O]=(0,r.useState)(null),[I,R]=(0,r.useState)(null),[D,M]=(0,r.useState)(!1),[T,q]=(0,r.useState)(""),[z,B]=(0,r.useState)({its_number:"",full_name:"",username:"",email:"",phone:"",jamiat:[],jamaat:[],role:[],roleJamiatJamaat:{},is_active:!0,password:"",confirmPassword:"",photo:""}),[U,H]=(0,r.useState)({its_number:"",full_name:"",username:"",email:"",phone:"",jamiat:[],jamaat:[],role:[],roleJamiatJamaat:{},is_active:!0,password:"",confirmPassword:"",photo:""}),[W,V]=(0,r.useState)(!1),[Q,J]=(0,r.useState)(!1),[Y,G]=(0,r.useState)(""),[K,$]=(0,r.useState)(""),[X,Z]=(0,r.useState)(null),[ee,te]=(0,r.useState)(null),[ae,re]=(0,r.useState)(!1),[ne,se]=(0,r.useState)(!1),[ie,oe]=(0,r.useState)(""),[le,ce]=(0,r.useState)(""),[de,ue]=(0,r.useState)(!1),[me,he]=(0,r.useState)(!1),[pe,fe]=(0,r.useState)(null),[xe,ge]=(0,r.useState)(!1),[ye,ve]=(0,r.useState)(null),[be,_e]=(0,r.useState)(""),[je,we]=(0,r.useState)(""),[Ne,ke]=(0,r.useState)(!1),[Se,Ce]=(0,r.useState)(null),[Ae,Le]=(0,r.useState)(""),Ee=(e,t)=>{B(a=>{const r=a.roleJamiatJamaat[e]||{jamiat:[],jamaat:[]},n=(r.jamaat||[]).filter(e=>{const a=l.find(t=>t.id===e);return a&&t.includes(a.jamiat_id)});return Pe(Pe({},a),{},{roleJamiatJamaat:Pe(Pe({},a.roleJamiatJamaat),{},{[e]:Pe(Pe({},r),{},{jamiat:t,jamaat:n})})})})},Fe=(e,t)=>{B(a=>Pe(Pe({},a),{},{roleJamiatJamaat:Pe(Pe({},a.roleJamiatJamaat),{},{[e]:Pe(Pe({},a.roleJamiatJamaat[e]||{jamiat:[],jamaat:[]}),{},{jamaat:t})})}))},Oe=e=>{const t=(z.roleJamiatJamaat[e]||{}).jamiat||[];return 0===t.length?l:l.filter(e=>t.includes(e.jamiat_id))},Ie=(e,t)=>{H(a=>{const r=a.roleJamiatJamaat[e]||{jamiat:[],jamaat:[]},n=(r.jamaat||[]).filter(e=>{const a=l.find(t=>t.id===e);return a&&t.includes(a.jamiat_id)});return Pe(Pe({},a),{},{roleJamiatJamaat:Pe(Pe({},a.roleJamiatJamaat),{},{[e]:Pe(Pe({},r),{},{jamiat:t,jamaat:n})})})})},Re=(e,t)=>{H(a=>Pe(Pe({},a),{},{roleJamiatJamaat:Pe(Pe({},a.roleJamiatJamaat),{},{[e]:Pe(Pe({},a.roleJamiatJamaat[e]||{jamiat:[],jamaat:[]}),{},{jamaat:t})})}))},De=e=>{const t=(U.roleJamiatJamaat[e]||{}).jamiat||[];return 0===t.length?l:l.filter(e=>t.includes(e.jamiat_id))},Me=async()=>{try{var t;h(!0);const r=new URLSearchParams;y.role&&r.append("role",y.role),""!==y.is_active&&r.append("is_active",y.is_active),y.search&&r.append("search",y.search),r.append("page",b),r.append("limit",j);const n=await fetch("/api/users?".concat(r),{headers:{Authorization:"Bearer ".concat(e)}});if(!n.ok)throw new Error("Failed to fetch users");const s=await n.json();a(s.users),k(null!==(t=s.total)&&void 0!==t?t:s.users.length)}catch(Ki){f(Ki.message)}finally{h(!1)}},Te=async()=>{try{const t=await fetch("/api/users/stats/overview",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch stats");const a=await t.json();u(a.stats)}catch(Ki){console.error("Error fetching stats:",Ki)}},qe=()=>{R(null),q(""),E(!1)},ze=()=>{B({its_number:"",full_name:"",username:"",email:"",phone:"",jamiat:[],jamaat:[],role:[],is_active:!0,password:"",confirmPassword:"",photo:""}),G(""),ce(""),te(null),se(!1),he(!1),O(null),C(!1)},Be=()=>{H({its_number:"",full_name:"",username:"",email:"",phone:"",jamiat:[],jamaat:[],role:[],roleJamiatJamaat:{},is_active:!0,password:"",confirmPassword:"",photo:""}),$(""),oe(""),Z(null),re(!1),ue(!1),L(!1)},Ue=async e=>{if(e&&""!==e.trim()){re(!0),oe("");try{const t=(await Za.get("/api/applicants/fetch-from-api/".concat(e))).data.data;console.log("\ud83d\udd0d API Response for ITS",e,":",t),console.log("\ud83d\udcf8 Photo data received:",t.photo?"YES (".concat((t.photo.length/1024).toFixed(2)," KB)"):"NO"),t.full_name&&(H(e=>Pe(Pe({},e),{},{full_name:t.full_name})),ue(!0)),t.email&&H(e=>Pe(Pe({},e),{},{email:t.email})),t.phone&&H(e=>Pe(Pe({},e),{},{phone:t.phone})),t.photo?(console.log("\u2705 Setting photo in form and preview"),H(e=>Pe(Pe({},e),{},{photo:t.photo})),Z(t.photo)):(console.log("\u26a0\ufe0f No photo data available from API"),H(e=>Pe(Pe({},e),{},{photo:""})),Z(null)),g("Data fetched successfully from external API!"),$("")}catch(p){var t,a;console.error("\u274c Create API fetch error:",p),oe((null===(t=p.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to fetch data from external API")}finally{re(!1)}}},He=async e=>{if(e&&""!==e.trim()){se(!0),ce("");try{const t=(await Za.get("/api/applicants/fetch-from-api/".concat(e))).data.data;console.log("\ud83d\udd0d EDIT - API Response for ITS",e,":",t),console.log("\ud83d\udcf8 EDIT - Photo data received:",t.photo?"YES (".concat((t.photo.length/1024).toFixed(2)," KB)"):"NO"),t.full_name&&(B(e=>Pe(Pe({},e),{},{full_name:t.full_name})),he(!0)),t.email&&B(e=>Pe(Pe({},e),{},{email:t.email})),t.phone&&B(e=>Pe(Pe({},e),{},{phone:t.phone})),t.photo?(console.log("\u2705 EDIT - Setting photo in form and preview"),B(e=>Pe(Pe({},e),{},{photo:t.photo})),te(t.photo)):(console.log("\u26a0\ufe0f EDIT - No photo data available from API"),B(e=>Pe(Pe({},e),{},{photo:""})),te(null)),g("Data fetched successfully from external API!"),G("")}catch(p){var t,a;console.error("\u274c Edit API fetch error:",p),ce((null===(t=p.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to fetch data from external API")}finally{se(!1)}}},We=(e,t)=>{v(a=>Pe(Pe({},a),{},{[e]:t})),_(1)},Ve=Math.ceil(N/j)||1,Qe=0===N?0:(b-1)*j+1,Je=Math.min(b*j,N),Ye=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ");return(0,r.useEffect)(()=>{(async()=>{try{const t=await fetch("/api/users/roles",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch roles");const a=await t.json();s(a.roles)}catch(Ki){console.error("Error fetching roles:",Ki)}})(),(async()=>{try{if(!e)return void console.error("Authentication token is missing");const t=await fetch("/api/jamiat",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(e.error||"Failed to fetch jamiat: ".concat(t.status," ").concat(t.statusText))}const a=await t.json();o(a.jamiat||[])}catch(Ki){"TypeError"===Ki.name&&"Failed to fetch"===Ki.message?console.error("Unable to connect to the server. Please ensure the backend server is running on port 5000."):console.error("Error fetching jamiat:",Ki)}})(),(async()=>{try{const t=await fetch("/api/jamaat",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch jamaat");const a=await t.json();c(a.jamaat||[])}catch(Ki){console.error("Error fetching jamaat:",Ki)}})(),Te()},[]),(0,r.useEffect)(()=>{Me()},[y,b,j]),(0,r.useEffect)(()=>{if(x||p){const e=setTimeout(()=>{g(""),f("")},5e3);return()=>clearTimeout(e)}},[x,p]),(0,er.jsxs)("div",{className:"p-6 space-y-6",children:[(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Users"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage user accounts and permissions"})]}),p&&(0,er.jsx)(Ur,{severity:"error",onClose:()=>f(""),children:p}),x&&(0,er.jsx)(Ur,{severity:"success",onClose:()=>g(""),children:x}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,er.jsx)(zr,{children:(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("div",{className:"flex-shrink-0",children:(0,er.jsx)("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,er.jsx)("svg",{className:"w-5 h-5 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})})}),(0,er.jsxs)("div",{className:"ml-4",children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Users"}),(0,er.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:d.total_users||0})]})]})})}),(0,er.jsx)(zr,{children:(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("div",{className:"flex-shrink-0",children:(0,er.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,er.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,er.jsxs)("div",{className:"ml-4",children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Active Users"}),(0,er.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:d.active_users||0})]})]})})}),(0,er.jsx)(zr,{children:(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("div",{className:"flex-shrink-0",children:(0,er.jsx)("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:(0,er.jsx)("svg",{className:"w-5 h-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),(0,er.jsxs)("div",{className:"ml-4",children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Inactive Users"}),(0,er.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:d.inactive_users||0})]})]})})}),(0,er.jsx)(zr,{children:(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("div",{className:"flex-shrink-0",children:(0,er.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,er.jsx)("svg",{className:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})})}),(0,er.jsxs)("div",{className:"ml-4",children:[(0,er.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Admins"}),(0,er.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:d.admin_count||0})]})]})})})]}),(0,er.jsx)(zr,{children:(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,er.jsx)("div",{children:(0,er.jsx)(Ir,{label:"Search Users",placeholder:"Search by full name, username, or email...",value:y.search,onChange:e=>We("search",e.target.value)})}),(0,er.jsx)("div",{children:(0,er.jsxs)(ln,{label:"Role",value:y.role,onChange:e=>We("role",e.target.value),children:[(0,er.jsx)(ln.Option,{value:"",children:"All Roles"}),n.map(e=>(0,er.jsx)(ln.Option,{value:e.name,children:Ye(e.name)},e.name))]})}),(0,er.jsx)("div",{children:(0,er.jsxs)(ln,{label:"Status",value:y.is_active,onChange:e=>We("is_active",e.target.value),children:[(0,er.jsx)(ln.Option,{value:"",children:"All Status"}),(0,er.jsx)(ln.Option,{value:"true",children:"Active"}),(0,er.jsx)(ln.Option,{value:"false",children:"Inactive"})]})}),(0,er.jsx)("div",{className:"flex items-end",children:(0,er.jsx)(Fr,{variant:"outline",onClick:()=>{v({role:"",is_active:"",search:""}),_(1)},className:"w-full",children:"Clear Filters"})})]})})}),(0,er.jsx)(zr,{children:(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Users List"}),(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsxs)("select",{value:je,onChange:e=>we(e.target.value),disabled:Ne,className:"rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-primary-500 focus:ring-1 focus:ring-primary-500",children:[(0,er.jsx)("option",{value:"",children:"Select role"}),n.map(e=>(0,er.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,er.jsx)(Fr,{variant:"outline",onClick:async()=>{if(je)try{ke(!0),Le(""),Ce(null);const t=await Za.post("/api/users/fetch-contact-from-api",{role:je},{headers:{Authorization:"Bearer ".concat(e)}});Ce(t.data),Me(),setTimeout(()=>Ce(null),8e3)}catch(p){var t,a;Le((null===(t=p.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||p.message||"Failed to fetch contact from API")}finally{ke(!1)}else Le("Please select a role")},disabled:Ne||!je,className:"flex items-center space-x-2",children:Ne?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-600"}),(0,er.jsx)("span",{children:"Fetching..."})]}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,er.jsx)("span",{children:"Fetch name, email, phone & photo from API"})]})})]}),(0,er.jsxs)(Fr,{variant:"outline",onClick:async()=>{try{const t=await Za.get("/api/users/export/template",{headers:{Authorization:"Bearer ".concat(e)},responseType:"blob"});if(t.data instanceof Blob&&"application/json"===t.data.type){const e=await t.data.text(),a=JSON.parse(e);throw new Error(a.error||"Failed to download template")}const a=window.URL.createObjectURL(t.data),r=document.createElement("a");r.href=a,r.setAttribute("download","users_import_template.xlsx"),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(a)}catch(p){console.error("Error downloading template:",p);let r="Failed to download template";var t;if(p.response)if(p.response.data instanceof Blob)try{const t=await p.response.data.text();r=JSON.parse(t).error||r}catch(a){401===p.response.status?r="Authentication required. Please log in again.":403===p.response.status?r="You do not have permission to download the template.":p.response.status>=500&&(r="Server error. Please try again later.")}else null!==(t=p.response.data)&&void 0!==t&&t.error&&(r=p.response.data.error);else p.message&&(r=p.message);_e(r),setTimeout(()=>_e(""),5e3)}},className:"flex items-center space-x-2",disabled:xe,children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,er.jsx)("span",{children:"Download Sample Excel"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{id:"excel-file-input",type:"file",accept:".xlsx,.xls",onChange:e=>{const t=e.target.files[0];if(t){const e=t.type;if(!e.includes("spreadsheet")&&!e.includes("excel")&&!e.includes("application/vnd.openxmlformats"))return _e("Please select a valid Excel file (.xlsx or .xls)"),void fe(null);fe(t),_e(""),ve(null)}},className:"hidden",disabled:xe}),(0,er.jsxs)(Fr,{variant:"outline",onClick:()=>{var e;return null===(e=document.getElementById("excel-file-input"))||void 0===e?void 0:e.click()},disabled:xe,className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,er.jsx)("span",{children:"Select File"})]}),(0,er.jsx)(Fr,{variant:"primary",onClick:async()=>{if(pe)try{ge(!0),_e(""),ve(null);const t=new FormData;t.append("file",pe);const a=await Za.post("/api/users/import-excel",t,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}});ve(a.data),fe(null);const r=document.getElementById("excel-file-input");r&&(r.value=""),Me(),Te(),setTimeout(()=>{ve(null)},5e3)}catch(p){var t,a;console.error("Error importing Excel:",p);let r="Failed to import Excel file";null!==(t=p.response)&&void 0!==t&&null!==(a=t.data)&&void 0!==a&&a.error?r=p.response.data.error:p.message&&(r=p.message),_e(r)}finally{ge(!1)}else _e("Please select an Excel file")},disabled:xe||!pe,loading:xe,className:"flex items-center space-x-2",children:xe?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,er.jsx)("span",{children:"Importing..."})]}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,er.jsx)("span",{children:"Import from Excel"})]})})]}),(0,er.jsxs)(Fr,{variant:"primary",onClick:()=>{H({its_number:"",full_name:"",username:"",email:"",phone:"",jamiat:[],jamaat:[],role:[],roleJamiatJamaat:{},is_active:!0,password:"",confirmPassword:"",photo:""}),$(""),oe(""),Z(null),re(!1),ue(!1),L(!0)},className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,er.jsx)("span",{children:"Create User"})]})]})]}),be&&(0,er.jsx)(Ur,{severity:"error",onClose:()=>_e(""),className:"mb-4",children:be}),ye&&(0,er.jsx)(Ur,{severity:"success",onClose:()=>ve(null),className:"mb-4",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("strong",{children:"Import Complete:"})," ",ye.inserted," inserted, ",ye.updated," updated, ",ye.skipped," skipped",ye.errors&&ye.errors.length>0&&(0,er.jsxs)("div",{className:"mt-2",children:[(0,er.jsxs)("strong",{children:[ye.errors.length," error(s) occurred:"]}),(0,er.jsxs)("ul",{className:"list-disc list-inside mt-1 text-sm",children:[ye.errors.slice(0,10).map((e,t)=>(0,er.jsx)("li",{children:e},t)),ye.errors.length>10&&(0,er.jsxs)("li",{children:["... and ",ye.errors.length-10," more errors"]})]})]})]})}),pe&&(0,er.jsxs)(Ur,{severity:"info",className:"mb-4",children:["Selected file: ",pe.name]}),Ae&&(0,er.jsx)(Ur,{severity:"error",onClose:()=>Le(""),className:"mb-4",children:Ae}),Se&&(0,er.jsx)(Ur,{severity:"success",onClose:()=>Ce(null),className:"mb-4",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("strong",{children:"Fetch complete:"})," ",Se.updated," updated, ",Se.failed," failed (total: ",Se.total,"). This may take several minutes for many users.",Se.errors&&Se.errors.length>0&&(0,er.jsxs)("ul",{className:"list-disc list-inside mt-1 text-sm",children:[Se.errors.slice(0,5).map((e,t)=>(0,er.jsx)("li",{children:e},t)),Se.errors.length>5&&(0,er.jsxs)("li",{children:["... and ",Se.errors.length-5," more"]})]})]})}),m?(0,er.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,er.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading users..."})]}):(0,er.jsxs)(rn,{children:[(0,er.jsx)(rn.Head,{children:(0,er.jsxs)(rn.Row,{children:[(0,er.jsx)(rn.Header,{children:"Photo"}),(0,er.jsx)(rn.Header,{children:"User"}),(0,er.jsx)(rn.Header,{children:"Role"}),(0,er.jsx)(rn.Header,{children:"Status"}),(0,er.jsx)(rn.Header,{children:"Created"}),(0,er.jsx)(rn.Header,{align:"center",children:"Actions"})]})}),(0,er.jsx)(rn.Body,{children:t.map(t=>{var a,r,n;return(0,er.jsxs)(rn.Row,{hover:!0,children:[(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"flex items-center justify-center",children:t.photo&&(0,er.jsx)("img",{src:t.photo,alt:t.full_name,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-200"})})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.full_name}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:t.email}),(0,er.jsxs)("div",{className:"text-xs text-gray-400",children:["@",t.username]})]})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(vn,{variant:"admin"===t.role||"super_admin"===t.role?"primary":"secondary",children:Ye(t.role)})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)(_n,{checked:1===t.is_active,onChange:()=>(async t=>{try{const a=await fetch("/api/users/".concat(t,"/toggle-status"),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!a.ok){const e=await a.json();throw new Error(e.error||"Failed to update user status")}g("User status updated successfully"),Me(),Te()}catch(Ki){f(Ki.message)}})(t.id),disabled:t.id===(null===(a=JSON.parse(localStorage.getItem("user")))||void 0===a?void 0:a.id)}),(0,er.jsx)("span",{className:"ml-2 text-sm ".concat(1===t.is_active?"text-green-600":"text-red-600"),children:1===t.is_active?"Active":"Inactive"})]})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"text-sm text-gray-900",children:(n=t.created_at,new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}))})}),(0,er.jsx)(rn.Cell,{align:"center",children:(0,er.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{var t,a;O(e);const r=e.assigned_roles&&e.assigned_roles.length?e.assigned_roles:e.role?[e.role]:[],n=r.map(e=>"string"===typeof e?e:e.name),s={};if(r.forEach(e=>{const t="string"===typeof e?e:e.name;"object"===typeof e&&e.jamiat&&e.jamaat?s[t]={jamiat:(e.jamiat||[]).map(e=>e.id),jamaat:(e.jamaat||[]).map(e=>e.id)}:s[t]={jamiat:[],jamaat:[]}}),n.forEach(e=>{s[e]||(s[e]={jamiat:[],jamaat:[]})}),n.length&&(null!==(t=e.jamiat)&&void 0!==t&&t.length||null!==(a=e.jamaat)&&void 0!==a&&a.length)){var i,o;const t=s[n[0]];null!==(i=t.jamiat)&&void 0!==i&&i.length||null!==(o=t.jamaat)&&void 0!==o&&o.length||(s[n[0]]={jamiat:(e.jamiat||[]).map(e=>e.id),jamaat:(e.jamaat||[]).map(e=>e.id)})}B({its_number:e.its_number||"",full_name:e.full_name||"",username:e.username||"",email:e.email||"",phone:e.phone||"",jamiat:e.jamiat?e.jamiat.map(e=>e.id):[],jamaat:e.jamaat?e.jamaat.map(e=>e.id):[],role:n,roleJamiatJamaat:s,is_active:1===e.is_active,password:"",confirmPassword:"",photo:e.photo||""}),e.photo?te(e.photo):te(null),G(""),ce(""),se(!1),C(!0)})(t),children:"Edit"}),"super_admin"!==t.role&&(0,er.jsx)(Fr,{variant:"danger",size:"sm",onClick:()=>(e=>{R(e),q(""),E(!0)})(t),disabled:t.id===(null===(r=JSON.parse(localStorage.getItem("user")))||void 0===r?void 0:r.id),children:"Delete"})]})})]},t.id)})})]}),N>0&&!m&&(0,er.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 border-t border-gray-200 px-2 py-4 mt-4",children:[(0,er.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,er.jsxs)("div",{className:"flex items-center gap-2",children:[(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Rows per page:"}),(0,er.jsx)("select",{value:j,onChange:e=>{const t=Number(e.target.value);w(t),_(1)},className:"rounded-md border border-gray-300 px-2 py-1.5 text-sm focus:border-primary-500 focus:ring-1 focus:ring-primary-500",children:[10,20,50,100,500].map(e=>(0,er.jsx)("option",{value:e,children:e},e))})]}),(0,er.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",Qe," to ",Je," of ",N," results"]})]}),(0,er.jsxs)("div",{className:"flex items-center gap-0.5 flex-wrap justify-center",children:[(0,er.jsx)("button",{type:"button",onClick:()=>_(e=>Math.max(1,e-1)),disabled:b<=1,className:"inline-flex items-center justify-center min-w-[2rem] h-8 px-2 rounded border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium","aria-label":"Previous page",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(()=>{if(Ve<=7)return Array.from({length:Ve},(e,t)=>t+1);const e=new Set([1,Ve]),t=Math.max(1,b-2),a=Math.min(Ve,b+2);for(let s=t;s<=a;s++)e.add(s);const r=Array.from(e).sort((e,t)=>e-t),n=[];for(let s=0;s<r.length;s++)s>0&&r[s]-r[s-1]>1&&n.push("ellipsis"),n.push(r[s]);return n})().map((e,t)=>"ellipsis"===e?(0,er.jsx)("span",{className:"inline-flex items-center justify-center min-w-[2rem] h-8 px-2 text-gray-500 text-sm",children:"\u2026"},"ellipsis-".concat(t)):(0,er.jsx)("button",{type:"button",onClick:()=>_(e),className:"inline-flex items-center justify-center min-w-[2rem] h-8 px-2 rounded text-sm font-medium border ".concat(b===e?"bg-primary-50 border-primary-500 text-primary-700 ring-1 ring-primary-500":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:e},e)),(0,er.jsx)("button",{type:"button",onClick:()=>_(e=>Math.min(Ve,e+1)),disabled:b>=Ve,className:"inline-flex items-center justify-center min-w-[2rem] h-8 px-2 rounded border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium","aria-label":"Next page",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),0===t.length&&!m&&(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,er.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),(0,er.jsx)("p",{className:"text-gray-500",children:"Try adjusting your filters or search terms."})]})]})}),(0,er.jsxs)(xn,{isOpen:S,onClose:ze,title:"Edit User",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[Y&&(0,er.jsx)(Ur,{severity:"error",children:Y}),le&&(0,er.jsx)(Ur,{severity:"error",children:le}),(0,er.jsxs)("div",{children:[(0,er.jsx)(Ir,{label:"ITS Number",value:z.its_number,onChange:e=>{const t=e.target.value;B(e=>Pe(Pe({},e),{},{its_number:t})),t.length>=3&&t.length<=8?He(t):0===t.length&&(F&&(B(e=>Pe(Pe({},e),{},{full_name:F.full_name||"",photo:F.photo||""})),te(F.photo||null),he(!1)),ce(""))},onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const t=z.its_number.trim();t.length>=3?He(t):ce("Please enter at least 3 characters of the ITS number")}},placeholder:"Enter 8-digit ITS number",maxLength:8}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Data will be automatically fetched as you type (minimum 3 characters) or press Enter"}),ne&&(0,er.jsxs)("div",{className:"text-sm text-blue-600 flex items-center mt-2",children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Fetching data from API..."]})]}),(0,er.jsx)(Ir,{label:"Full Name",value:z.full_name,onChange:e=>B(t=>Pe(Pe({},t),{},{full_name:e.target.value})),required:!0,placeholder:"Enter full name",readOnly:me,className:me?"bg-gray-100":""}),(0,er.jsx)(Ir,{label:"Username",value:z.username,onChange:e=>B(t=>Pe(Pe({},t),{},{username:e.target.value})),required:!0,placeholder:"Enter username"}),(0,er.jsx)(Ir,{label:"Email",type:"email",value:z.email,onChange:e=>B(t=>Pe(Pe({},t),{},{email:e.target.value})),required:!0}),(0,er.jsx)(Ir,{label:"Phone",type:"tel",value:z.phone,onChange:e=>B(t=>Pe(Pe({},t),{},{phone:e.target.value})),placeholder:"+91 9876543210"}),(0,er.jsx)(dn,{label:"Role (required)",options:n.map(e=>({value:e.name,label:Ye(e.name)})),value:z.role,onChange:e=>{B(t=>{const a=Pe({},t.roleJamiatJamaat);return t.role.forEach(t=>{e.includes(t)||delete a[t]}),e.forEach(e=>{e in a||(a[e]={jamiat:[],jamaat:[]})}),Pe(Pe({},t),{},{role:e,roleJamiatJamaat:a})})},placeholder:"Select roles...",required:!0}),z.role.length>0&&(0,er.jsxs)("div",{className:"border-t pt-4 mt-4 space-y-4",children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Jamiat & Jamaat per role"}),z.role.map(e=>{const t=z.roleJamiatJamaat[e]||{jamiat:[],jamaat:[]};return(0,er.jsxs)("div",{className:"rounded-lg border border-gray-200 p-4 bg-gray-50/50 space-y-3",children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-800",children:Ye(e)}),(0,er.jsx)(dn,{label:"Jamiat",options:i.map(e=>({value:e.id,label:e.name})),value:t.jamiat||[],onChange:t=>Ee(e,t),placeholder:"Select Jamiat...",showSelectAll:!0,selectAllLabel:"Select All Jamiat",onSelectAll:()=>(e=>{const t=i.map(e=>e.id),a=z.roleJamiatJamaat[e]||{jamiat:[],jamaat:[]},r=t.length>0&&t.every(e=>(a.jamiat||[]).includes(e));Ee(e,r?[]:t)})(e)}),(0,er.jsx)(dn,{label:"Jamaat",options:Oe(e).map(e=>({value:e.id,label:e.name})),value:t.jamaat||[],onChange:t=>Fe(e,t),placeholder:"Select Jamaat...",showSelectAll:!0,selectAllLabel:"Select All Jamaat",onSelectAll:()=>(e=>{const t=Oe(e).map(e=>e.id),a=z.roleJamiatJamaat[e]||{jamiat:[],jamaat:[]},r=t.length>0&&t.every(e=>(a.jamaat||[]).includes(e));Fe(e,r?[]:t)})(e)})]},e)})]}),(0,er.jsx)("div",{className:"space-y-4",children:(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Change Password (Optional)"}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsx)(Ir,{label:"New Password",type:"password",value:z.password,onChange:e=>B(t=>Pe(Pe({},t),{},{password:e.target.value})),placeholder:"Leave empty to keep current password"}),(0,er.jsx)(Ir,{label:"Confirm New Password",type:"password",value:z.confirmPassword,onChange:e=>B(t=>Pe(Pe({},t),{},{confirmPassword:e.target.value})),placeholder:"Confirm new password"})]})]})}),ee&&(0,er.jsxs)("div",{className:"mt-4",children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Photo ",null!==F&&void 0!==F&&F.photo&&!z.its_number?"(Current)":"(from API)"]}),(0,er.jsx)("img",{src:ee,alt:"User",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)(_n,{checked:z.is_active,onChange:e=>B(t=>Pe(Pe({},t),{},{is_active:e}))}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Active User (0=Inactive, 1=Active)"})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:ze,disabled:W,children:"Cancel"}),(0,er.jsx)(Fr,{variant:"primary",onClick:async()=>{try{if(V(!0),G(""),!z.role||0===z.role.length)return G("At least one role is required"),void V(!1);if(z.password&&z.password!==z.confirmPassword)throw new Error("Passwords do not match");const t={full_name:z.full_name,username:z.username,email:z.email,phone:z.phone,its_number:z.its_number||void 0,role:z.role,role_jamiat_jamaat:z.roleJamiatJamaat,is_active:z.is_active?1:0,password:z.password||void 0,photo:z.photo||void 0},a=await fetch("/api/users/".concat(F.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const e=await a.json();throw new Error(e.error||"Failed to update user")}g("User updated successfully"),ze(),Me(),Te()}catch(Ki){G(Ki.message)}finally{V(!1)}},loading:W,children:"Update User"})]})]}),(0,er.jsxs)(xn,{isOpen:A,onClose:Be,title:"Create New User",size:"lg",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[K&&(0,er.jsx)(Ur,{severity:"error",children:K}),ie&&(0,er.jsx)(Ur,{severity:"error",children:ie}),(0,er.jsxs)("div",{children:[(0,er.jsx)(Ir,{label:"ITS Number",value:U.its_number,onChange:e=>{const t=e.target.value;H(e=>Pe(Pe({},e),{},{its_number:t})),t.length>=3&&t.length<=8?Ue(t):0===t.length&&(H(e=>Pe(Pe({},e),{},{full_name:"",photo:""})),Z(null),oe(""),ue(!1))},onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const t=U.its_number.trim();t.length>=3?Ue(t):oe("Please enter at least 3 characters of the ITS number")}},placeholder:"Enter 8-digit ITS number",maxLength:8}),(0,er.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Data will be automatically fetched as you type (minimum 3 characters) or press Enter"}),ae&&(0,er.jsxs)("div",{className:"text-sm text-blue-600 flex items-center mt-2",children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),"Fetching data from API..."]})]}),(0,er.jsx)(Ir,{label:"Full Name",value:U.full_name,onChange:e=>H(t=>Pe(Pe({},t),{},{full_name:e.target.value})),required:!0,placeholder:"Enter full name",readOnly:de,className:de?"bg-gray-100":""}),(0,er.jsx)(Ir,{label:"Username",value:U.username,onChange:e=>H(t=>Pe(Pe({},t),{},{username:e.target.value})),required:!0,placeholder:"Enter username"}),(0,er.jsx)(Ir,{label:"Email",type:"email",value:U.email,onChange:e=>H(t=>Pe(Pe({},t),{},{email:e.target.value})),required:!0}),(0,er.jsx)(Ir,{label:"Phone",type:"tel",value:U.phone,onChange:e=>H(t=>Pe(Pe({},t),{},{phone:e.target.value})),placeholder:"+91 9876543210"}),(0,er.jsx)(dn,{label:"Role (required)",options:n.map(e=>({value:e.name,label:Ye(e.name)})),value:U.role,onChange:e=>{H(t=>{const a=Pe({},t.roleJamiatJamaat);return t.role.forEach(t=>{e.includes(t)||delete a[t]}),e.forEach(e=>{e in a||(a[e]={jamiat:[],jamaat:[]})}),Pe(Pe({},t),{},{role:e,roleJamiatJamaat:a})})},placeholder:"Select roles...",required:!0}),U.role.length>0&&(0,er.jsxs)("div",{className:"border-t pt-4 mt-4 space-y-4",children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Jamiat & Jamaat per role"}),U.role.map(e=>{const t=U.roleJamiatJamaat[e]||{jamiat:[],jamaat:[]};return(0,er.jsxs)("div",{className:"rounded-lg border border-gray-200 p-4 bg-gray-50/50 space-y-3",children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-800",children:Ye(e)}),(0,er.jsx)(dn,{label:"Jamiat",options:i.map(e=>({value:e.id,label:e.name})),value:t.jamiat||[],onChange:t=>Ie(e,t),placeholder:"Select Jamiat...",showSelectAll:!0,selectAllLabel:"Select All Jamiat",onSelectAll:()=>(e=>{const t=i.map(e=>e.id),a=U.roleJamiatJamaat[e]||{jamiat:[],jamaat:[]},r=t.length>0&&t.every(e=>(a.jamiat||[]).includes(e));Ie(e,r?[]:t)})(e)}),(0,er.jsx)(dn,{label:"Jamaat",options:De(e).map(e=>({value:e.id,label:e.name})),value:t.jamaat||[],onChange:t=>Re(e,t),placeholder:"Select Jamaat...",showSelectAll:!0,selectAllLabel:"Select All Jamaat",onSelectAll:()=>(e=>{const t=De(e).map(e=>e.id),a=U.roleJamiatJamaat[e]||{jamiat:[],jamaat:[]},r=t.length>0&&t.every(e=>(a.jamaat||[]).includes(e));Re(e,r?[]:t)})(e)})]},e)})]}),(0,er.jsx)("div",{className:"space-y-4",children:(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Password Settings"}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsx)(Ir,{label:"Password",type:"password",value:U.password,onChange:e=>H(t=>Pe(Pe({},t),{},{password:e.target.value})),placeholder:"Leave empty for auto-generated password"}),(0,er.jsx)(Ir,{label:"Confirm Password",type:"password",value:U.confirmPassword,onChange:e=>H(t=>Pe(Pe({},t),{},{confirmPassword:e.target.value})),placeholder:"Confirm password"})]})]})}),X&&(0,er.jsxs)("div",{className:"mt-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo (from API)"}),(0,er.jsx)("img",{src:X,alt:"User",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)(_n,{checked:U.is_active,onChange:e=>H(t=>Pe(Pe({},t),{},{is_active:e}))}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Active User (0=Inactive, 1=Active)"})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:Be,disabled:Q,children:"Cancel"}),(0,er.jsx)(Fr,{variant:"primary",onClick:async()=>{try{if(J(!0),$(""),!U.role||0===U.role.length)return $("At least one role is required"),void J(!1);if(U.password&&U.password!==U.confirmPassword)throw new Error("Passwords do not match");const t={full_name:U.full_name,username:U.username,email:U.email,phone:U.phone,its_number:U.its_number||void 0,role:U.role,role_jamiat_jamaat:U.roleJamiatJamaat,is_active:U.is_active?1:0,password:U.password||void 0,photo:U.photo||void 0},a=await fetch("/api/users",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const e=await a.json();throw new Error(e.error||"Failed to create user")}g("User created successfully"),Be(),Me(),Te()}catch(Ki){$(Ki.message)}finally{J(!1)}},loading:Q,children:"Create User"})]})]}),(0,er.jsxs)(xn,{isOpen:P,onClose:qe,title:"Delete User",size:"sm",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[T&&(0,er.jsx)(Ur,{severity:"error",children:T}),(0,er.jsxs)("p",{className:"text-gray-700",children:["Are you sure you want to delete ",(0,er.jsx)("strong",{children:null===I||void 0===I?void 0:I.full_name}),"? This action cannot be undone."]}),I&&(0,er.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,er.jsx)("strong",{children:"Email:"})," ",I.email]}),(0,er.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,er.jsx)("strong",{children:"Username:"})," @",I.username]})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:qe,disabled:D,children:"Cancel"}),(0,er.jsx)(Fr,{variant:"danger",onClick:async()=>{if(I)try{M(!0),q("");const t=await fetch("/api/users/".concat(I.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to delete user")}g("User deleted successfully"),qe(),Me(),Te()}catch(Ki){q(Ki.message)}finally{M(!1)}},loading:D,disabled:D,children:D?"Deleting...":"Delete User"})]})]})]})},pd=()=>{var e,t,a;const{user:n}=ar(),s=(0,Ce.useQueryClient)(),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)({name:"",description:"",permissions:{},counselingFormStages:{}}),{data:m,isLoading:h}=(0,Ce.useQuery)("roles",()=>Za.get("/api/roles").then(e=>e.data),{enabled:"super_admin"===(null===n||void 0===n?void 0:n.role),retry:!1}),p=m,{data:f,isLoading:x}=(0,Ce.useQuery)("users",()=>Za.get("/api/users").then(e=>e.data),{enabled:"super_admin"===(null===n||void 0===n?void 0:n.role),retry:!1}),g=f,{data:y}=(0,Ce.useQuery)("available-permissions",()=>Za.get("/api/roles/permissions/available").then(e=>e.data),{enabled:"super_admin"===(null===n||void 0===n?void 0:n.role),retry:!1}),v=y,b=(0,Ce.useMutation)(e=>{const t=[];e.permissions&&Object.entries(e.permissions).forEach(e=>{let[a,r]=e;Array.isArray(r)&&r.forEach(e=>{t.push({permission:"".concat(a,".").concat(e),resource:a,action:e})})});const a=[];if(e.counselingFormStages&&null!==v&&void 0!==v&&v.permissions){const t=v.permissions.find(e=>"counseling_forms"===e.resource);t&&t.stages&&t.stages.forEach(t=>{const r=e.counselingFormStages[t.key]||{};a.push({stage_key:t.key,stage_name:t.name,can_read:r.can_read||!1,can_update:r.can_update||!1})})}return Za.post("/api/roles",{name:e.name,display_name:e.name,description:e.description,permissions:t,counseling_form_stages:a})},{onSuccess:()=>{s.invalidateQueries("roles"),o(!1),u({name:"",description:"",permissions:{},counselingFormStages:{}})},onError:e=>{var t,a;console.error("Error creating role:",e),alert("Error creating role: "+((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||e.message))}}),_=(0,Ce.useMutation)(e=>{let{roleId:t,roleData:a}=e;const r=[];a.permissions&&Object.entries(a.permissions).forEach(e=>{let[t,a]=e;Array.isArray(a)&&a.forEach(e=>{r.push({permission:"".concat(t,".").concat(e),resource:t,action:e})})});const n=[];if(a.counselingFormStages&&null!==v&&void 0!==v&&v.permissions){const e=v.permissions.find(e=>"counseling_forms"===e.resource);e&&e.stages&&e.stages.forEach(e=>{const t=a.counselingFormStages[e.key]||{};n.push({stage_key:e.key,stage_name:e.name,can_read:t.can_read||!1,can_update:t.can_update||!1})})}return Za.put("/api/roles/".concat(t),{name:a.name,display_name:a.name,description:a.description,permissions:r,counseling_form_stages:n})},{onSuccess:()=>{s.invalidateQueries("roles"),c(null),u({name:"",description:"",permissions:{},counselingFormStages:{}})},onError:e=>{var t,a;console.error("Error updating role:",e),alert("Error updating role: "+((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||e.message))}}),j=(0,Ce.useMutation)(e=>Za.delete("/api/roles/".concat(e)),{onSuccess:()=>{s.invalidateQueries("roles")},onError:e=>{var t,a;console.error("Error deleting role:",e),alert("Error deleting role: "+((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||e.message))}}),w=(0,Ce.useMutation)(e=>{let{userId:t,roleId:a}=e;return Za.post("/api/roles/".concat(a,"/assign"),{user_id:t})},{onSuccess:()=>{s.invalidateQueries("users")},onError:e=>{var t,a;console.error("Error assigning role:",e),alert("Error assigning role: "+((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||e.message))}}),N=()=>{c(null),u({name:"",description:"",permissions:{},counselingFormStages:{}})},k=()=>{_.mutate({roleId:l,roleData:d})},S=(e,t,a)=>{u(r=>{const n=r.permissions||{},s=n[e]||[];let i;i=a?s.includes(t)?s:[...s,t]:s.filter(e=>e!==t);const o=Pe(Pe({},n),{},{[e]:i});return Pe(Pe({},r),{},{permissions:o})})},C=(e,t,a)=>{u(r=>{const n=r.counselingFormStages||{},s=n[e]||{can_read:!1,can_update:!1};return Pe(Pe({},r),{},{counselingFormStages:Pe(Pe({},n),{},{[e]:Pe(Pe({},s),{},{[t]:a})})})})},A=e=>{if(!e)return"No permissions";try{if("string"===typeof e&&(e=JSON.parse(e)),Array.isArray(e))return e.map(e=>"".concat(e.resource,":").concat(e.action)).join(", ");if("object"===typeof e){const t=Object.entries(e).flatMap(e=>{let[t,a]=e;return Array.isArray(a)?a.map(e=>"".concat(t,":").concat(e)):[]});return t.length>0?t.join(", "):"No permissions"}return"No permissions"}catch(t){return console.error("Error formatting permissions:",t),"Error loading permissions"}};return"super_admin"!==(null===n||void 0===n?void 0:n.role)?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)(Ur,{severity:"error",children:"Access denied. Only super administrators can access role management."})}):(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Role Management"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage user roles and permissions"})]}),(0,er.jsxs)(Fr,{onClick:()=>{u({name:"",description:"",permissions:{},counselingFormStages:{}}),o(!0)},className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,er.jsx)("span",{children:"Create Role"})]})]})}),(0,er.jsxs)(Nn,{defaultTab:0,children:[(0,er.jsx)(Nn.Tab,{label:"Roles",children:(0,er.jsx)(zr,{children:(0,er.jsx)("div",{className:"p-6",children:h?(0,er.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,er.jsxs)(rn,{children:[(0,er.jsx)(rn.Head,{children:(0,er.jsxs)(rn.Row,{children:[(0,er.jsx)(rn.Header,{children:"Role Name"}),(0,er.jsx)(rn.Header,{children:"Description"}),(0,er.jsx)(rn.Header,{children:"Users"}),(0,er.jsx)(rn.Header,{children:"Permissions"}),(0,er.jsx)(rn.Header,{children:"Status"}),(0,er.jsx)(rn.Header,{align:"center",children:"Actions"})]})}),(0,er.jsx)(rn.Body,{children:null===p||void 0===p||null===(e=p.roles)||void 0===e?void 0:e.map(e=>{var t;return(0,er.jsxs)(r.Fragment,{children:[(0,er.jsxs)(rn.Row,{hover:!0,children:[(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"font-medium text-gray-900",children:l===e.id?(0,er.jsx)(Ir,{value:d.name,onChange:e=>u(t=>Pe(Pe({},t),{},{name:e.target.value})),placeholder:"Role name",className:"w-full",disabled:"super_admin"===e.name}):e.name})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"text-sm text-gray-900",children:l===e.id?(0,er.jsx)("textarea",{value:d.description,onChange:e=>u(t=>Pe(Pe({},t),{},{description:e.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent text-sm",placeholder:"Role description",disabled:"super_admin"===e.name}):e.description||"No description"})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsxs)(vn,{variant:"info",children:[e.user_count||0," users"]})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"text-sm text-gray-600 max-w-xs truncate",children:A(e.permissions)})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(vn,{variant:e.is_active?"success":"error",children:e.is_active?"Active":"Inactive"})}),(0,er.jsx)(rn.Cell,{align:"center",children:(0,er.jsx)("div",{className:"flex items-center justify-center space-x-2",children:l===e.id?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)(Fr,{variant:"primary",size:"sm",onClick:k,loading:_.isLoading,className:"flex items-center space-x-1",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,er.jsx)("span",{children:"Save"})]}),(0,er.jsxs)(Fr,{variant:"secondary",size:"sm",onClick:N,className:"flex items-center space-x-1",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,er.jsx)("span",{children:"Cancel"})]})]}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{c(e.id);let t={},a={};if(e.permissions)if("string"===typeof e.permissions)try{const a=JSON.parse(e.permissions);Array.isArray(a)?a.forEach(e=>{t[e.resource]||(t[e.resource]=[]),t[e.resource].push(e.action)}):t=a}catch(zh){t={}}else"object"===typeof e.permissions&&(t=e.permissions,e.permissions.counseling_forms_stages&&Array.isArray(e.permissions.counseling_forms_stages)&&e.permissions.counseling_forms_stages.forEach(e=>{a[e.stage_key]={can_read:e.can_read||!1,can_update:e.can_update||!1}}));u({name:e.name,description:e.description,permissions:t,counselingFormStages:a})})(e),className:"flex items-center space-x-1",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),(0,er.jsx)("span",{children:"Edit"})]}),"super_admin"!==e.name&&(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this role?")&&j.mutate(t));var t},className:"flex items-center space-x-1 text-red-600 hover:text-red-700",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,er.jsx)("span",{children:"Delete"})]})]})})})]}),l===e.id&&(0,er.jsx)(rn.Row,{children:(0,er.jsx)(rn.Cell,{colSpan:6,className:"bg-gray-50",children:(0,er.jsxs)("div",{className:"p-4",children:[(0,er.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Permissions"}),(0,er.jsx)("div",{className:"space-y-4",children:null===v||void 0===v||null===(t=v.permissions)||void 0===t?void 0:t.map(t=>(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,er.jsx)("h5",{className:"font-medium text-gray-900 mb-2 capitalize",children:t.resource.replace("_"," ")}),(0,er.jsx)("div",{className:"grid grid-cols-2 gap-2",children:t.actions.map(a=>{const r=d.permissions[t.resource],n=(null===r||void 0===r?void 0:r.includes(a))||!1,s="super_admin"===e.name;return(0,er.jsx)(_n,{label:a,checked:s||n,onChange:e=>S(t.resource,a,e),disabled:s,className:s?"opacity-50":""},a)})}),"counseling_forms"===t.resource&&t.stages&&t.stages.length>0&&(0,er.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,er.jsx)("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"Stage Permissions"}),(0,er.jsx)("div",{className:"space-y-3",children:t.stages.map(t=>{var a;const r=(null===(a=d.counselingFormStages)||void 0===a?void 0:a[t.key])||{can_read:!1,can_update:!1},n="super_admin"===e.name;return(0,er.jsxs)("div",{className:"pl-4 border-l-2 border-gray-100",children:[(0,er.jsx)("div",{className:"font-medium text-sm text-gray-800 mb-2",children:t.name||t.key}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,er.jsx)(_n,{label:"Read",checked:n||r.can_read,onChange:e=>C(t.key,"can_read",e),disabled:n,className:n?"opacity-50":""}),(0,er.jsx)(_n,{label:"Update",checked:n||r.can_update,onChange:e=>C(t.key,"can_update",e),disabled:n,className:n?"opacity-50":""})]})]},t.key)})})]})]},t.resource))})]})})})]},e.id)})})]})})})}),(0,er.jsx)(Nn.Tab,{label:"User Roles",children:(0,er.jsx)(zr,{children:(0,er.jsx)("div",{className:"p-6",children:x?(0,er.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,er.jsxs)(rn,{children:[(0,er.jsx)(rn.Head,{children:(0,er.jsxs)(rn.Row,{children:[(0,er.jsx)(rn.Header,{children:"User"}),(0,er.jsx)(rn.Header,{children:"Email"}),(0,er.jsx)(rn.Header,{children:"Current Role"}),(0,er.jsx)(rn.Header,{children:"Assign Role"}),(0,er.jsx)(rn.Header,{children:"Status"})]})}),(0,er.jsx)(rn.Body,{children:null===g||void 0===g||null===(t=g.users)||void 0===t?void 0:t.map(e=>{var t,a;return(0,er.jsxs)(rn.Row,{hover:!0,children:[(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"font-medium text-gray-900",children:e.full_name})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"text-sm text-gray-900",children:e.email})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(vn,{variant:(a=e.role,{super_admin:"error",admin:"error",dcm:"primary",counselor:"info",welfare_reviewer:"warning",executive:"success",finance:"secondary"}[a]||"default"),children:e.role})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(ln,{value:e.role,onChange:t=>{if(t.target.value!==e.role){var a;const r=null===m||void 0===m||null===(a=m.roles)||void 0===a?void 0:a.find(e=>e.name===t.target.value);r&&w.mutate({userId:e.id,roleId:r.id})}},className:"w-40",children:null===p||void 0===p||null===(t=p.roles)||void 0===t?void 0:t.map(e=>(0,er.jsx)(ln.Option,{value:e.name,children:e.name},e.id))})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(vn,{variant:0===e.is_active?"success":"error",children:0===e.is_active?"Active":"Inactive"})})]},e.id)})})]})})})})]}),(0,er.jsxs)(xn,{isOpen:i,onClose:()=>o(!1),title:"Create New Role",size:"lg",children:[(0,er.jsxs)("div",{className:"space-y-6",children:[(0,er.jsx)(Ir,{label:"Role Name",value:d.name,onChange:e=>u(t=>Pe(Pe({},t),{},{name:e.target.value})),placeholder:"Enter role name",required:!0}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)("textarea",{value:d.description,onChange:e=>u(t=>Pe(Pe({},t),{},{description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter role description"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Permissions"}),(0,er.jsx)("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:null===v||void 0===v||null===(a=v.permissions)||void 0===a?void 0:a.map(e=>(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,er.jsx)("h4",{className:"font-medium text-gray-900 mb-2 capitalize",children:e.resource.replace("_"," ")}),(0,er.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.actions.map(t=>{var a;return(0,er.jsx)(_n,{label:t,checked:(null===(a=d.permissions[e.resource])||void 0===a?void 0:a.includes(t))||!1,onChange:a=>S(e.resource,t,a)},t)})}),"counseling_forms"===e.resource&&e.stages&&e.stages.length>0&&(0,er.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[(0,er.jsx)("h6",{className:"text-sm font-medium text-gray-700 mb-3",children:"Stage Permissions"}),(0,er.jsx)("div",{className:"space-y-3",children:e.stages.map(e=>{var t;const a=(null===(t=d.counselingFormStages)||void 0===t?void 0:t[e.key])||{can_read:!1,can_update:!1};return(0,er.jsxs)("div",{className:"pl-4 border-l-2 border-gray-100",children:[(0,er.jsx)("div",{className:"font-medium text-sm text-gray-800 mb-2",children:e.name||e.key}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,er.jsx)(_n,{label:"Read",checked:a.can_read,onChange:t=>C(e.key,"can_read",t)}),(0,er.jsx)(_n,{label:"Update",checked:a.can_update,onChange:t=>C(e.key,"can_update",t)})]})]},e.key)})})]})]},e.resource))})]})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>o(!1),children:"Cancel"}),(0,er.jsx)(Fr,{onClick:()=>{b.mutate(d)},loading:b.isLoading,disabled:!d.name||b.isLoading,children:"Create Role"})]})})]})]})},fd=()=>{const{token:e}=ar(),[t,a]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(null),[p,f]=(0,r.useState)("asc"),[x,g]=(0,r.useState)(null),[y,v]=(0,r.useState)("asc"),[b,_]=(0,r.useState)(1),[j,w]=(0,r.useState)(10),[N,k]=(0,r.useState)(1),[S,C]=(0,r.useState)(10),[A,L]=(0,r.useState)(!1),[P,E]=(0,r.useState)(!1),[F,O]=(0,r.useState)(null),[I,R]=(0,r.useState)(null),[D,M]=(0,r.useState)({name:"",jamiat_id:"",is_active:!0}),[T,q]=(0,r.useState)({jamiat_id:"",name:"",jamaat_id:"",is_active:!0}),[z,B]=(0,r.useState)(!1),[U,H]=(0,r.useState)(!1),[W,V]=(0,r.useState)(""),[Q,J]=(0,r.useState)(""),[Y,G]=(0,r.useState)(!1),[K,$]=(0,r.useState)(!1),[X,Z]=(0,r.useState)(""),[ee,te]=(0,r.useState)(""),[ae,re]=(0,r.useState)(null),[ne,se]=(0,r.useState)(!1),[ie,oe]=(0,r.useState)(""),[le,ce]=(0,r.useState)(""),de=async()=>{try{if(o(!0),c(""),!e)throw new Error("Authentication token is missing. Please log in again.");const t=await fetch("/api/jamiat",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){const e=await t.json().catch(()=>({}));throw new Error(e.error||"Failed to fetch jamiat: ".concat(t.status," ").concat(t.statusText))}const r=await t.json();a(r.jamiat||[]),c("")}catch(Ki){"TypeError"===Ki.name&&"Failed to fetch"===Ki.message?c("Unable to connect to the server. Please ensure the backend server is running on port 5000."):c(Ki.message||"An error occurred while fetching jamiat data"),console.error("Error fetching jamiat:",Ki)}finally{o(!1)}},ue=async()=>{try{const t=await fetch("/api/jamaat",{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("Failed to fetch jamaat");const a=await t.json();s(a.jamaat||[])}catch(Ki){console.error("Error fetching jamaat:",Ki)}},me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;O(e),M(e?{name:e.name||"",jamiat_id:e.jamiat_id||"",is_active:e.is_active}:{name:"",jamiat_id:"",is_active:!0}),V(""),L(!0)},he=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;R(e),q(e?{jamiat_id:e.jamiat_id||"",name:e.name||"",jamaat_id:e.jamaat_id||"",is_active:e.is_active}:{jamiat_id:"",name:"",jamaat_id:"",is_active:!0}),J(""),E(!0)},pe=e=>{const a=t.find(t=>t.id===e);return a?a.name:"Unknown"},fe=e=>n.filter(t=>t.jamiat_id===e),xe=e=>{m===e?f("asc"===p?"desc":"asc"):(h(e),f("asc"))},ge=e=>{x===e?v("asc"===y?"desc":"asc"):(g(e),v("asc"))},ye=()=>{let e=t;return m&&(e=[...t].sort((e,t)=>{var a,r,n,s;let i,o;switch(m){case"name":i=(null===(a=e.name)||void 0===a?void 0:a.toLowerCase())||"",o=(null===(r=t.name)||void 0===r?void 0:r.toLowerCase())||"";break;case"jamiat_id":i=(null===(n=e.jamiat_id)||void 0===n?void 0:n.toLowerCase())||"",o=(null===(s=t.jamiat_id)||void 0===s?void 0:s.toLowerCase())||"";break;case"status":i=e.is_active?1:0,o=t.is_active?1:0;break;case"jamaats_count":i=fe(e.id).length,o=fe(t.id).length;break;case"created_at":i=new Date(e.created_at),o=new Date(t.created_at);break;default:return 0}return i<o?"asc"===p?-1:1:i>o?"asc"===p?1:-1:0})),e},ve=()=>{let e=n;return x&&(e=[...n].sort((e,t)=>{var a,r,n,s,i,o;let l,c;switch(x){case"name":l=(null===(a=e.name)||void 0===a?void 0:a.toLowerCase())||"",c=(null===(r=t.name)||void 0===r?void 0:r.toLowerCase())||"";break;case"jamaat_id":l=(null===(n=e.jamaat_id)||void 0===n?void 0:n.toLowerCase())||"",c=(null===(s=t.jamaat_id)||void 0===s?void 0:s.toLowerCase())||"";break;case"jamiat":l=(null===(i=pe(e.jamiat_id))||void 0===i?void 0:i.toLowerCase())||"",c=(null===(o=pe(t.jamiat_id))||void 0===o?void 0:o.toLowerCase())||"";break;case"status":l=e.is_active?1:0,c=t.is_active?1:0;break;case"created_at":l=new Date(e.created_at),c=new Date(t.created_at);break;default:return 0}return l<c?"asc"===y?-1:1:l>c?"asc"===y?1:-1:0})),e};return(0,r.useEffect)(()=>{de(),ue()},[]),(0,r.useEffect)(()=>{if(d||l){const e=setTimeout(()=>{u(""),c("")},5e3);return()=>clearTimeout(e)}},[d,l]),(0,r.useEffect)(()=>{const e=ye(),t=Math.ceil(e.length/j);b>t&&t>0&&_(1)},[t.length,j]),(0,r.useEffect)(()=>{const e=ve(),t=Math.ceil(e.length/S);N>t&&t>0&&k(1)},[n.length,S]),(0,er.jsxs)("div",{className:"p-6 space-y-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Jamiat Master"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage Jamiat and Jamaat organizations"})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsxs)(Fr,{variant:"outline",onClick:async()=>{try{const t=await fetch("/api/jamiat/template/download",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){const e=await t.text();throw console.error("Template download error:",e),new Error("Failed to download template: ".concat(t.status," ").concat(t.statusText))}const a=await t.blob(),r=window.URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="jamiat_jamaat_template.xlsx",document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n),u("Template downloaded successfully")}catch(Ki){console.error("Template download error:",Ki),c(Ki.message)}},className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,er.jsx)("span",{children:"Download Template"})]}),(0,er.jsxs)(Fr,{variant:"outline",onClick:()=>G(!0),className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"})}),(0,er.jsx)("span",{children:"Import Excel"})]}),(0,er.jsxs)(Fr,{variant:"primary",onClick:async()=>{try{const t=await fetch("/api/jamiat/export/excel",{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){const e=await t.text();throw console.error("Export error:",e),new Error("Failed to export data: ".concat(t.status," ").concat(t.statusText))}const a=await t.blob(),r=window.URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="jamiat_jamaat_export.xlsx",document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n),u("Data exported successfully")}catch(Ki){console.error("Export error:",Ki),c(Ki.message)}},className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3M7 7h10a2 2 0 012 2v10a2 2 0 01-2 2H7a2 2 0 01-2-2V9a2 2 0 012-2z"})}),(0,er.jsx)("span",{children:"Export Excel"})]}),(0,er.jsxs)(Fr,{variant:"primary",onClick:async()=>{try{se(!0),oe(""),ce("");const a=await fetch("http://13.127.158.101:3000/test/jamiat-jamaat");if(!a.ok)throw new Error("Failed to fetch data from API: ".concat(a.status," ").concat(a.statusText));const r=await a.json();if(!r.list||!Array.isArray(r.list))throw new Error("Invalid API response format");let n=0,s=0,i=0,o=0,l=[];const c=new Map;r.list.forEach(e=>{const t=e.Jamiaat_ID,a=e.Jamiaat;t&&a&&!c.has(t)&&c.set(t,{jamiat_id:String(t),name:a,is_active:!0})});for(const[f,x]of c)try{const a=t.find(e=>e.jamiat_id===x.jamiat_id);if(a){if(a.name!==x.name){const t=await fetch("/api/jamiat/".concat(a.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({name:x.name,jamiat_id:x.jamiat_id,is_active:x.is_active})});if(t.ok)s++;else{const e=await t.json();l.push("Failed to update jamiat ".concat(x.name,": ").concat(e.error||"Unknown error"))}}}else{const t=await fetch("/api/jamiat",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(x)});if(t.ok)n++;else{const e=await t.json();l.push("Failed to create jamiat ".concat(x.name,": ").concat(e.error||"Unknown error"))}}}catch(Ki){l.push("Error processing jamiat ".concat(x.name,": ").concat(Ki.message))}await de();const d=await fetch("/api/jamiat",{headers:{Authorization:"Bearer ".concat(e)}}),u=(await d.json()).jamiat||[],m=await fetch("/api/jamaat",{headers:{Authorization:"Bearer ".concat(e)}}),h=(await m.json()).jamaat||[];for(const t of r.list)try{const a=t.Jamiaat_ID,r=t.Jamaat_ID,n=t.Jamaat;if(!a||!r||!n)continue;const s=u.find(e=>e.jamiat_id===String(a));if(!s){l.push("Jamiat with ID ".concat(a," not found for jamaat ").concat(n));continue}const c=h.find(e=>e.jamaat_id===String(r)&&e.jamiat_id===s.id);if(c){if(c.name!==n){const t=await fetch("/api/jamaat/".concat(c.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({jamiat_id:s.id,jamaat_id:String(r),name:n,is_active:!0})});if(t.ok)o++;else{const e=await t.json();l.push("Failed to update jamaat ".concat(n,": ").concat(e.error||"Unknown error"))}}}else{const t=await fetch("/api/jamaat",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({jamiat_id:s.id,jamaat_id:String(r),name:n,is_active:!0})});if(t.ok)i++;else{const e=await t.json();l.push("Failed to create jamaat ".concat(n,": ").concat(e.error||"Unknown error"))}}}catch(Ki){l.push("Error processing jamaat ".concat(t.Jamaat||"unknown",": ").concat(Ki.message))}await de(),await ue();const p=[];n>0&&p.push("".concat(n," jamiat(s) created")),s>0&&p.push("".concat(s," jamiat(s) updated")),i>0&&p.push("".concat(i," jamaat(s) created")),o>0&&p.push("".concat(o," jamaat(s) updated")),p.length>0?ce("Update completed! ".concat(p.join(", "),".")):ce("No changes detected. All data is up to date."),l.length>0&&(console.error("Update errors:",l),oe("Some errors occurred: ".concat(l.slice(0,5).join("; ")).concat(l.length>5?"...":"")))}catch(Ki){console.error("Update from API error:",Ki),oe(Ki.message||"Failed to update data from API")}finally{se(!1)}},loading:ne,className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,er.jsx)("span",{children:"Update"})]})]})]})}),l&&(0,er.jsx)(Ur,{severity:"error",onClose:()=>c(""),children:l}),d&&(0,er.jsx)(Ur,{severity:"success",onClose:()=>u(""),children:d}),ie&&(0,er.jsx)(Ur,{severity:"error",onClose:()=>oe(""),children:ie}),le&&(0,er.jsx)(Ur,{severity:"success",onClose:()=>ce(""),children:le}),(0,er.jsx)(zr,{children:(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Jamiat Organizations"}),(0,er.jsxs)(Fr,{variant:"primary",onClick:()=>me(),className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,er.jsx)("span",{children:"Add Jamiat"})]})]}),i?(0,er.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"}),(0,er.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading jamiat..."})]}):(0,er.jsxs)(rn,{children:[(0,er.jsx)(rn.Head,{children:(0,er.jsxs)(rn.Row,{children:[(0,er.jsx)(rn.Header,{sortable:!0,sortDirection:"name"===m?p:null,onSort:()=>xe("name"),children:"Name"}),(0,er.jsx)(rn.Header,{sortable:!0,sortDirection:"jamiat_id"===m?p:null,onSort:()=>xe("jamiat_id"),children:"Jamiat ID"}),(0,er.jsx)(rn.Header,{sortable:!0,sortDirection:"status"===m?p:null,onSort:()=>xe("status"),children:"Status"}),(0,er.jsx)(rn.Header,{sortable:!0,sortDirection:"jamaats_count"===m?p:null,onSort:()=>xe("jamaats_count"),children:"Jamaats"}),(0,er.jsx)(rn.Header,{sortable:!0,sortDirection:"created_at"===m?p:null,onSort:()=>xe("created_at"),children:"Created"}),(0,er.jsx)(rn.Header,{align:"center",children:"Actions"})]})}),(0,er.jsx)(rn.Body,{children:(()=>{const e=ye(),t=(b-1)*j,a=t+j;return e.slice(t,a)})().map(t=>(0,er.jsxs)(rn.Row,{hover:!0,children:[(0,er.jsx)(rn.Cell,{children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name}),t.description&&(0,er.jsx)("div",{className:"text-sm text-gray-500",children:t.description})]})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(vn,{variant:"secondary",children:t.jamiat_id})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(vn,{variant:t.is_active?"primary":"secondary",children:t.is_active?"Active":"Inactive"})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsxs)("span",{className:"text-sm text-gray-600",children:[fe(t.id).length," jamaat(s)"]})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"text-sm text-gray-900",children:new Date(t.created_at).toLocaleDateString()})}),(0,er.jsx)(rn.Cell,{align:"center",children:(0,er.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>me(t),children:"Edit"}),(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this jamiat? This will also delete all associated jamaats."))try{const a=await fetch("/api/jamiat/".concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok){const e=await a.json();throw new Error(e.error||"Failed to delete jamiat")}u("Jamiat deleted successfully"),de(),ue()}catch(Ki){c(Ki.message)}})(t.id),className:"text-red-600 hover:text-red-700",children:"Delete"})]})})]},t.id))})]}),!i&&ye().length>0&&(0,er.jsx)("div",{className:"mt-4",children:(0,er.jsx)(gn,{currentPage:b,totalPages:Math.ceil(ye().length/j),onPageChange:_,rowsPerPage:j,onRowsPerPageChange:e=>{w(e),_(1)},totalItems:ye().length})})]})}),(0,er.jsx)(zr,{children:(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Jamaat Organizations"}),(0,er.jsxs)(Fr,{variant:"primary",onClick:()=>he(),className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,er.jsx)("span",{children:"Add Jamaat"})]})]}),(0,er.jsxs)(rn,{children:[(0,er.jsx)(rn.Head,{children:(0,er.jsxs)(rn.Row,{children:[(0,er.jsx)(rn.Header,{sortable:!0,sortDirection:"name"===x?y:null,onSort:()=>ge("name"),children:"Jamaat Name"}),(0,er.jsx)(rn.Header,{sortable:!0,sortDirection:"jamaat_id"===x?y:null,onSort:()=>ge("jamaat_id"),children:"Jamaat ID"}),(0,er.jsx)(rn.Header,{sortable:!0,sortDirection:"jamiat"===x?y:null,onSort:()=>ge("jamiat"),children:"Jamiat"}),(0,er.jsx)(rn.Header,{sortable:!0,sortDirection:"status"===x?y:null,onSort:()=>ge("status"),children:"Status"}),(0,er.jsx)(rn.Header,{sortable:!0,sortDirection:"created_at"===x?y:null,onSort:()=>ge("created_at"),children:"Created"}),(0,er.jsx)(rn.Header,{align:"center",children:"Actions"})]})}),(0,er.jsx)(rn.Body,{children:(()=>{const e=ve(),t=(N-1)*S,a=t+S;return e.slice(t,a)})().map(t=>(0,er.jsxs)(rn.Row,{hover:!0,children:[(0,er.jsx)(rn.Cell,{children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name}),t.description&&(0,er.jsx)("div",{className:"text-sm text-gray-500",children:t.description})]})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(vn,{variant:"secondary",children:t.jamaat_id})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"text-sm text-gray-600",children:pe(t.jamiat_id)})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(vn,{variant:t.is_active?"primary":"secondary",children:t.is_active?"Active":"Inactive"})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"text-sm text-gray-900",children:new Date(t.created_at).toLocaleDateString()})}),(0,er.jsx)(rn.Cell,{align:"center",children:(0,er.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>he(t),children:"Edit"}),(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this jamaat?"))try{const a=await fetch("/api/jamaat/".concat(t),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}});if(!a.ok){const e=await a.json();throw new Error(e.error||"Failed to delete jamaat")}u("Jamaat deleted successfully"),ue()}catch(Ki){c(Ki.message)}})(t.id),className:"text-red-600 hover:text-red-700",children:"Delete"})]})})]},t.id))})]}),ve().length>0&&(0,er.jsx)("div",{className:"mt-4",children:(0,er.jsx)(gn,{currentPage:N,totalPages:Math.ceil(ve().length/S),onPageChange:k,rowsPerPage:S,onRowsPerPageChange:e=>{C(e),k(1)},totalItems:ve().length})})]})}),(0,er.jsxs)(xn,{isOpen:A,onClose:()=>L(!1),title:F?"Edit Jamiat":"Create New Jamiat",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[W&&(0,er.jsx)(Ur,{severity:"error",children:W}),(0,er.jsx)(Ir,{label:"Jamiat Name",value:D.name,onChange:e=>M(t=>Pe(Pe({},t),{},{name:e.target.value})),required:!0,placeholder:"Enter jamiat name"}),(0,er.jsx)(Ir,{label:"Jamiat ID",value:D.jamiat_id,onChange:e=>M(t=>Pe(Pe({},t),{},{jamiat_id:e.target.value.toUpperCase()})),required:!0,placeholder:"Enter unique Jamiat ID"}),(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)(_n,{checked:D.is_active,onChange:e=>M(t=>Pe(Pe({},t),{},{is_active:e}))}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Active"})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:()=>L(!1),disabled:z,children:"Cancel"}),(0,er.jsx)(Fr,{variant:"primary",onClick:F?async()=>{try{B(!0),V("");const t=await fetch("/api/jamiat/".concat(F.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(D)});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to update jamiat")}u("Jamiat updated successfully"),L(!1),de()}catch(Ki){V(Ki.message)}finally{B(!1)}}:async()=>{try{B(!0),V("");const t=await fetch("/api/jamiat",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(D)});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to create jamiat")}u("Jamiat created successfully"),L(!1),de()}catch(Ki){V(Ki.message)}finally{B(!1)}},loading:z,children:F?"Update Jamiat":"Create Jamiat"})]})]}),(0,er.jsxs)(xn,{isOpen:P,onClose:()=>E(!1),title:I?"Edit Jamaat":"Create New Jamaat",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[Q&&(0,er.jsx)(Ur,{severity:"error",children:Q}),(0,er.jsxs)(ln,{label:"Jamiat",value:T.jamiat_id,onChange:e=>q(t=>Pe(Pe({},t),{},{jamiat_id:e.target.value})),required:!0,children:[(0,er.jsx)(ln.Option,{value:"",children:"Select Jamiat"}),t.map(e=>(0,er.jsx)(ln.Option,{value:e.id,children:e.name},e.id))]}),(0,er.jsx)(Ir,{label:"Jamaat Name",value:T.name,onChange:e=>q(t=>Pe(Pe({},t),{},{name:e.target.value})),required:!0,placeholder:"Enter jamaat name"}),(0,er.jsx)(Ir,{label:"Jamaat ID",value:T.jamaat_id,onChange:e=>q(t=>Pe(Pe({},t),{},{jamaat_id:e.target.value.toUpperCase()})),required:!0,placeholder:"Enter unique Jamaat ID"}),(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)(_n,{checked:T.is_active,onChange:e=>q(t=>Pe(Pe({},t),{},{is_active:e}))}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Active"})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:()=>E(!1),disabled:U,children:"Cancel"}),(0,er.jsx)(Fr,{variant:"primary",onClick:I?async()=>{try{H(!0),J("");const t=await fetch("/api/jamaat/".concat(I.id),{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(T)});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to update jamaat")}u("Jamaat updated successfully"),E(!1),ue()}catch(Ki){J(Ki.message)}finally{H(!1)}}:async()=>{try{H(!0),J("");const t=await fetch("/api/jamaat",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(T)});if(!t.ok){const e=await t.json();throw new Error(e.error||"Failed to create jamaat")}u("Jamaat created successfully"),E(!1),ue()}catch(Ki){J(Ki.message)}finally{H(!1)}},loading:U,children:I?"Update Jamaat":"Create Jamaat"})]})]}),(0,er.jsxs)(xn,{isOpen:Y,onClose:()=>G(!1),title:"Import Jamiat and Jamaat Data",size:"md",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[X&&(0,er.jsx)(Ur,{severity:"error",children:X}),ee&&(0,er.jsx)(Ur,{severity:"success",children:ee}),(0,er.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"Import Instructions:"}),(0,er.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,er.jsx)("li",{children:"\u2022 Download the template first to see the required format"}),(0,er.jsx)("li",{children:"\u2022 Fill in your data following the template structure"}),(0,er.jsx)("li",{children:"\u2022 Upload the completed Excel file"}),(0,er.jsx)("li",{children:"\u2022 Duplicate entries will be skipped automatically"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Excel File"}),(0,er.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:e=>{const t=e.target.files[0];t&&("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"===t.type||"application/vnd.ms-excel"===t.type?(re(t),Z("")):(Z("Please select a valid Excel file (.xlsx or .xls)"),re(null)))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"}),ae&&(0,er.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",ae.name]})]}),(0,er.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,er.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,er.jsx)("strong",{children:"Note:"})," The import process will create new jamiat and jamaat entries. Existing entries with the same codes will be skipped."]})})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:()=>{G(!1),re(null),Z(""),te("")},disabled:K,children:"Cancel"}),(0,er.jsx)(Fr,{variant:"primary",onClick:async()=>{if(ae)try{$(!0),Z(""),te("");const t=new FormData;t.append("file",ae);const a=await fetch("/api/jamiat/import",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:t});if(!a.ok){const e=await a.json();throw new Error(e.error||"Failed to import data")}const r=await a.json();te("Import completed successfully! ".concat(r.importedJamiat," jamiat and ").concat(r.importedJamaat," jamaat imported.")),G(!1),re(null),de(),ue()}catch(Ki){Z(Ki.message)}finally{$(!1)}else Z("Please select a file to import")},loading:K,disabled:!ae,children:"Import Data"})]})]})]})},xd=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),gd=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),yd=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),vd=()=>{var e,t;const{user:a}=ar(),n=(0,Ce.useQueryClient)(),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),{register:h,handleSubmit:p,formState:{errors:f},reset:x,setValue:g}=xi(),{data:y,isLoading:v,error:b}=(0,Ce.useQuery)("caseTypes",()=>Za.get("/api/case-types").then(e=>e.data),{select:e=>e.caseTypes||[]}),_=(0,Ce.useMutation)(e=>Za.post("/api/case-types",e),{onSuccess:()=>{n.invalidateQueries("caseTypes"),m("Case type created successfully!"),d(""),i(!1),x()},onError:e=>{var t,a;d((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to create case type"),m("")}}),j=(0,Ce.useMutation)(e=>{let{id:t,data:a}=e;return Za.put("/api/case-types/".concat(t),a)},{onSuccess:()=>{n.invalidateQueries("caseTypes"),m("Case type updated successfully!"),d(""),i(!1),l(null),x()},onError:e=>{var t,a;d((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to update case type"),m("")}}),w=(0,Ce.useMutation)(e=>Za.delete("/api/case-types/".concat(e)),{onSuccess:()=>{n.invalidateQueries("caseTypes"),m("Case type deleted successfully!"),d("")},onError:e=>{var t,a;d((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to delete case type"),m("")}}),N=()=>{i(!1),l(null),d(""),m(""),x()};return b?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)(Ur,{severity:"error",children:["Error loading case types: ",b.message]})}):(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Case Types"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage case types for the system"})]}),("admin"===(null===a||void 0===a?void 0:a.role)||"super_admin"===(null===a||void 0===a?void 0:a.role))&&(0,er.jsxs)(Fr,{onClick:()=>i(!0),className:"flex items-center space-x-2",children:[(0,er.jsx)(xd,{}),(0,er.jsx)("span",{children:"Add Case Type"})]})]})}),u&&(0,er.jsx)(Ur,{severity:"success",className:"mb-4",children:u}),c&&(0,er.jsx)(Ur,{severity:"error",className:"mb-4",children:c}),(0,er.jsx)(zr,{children:(0,er.jsx)("div",{className:"p-6",children:v?(0,er.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("div",{className:"mb-4",children:(0,er.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Case Types (",(null===y||void 0===y?void 0:y.length)||0,")"]})}),(0,er.jsxs)(rn,{children:[(0,er.jsx)(rn.Head,{children:(0,er.jsxs)(rn.Row,{children:[(0,er.jsx)(rn.Header,{children:"Name"}),(0,er.jsx)(rn.Header,{children:"Description"}),(0,er.jsx)(rn.Header,{children:"Sort Order"}),(0,er.jsx)(rn.Header,{children:"Status"}),(0,er.jsx)(rn.Header,{children:"Created"}),(0,er.jsx)(rn.Header,{align:"center",children:"Actions"})]})}),(0,er.jsx)(rn.Body,{children:null===y||void 0===y?void 0:y.map(e=>(0,er.jsxs)(rn.Row,{hover:!0,children:[(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"font-medium text-gray-900",children:e.name})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"text-sm text-gray-900",children:e.description||"N/A"})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"text-sm text-gray-900",children:e.sort_order})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(pn,{variant:e.is_active?"success":"error",children:e.is_active?"Active":"Inactive"})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("div",{className:"text-sm text-gray-900",children:new Date(e.created_at).toLocaleDateString()})}),(0,er.jsx)(rn.Cell,{align:"center",children:("admin"===(null===a||void 0===a?void 0:a.role)||"super_admin"===(null===a||void 0===a?void 0:a.role))&&(0,er.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{l(e),g("name",e.name),g("description",e.description||""),g("sort_order",e.sort_order||0),g("is_active",e.is_active),i(!0)})(e),className:"flex items-center space-x-1",children:[(0,er.jsx)(gd,{}),(0,er.jsx)("span",{children:"Edit"})]}),(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this case type?")&&w.mutate(t));var t},className:"flex items-center space-x-1 text-red-600 hover:text-red-700",children:[(0,er.jsx)(yd,{}),(0,er.jsx)("span",{children:"Delete"})]})]})})]},e.id))})]}),(!y||0===y.length)&&(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,er.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No case types found"}),(0,er.jsx)("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first case type."}),("admin"===(null===a||void 0===a?void 0:a.role)||"super_admin"===(null===a||void 0===a?void 0:a.role))&&(0,er.jsx)(Fr,{onClick:()=>i(!0),children:"Add Case Type"})]})]})})}),(0,er.jsx)(xn,{isOpen:s,onClose:N,title:o?"Edit Case Type":"Add New Case Type",size:"md",children:(0,er.jsxs)("form",{onSubmit:p(async e=>{d(""),m(""),o?j.mutate({id:o.id,data:e}):_.mutate(e)}),className:"space-y-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Name",required:!0,error:null===(e=f.name)||void 0===e?void 0:e.message},h("name",{required:"Name is required"})),{},{placeholder:"Enter case type name"})),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)("textarea",Pe(Pe({},h("description")),{},{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter case type description"}))]}),(0,er.jsx)(Ir,Pe(Pe({label:"Sort Order",type:"number",error:null===(t=f.sort_order)||void 0===t?void 0:t.message},h("sort_order",{valueAsNumber:!0,min:{value:0,message:"Sort order must be 0 or greater"}})),{},{placeholder:"0"})),(0,er.jsxs)("div",{className:"flex items-center",children:[(0,er.jsx)("input",Pe(Pe({type:"checkbox",id:"is_active"},h("is_active")),{},{className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"})),(0,er.jsx)("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900",children:"Active"})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:N,disabled:_.isLoading||j.isLoading,children:"Cancel"}),(0,er.jsxs)(Fr,{type:"submit",loading:_.isLoading||j.isLoading,disabled:_.isLoading||j.isLoading,children:[o?"Update":"Create"," Case Type"]})]})})]})})]})},bd=()=>{const[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),[s,i]=(0,r.useState)({name:"",description:""}),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),u=(0,Ce.useQueryClient)(),{data:m,isLoading:h,isError:p}=(0,Ce.useQuery)("relations",()=>Za.get("/api/relations").then(e=>e.data),{onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to load relations")}}),f=(0,Ce.useMutation)(e=>Za.post("/api/relations",e),{onSuccess:()=>{u.invalidateQueries("relations"),d("Relation created successfully!"),l(""),t(!1),i({name:"",description:""}),setTimeout(()=>d(""),3e3)},onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to create relation"),d("")}}),x=(0,Ce.useMutation)(e=>{let{id:t,data:a}=e;return Za.put("/api/relations/".concat(t),a)},{onSuccess:()=>{u.invalidateQueries("relations"),d("Relation updated successfully!"),l(""),t(!1),n(null),i({name:"",description:""}),setTimeout(()=>d(""),3e3)},onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to update relation"),d("")}}),g=(0,Ce.useMutation)(e=>Za.delete("/api/relations/".concat(e)),{onSuccess:()=>{u.invalidateQueries("relations"),d("Relation deleted successfully!"),l(""),setTimeout(()=>d(""),3e3)},onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to delete relation"),d("")}}),y=()=>{t(!1),n(null),i({name:"",description:""}),l("")},v=[{key:"name",label:"Name",render:e=>(0,er.jsx)("div",{className:"font-medium text-gray-900",children:e.name})},{key:"description",label:"Description",render:e=>(0,er.jsx)("div",{className:"text-gray-600",children:e.description||"-"})},{key:"is_active",label:"Status",render:e=>(0,er.jsx)(vn,{variant:e.is_active?"success":"danger",children:e.is_active?"Active":"Inactive"})},{key:"actions",label:"Actions",render:e=>(0,er.jsxs)("div",{className:"flex space-x-2",children:[(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{n(e),i({name:e.name,description:e.description||""}),t(!0)})(e),children:"Edit"}),(0,er.jsx)(Fr,{variant:"danger",size:"sm",onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this relation?")&&g.mutate(t));var t},disabled:g.isLoading,children:"Delete"})]})}];return h?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):p?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)(Ur,{variant:"error",children:"Failed to load relations. Please try again."})}):(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Relations Management"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage family relationship types for counseling forms"})]}),(0,er.jsx)(Fr,{onClick:()=>t(!0),variant:"primary",children:"Add New Relation"})]})}),o&&(0,er.jsx)(Ur,{variant:"error",className:"mb-4",children:o}),c&&(0,er.jsx)(Ur,{variant:"success",className:"mb-4",children:c}),(0,er.jsx)(zr,{className:"p-6",children:(0,er.jsx)(rn,{data:m||[],columns:v,emptyMessage:"No relations found"})}),(0,er.jsx)(xn,{isOpen:e,onClose:y,title:a?"Edit Relation":"Add New Relation",children:(0,er.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.name.trim()?a?x.mutate({id:a.id,data:s}):f.mutate(s):l("Name is required")},className:"space-y-4",children:[(0,er.jsx)(Ir,{label:"Name",value:s.name,onChange:e=>i(Pe(Pe({},s),{},{name:e.target.value})),required:!0,placeholder:"Enter relation name (e.g., Father, Mother, Son)"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,er.jsx)("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,value:s.description,onChange:e=>i(Pe(Pe({},s),{},{description:e.target.value})),placeholder:"Enter description (optional)"})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:y,children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",variant:"primary",disabled:f.isLoading||x.isLoading,children:a?"Update":"Create"})]})]})})]})},_d=()=>{const[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),[s,i]=(0,r.useState)({name:"",description:""}),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),u=(0,Ce.useQueryClient)(),{data:m,isLoading:h,isError:p}=(0,Ce.useQuery)("educationLevels",()=>Za.get("/api/education-levels").then(e=>e.data),{onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to load education levels")}}),f=(0,Ce.useMutation)(e=>Za.post("/api/education-levels",e),{onSuccess:()=>{u.invalidateQueries("educationLevels"),d("Education level created successfully!"),l(""),t(!1),i({name:"",description:""}),setTimeout(()=>d(""),3e3)},onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to create education level"),d("")}}),x=(0,Ce.useMutation)(e=>{let{id:t,data:a}=e;return Za.put("/api/education-levels/".concat(t),a)},{onSuccess:()=>{u.invalidateQueries("educationLevels"),d("Education level updated successfully!"),l(""),t(!1),n(null),i({name:"",description:""}),setTimeout(()=>d(""),3e3)},onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to update education level"),d("")}}),g=(0,Ce.useMutation)(e=>Za.delete("/api/education-levels/".concat(e)),{onSuccess:()=>{u.invalidateQueries("educationLevels"),d("Education level deleted successfully!"),l(""),setTimeout(()=>d(""),3e3)},onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to delete education level"),d("")}}),y=()=>{t(!1),n(null),i({name:"",description:""}),l("")},v=[{key:"name",label:"Name",render:e=>(0,er.jsx)("div",{className:"font-medium text-gray-900",children:e.name})},{key:"description",label:"Description",render:e=>(0,er.jsx)("div",{className:"text-gray-600",children:e.description||"-"})},{key:"is_active",label:"Status",render:e=>(0,er.jsx)(vn,{variant:e.is_active?"success":"danger",children:e.is_active?"Active":"Inactive"})},{key:"actions",label:"Actions",render:e=>(0,er.jsxs)("div",{className:"flex space-x-2",children:[(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{n(e),i({name:e.name,description:e.description||""}),t(!0)})(e),children:"Edit"}),(0,er.jsx)(Fr,{variant:"danger",size:"sm",onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this education level?")&&g.mutate(t));var t},disabled:g.isLoading,children:"Delete"})]})}];return h?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):p?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)(Ur,{variant:"error",children:"Failed to load education levels. Please try again."})}):(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Education Levels Management"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage education levels for family members in counseling forms"})]}),(0,er.jsx)(Fr,{onClick:()=>t(!0),variant:"primary",children:"Add New Education Level"})]})}),o&&(0,er.jsx)(Ur,{variant:"error",className:"mb-4",children:o}),c&&(0,er.jsx)(Ur,{variant:"success",className:"mb-4",children:c}),(0,er.jsx)(zr,{className:"p-6",children:(0,er.jsx)(rn,{data:m||[],columns:v,emptyMessage:"No education levels found"})}),(0,er.jsx)(xn,{isOpen:e,onClose:y,title:a?"Edit Education Level":"Add New Education Level",children:(0,er.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.name.trim()?a?x.mutate({id:a.id,data:s}):f.mutate(s):l("Name is required")},className:"space-y-4",children:[(0,er.jsx)(Ir,{label:"Name",value:s.name,onChange:e=>i(Pe(Pe({},s),{},{name:e.target.value})),required:!0,placeholder:"Enter education level (e.g., Graduate, Post Graduate, PhD)"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,er.jsx)("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,value:s.description,onChange:e=>i(Pe(Pe({},s),{},{description:e.target.value})),placeholder:"Enter description (optional)"})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:y,children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",variant:"primary",disabled:f.isLoading||x.isLoading,children:a?"Update":"Create"})]})]})})]})},jd=()=>{const[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),[s,i]=(0,r.useState)({name:"",description:""}),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),u=(0,Ce.useQueryClient)(),{data:m,isLoading:h,isError:p}=(0,Ce.useQuery)("occupations",()=>Za.get("/api/occupations").then(e=>e.data),{onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to load occupations")}}),f=(0,Ce.useMutation)(e=>Za.post("/api/occupations",e),{onSuccess:()=>{u.invalidateQueries("occupations"),d("Occupation created successfully!"),l(""),t(!1),i({name:"",description:""}),setTimeout(()=>d(""),3e3)},onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to create occupation"),d("")}}),x=(0,Ce.useMutation)(e=>{let{id:t,data:a}=e;return Za.put("/api/occupations/".concat(t),a)},{onSuccess:()=>{u.invalidateQueries("occupations"),d("Occupation updated successfully!"),l(""),t(!1),n(null),i({name:"",description:""}),setTimeout(()=>d(""),3e3)},onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to update occupation"),d("")}}),g=(0,Ce.useMutation)(e=>Za.delete("/api/occupations/".concat(e)),{onSuccess:()=>{u.invalidateQueries("occupations"),d("Occupation deleted successfully!"),l(""),setTimeout(()=>d(""),3e3)},onError:e=>{var t,a;l((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to delete occupation"),d("")}}),y=()=>{t(!1),n(null),i({name:"",description:""}),l("")},v=[{key:"name",label:"Name",render:e=>(0,er.jsx)("div",{className:"font-medium text-gray-900",children:e.name})},{key:"description",label:"Description",render:e=>(0,er.jsx)("div",{className:"text-gray-600",children:e.description||"-"})},{key:"is_active",label:"Status",render:e=>(0,er.jsx)(vn,{variant:e.is_active?"success":"danger",children:e.is_active?"Active":"Inactive"})},{key:"actions",label:"Actions",render:e=>(0,er.jsxs)("div",{className:"flex space-x-2",children:[(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{n(e),i({name:e.name,description:e.description||""}),t(!0)})(e),children:"Edit"}),(0,er.jsx)(Fr,{variant:"danger",size:"sm",onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this occupation?")&&g.mutate(t));var t},disabled:g.isLoading,children:"Delete"})]})}];return h?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):p?(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)(Ur,{variant:"error",children:"Failed to load occupations. Please try again."})}):(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Occupations Management"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage occupation types for family members in counseling forms"})]}),(0,er.jsx)(Fr,{onClick:()=>t(!0),variant:"primary",children:"Add New Occupation"})]})}),o&&(0,er.jsx)(Ur,{variant:"error",className:"mb-4",children:o}),c&&(0,er.jsx)(Ur,{variant:"success",className:"mb-4",children:c}),(0,er.jsx)(zr,{className:"p-6",children:(0,er.jsx)(rn,{data:m||[],columns:v,emptyMessage:"No occupations found"})}),(0,er.jsx)(xn,{isOpen:e,onClose:y,title:a?"Edit Occupation":"Add New Occupation",children:(0,er.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.name.trim()?a?x.mutate({id:a.id,data:s}):f.mutate(s):l("Name is required")},className:"space-y-4",children:[(0,er.jsx)(Ir,{label:"Name",value:s.name,onChange:e=>i(Pe(Pe({},s),{},{name:e.target.value})),required:!0,placeholder:"Enter occupation (e.g., Business Owner, Employee - Private, Teacher)"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,er.jsx)("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,value:s.description,onChange:e=>i(Pe(Pe({},s),{},{description:e.target.value})),placeholder:"Enter description (optional)"})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:y,children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",variant:"primary",disabled:f.isLoading||x.isLoading,children:a?"Update":"Create"})]})]})})]})},wd=e=>{let{caseId:t,onSave:a,onCancel:n}=e;const[s,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),{register:u,handleSubmit:m,formState:{errors:h},setValue:p,watch:f,reset:x}=xi({defaultValues:{cash_in_hand_last_year:0,cash_in_hand_year1:0,cash_in_hand_year2:0,cash_in_hand_year3:0,cash_in_hand_year4:0,cash_in_hand_year5:0,raw_materials_last_year:0,raw_materials_year1:0,raw_materials_year2:0,raw_materials_year3:0,raw_materials_year4:0,raw_materials_year5:0,sale_on_credit_last_year:0,sale_on_credit_year1:0,sale_on_credit_year2:0,sale_on_credit_year3:0,sale_on_credit_year4:0,sale_on_credit_year5:0,machines_equipment_last_year:0,machines_equipment_year1:0,machines_equipment_year2:0,machines_equipment_year3:0,machines_equipment_year4:0,machines_equipment_year5:0,vehicles_last_year:0,vehicles_year1:0,vehicles_year2:0,vehicles_year3:0,vehicles_year4:0,vehicles_year5:0,shop_godown_last_year:0,shop_godown_year1:0,shop_godown_year2:0,shop_godown_year3:0,shop_godown_year4:0,shop_godown_year5:0,trademark_goodwill_last_year:0,trademark_goodwill_year1:0,trademark_goodwill_year2:0,trademark_goodwill_year3:0,trademark_goodwill_year4:0,trademark_goodwill_year5:0,purchase_on_credit_last_year:0,purchase_on_credit_year1:0,purchase_on_credit_year2:0,purchase_on_credit_year3:0,purchase_on_credit_year4:0,purchase_on_credit_year5:0}}),{data:g,isLoading:y}=(0,Ce.useQuery)(["businessAssets",t],()=>Za.get("/api/business-assets/".concat(t)).then(e=>e.data),{enabled:!!t,onSuccess:e=>{e&&Object.keys(e).forEach(t=>{null!==e[t]&&void 0!==e[t]&&p(t,e[t])})}}),v=(0,Ce.useMutation)(e=>Za.post("/api/business-assets/".concat(t),e),{onSuccess:()=>{l("Business assets data saved successfully!"),setTimeout(()=>l(""),3e3),a&&a()},onError:e=>{var t,a;i((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to save business assets data"),setTimeout(()=>i(""),5e3)}}),b=[{key:"last_year",label:"Last Year / As of now (actual)"},{key:"year1",label:"Year 1 (proj)"},{key:"year2",label:"Year 2 (proj)"},{key:"year3",label:"Year 3 (proj)"},{key:"year4",label:"Year 4 (proj)"},{key:"year5",label:"Year 5 (proj)"}];return y?(0,er.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,er.jsx)("div",{className:"text-gray-600",children:"Loading business assets data..."})}):(0,er.jsxs)("div",{className:"space-y-6",children:[s&&(0,er.jsx)(Ur,{type:"error",message:s}),o&&(0,er.jsx)(Wr,{type:"success",message:o}),(0,er.jsxs)(zr,{className:"p-6",children:[(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"5. Business assets owned (at the end of the year)"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Enter the projected values for business assets and liabilities for each year."})]}),(0,er.jsxs)("form",{onSubmit:m(async e=>{d(!0);try{await v.mutateAsync(e)}finally{d(!1)}}),className:"space-y-6",children:[(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)(rn,{children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category and Subcategory"}),b.map(e=>(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.label},e.key))]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[{key:"cash_in_hand",label:"a) Cash in Hand",description:"Cash available in hand"},{key:"raw_materials",label:"b) Raw materials / stock",description:"Raw materials and stock inventory"},{key:"sale_on_credit",label:"c) Sale on Credit **",description:"Amount receivable from credit sales"},{key:"machines_equipment",label:"d) Machines / Equip.",description:"Machinery and equipment value"},{key:"vehicles",label:"e) Vehicles",description:"Vehicle assets value"},{key:"shop_godown",label:"f) Shop / Godown etc.",description:"Shop, godown and property value"},{key:"trademark_goodwill",label:"g) Trademark / Goodwill",description:"Trademark and goodwill value"}].map((e,t)=>(0,er.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})}),b.map(t=>(0,er.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap",children:[(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},u("".concat(e.key,"_").concat(t.key),{valueAsNumber:!0,min:{value:0,message:"Value must be positive"}}))),h["".concat(e.key,"_").concat(t.key)]&&(0,er.jsx)("div",{className:"text-red-500 text-xs mt-1",children:h["".concat(e.key,"_").concat(t.key)].message})]},t.key))]},e.key))})]})}),(0,er.jsxs)("div",{className:"mt-8",children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"6. Business liability - other than Qardan"}),(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)(rn,{children:[(0,er.jsx)("thead",{children:(0,er.jsxs)("tr",{className:"bg-gray-50",children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category and Subcategory"}),b.map(e=>(0,er.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.label},e.key))]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:[{key:"purchase_on_credit",label:"h) Purchase on Credit **",description:"Amount payable for credit purchases"}].map((e,t)=>(0,er.jsxs)("tr",{className:t%2===0?"bg-white":"bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-4 whitespace-nowrap",children:(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.label}),(0,er.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]})}),b.map(t=>(0,er.jsxs)("td",{className:"px-4 py-4 whitespace-nowrap",children:[(0,er.jsx)(Ir,Pe({type:"number",step:"0.01",min:"0",className:"w-full text-center"},u("".concat(e.key,"_").concat(t.key),{valueAsNumber:!0,min:{value:0,message:"Value must be positive"}}))),h["".concat(e.key,"_").concat(t.key)]&&(0,er.jsx)("div",{className:"text-red-500 text-xs mt-1",children:h["".concat(e.key,"_").concat(t.key)].message})]},t.key))]},e.key))})]})})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-4 pt-6 border-t",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:n,disabled:c,children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",disabled:c,className:"bg-blue-600 hover:bg-blue-700",children:c?"Saving...":"Save Business Assets"})]})]})]})]})},Nd=()=>{var e,t;const{caseId:a}=ee(),n=Z(),[s,i]=(0,r.useState)(""),{data:o,isLoading:l}=(0,Ce.useQuery)(["case",a],()=>Za.get("/api/cases/".concat(a)).then(e=>e.data),{enabled:!!a,onError:e=>{i("Failed to load case details"),console.error("Error fetching case:",e)}});return l?(0,er.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,er.jsx)("div",{className:"text-gray-600",children:"Loading case details..."})}):s?(0,er.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,er.jsx)(Ur,{type:"error",message:s}),(0,er.jsx)("div",{className:"mt-4",children:(0,er.jsx)(Fr,{onClick:()=>n("/cases?search=".concat(encodeURIComponent(a||""))),children:"Back to Cases"})})]}):o?(0,er.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Business Assets - Workflow 5"}),(0,er.jsxs)("p",{className:"text-gray-600 mt-2",children:["Case: ",o.case_number," - ",null===(e=o.applicant)||void 0===e?void 0:e.first_name," ",null===(t=o.applicant)||void 0===t?void 0:t.last_name]})]}),(0,er.jsx)(Fr,{variant:"outline",onClick:()=>n("/cases/".concat(a)),children:"Back to Case"})]})}),(0,er.jsx)(wd,{caseId:a,onSave:()=>{},onCancel:()=>{n("/cases/".concat(a))}})]}):(0,er.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,er.jsx)(Ur,{type:"error",message:"Case not found"}),(0,er.jsx)("div",{className:"mt-4",children:(0,er.jsx)(Fr,{onClick:()=>n("/cases?search=".concat(encodeURIComponent(a||""))),children:"Back to Cases"})})]})},kd=["id"],Sd=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),Cd=()=>(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),Ad=()=>(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),Ld=()=>{const[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)({level_number:"",level_name:"",description:"",sort_order:"",is_active:!0}),h=(0,Ce.useQueryClient)(),{data:p,isLoading:f,error:x}=(0,Ce.useQuery)("executiveLevels",()=>Za.get("/api/executive-levels").then(e=>(console.log("\ud83d\udd0d Executive Levels API Response:",e.data),console.log("\ud83d\udd0d Response data keys:",Object.keys(e.data)),e.data))),{data:g}=(0,Ce.useQuery)("executiveUsers",()=>Za.get("/api/users",{params:{role:"Executive Management"}}).then(e=>(console.log("\ud83d\udd0d Executive Users API Response:",e.data),e.data)),{select:e=>(console.log("\ud83d\udd0d Executive Users processed data:",e.users||[]),e.users||[])}),y=(0,Ce.useMutation)(async e=>(await Za.post("/api/executive-levels",e)).data,{onSuccess:()=>{h.invalidateQueries("executiveLevels"),t(!1),N()}}),v=(0,Ce.useMutation)(async e=>{let{id:t}=e,a=Pr(e,kd);return(await Za.put("/api/executive-levels/".concat(t),a)).data},{onSuccess:()=>{h.invalidateQueries("executiveLevels"),n(!1),N()}}),b=(0,Ce.useMutation)(async e=>(await Za.delete("/api/executive-levels/".concat(e))).data,{onSuccess:()=>{h.invalidateQueries("executiveLevels"),i(!1),l(null)}}),_=(0,Ce.useMutation)(async e=>(await Za.put("/api/executive-levels/reorder",{levels:e})).data,{onSuccess:()=>{h.invalidateQueries("executiveLevels")}}),j=(0,Ce.useMutation)(async e=>{let{userId:t,executiveLevel:a}=e;console.log("Assigning user:",{userId:t,executiveLevel:a});return(await Za.put("/api/users/".concat(t,"/assign-executive-level"),{executive_level:a})).data},{onSuccess:e=>{console.log("User assigned successfully:",e),h.invalidateQueries("executiveLevels"),h.invalidateQueries("executiveUsers"),h.refetchQueries("executiveLevels"),alert("User assigned successfully!")},onError:e=>{var t,a;console.error("Error assigning user:",e),alert("Failed to assign user: ".concat((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||e.message))}}),w=(0,Ce.useMutation)(async e=>{let{userId:t}=e;console.log("Unassigning user:",{userId:t});return(await Za.put("/api/users/".concat(t,"/assign-executive-level"),{executive_level:null})).data},{onSuccess:e=>{console.log("User unassigned successfully:",e),h.invalidateQueries("executiveLevels"),h.invalidateQueries("executiveUsers"),h.refetchQueries("executiveLevels"),alert("User unassigned successfully!")},onError:e=>{var t,a;console.error("Error unassigning user:",e),alert("Failed to unassign user: ".concat((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||e.message))}}),N=()=>{m({level_number:"",level_name:"",description:"",sort_order:"",is_active:!0}),l(null)},k=()=>{N(),t(!0)},S=t=>{t.preventDefault(),e?y.mutate(u):v.mutate(Pe({id:o.id},u))},C=()=>o&&g?g.filter(e=>e.executive_level===o.level_number):[];if(f)return(0,er.jsx)("div",{className:"flex justify-center items-center h-64",children:"Loading..."});if(x)return(0,er.jsxs)("div",{className:"text-red-600",children:["Error: ",x.message]});const A=(null===p||void 0===p?void 0:p.levels)||(null===p||void 0===p?void 0:p.Levels)||[];return console.log("\ud83d\udd0d Levels data for table:",A),console.log("\ud83d\udd0d Full levelsData object:",p),(0,er.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,er.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Executive Levels Management"}),(0,er.jsx)("p",{className:"text-gray-600 text-lg",children:"Configure and manage executive approval levels for the case workflow"})]}),(0,er.jsx)("div",{className:"mb-6 flex space-x-4",children:(0,er.jsxs)(Fr,{onClick:k,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:[(0,er.jsx)(Sd,{}),"Add Executive Level"]})}),(0,er.jsxs)(zr,{className:"p-6",children:[(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Executive Levels"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage the hierarchy and configuration of executive approval levels"})]}),0===A.length?(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,er.jsx)(Sd,{})}),(0,er.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Executive Levels"}),(0,er.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:"Get started by creating your first executive level"}),(0,er.jsxs)(Fr,{onClick:k,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:[(0,er.jsx)(Sd,{}),"Create First Executive Level"]})]}):(0,er.jsxs)(rn,{children:[(0,er.jsx)(rn.Head,{children:(0,er.jsxs)(rn.Row,{children:[(0,er.jsx)(rn.Header,{children:"Order"}),(0,er.jsx)(rn.Header,{children:"Level Number"}),(0,er.jsx)(rn.Header,{children:"Level Name"}),(0,er.jsx)(rn.Header,{children:"Description"}),(0,er.jsx)(rn.Header,{children:"Status"}),(0,er.jsx)(rn.Header,{children:"Assigned Users"}),(0,er.jsx)(rn.Header,{children:"Active Cases"}),(0,er.jsx)(rn.Header,{children:"Actions"})]})}),(0,er.jsx)(rn.Body,{children:A.map((e,t)=>(0,er.jsxs)(rn.Row,{className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,er.jsx)(rn.Cell,{children:(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)("span",{className:"font-medium",children:e.sort_order}),(0,er.jsxs)("div",{className:"flex flex-col",children:[(0,er.jsx)("button",{onClick:()=>(e=>{const t=p.levels||[],a=t.findIndex(t=>t.id===e.id);if(a>0){const e=[...t];[e[a],e[a-1]]=[e[a-1],e[a]];const r=e.map((e,t)=>({id:e.id,sort_order:t+1}));_.mutate(r)}})(e),disabled:0===t,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:(0,er.jsx)(Cd,{})}),(0,er.jsx)("button",{onClick:()=>(e=>{const t=p.levels||[],a=t.findIndex(t=>t.id===e.id);if(a<t.length-1){const e=[...t];[e[a],e[a+1]]=[e[a+1],e[a]];const r=e.map((e,t)=>({id:e.id,sort_order:t+1}));_.mutate(r)}})(e),disabled:t===A.length-1,className:"p-1 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:(0,er.jsx)(Ad,{})})]})]})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"font-medium text-primary-600",children:e.level_number})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"font-medium text-gray-900",children:e.level_name})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"text-gray-600",children:e.description||"No description"})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(pn,{variant:e.is_active?"success":"secondary",size:"sm",children:e.is_active?"Active":"Inactive"})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"text-gray-600",children:e.assigned_users_count||0})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"text-gray-600",children:e.active_cases_count||0})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{l(e),d(null),m({level_number:e.level_number,level_name:e.level_name,description:e.description||"",sort_order:e.sort_order,is_active:e.is_active}),h.invalidateQueries("executiveUsers"),n(!0)})(e),className:"flex items-center justify-center px-3 py-1 text-xs font-medium border-0 bg-blue-600 hover:bg-blue-700 text-white",title:"Edit",children:"Edit"}),(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{v.mutate({id:e.id,level_number:e.level_number,level_name:e.level_name,description:e.description,sort_order:e.sort_order,is_active:!e.is_active})})(e),className:"flex items-center justify-center px-3 py-1 text-xs font-medium border-0 text-white ".concat(e.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"),title:e.is_active?"Deactivate":"Activate",children:e.is_active?"Deactivate":"Activate"}),(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{l(e),i(!0)})(e),className:"flex items-center justify-center px-3 py-1 text-xs font-medium border-0 bg-red-600 hover:bg-red-700 text-white",title:"Delete",children:"Delete"})]})})]},e.id))})]})]}),(0,er.jsx)(xn,{isOpen:e,onClose:()=>t(!1),title:"Create Executive Level",children:(0,er.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level Number *"}),(0,er.jsx)(Ir,{type:"number",value:u.level_number,onChange:e=>m(Pe(Pe({},u),{},{level_number:parseInt(e.target.value)})),placeholder:"Enter level number",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level Name *"}),(0,er.jsx)(Ir,{value:u.level_name,onChange:e=>m(Pe(Pe({},u),{},{level_name:e.target.value})),placeholder:"Enter level name",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)(Ir,{value:u.description,onChange:e=>m(Pe(Pe({},u),{},{description:e.target.value})),placeholder:"Enter description"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order *"}),(0,er.jsx)(Ir,{type:"number",value:u.sort_order,onChange:e=>m(Pe(Pe({},u),{},{sort_order:parseInt(e.target.value)})),placeholder:"Enter sort order",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,er.jsxs)(ln,{value:u.is_active?"active":"inactive",onChange:e=>m(Pe(Pe({},u),{},{is_active:"active"===e.target.value})),children:[(0,er.jsx)("option",{value:"active",children:"Active"}),(0,er.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",disabled:y.isLoading,className:"bg-primary-600 hover:bg-primary-700 text-white",children:y.isLoading?"Creating...":"Create Level"})]})]})}),(0,er.jsx)(xn,{isOpen:a,onClose:()=>n(!1),title:"Edit Executive Level",children:(0,er.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level Number *"}),(0,er.jsx)(Ir,{type:"number",value:u.level_number,onChange:e=>m(Pe(Pe({},u),{},{level_number:parseInt(e.target.value)})),placeholder:"Enter level number",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level Name *"}),(0,er.jsx)(Ir,{value:u.level_name,onChange:e=>m(Pe(Pe({},u),{},{level_name:e.target.value})),placeholder:"Enter level name",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)(Ir,{value:u.description,onChange:e=>m(Pe(Pe({},u),{},{description:e.target.value})),placeholder:"Enter description"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order *"}),(0,er.jsx)(Ir,{type:"number",value:u.sort_order,onChange:e=>m(Pe(Pe({},u),{},{sort_order:parseInt(e.target.value)})),placeholder:"Enter sort order",required:!0})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,er.jsxs)(ln,{value:u.is_active?"active":"inactive",onChange:e=>m(Pe(Pe({},u),{},{is_active:"active"===e.target.value})),children:[(0,er.jsx)("option",{value:"active",children:"Active"}),(0,er.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Currently Assigned Users"}),C().length>0?(0,er.jsx)("div",{className:"space-y-2",children:C().map(e=>(0,er.jsxs)("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("p",{className:"font-medium text-gray-900",children:e.full_name}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:e.email})]}),(0,er.jsx)(Fr,{type:"button",variant:"outline",size:"sm",onClick:()=>{return t=e.id,void w.mutate({userId:t});var t},disabled:w.isLoading,className:"text-red-600 hover:text-red-700 hover:bg-red-50 border-red-200",children:w.isLoading?"Unassigning...":"Unassign"})]},e.id))}):(0,er.jsx)("div",{className:"text-center py-4 text-gray-500",children:(0,er.jsx)("p",{children:"No users currently assigned to this level"})})]}),(0,er.jsxs)("div",{className:"border-t pt-4",children:[(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Assign New User"}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select User to Assign"}),(0,er.jsxs)(ln,{value:(null===c||void 0===c?void 0:c.id)||"",onChange:e=>{const t=parseInt(e.target.value),a=null===g||void 0===g?void 0:g.find(e=>e.id===t);d(a)},children:[(0,er.jsx)("option",{value:"",children:"Select a user..."}),null===g||void 0===g?void 0:g.filter(e=>e.executive_level!==(null===o||void 0===o?void 0:o.level_number)).map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.full_name," ",e.executive_level?"(Currently: Level ".concat(e.executive_level,")"):"(Unassigned)"]},e.id))]})]}),c&&(0,er.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,er.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,er.jsx)("strong",{children:"Selected User:"})," ",c.full_name]}),(0,er.jsxs)("p",{className:"text-sm text-blue-600",children:[(0,er.jsx)("strong",{children:"Current Level:"})," ",c.executive_level?"Level ".concat(c.executive_level):"Unassigned"]}),(0,er.jsxs)("p",{className:"text-sm text-blue-600",children:[(0,er.jsx)("strong",{children:"Will be assigned to:"})," ",null===o||void 0===o?void 0:o.level_name]})]}),c&&(0,er.jsx)("div",{className:"flex justify-end",children:(0,er.jsx)(Fr,{type:"button",onClick:()=>{var e,t;console.log("handleAssignUserInEdit called",{selectedUser:c,selectedLevel:o}),c&&o?(console.log("Calling handleAssignUser with:",{userId:c.id,executiveLevel:o.level_number}),e=c.id,t=o.level_number,j.mutate({userId:e,executiveLevel:t}),d(null)):console.log("Missing selectedUser or selectedLevel:",{selectedUser:c,selectedLevel:o})},disabled:j.isLoading||!c,className:"bg-blue-600 hover:bg-blue-700 text-white",children:j.isLoading?"Assigning...":"Assign User"})})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",disabled:v.isLoading,className:"bg-primary-600 hover:bg-primary-700 text-white",children:v.isLoading?"Updating...":"Update Level"})]})]})}),(0,er.jsx)(xn,{isOpen:s,onClose:()=>i(!1),title:"Delete Executive Level",children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("p",{className:"text-gray-600",children:['Are you sure you want to delete the executive level "',null===o||void 0===o?void 0:o.level_name,'"?']}),(0,er.jsx)("p",{className:"text-sm text-red-600",children:"This action cannot be undone. Make sure there are no users assigned to this level and no active cases."}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),(0,er.jsx)(Fr,{variant:"danger",onClick:()=>b.mutate(o.id),disabled:b.isLoading,children:b.isLoading?"Deleting...":"Delete Level"})]})]})})]})})};const Pd="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function Ed(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function Fd(e){return"nodeType"in e}function Od(e){var t,a;return e?Ed(e)?e:Fd(e)&&null!=(t=null==(a=e.ownerDocument)?void 0:a.defaultView)?t:window:window}function Id(e){const{Document:t}=Od(e);return e instanceof t}function Rd(e){return!Ed(e)&&e instanceof Od(e).HTMLElement}function Dd(e){return e instanceof Od(e).SVGElement}function Md(e){return e?Ed(e)?e.document:Fd(e)?Id(e)?e:Rd(e)||Dd(e)?e.ownerDocument:document:document:document}const Td=Pd?r.useLayoutEffect:r.useEffect;function qd(e){const t=(0,r.useRef)(e);return Td(()=>{t.current=e}),(0,r.useCallback)(function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return null==t.current?void 0:t.current(...a)},[])}function zd(e,t){void 0===t&&(t=[e]);const a=(0,r.useRef)(e);return Td(()=>{a.current!==e&&(a.current=e)},t),a}function Bd(e,t){const a=(0,r.useRef)();return(0,r.useMemo)(()=>{const t=e(a.current);return a.current=t,t},[...t])}function Ud(e){const t=qd(e),a=(0,r.useRef)(null),n=(0,r.useCallback)(e=>{e!==a.current&&(null==t||t(e,a.current)),a.current=e},[]);return[a,n]}function Hd(e){const t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current}let Wd={};function Vd(e,t){return(0,r.useMemo)(()=>{if(t)return t;const a=null==Wd[e]?0:Wd[e]+1;return Wd[e]=a,e+"-"+a},[e,t])}function Qd(e){return function(t){for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return r.reduce((t,a)=>{const r=Object.entries(a);for(const[n,s]of r){const a=t[n];null!=a&&(t[n]=a+e*s)}return t},Pe({},t))}}const Jd=Qd(1),Yd=Qd(-1);function Gd(e){if(!e)return!1;const{KeyboardEvent:t}=Od(e.target);return t&&e instanceof t}function Kd(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=Od(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:a}=e.touches[0];return{x:t,y:a}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:a}=e.changedTouches[0];return{x:t,y:a}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const $d=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:a}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:a}=e;return"scaleX("+t+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[$d.Translate.toString(e),$d.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:a,easing:r}=e;return t+" "+a+"ms "+r}}}),Xd="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Zd(e){return e.matches(Xd)?e:e.querySelector(Xd)}const eu={display:"none"};function tu(e){let{id:t,value:a}=e;return r.createElement("div",{id:t,style:eu},a)}function au(e){let{id:t,announcement:a,ariaLiveType:n="assertive"}=e;return r.createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":n,"aria-atomic":!0},a)}const ru=["transform"],nu=["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"],su=(0,r.createContext)(null);const iu={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},ou={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was moved over droppable area "+a.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:a}=e;return a?"Draggable item "+t.id+" was dropped over droppable area "+a.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function lu(e){let{announcements:t=ou,container:a,hiddenTextDescribedById:n,screenReaderInstructions:s=iu}=e;const{announce:i,announcement:o}=function(){const[e,t]=(0,r.useState)("");return{announce:(0,r.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),l=Vd("DndLiveRegion"),[c,d]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{d(!0)},[]),function(e){const t=(0,r.useContext)(su);(0,r.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,r.useMemo)(()=>({onDragStart(e){let{active:a}=e;i(t.onDragStart({active:a}))},onDragMove(e){let{active:a,over:r}=e;t.onDragMove&&i(t.onDragMove({active:a,over:r}))},onDragOver(e){let{active:a,over:r}=e;i(t.onDragOver({active:a,over:r}))},onDragEnd(e){let{active:a,over:r}=e;i(t.onDragEnd({active:a,over:r}))},onDragCancel(e){let{active:a,over:r}=e;i(t.onDragCancel({active:a,over:r}))}}),[i,t])),!c)return null;const u=r.createElement(r.Fragment,null,r.createElement(tu,{id:n,value:s.draggable}),r.createElement(au,{id:l,announcement:o}));return a?(0,ve.createPortal)(u,a):u}var cu;function du(){}function uu(e,t){return(0,r.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(cu||(cu={}));const mu=Object.freeze({x:0,y:0});function hu(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function pu(e,t){let{data:{value:a}}=e,{data:{value:r}}=t;return a-r}function fu(e,t){let{data:{value:a}}=e,{data:{value:r}}=t;return r-a}function xu(e){let{left:t,top:a,height:r,width:n}=e;return[{x:t,y:a},{x:t+n,y:a},{x:t,y:a+r},{x:t+n,y:a+r}]}function gu(e,t){if(!e||0===e.length)return null;const[a]=e;return t?a[t]:a}function yu(e,t,a){return void 0===t&&(t=e.left),void 0===a&&(a=e.top),{x:t+.5*e.width,y:a+.5*e.height}}const vu=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:r}=e;const n=yu(t,t.left,t.top),s=[];for(const i of r){const{id:e}=i,t=a.get(e);if(t){const a=hu(yu(t),n);s.push({id:e,data:{droppableContainer:i,value:a}})}}return s.sort(pu)};function bu(e,t){const a=Math.max(t.top,e.top),r=Math.max(t.left,e.left),n=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=n-r,o=s-a;if(r<n&&a<s){const a=t.width*t.height,r=e.width*e.height,n=i*o;return Number((n/(a+r-n)).toFixed(4))}return 0}const _u=e=>{let{collisionRect:t,droppableRects:a,droppableContainers:r}=e;const n=[];for(const s of r){const{id:e}=s,r=a.get(e);if(r){const a=bu(r,t);a>0&&n.push({id:e,data:{droppableContainer:s,value:a}})}}return n.sort(fu)};function ju(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:mu}function wu(e){return function(t){for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];return r.reduce((t,a)=>Pe(Pe({},t),{},{top:t.top+e*a.y,bottom:t.bottom+e*a.y,left:t.left+e*a.x,right:t.right+e*a.x}),Pe({},t))}}const Nu=wu(1);function ku(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const Su={ignoreTransform:!1};function Cu(e,t){void 0===t&&(t=Su);let a=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=Od(e).getComputedStyle(e);t&&(a=function(e,t,a){const r=ku(t);if(!r)return e;const{scaleX:n,scaleY:s,x:i,y:o}=r,l=e.left-i-(1-n)*parseFloat(a),c=e.top-o-(1-s)*parseFloat(a.slice(a.indexOf(" ")+1)),d=n?e.width/n:e.width,u=s?e.height/s:e.height;return{width:d,height:u,top:c,right:l+d,bottom:c+u,left:l}}(a,t,r))}const{top:r,left:n,width:s,height:i,bottom:o,right:l}=a;return{top:r,left:n,width:s,height:i,bottom:o,right:l}}function Au(e){return Cu(e,{ignoreTransform:!0})}function Lu(e,t){const a=[];return e?function r(n){if(null!=t&&a.length>=t)return a;if(!n)return a;if(Id(n)&&null!=n.scrollingElement&&!a.includes(n.scrollingElement))return a.push(n.scrollingElement),a;if(!Rd(n)||Dd(n))return a;if(a.includes(n))return a;const s=Od(e).getComputedStyle(n);return n!==e&&function(e,t){void 0===t&&(t=Od(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const r=t[e];return"string"===typeof r&&a.test(r)})}(n,s)&&a.push(n),function(e,t){return void 0===t&&(t=Od(e).getComputedStyle(e)),"fixed"===t.position}(n,s)?a:r(n.parentNode)}(e):a}function Pu(e){const[t]=Lu(e,1);return null!=t?t:null}function Eu(e){return Pd&&e?Ed(e)?e:Fd(e)?Id(e)||e===Md(e).scrollingElement?window:Rd(e)?e:null:null:null}function Fu(e){return Ed(e)?e.scrollX:e.scrollLeft}function Ou(e){return Ed(e)?e.scrollY:e.scrollTop}function Iu(e){return{x:Fu(e),y:Ou(e)}}var Ru;function Du(e){return!(!Pd||!e)&&e===document.scrollingElement}function Mu(e){const t={x:0,y:0},a=Du(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(Ru||(Ru={}));const Tu={x:.2,y:.2};function qu(e,t,a,r,n){let{top:s,left:i,right:o,bottom:l}=a;void 0===r&&(r=10),void 0===n&&(n=Tu);const{isTop:c,isBottom:d,isLeft:u,isRight:m}=Mu(e),h={x:0,y:0},p={x:0,y:0},f=t.height*n.y,x=t.width*n.x;return!c&&s<=t.top+f?(h.y=Ru.Backward,p.y=r*Math.abs((t.top+f-s)/f)):!d&&l>=t.bottom-f&&(h.y=Ru.Forward,p.y=r*Math.abs((t.bottom-f-l)/f)),!m&&o>=t.right-x?(h.x=Ru.Forward,p.x=r*Math.abs((t.right-x-o)/x)):!u&&i<=t.left+x&&(h.x=Ru.Backward,p.x=r*Math.abs((t.left+x-i)/x)),{direction:h,speed:p}}function zu(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:a,right:r,bottom:n}=e.getBoundingClientRect();return{top:t,left:a,right:r,bottom:n,width:e.clientWidth,height:e.clientHeight}}function Bu(e){return e.reduce((e,t)=>Jd(e,Iu(t)),mu)}function Uu(e,t){if(void 0===t&&(t=Cu),!e)return;const{top:a,left:r,bottom:n,right:s}=t(e);Pu(e)&&(n<=0||s<=0||a>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Hu=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+Fu(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+Ou(t),0)}]];class Wu{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const a=Lu(t),r=Bu(a);this.rect=Pe({},e),this.width=e.width,this.height=e.height;for(const[n,s,i]of Hu)for(const e of s)Object.defineProperty(this,e,{get:()=>{const t=i(a),s=r[n]-t;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Vu{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,a){var r;null==(r=this.target)||r.addEventListener(e,t,a),this.listeners.push([e,t,a])}}function Qu(e,t){const a=Math.abs(e.x),r=Math.abs(e.y);return"number"===typeof t?Math.sqrt(a**2+r**2)>t:"x"in t&&"y"in t?a>t.x&&r>t.y:"x"in t?a>t.x:"y"in t&&r>t.y}var Ju,Yu;function Gu(e){e.preventDefault()}function Ku(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(Ju||(Ju={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(Yu||(Yu={}));const $u={start:[Yu.Space,Yu.Enter],cancel:[Yu.Esc],end:[Yu.Space,Yu.Enter,Yu.Tab]},Xu=(e,t)=>{let{currentCoordinates:a}=t;switch(e.code){case Yu.Right:return Pe(Pe({},a),{},{x:a.x+25});case Yu.Left:return Pe(Pe({},a),{},{x:a.x-25});case Yu.Down:return Pe(Pe({},a),{},{y:a.y+25});case Yu.Up:return Pe(Pe({},a),{},{y:a.y-25})}};class Zu{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Vu(Md(t)),this.windowListeners=new Vu(Od(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ju.Resize,this.handleCancel),this.windowListeners.add(Ju.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ju.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,a=e.node.current;a&&Uu(a),t(mu)}handleKeyDown(e){if(Gd(e)){const{active:t,context:a,options:r}=this.props,{keyboardCodes:n=$u,coordinateGetter:s=Xu,scrollBehavior:i="smooth"}=r,{code:o}=e;if(n.end.includes(o))return void this.handleEnd(e);if(n.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:l}=a.current,c=l?{x:l.left,y:l.top}:mu;this.referenceCoordinates||(this.referenceCoordinates=c);const d=s(e,{active:t,context:a.current,currentCoordinates:c});if(d){const t=Yd(d,c),r={x:0,y:0},{scrollableAncestors:n}=a.current;for(const a of n){const n=e.code,{isTop:s,isRight:o,isLeft:l,isBottom:c,maxScroll:u,minScroll:m}=Mu(a),h=zu(a),p={x:Math.min(n===Yu.Right?h.right-h.width/2:h.right,Math.max(n===Yu.Right?h.left:h.left+h.width/2,d.x)),y:Math.min(n===Yu.Down?h.bottom-h.height/2:h.bottom,Math.max(n===Yu.Down?h.top:h.top+h.height/2,d.y))},f=n===Yu.Right&&!o||n===Yu.Left&&!l,x=n===Yu.Down&&!c||n===Yu.Up&&!s;if(f&&p.x!==d.x){const e=a.scrollLeft+t.x,s=n===Yu.Right&&e<=u.x||n===Yu.Left&&e>=m.x;if(s&&!t.y)return void a.scrollTo({left:e,behavior:i});r.x=s?a.scrollLeft-e:n===Yu.Right?a.scrollLeft-u.x:a.scrollLeft-m.x,r.x&&a.scrollBy({left:-r.x,behavior:i});break}if(x&&p.y!==d.y){const e=a.scrollTop+t.y,s=n===Yu.Down&&e<=u.y||n===Yu.Up&&e>=m.y;if(s&&!t.x)return void a.scrollTo({top:e,behavior:i});r.y=s?a.scrollTop-e:n===Yu.Down?a.scrollTop-u.y:a.scrollTop-m.y,r.y&&a.scrollBy({top:-r.y,behavior:i});break}}this.handleMove(e,Jd(Yd(d,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:a}=this.props;e.preventDefault(),a(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function em(e){return Boolean(e&&"distance"in e)}function tm(e){return Boolean(e&&"delay"in e)}Zu.activators=[{eventName:"onKeyDown",handler:(e,t,a)=>{let{keyboardCodes:r=$u,onActivation:n}=t,{active:s}=a;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==n||n({event:e.nativeEvent}),!0)}return!1}}];class am{constructor(e,t,a){var r;void 0===a&&(a=function(e){const{EventTarget:t}=Od(e);return e instanceof t?e:Md(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:n}=e,{target:s}=n;this.props=e,this.events=t,this.document=Md(s),this.documentListeners=new Vu(this.document),this.listeners=new Vu(a),this.windowListeners=new Vu(Od(s)),this.initialCoordinates=null!=(r=Kd(n))?r:mu,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:a}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ju.Resize,this.handleCancel),this.windowListeners.add(Ju.DragStart,Gu),this.windowListeners.add(Ju.VisibilityChange,this.handleCancel),this.windowListeners.add(Ju.ContextMenu,Gu),this.documentListeners.add(Ju.Keydown,this.handleKeydown),t){if(null!=a&&a({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(tm(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(em(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:a,onPending:r}=this.props;r(a,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ju.Click,Ku,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ju.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:a,initialCoordinates:r,props:n}=this,{onMove:s,options:{activationConstraint:i}}=n;if(!r)return;const o=null!=(t=Kd(e))?t:mu,l=Yd(r,o);if(!a&&i){if(em(i)){if(null!=i.tolerance&&Qu(l,i.tolerance))return this.handleCancel();if(Qu(l,i.distance))return this.handleStart()}return tm(i)&&Qu(l,i.tolerance)?this.handleCancel():void this.handlePending(i,l)}e.cancelable&&e.preventDefault(),s(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Yu.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const rm={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class nm extends am{constructor(e){const{event:t}=e,a=Md(t.target);super(e,rm,a)}}nm.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:r}=t;return!(!a.isPrimary||0!==a.button)&&(null==r||r({event:a}),!0)}}];const sm={move:{name:"mousemove"},end:{name:"mouseup"}};var im;!function(e){e[e.RightClick=2]="RightClick"}(im||(im={}));(class extends am{constructor(e){super(e,sm,Md(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:r}=t;return a.button!==im.RightClick&&(null==r||r({event:a}),!0)}}];const om={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var lm,cm;function dm(e){let{acceleration:t,activator:a=lm.Pointer,canScroll:n,draggingRect:s,enabled:i,interval:o=5,order:l=cm.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:h}=e;const p=function(e){let{delta:t,disabled:a}=e;const r=Hd(t);return Bd(e=>{if(a||!r||!e)return um;const n={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Ru.Backward]:e.x[Ru.Backward]||-1===n.x,[Ru.Forward]:e.x[Ru.Forward]||1===n.x},y:{[Ru.Backward]:e.y[Ru.Backward]||-1===n.y,[Ru.Forward]:e.y[Ru.Forward]||1===n.y}}},[a,t,r])}({delta:m,disabled:!i}),[f,x]=function(){const e=(0,r.useRef)(null);return[(0,r.useCallback)((t,a)=>{e.current=setInterval(t,a)},[]),(0,r.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),g=(0,r.useRef)({x:0,y:0}),y=(0,r.useRef)({x:0,y:0}),v=(0,r.useMemo)(()=>{switch(a){case lm.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case lm.DraggableRect:return s}},[a,s,c]),b=(0,r.useRef)(null),_=(0,r.useCallback)(()=>{const e=b.current;if(!e)return;const t=g.current.x*y.current.x,a=g.current.y*y.current.y;e.scrollBy(t,a)},[]),j=(0,r.useMemo)(()=>l===cm.TreeOrder?[...d].reverse():d,[l,d]);(0,r.useEffect)(()=>{if(i&&d.length&&v){for(const e of j){if(!1===(null==n?void 0:n(e)))continue;const a=d.indexOf(e),r=u[a];if(!r)continue;const{direction:s,speed:i}=qu(e,r,v,t,h);for(const e of["x","y"])p[e][s[e]]||(i[e]=0,s[e]=0);if(i.x>0||i.y>0)return x(),b.current=e,f(_,o),g.current=i,void(y.current=s)}g.current={x:0,y:0},y.current={x:0,y:0},x()}else x()},[t,_,n,x,i,o,JSON.stringify(v),JSON.stringify(p),f,d,j,u,JSON.stringify(h)])}(class extends am{constructor(e){super(e,om)}static setup(){return window.addEventListener(om.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(om.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:a}=e,{onActivation:r}=t;const{touches:n}=a;return!(n.length>1)&&(null==r||r({event:a}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(lm||(lm={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(cm||(cm={}));const um={x:{[Ru.Backward]:!1,[Ru.Forward]:!1},y:{[Ru.Backward]:!1,[Ru.Forward]:!1}};var mm,hm;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(mm||(mm={})),function(e){e.Optimized="optimized"}(hm||(hm={}));const pm=new Map;function fm(e,t){return Bd(a=>e?a||("function"===typeof t?t(e):e):null,[t,e])}function xm(e){let{callback:t,disabled:a}=e;const n=qd(t),s=(0,r.useMemo)(()=>{if(a||"undefined"===typeof window||"undefined"===typeof window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(n)},[a]);return(0,r.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}function gm(e){return new Wu(Cu(e),e)}function ym(e,t,a){void 0===t&&(t=gm);const[n,s]=(0,r.useState)(null);function i(){s(r=>{if(!e)return null;var n;if(!1===e.isConnected)return null!=(n=null!=r?r:a)?n:null;const s=t(e);return JSON.stringify(r)===JSON.stringify(s)?r:s})}const o=function(e){let{callback:t,disabled:a}=e;const n=qd(t),s=(0,r.useMemo)(()=>{if(a||"undefined"===typeof window||"undefined"===typeof window.MutationObserver)return;const{MutationObserver:e}=window;return new e(n)},[n,a]);return(0,r.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}({callback(t){if(e)for(const a of t){const{type:t,target:r}=a;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){i();break}}}}),l=xm({callback:i});return Td(()=>{i(),e?(null==l||l.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==o||o.disconnect())},[e]),n}const vm=[];function bm(e,t){void 0===t&&(t=[]);const a=(0,r.useRef)(null);return(0,r.useEffect)(()=>{a.current=null},t),(0,r.useEffect)(()=>{const t=e!==mu;t&&!a.current&&(a.current=e),!t&&a.current&&(a.current=null)},[e]),a.current?Yd(e,a.current):mu}function _m(e){return(0,r.useMemo)(()=>e?function(e){const t=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:t,bottom:a,width:t,height:a}}(e):null,[e])}const jm=[];function wm(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Rd(t)?t:e}const Nm=[{sensor:nm,options:{}},{sensor:Zu,options:{}}],km={current:{}},Sm={draggable:{measure:Au},droppable:{measure:Au,strategy:mm.WhileDragging,frequency:hm.Optimized},dragOverlay:{measure:Cu}};class Cm extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,a;return null!=(t=null==(a=this.get(e))?void 0:a.node.current)?t:void 0}}const Am={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Cm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:du},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Sm,measureDroppableContainers:du,windowRect:null,measuringScheduled:!1},Lm={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:du,draggableNodes:new Map,over:null,measureDroppableContainers:du},Pm=(0,r.createContext)(Lm),Em=(0,r.createContext)(Am);function Fm(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Cm}}}function Om(e,t){switch(t.type){case cu.DragStart:return Pe(Pe({},e),{},{draggable:Pe(Pe({},e.draggable),{},{initialCoordinates:t.initialCoordinates,active:t.active})});case cu.DragMove:return null==e.draggable.active?e:Pe(Pe({},e),{},{draggable:Pe(Pe({},e.draggable),{},{translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}})});case cu.DragEnd:case cu.DragCancel:return Pe(Pe({},e),{},{draggable:Pe(Pe({},e.draggable),{},{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case cu.RegisterDroppable:{const{element:a}=t,{id:r}=a,n=new Cm(e.droppable.containers);return n.set(r,a),Pe(Pe({},e),{},{droppable:Pe(Pe({},e.droppable),{},{containers:n})})}case cu.SetDroppableDisabled:{const{id:a,key:r,disabled:n}=t,s=e.droppable.containers.get(a);if(!s||r!==s.key)return e;const i=new Cm(e.droppable.containers);return i.set(a,Pe(Pe({},s),{},{disabled:n})),Pe(Pe({},e),{},{droppable:Pe(Pe({},e.droppable),{},{containers:i})})}case cu.UnregisterDroppable:{const{id:a,key:r}=t,n=e.droppable.containers.get(a);if(!n||r!==n.key)return e;const s=new Cm(e.droppable.containers);return s.delete(a),Pe(Pe({},e),{},{droppable:Pe(Pe({},e.droppable),{},{containers:s})})}default:return e}}function Im(e){let{disabled:t}=e;const{active:a,activatorEvent:n,draggableNodes:s}=(0,r.useContext)(Pm),i=Hd(n),o=Hd(null==a?void 0:a.id);return(0,r.useEffect)(()=>{if(!t&&!n&&i&&null!=o){if(!Gd(i))return;if(document.activeElement===i.target)return;const e=s.get(o);if(!e)return;const{activatorNode:t,node:a}=e;if(!t.current&&!a.current)return;requestAnimationFrame(()=>{for(const e of[t.current,a.current]){if(!e)continue;const t=Zd(e);if(t){t.focus();break}}})}},[n,t,s,o,i]),null}function Rm(e,t){let{transform:a}=t,r=Pr(t,ru);return null!=e&&e.length?e.reduce((e,t)=>t(Pe({transform:e},r)),a):a}const Dm=(0,r.createContext)(Pe(Pe({},mu),{},{scaleX:1,scaleY:1}));var Mm;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(Mm||(Mm={}));const Tm=(0,r.memo)(function(e){var t,a,n,s;let{id:i,accessibility:o,autoScroll:l=!0,children:c,sensors:d=Nm,collisionDetection:u=_u,measuring:m,modifiers:h}=e,p=Pr(e,nu);const f=(0,r.useReducer)(Om,void 0,Fm),[x,g]=f,[y,v]=function(){const[e]=(0,r.useState)(()=>new Set),t=(0,r.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,r.useCallback)(t=>{let{type:a,event:r}=t;e.forEach(e=>{var t;return null==(t=e[a])?void 0:t.call(e,r)})},[e]),t]}(),[b,_]=(0,r.useState)(Mm.Uninitialized),j=b===Mm.Initialized,{draggable:{active:w,nodes:N,translate:k},droppable:{containers:S}}=x,C=null!=w?N.get(w):null,A=(0,r.useRef)({initial:null,translated:null}),L=(0,r.useMemo)(()=>{var e;return null!=w?{id:w,data:null!=(e=null==C?void 0:C.data)?e:km,rect:A}:null},[w,C]),P=(0,r.useRef)(null),[E,F]=(0,r.useState)(null),[O,I]=(0,r.useState)(null),R=zd(p,Object.values(p)),D=Vd("DndDescribedBy",i),M=(0,r.useMemo)(()=>S.getEnabled(),[S]),T=(q=m,(0,r.useMemo)(()=>({draggable:Pe(Pe({},Sm.draggable),null==q?void 0:q.draggable),droppable:Pe(Pe({},Sm.droppable),null==q?void 0:q.droppable),dragOverlay:Pe(Pe({},Sm.dragOverlay),null==q?void 0:q.dragOverlay)}),[null==q?void 0:q.draggable,null==q?void 0:q.droppable,null==q?void 0:q.dragOverlay]));var q;const{droppableRects:z,measureDroppableContainers:B,measuringScheduled:U}=function(e,t){let{dragging:a,dependencies:n,config:s}=t;const[i,o]=(0,r.useState)(null),{frequency:l,measure:c,strategy:d}=s,u=(0,r.useRef)(e),m=function(){switch(d){case mm.Always:return!1;case mm.BeforeDragging:return a;default:return!a}}(),h=zd(m),p=(0,r.useCallback)(function(e){void 0===e&&(e=[]),h.current||o(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[h]),f=(0,r.useRef)(null),x=Bd(t=>{if(m&&!a)return pm;if(!t||t===pm||u.current!==e||null!=i){const t=new Map;for(let a of e){if(!a)continue;if(i&&i.length>0&&!i.includes(a.id)&&a.rect.current){t.set(a.id,a.rect.current);continue}const e=a.node.current,r=e?new Wu(c(e),e):null;a.rect.current=r,r&&t.set(a.id,r)}return t}return t},[e,i,a,m,c]);return(0,r.useEffect)(()=>{u.current=e},[e]),(0,r.useEffect)(()=>{m||p()},[a,m]),(0,r.useEffect)(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),(0,r.useEffect)(()=>{m||"number"!==typeof l||null!==f.current||(f.current=setTimeout(()=>{p(),f.current=null},l))},[l,m,p,...n]),{droppableRects:x,measureDroppableContainers:p,measuringScheduled:null!=i}}(M,{dragging:j,dependencies:[k.x,k.y],config:T.droppable}),H=function(e,t){const a=null!=t?e.get(t):void 0,r=a?a.node.current:null;return Bd(e=>{var a;return null==t?null:null!=(a=null!=r?r:e)?a:null},[r,t])}(N,w),W=(0,r.useMemo)(()=>O?Kd(O):null,[O]),V=function(){const e=!1===(null==E?void 0:E.autoScrollEnabled),t="object"===typeof l?!1===l.enabled:!1===l,a=j&&!e&&!t;if("object"===typeof l)return Pe(Pe({},l),{},{enabled:a});return{enabled:a}}(),Q=function(e,t){return fm(e,t)}(H,T.draggable.measure);!function(e){let{activeNode:t,measure:a,initialRect:n,config:s=!0}=e;const i=(0,r.useRef)(!1),{x:o,y:l}="boolean"===typeof s?{x:s,y:s}:s;Td(()=>{if(!o&&!l||!t)return void(i.current=!1);if(i.current||!n)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const r=ju(a(e),n);if(o||(r.x=0),l||(r.y=0),i.current=!0,Math.abs(r.x)>0||Math.abs(r.y)>0){const t=Pu(e);t&&t.scrollBy({top:r.y,left:r.x})}},[t,o,l,n,a])}({activeNode:null!=w?N.get(w):null,config:V.layoutShiftCompensation,initialRect:Q,measure:T.draggable.measure});const J=ym(H,T.draggable.measure,Q),Y=ym(H?H.parentElement:null),G=(0,r.useRef)({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:N,draggingNode:null,draggingNodeRect:null,droppableContainers:S,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),K=S.getNodeFor(null==(t=G.current.over)?void 0:t.id),$=function(e){let{measure:t}=e;const[a,n]=(0,r.useState)(null),s=xm({callback:(0,r.useCallback)(e=>{for(const{target:a}of e)if(Rd(a)){n(e=>{const r=t(a);return e?Pe(Pe({},e),{},{width:r.width,height:r.height}):r});break}},[t])}),i=(0,r.useCallback)(e=>{const a=wm(e);null==s||s.disconnect(),a&&(null==s||s.observe(a)),n(a?t(a):null)},[t,s]),[o,l]=Ud(i);return(0,r.useMemo)(()=>({nodeRef:o,rect:a,setRef:l}),[a,o,l])}({measure:T.dragOverlay.measure}),X=null!=(a=$.nodeRef.current)?a:H,Z=j?null!=(n=$.rect)?n:J:null,ee=Boolean($.nodeRef.current&&$.rect),te=ju(ae=ee?null:J,fm(ae));var ae;const re=_m(X?Od(X):null),ne=function(e){const t=(0,r.useRef)(e),a=Bd(a=>e?a&&a!==vm&&e&&t.current&&e.parentNode===t.current.parentNode?a:Lu(e):vm,[e]);return(0,r.useEffect)(()=>{t.current=e},[e]),a}(j?null!=K?K:H:null),se=function(e,t){void 0===t&&(t=Cu);const[a]=e,n=_m(a?Od(a):null),[s,i]=(0,r.useState)(jm);function o(){i(()=>e.length?e.map(e=>Du(e)?n:new Wu(t(e),e)):jm)}const l=xm({callback:o});return Td(()=>{null==l||l.disconnect(),o(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),s}(ne),ie=Rm(h,{transform:{x:k.x-te.x,y:k.y-te.y,scaleX:1,scaleY:1},activatorEvent:O,active:L,activeNodeRect:J,containerNodeRect:Y,draggingNodeRect:Z,over:G.current.over,overlayNodeRect:$.rect,scrollableAncestors:ne,scrollableAncestorRects:se,windowRect:re}),oe=W?Jd(W,k):null,le=function(e){const[t,a]=(0,r.useState)(null),n=(0,r.useRef)(e),s=(0,r.useCallback)(e=>{const t=Eu(e.target);t&&a(e=>e?(e.set(t,Iu(t)),new Map(e)):null)},[]);return(0,r.useEffect)(()=>{const t=n.current;if(e!==t){r(t);const i=e.map(e=>{const t=Eu(e);return t?(t.addEventListener("scroll",s,{passive:!0}),[t,Iu(t)]):null}).filter(e=>null!=e);a(i.length?new Map(i):null),n.current=e}return()=>{r(e),r(t)};function r(e){e.forEach(e=>{const t=Eu(e);null==t||t.removeEventListener("scroll",s)})}},[s,e]),(0,r.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>Jd(e,t),mu):Bu(e):mu,[e,t])}(ne),ce=bm(le),de=bm(le,[J]),ue=Jd(ie,ce),me=Z?Nu(Z,ie):null,he=L&&me?u({active:L,collisionRect:me,droppableRects:z,droppableContainers:M,pointerCoordinates:oe}):null,pe=gu(he,"id"),[fe,xe]=(0,r.useState)(null),ge=function(e,t,a){return Pe(Pe({},e),{},{scaleX:t&&a?t.width/a.width:1,scaleY:t&&a?t.height/a.height:1})}(ee?ie:Jd(ie,de),null!=(s=null==fe?void 0:fe.rect)?s:null,J),ye=(0,r.useRef)(null),be=(0,r.useCallback)((e,t)=>{let{sensor:a,options:r}=t;if(null==P.current)return;const n=N.get(P.current);if(!n)return;const s=e.nativeEvent,i=new a({active:P.current,activeNode:n,event:s,options:r,context:G,onAbort(e){if(!N.get(e))return;const{onDragAbort:t}=R.current,a={id:e};null==t||t(a),y({type:"onDragAbort",event:a})},onPending(e,t,a,r){if(!N.get(e))return;const{onDragPending:n}=R.current,s={id:e,constraint:t,initialCoordinates:a,offset:r};null==n||n(s),y({type:"onDragPending",event:s})},onStart(e){const t=P.current;if(null==t)return;const a=N.get(t);if(!a)return;const{onDragStart:r}=R.current,n={activatorEvent:s,active:{id:t,data:a.data,rect:A}};(0,ve.unstable_batchedUpdates)(()=>{null==r||r(n),_(Mm.Initializing),g({type:cu.DragStart,initialCoordinates:e,active:t}),y({type:"onDragStart",event:n}),F(ye.current),I(s)})},onMove(e){g({type:cu.DragMove,coordinates:e})},onEnd:o(cu.DragEnd),onCancel:o(cu.DragCancel)});function o(e){return async function(){const{active:t,collisions:a,over:r,scrollAdjustedTranslate:n}=G.current;let i=null;if(t&&n){const{cancelDrop:o}=R.current;if(i={activatorEvent:s,active:t,collisions:a,delta:n,over:r},e===cu.DragEnd&&"function"===typeof o){await Promise.resolve(o(i))&&(e=cu.DragCancel)}}P.current=null,(0,ve.unstable_batchedUpdates)(()=>{g({type:e}),_(Mm.Uninitialized),xe(null),F(null),I(null),ye.current=null;const t=e===cu.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=R.current[t];null==e||e(i),y({type:t,event:i})}})}}ye.current=i},[N]),_e=(0,r.useCallback)((e,t)=>(a,r)=>{const n=a.nativeEvent,s=N.get(r);if(null!==P.current||!s||n.dndKit||n.defaultPrevented)return;const i={active:s};!0===e(a,t.options,i)&&(n.dndKit={capturedBy:t.sensor},P.current=r,be(a,t))},[N,be]),je=function(e,t){return(0,r.useMemo)(()=>e.reduce((e,a)=>{const{sensor:r}=a;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,a)}))]},[]),[e,t])}(d,_e);!function(e){(0,r.useEffect)(()=>{if(!Pd)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(d),Td(()=>{J&&b===Mm.Initializing&&_(Mm.Initialized)},[J,b]),(0,r.useEffect)(()=>{const{onDragMove:e}=R.current,{active:t,activatorEvent:a,collisions:r,over:n}=G.current;if(!t||!a)return;const s={active:t,activatorEvent:a,collisions:r,delta:{x:ue.x,y:ue.y},over:n};(0,ve.unstable_batchedUpdates)(()=>{null==e||e(s),y({type:"onDragMove",event:s})})},[ue.x,ue.y]),(0,r.useEffect)(()=>{const{active:e,activatorEvent:t,collisions:a,droppableContainers:r,scrollAdjustedTranslate:n}=G.current;if(!e||null==P.current||!t||!n)return;const{onDragOver:s}=R.current,i=r.get(pe),o=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,l={active:e,activatorEvent:t,collisions:a,delta:{x:n.x,y:n.y},over:o};(0,ve.unstable_batchedUpdates)(()=>{xe(o),null==s||s(l),y({type:"onDragOver",event:l})})},[pe]),Td(()=>{G.current={activatorEvent:O,active:L,activeNode:H,collisionRect:me,collisions:he,droppableRects:z,draggableNodes:N,draggingNode:X,draggingNodeRect:Z,droppableContainers:S,over:fe,scrollableAncestors:ne,scrollAdjustedTranslate:ue},A.current={initial:Z,translated:me}},[L,H,he,me,N,X,Z,z,S,fe,ne,ue]),dm(Pe(Pe({},V),{},{delta:k,draggingRect:me,pointerCoordinates:oe,scrollableAncestors:ne,scrollableAncestorRects:se}));const we=(0,r.useMemo)(()=>({active:L,activeNode:H,activeNodeRect:J,activatorEvent:O,collisions:he,containerNodeRect:Y,dragOverlay:$,draggableNodes:N,droppableContainers:S,droppableRects:z,over:fe,measureDroppableContainers:B,scrollableAncestors:ne,scrollableAncestorRects:se,measuringConfiguration:T,measuringScheduled:U,windowRect:re}),[L,H,J,O,he,Y,$,N,S,z,fe,B,ne,se,T,U,re]),Ne=(0,r.useMemo)(()=>({activatorEvent:O,activators:je,active:L,activeNodeRect:J,ariaDescribedById:{draggable:D},dispatch:g,draggableNodes:N,over:fe,measureDroppableContainers:B}),[O,je,L,J,g,D,N,fe,B]);return r.createElement(su.Provider,{value:v},r.createElement(Pm.Provider,{value:Ne},r.createElement(Em.Provider,{value:we},r.createElement(Dm.Provider,{value:ge},c)),r.createElement(Im,{disabled:!1===(null==o?void 0:o.restoreFocus)})),r.createElement(lu,Pe(Pe({},o),{},{hiddenTextDescribedById:D})))}),qm=(0,r.createContext)(null),zm="button";function Bm(e){let{id:t,data:a,disabled:n=!1,attributes:s}=e;const i=Vd("Draggable"),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:m,over:h}=(0,r.useContext)(Pm),{role:p=zm,roleDescription:f="draggable",tabIndex:x=0}=null!=s?s:{},g=(null==c?void 0:c.id)===t,y=(0,r.useContext)(g?Dm:qm),[v,b]=Ud(),[_,j]=Ud(),w=function(e,t){return(0,r.useMemo)(()=>e.reduce((e,a)=>{let{eventName:r,handler:n}=a;return e[r]=e=>{n(e,t)},e},{}),[e,t])}(o,t),N=zd(a);Td(()=>(m.set(t,{id:t,key:i,node:v,activatorNode:_,data:N}),()=>{const e=m.get(t);e&&e.key===i&&m.delete(t)}),[m,t]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:(0,r.useMemo)(()=>({role:p,tabIndex:x,"aria-disabled":n,"aria-pressed":!(!g||p!==zm)||void 0,"aria-roledescription":f,"aria-describedby":u.draggable}),[n,p,x,g,f,u.draggable]),isDragging:g,listeners:n?void 0:w,node:v,over:h,setNodeRef:b,setActivatorNodeRef:j,transform:y}}function Um(){return(0,r.useContext)(Em)}const Hm={timeout:25};function Wm(e,t,a){const r=e.slice();return r.splice(a<0?r.length+a:a,0,r.splice(t,1)[0]),r}function Vm(e,t){return e.reduce((e,a,r)=>{const n=t.get(a);return n&&(e[r]=n),e},Array(e.length))}function Qm(e){return null!==e&&e>=0}const Jm=e=>{let{rects:t,activeIndex:a,overIndex:r,index:n}=e;const s=Wm(t,r,a),i=t[n],o=s[n];return o&&i?{x:o.left-i.left,y:o.top-i.top,scaleX:o.width/i.width,scaleY:o.height/i.height}:null},Ym={scaleX:1,scaleY:1},Gm=e=>{var t;let{activeIndex:a,activeNodeRect:r,index:n,rects:s,overIndex:i}=e;const o=null!=(t=s[a])?t:r;if(!o)return null;if(n===a){const e=s[i];return e?Pe({x:0,y:a<i?e.top+e.height-(o.top+o.height):e.top-o.top},Ym):null}const l=function(e,t,a){const r=e[t],n=e[t-1],s=e[t+1];if(!r)return 0;if(a<t)return n?r.top-(n.top+n.height):s?s.top-(r.top+r.height):0;return s?s.top-(r.top+r.height):n?r.top-(n.top+n.height):0}(s,n,a);return Pe(n>a&&n<=i?{x:0,y:-o.height-l}:n<a&&n>=i?{x:0,y:o.height+l}:{x:0,y:0},Ym)};const Km="Sortable",$m=r.createContext({activeIndex:-1,containerId:Km,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Jm,disabled:{draggable:!1,droppable:!1}});function Xm(e){let{children:t,id:a,items:n,strategy:s=Jm,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=Um(),m=Vd(Km,a),h=Boolean(null!==l.rect),p=(0,r.useMemo)(()=>n.map(e=>"object"===typeof e&&"id"in e?e.id:e),[n]),f=null!=o,x=o?p.indexOf(o.id):-1,g=d?p.indexOf(d.id):-1,y=(0,r.useRef)(p),v=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}(p,y.current),b=-1!==g&&-1===x||v,_=function(e){return"boolean"===typeof e?{draggable:e,droppable:e}:e}(i);Td(()=>{v&&f&&u(p)},[v,p,f,u]),(0,r.useEffect)(()=>{y.current=p},[p]);const j=(0,r.useMemo)(()=>({activeIndex:x,containerId:m,disabled:_,disableTransforms:b,items:p,overIndex:g,useDragOverlay:h,sortedRects:Vm(p,c),strategy:s}),[x,m,_.draggable,_.droppable,b,p,g,c,h,s]);return r.createElement($m.Provider,{value:j},t)}const Zm=e=>{let{id:t,items:a,activeIndex:r,overIndex:n}=e;return Wm(a,r,n).indexOf(t)},eh=e=>{let{containerId:t,isSorting:a,wasDragging:r,index:n,items:s,newIndex:i,previousItems:o,previousContainerId:l,transition:c}=e;return!(!c||!r)&&((o===s||n!==i)&&(!!a||i!==n&&t===l))},th={duration:200,easing:"ease"},ah="transform",rh=$d.Transition.toString({property:ah,duration:0,easing:"linear"}),nh={roleDescription:"sortable"};function sh(e){let{animateLayoutChanges:t=eh,attributes:a,disabled:n,data:s,getNewIndex:i=Zm,id:o,strategy:l,resizeObserverConfig:c,transition:d=th}=e;const{items:u,containerId:m,activeIndex:h,disabled:p,disableTransforms:f,sortedRects:x,overIndex:g,useDragOverlay:y,strategy:v}=(0,r.useContext)($m),b=function(e,t){var a,r;if("boolean"===typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(a=null==e?void 0:e.draggable)?a:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(n,p),_=u.indexOf(o),j=(0,r.useMemo)(()=>Pe({sortable:{containerId:m,index:_,items:u}},s),[m,s,_,u]),w=(0,r.useMemo)(()=>u.slice(u.indexOf(o)),[u,o]),{rect:N,node:k,isOver:S,setNodeRef:C}=function(e){let{data:t,disabled:a=!1,id:n,resizeObserverConfig:s}=e;const i=Vd("Droppable"),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=(0,r.useContext)(Pm),u=(0,r.useRef)({disabled:a}),m=(0,r.useRef)(!1),h=(0,r.useRef)(null),p=(0,r.useRef)(null),{disabled:f,updateMeasurementsFor:x,timeout:g}=Pe(Pe({},Hm),s),y=zd(null!=x?x:n),v=xm({callback:(0,r.useCallback)(()=>{m.current?(null!=p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{d(Array.isArray(y.current)?y.current:[y.current]),p.current=null},g)):m.current=!0},[g]),disabled:f||!o}),b=(0,r.useCallback)((e,t)=>{v&&(t&&(v.unobserve(t),m.current=!1),e&&v.observe(e))},[v]),[_,j]=Ud(b),w=zd(t);return(0,r.useEffect)(()=>{v&&_.current&&(v.disconnect(),m.current=!1,v.observe(_.current))},[_,v]),(0,r.useEffect)(()=>(l({type:cu.RegisterDroppable,element:{id:n,key:i,disabled:a,node:_,rect:h,data:w}}),()=>l({type:cu.UnregisterDroppable,key:i,id:n})),[n]),(0,r.useEffect)(()=>{a!==u.current.disabled&&(l({type:cu.SetDroppableDisabled,id:n,key:i,disabled:a}),u.current.disabled=a)},[n,i,a,l]),{active:o,rect:h,isOver:(null==c?void 0:c.id)===n,node:_,over:c,setNodeRef:j}}({id:o,data:j,disabled:b.droppable,resizeObserverConfig:Pe({updateMeasurementsFor:w},c)}),{active:A,activatorEvent:L,activeNodeRect:P,attributes:E,setNodeRef:F,listeners:O,isDragging:I,over:R,setActivatorNodeRef:D,transform:M}=Bm({id:o,data:j,attributes:Pe(Pe({},nh),a),disabled:b.draggable}),T=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(C,F),q=Boolean(A),z=q&&!f&&Qm(h)&&Qm(g),B=!y&&I,U=B&&z?M:null,H=z?null!=U?U:(null!=l?l:v)({rects:x,activeNodeRect:P,activeIndex:h,overIndex:g,index:_}):null,W=Qm(h)&&Qm(g)?i({id:o,items:u,activeIndex:h,overIndex:g}):_,V=null==A?void 0:A.id,Q=(0,r.useRef)({activeId:V,items:u,newIndex:W,containerId:m}),J=u!==Q.current.items,Y=t({active:A,containerId:m,isDragging:I,isSorting:q,id:o,index:_,items:u,newIndex:Q.current.newIndex,previousItems:Q.current.items,previousContainerId:Q.current.containerId,transition:d,wasDragging:null!=Q.current.activeId}),G=function(e){let{disabled:t,index:a,node:n,rect:s}=e;const[i,o]=(0,r.useState)(null),l=(0,r.useRef)(a);return Td(()=>{if(!t&&a!==l.current&&n.current){const e=s.current;if(e){const t=Cu(n.current,{ignoreTransform:!0}),a={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(a.x||a.y)&&o(a)}}a!==l.current&&(l.current=a)},[t,a,n,s]),(0,r.useEffect)(()=>{i&&o(null)},[i]),i}({disabled:!Y,index:_,node:k,rect:N});return(0,r.useEffect)(()=>{q&&Q.current.newIndex!==W&&(Q.current.newIndex=W),m!==Q.current.containerId&&(Q.current.containerId=m),u!==Q.current.items&&(Q.current.items=u)},[q,W,m,u]),(0,r.useEffect)(()=>{if(V===Q.current.activeId)return;if(null!=V&&null==Q.current.activeId)return void(Q.current.activeId=V);const e=setTimeout(()=>{Q.current.activeId=V},50);return()=>clearTimeout(e)},[V]),{active:A,activeIndex:h,attributes:E,data:j,rect:N,index:_,newIndex:W,items:u,isOver:S,isSorting:q,isDragging:I,listeners:O,node:k,overIndex:g,over:R,setNodeRef:T,setActivatorNodeRef:D,setDroppableNodeRef:C,setDraggableNodeRef:F,transform:null!=G?G:H,transition:function(){if(G||J&&Q.current.newIndex===_)return rh;if(B&&!Gd(L)||!d)return;if(q||Y)return $d.Transition.toString(Pe(Pe({},d),{},{property:ah}));return}()}}function ih(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"===typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const oh=[Yu.Down,Yu.Right,Yu.Up,Yu.Left],lh=(e,t)=>{let{context:{active:a,collisionRect:r,droppableRects:n,droppableContainers:s,over:i,scrollableAncestors:o}}=t;if(oh.includes(e.code)){if(e.preventDefault(),!a||!r)return;const t=[];s.getEnabled().forEach(a=>{if(!a||null!=a&&a.disabled)return;const s=n.get(a.id);if(s)switch(e.code){case Yu.Down:r.top<s.top&&t.push(a);break;case Yu.Up:r.top>s.top&&t.push(a);break;case Yu.Left:r.left>s.left&&t.push(a);break;case Yu.Right:r.left<s.left&&t.push(a)}});const l=(e=>{let{collisionRect:t,droppableRects:a,droppableContainers:r}=e;const n=xu(t),s=[];for(const i of r){const{id:e}=i,t=a.get(e);if(t){const a=xu(t),r=n.reduce((e,t,r)=>e+hu(a[r],t),0),o=Number((r/4).toFixed(4));s.push({id:e,data:{droppableContainer:i,value:o}})}}return s.sort(pu)})({active:a,collisionRect:r,droppableRects:n,droppableContainers:t,pointerCoordinates:null});let c=gu(l,"id");if(c===(null==i?void 0:i.id)&&l.length>1&&(c=l[1].id),null!=c){const e=s.get(a.id),t=s.get(c),i=t?n.get(t.id):null,l=null==t?void 0:t.node.current;if(l&&i&&e&&t){const a=Lu(l).some((e,t)=>o[t]!==e),n=ch(e,t),s=function(e,t){if(!ih(e)||!ih(t))return!1;if(!ch(e,t))return!1;return e.data.current.sortable.index<t.data.current.sortable.index}(e,t),c=a||!n?{x:0,y:0}:{x:s?r.width-i.width:0,y:s?r.height-i.height:0},d={x:i.left,y:i.top};return c.x&&c.y?d:Yd(d,c)}}}};function ch(e,t){return!(!ih(e)||!ih(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}const dh=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),uh=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),mh=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),hh=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),ph=()=>(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),fh=()=>(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),xh=e=>{let{stage:t,onEdit:a,onDelete:r,onRestore:n,onManageRoles:s,onManageUsers:i}=e;const{attributes:o,listeners:l,setNodeRef:c,transform:d,transition:u,isDragging:m}=sh({id:t.id}),h={transform:$d.Transform.toString(d),transition:u,opacity:m?.5:1},p=!t.is_active;return(0,er.jsx)("div",{ref:c,style:h,className:"border rounded-lg p-4 mb-3 shadow-sm hover:shadow-md transition-shadow ".concat(p?"bg-gray-50 border-gray-300 opacity-60":"bg-white border-gray-200"),children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)("div",Pe(Pe(Pe({},o),l),{},{className:"cursor-grab hover:cursor-grabbing p-1 text-gray-400 hover:text-gray-600",children:(0,er.jsx)(hh,{})})),(0,er.jsxs)("div",{children:[(0,er.jsxs)("h3",{className:"text-lg font-semibold ".concat(p?"text-gray-500":"text-gray-900"),children:[t.stage_name,p&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:"Deleted"})]}),(0,er.jsx)("p",{className:"text-sm ".concat(p?"text-gray-400":"text-gray-600"),children:t.description}),t.sla_value&&t.sla_unit&&(0,er.jsxs)("p",{className:"text-xs mt-1 ".concat(p?"text-gray-400":"text-blue-600"),children:["SLA: ",t.sla_value," ",t.sla_unit,t.sla_warning_value&&t.sla_warning_unit&&(0,er.jsxs)("span",{children:[" (Warning: ",t.sla_warning_value," ",t.sla_warning_unit,")"]})]})]})]}),(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsxs)(vn,{variant:"secondary",className:"flex items-center space-x-1",children:[(0,er.jsx)(fh,{}),(0,er.jsxs)("span",{children:[t.role_count||0," Roles"]})]}),(0,er.jsxs)(vn,{variant:"secondary",className:"flex items-center space-x-1",children:[(0,er.jsx)(ph,{}),(0,er.jsxs)("span",{children:[t.user_count||0," Users"]})]})]}),(0,er.jsx)("div",{className:"flex items-center space-x-2",children:p?(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>n(t.id),className:"flex items-center space-x-1 text-green-600 hover:text-green-700",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,er.jsx)("span",{children:"Restore"})]}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>s(t),className:"flex items-center space-x-1",children:[(0,er.jsx)(fh,{}),(0,er.jsx)("span",{children:"Roles"})]}),(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>i(t),className:"flex items-center space-x-1",children:[(0,er.jsx)(ph,{}),(0,er.jsx)("span",{children:"Users"})]}),(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>a(t),className:"flex items-center space-x-1",children:[(0,er.jsx)(uh,{}),(0,er.jsx)("span",{children:"Edit"})]}),(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>r(t.id),className:"flex items-center space-x-1 text-red-600 hover:text-red-700",children:[(0,er.jsx)(mh,{}),(0,er.jsx)("span",{children:"Delete"})]})]})})]})]})})},gh=()=>{var e,t,a,n,s,i,o,l;const{user:c}=ar(),d=(0,Ce.useQueryClient)(),[u,m]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[f,x]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[_,j]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),[C,A]=(0,r.useState)(""),[L,P]=(0,r.useState)(null),[E,F]=(0,r.useState)(!1),[O,I]=(0,r.useState)(null),[R,D]=(0,r.useState)({}),{register:M,handleSubmit:T,formState:{errors:q},reset:z,setValue:B,watch:U}=xi(),H=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}(uu(nm),uu(Zu,{coordinateGetter:lh})),{data:W,isLoading:V,error:Q}=(0,Ce.useQuery)(["workflowStagesByCaseType",E],()=>{const e="/api/workflow-stages/by-case-type".concat(E?"?include_deleted=true":"");return console.log("Fetching workflow data with URL:",e,"showDeleted:",E),Za.get(e).then(e=>(console.log("Workflow data received:",e.data),e.data))},{enabled:"admin"===(null===c||void 0===c?void 0:c.role)||"super_admin"===(null===c||void 0===c?void 0:c.role),retry:!1}),{data:J,isLoading:Y}=(0,Ce.useQuery)("caseTypes",()=>Za.get("/api/case-types").then(e=>e.data),{enabled:"admin"===(null===c||void 0===c?void 0:c.role)||"super_admin"===(null===c||void 0===c?void 0:c.role),retry:!1}),{data:G,error:K,isLoading:$}=(0,Ce.useQuery)("availableRoles",()=>Za.get("/api/workflow-stages/available/roles").then(e=>(console.log("Available roles API response:",e.data),e.data)),{enabled:"admin"===(null===c||void 0===c?void 0:c.role)||"super_admin"===(null===c||void 0===c?void 0:c.role),retry:!1}),{data:X,error:Z,isLoading:ee}=(0,Ce.useQuery)("availableUsers",()=>Za.get("/api/workflow-stages/available/users").then(e=>(console.log("Available users API response:",e.data),e.data)),{enabled:"admin"===(null===c||void 0===c?void 0:c.role)||"super_admin"===(null===c||void 0===c?void 0:c.role),retry:!1}),te=(0,Ce.useMutation)(e=>Za.post("/api/workflow-stages",e),{onSuccess:()=>{d.invalidateQueries("workflowStagesByCaseType"),N("Workflow stage created successfully!"),j(""),m(!1),z()},onError:e=>{var t,a;j((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to create workflow stage"),N("")}}),ae=(0,Ce.useMutation)(e=>{let{id:t,data:a}=e;return Za.put("/api/workflow-stages/".concat(t),a)},{onSuccess:()=>{d.invalidateQueries("workflowStagesByCaseType"),N("Workflow stage updated successfully!"),j(""),m(!1),p(null),z()},onError:e=>{var t,a;j((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to update workflow stage"),N("")}}),re=(0,Ce.useMutation)(e=>Za.delete("/api/workflow-stages/".concat(e)),{onSuccess:()=>{d.invalidateQueries("workflowStagesByCaseType"),N("Workflow stage deleted successfully!"),j("")},onError:e=>{var t,a;j((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to delete workflow stage"),N("")}}),ne=(0,Ce.useMutation)(e=>Za.put("/api/workflow-stages/reorder",{stages:e}),{onSuccess:()=>{d.invalidateQueries("workflowStagesByCaseType"),N("Workflow stages reordered successfully!"),j("")},onError:e=>{var t,a;j((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to reorder workflow stages"),N("")}}),se=(0,Ce.useMutation)(e=>{let{stageId:t,roleId:a,permissions:r}=e;return Za.post("/api/workflow-stages/".concat(t,"/roles"),{role_id:a,can_approve:r.can_approve||!1,can_reject:r.can_reject||!1,can_review:r.can_review||!1,can_view:!1!==r.can_view,can_edit:r.can_edit||!1,can_delete:r.can_delete||!1,can_create_case:r.can_create_case||!1,can_fill_case:r.can_fill_case||!1})},{onSuccess:()=>{d.invalidateQueries("workflowStagesByCaseType"),N("Role added to stage successfully"),j(""),S("")},onError:e=>{var t,a;j((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to add role to stage"),N("")}}),ie=(0,Ce.useMutation)(e=>{let{stageId:t,roleId:a}=e;return Za.delete("/api/workflow-stages/".concat(t,"/roles/").concat(a))},{onSuccess:()=>{d.invalidateQueries("workflowStagesByCaseType"),N("Role removed from stage successfully"),j("")},onError:e=>{var t,a;j((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to remove role from stage"),N("")}}),oe=(0,Ce.useMutation)(e=>{let{stageId:t,roleId:a,permissions:r}=e;return Za.put("/api/workflow-stages/".concat(t,"/roles/").concat(a),r)},{onSuccess:()=>{d.invalidateQueries("workflowStagesByCaseType"),N("Role permissions updated successfully"),j(""),I(null),D({})},onError:e=>{var t,a;j((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to update role permissions"),N("")}}),le=(0,Ce.useMutation)(e=>{let{stageId:t,userId:a,permissions:r}=e;return Za.post("/api/workflow-stages/".concat(t,"/users"),{user_id:a,can_approve:r.can_approve,can_review:r.can_review,can_view:r.can_view,can_create_case:r.can_create_case,can_fill_case:r.can_fill_case})},{onSuccess:()=>{d.invalidateQueries("workflowStagesByCaseType"),N("User added to stage successfully"),j(""),A("")},onError:e=>{var t,a;j((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to add user to stage"),N("")}}),ce=(0,Ce.useMutation)(e=>{let{stageId:t,userId:a}=e;return Za.delete("/api/workflow-stages/".concat(t,"/users/").concat(a))},{onSuccess:()=>{d.invalidateQueries("workflowStagesByCaseType"),N("User removed from stage successfully"),j("")},onError:e=>{var t,a;j((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to remove user from stage"),N("")}}),de=(0,Ce.useMutation)(e=>Za.put("/api/workflow-stages/".concat(e,"/restore")),{onSuccess:()=>{d.invalidateQueries("workflowStagesByCaseType"),N("Workflow stage restored successfully!"),j("")},onError:e=>{var t,a;j((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to restore workflow stage"),N("")}}),ue=e=>{p(e),B("stage_name",e.stage_name),B("stage_key",e.stage_key),B("description",e.description||""),B("sort_order",e.sort_order||0),B("case_type_id",e.case_type_id||""),B("sla_value",e.sla_value||""),B("sla_unit",e.sla_unit||""),B("sla_warning_value",e.sla_warning_value||""),B("sla_warning_unit",e.sla_warning_unit||""),m(!0)},me=e=>{window.confirm("Are you sure you want to delete this workflow stage?")&&re.mutate(e)},he=e=>{window.confirm("Are you sure you want to restore this workflow stage?")&&de.mutate(e)},pe=()=>{m(!1),p(null),j(""),N(""),z()},fe=e=>{b(e),x(!0)},xe=e=>{b(e),y(!0)};(0,r.useEffect)(()=>{var e;(null===J||void 0===J||null===(e=J.caseTypes)||void 0===e?void 0:e.length)>0&&!L&&P(J.caseTypes[0].id)},[J,L]),(0,r.useEffect)(()=>{if(v&&null!==W&&void 0!==W&&W.workflowByCaseType){var e;const t=W.workflowByCaseType[L];if((null===t||void 0===t||null===(e=t.stages)||void 0===e?void 0:e.length)>0){const e=t.stages.find(e=>e.id===v.id);e&&b(e)}}},[W,v,L]);if(Q)return(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)(Ur,{severity:"error",children:["Error loading workflow stages: ",Q.message]})});const ge=(null===J||void 0===J?void 0:J.caseTypes)||[],ye=null===W||void 0===W||null===(e=W.workflowByCaseType)||void 0===e?void 0:e[L],ve=(null===ye||void 0===ye?void 0:ye.stages)||[],be=(null===G||void 0===G?void 0:G.roles)||[],_e=(null===X||void 0===X?void 0:X.users)||[];return console.log("Frontend Debug - showDeleted:",E),console.log("Frontend Debug - activeCaseType:",L),console.log("Frontend Debug - workflowData:",W),console.log("Frontend Debug - activeWorkflow:",ye),console.log("Frontend Debug - stages:",ve),console.log("rolesData:",G),console.log("rolesError:",K),console.log("rolesLoading:",$),console.log("availableRoles:",be),console.log("usersData:",X),console.log("usersError:",Z),console.log("usersLoading:",ee),console.log("availableUsers:",_e),(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsxs)("div",{className:"flex items-center justify-between",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Workflow Stages"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Configure case approval workflow stages and permissions"})]}),(0,er.jsxs)("div",{className:"flex space-x-2",children:[(0,er.jsxs)(Fr,{onClick:()=>{d.invalidateQueries("workflowStagesByCaseType"),d.invalidateQueries("caseTypes"),d.invalidateQueries("availableRoles"),d.invalidateQueries("availableUsers"),N("Data refreshed successfully"),setTimeout(()=>N(""),3e3)},variant:"outline",className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),(0,er.jsx)("span",{children:"Refresh"})]}),(0,er.jsxs)(Fr,{onClick:()=>F(!E),variant:"outline",className:"flex items-center space-x-2 ".concat(E?"bg-gray-100":""),children:[(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,er.jsx)("span",{children:E?"Hide Deleted":"Show Deleted"})]}),(0,er.jsxs)(Fr,{onClick:()=>m(!0),className:"flex items-center space-x-2",children:[(0,er.jsx)(dh,{}),(0,er.jsx)("span",{children:"Add Stage"})]})]})]})}),w&&(0,er.jsx)(Ur,{severity:"success",className:"mb-4",children:w}),_&&(0,er.jsx)(Ur,{severity:"error",className:"mb-4",children:_}),K&&(0,er.jsxs)(Ur,{severity:"error",className:"mb-4",children:["Failed to load available roles: ",K.message]}),Z&&(0,er.jsxs)(Ur,{severity:"error",className:"mb-4",children:["Failed to load available users: ",Z.message]}),ge.length>0&&(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsx)("div",{className:"border-b border-gray-200",children:(0,er.jsx)("nav",{className:"-mb-px flex space-x-8",children:ge.map(e=>(0,er.jsx)("button",{onClick:()=>P(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(L===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:e.name},e.id))})})}),(0,er.jsx)(zr,{children:(0,er.jsx)("div",{className:"p-6",children:V?(0,er.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Workflow Stages (",ve.length,")"]}),(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Drag and drop to reorder stages. Click on Roles/Users to manage permissions."})]}),ve.length>0?(0,er.jsx)(Tm,{sensors:H,collisionDetection:vu,onDragEnd:e=>{const{active:t,over:a}=e;if(t.id!==a.id){var r;const e=null===W||void 0===W||null===(r=W.workflowByCaseType)||void 0===r?void 0:r[L],n=(null===e||void 0===e?void 0:e.stages)||[],s=n.findIndex(e=>e.id===t.id),i=n.findIndex(e=>e.id===a.id),o=Wm(n,s,i);ne.mutate(o)}},children:(0,er.jsx)(Xm,{items:ve.map(e=>e.id),strategy:Gm,children:ve.map(e=>(0,er.jsx)(xh,{stage:e,onEdit:ue,onDelete:me,onRestore:he,onManageRoles:fe,onManageUsers:xe},e.id))})}):(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,er.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No workflow stages found"}),(0,er.jsx)("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first workflow stage."}),(0,er.jsx)(Fr,{onClick:()=>m(!0),children:"Add Workflow Stage"})]})]})})}),(0,er.jsx)(xn,{isOpen:u,onClose:pe,title:h?"Edit Workflow Stage":"Add New Workflow Stage",size:"lg",children:(0,er.jsxs)("form",{onSubmit:T(async e=>{j(""),N(""),h?ae.mutate({id:h.id,data:e}):te.mutate(e)}),className:"space-y-4",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Stage Name",required:!0,error:null===(t=q.stage_name)||void 0===t?void 0:t.message},M("stage_name",{required:"Stage name is required"})),{},{placeholder:"Enter stage name"})),(0,er.jsx)(Ir,Pe(Pe({label:"Stage Key",required:!0,error:null===(a=q.stage_key)||void 0===a?void 0:a.message},M("stage_key",{required:"Stage key is required",pattern:{value:/^[a-z_]+$/,message:"Stage key must contain only lowercase letters and underscores"}})),{},{placeholder:"e.g., draft_stage"}))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)("textarea",Pe(Pe({},M("description")),{},{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Enter stage description"}))]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Case Type"}),(0,er.jsxs)("select",Pe(Pe({},M("case_type_id",{valueAsNumber:!0})),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",defaultValue:L||"",children:[(0,er.jsx)("option",{value:"",children:"Select a case type"}),ge.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]}))]}),(0,er.jsx)(Ir,Pe(Pe({label:"Sort Order",type:"number",error:null===(n=q.sort_order)||void 0===n?void 0:n.message},M("sort_order",{valueAsNumber:!0,min:{value:0,message:"Sort order must be 0 or greater"}})),{},{placeholder:"0"}))]}),(0,er.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,er.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"SLA Configuration (Optional)"}),(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"SLA Value",type:"number",step:"0.01",error:null===(s=q.sla_value)||void 0===s?void 0:s.message},M("sla_value",{valueAsNumber:!0,min:{value:.01,message:"SLA value must be greater than 0"}})),{},{placeholder:"e.g., 2"})),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SLA Unit"}),(0,er.jsxs)("select",Pe(Pe({},M("sla_unit")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,er.jsx)("option",{value:"",children:"Select unit"}),(0,er.jsx)("option",{value:"hours",children:"Hours"}),(0,er.jsx)("option",{value:"days",children:"Days"}),(0,er.jsx)("option",{value:"business_days",children:"Business Days"}),(0,er.jsx)("option",{value:"weeks",children:"Weeks"}),(0,er.jsx)("option",{value:"months",children:"Months"})]}))]})]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsx)(Ir,Pe(Pe({label:"Warning Value (Optional)",type:"number",step:"0.01",error:null===(i=q.sla_warning_value)||void 0===i?void 0:i.message},M("sla_warning_value",{valueAsNumber:!0,min:{value:.01,message:"Warning value must be greater than 0"}})),{},{placeholder:"e.g., 1"})),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Warning Unit (Optional)"}),(0,er.jsxs)("select",Pe(Pe({},M("sla_warning_unit")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[(0,er.jsx)("option",{value:"",children:"Select unit"}),(0,er.jsx)("option",{value:"hours",children:"Hours"}),(0,er.jsx)("option",{value:"days",children:"Days"}),(0,er.jsx)("option",{value:"business_days",children:"Business Days"}),(0,er.jsx)("option",{value:"weeks",children:"Weeks"}),(0,er.jsx)("option",{value:"months",children:"Months"})]}))]})]}),(0,er.jsx)("p",{className:"text-xs text-gray-500",children:"Set a time limit for cases in this stage. If warning value is set, a warning notification will be sent when the warning time is reached."})]})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsxs)("div",{className:"flex space-x-3",children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:pe,disabled:te.isLoading||ae.isLoading,children:"Cancel"}),(0,er.jsxs)(Fr,{type:"submit",loading:te.isLoading||ae.isLoading,disabled:te.isLoading||ae.isLoading,children:[h?"Update":"Create"," Stage"]})]})})]})}),(0,er.jsxs)(xn,{isOpen:f,onClose:()=>x(!1),title:"Manage Roles - ".concat(null===v||void 0===v?void 0:v.stage_name),size:"lg",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Assign roles to this workflow stage and set their permissions."}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Current Roles"}),(0,er.jsx)("div",{className:"space-y-2",children:null===v||void 0===v||null===(o=v.roles)||void 0===o?void 0:o.map(e=>{var t,a,r,n,s,i;return(0,er.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,er.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50",children:[(0,er.jsxs)("div",{className:"flex-1",children:[(0,er.jsx)("div",{className:"font-medium text-gray-900",children:e.display_name||e.name}),O===e.id?null:(0,er.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Permissions: ",[e.can_approve&&"Approve",void 0!==e.can_reject?e.can_reject&&"Reject":null,e.can_review&&"Review",e.can_view&&"View"].filter(Boolean).join(", ")||"None"]})]}),(0,er.jsx)("div",{className:"flex gap-2",children:O===e.id?(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{const t=R[e.id]||{can_approve:e.can_approve||!1,can_reject:void 0!==e.can_reject&&e.can_reject,can_review:e.can_review||!1,can_view:!1!==e.can_view,can_edit:e.can_edit||!1,can_delete:e.can_delete||!1,can_create_case:e.can_create_case||!1,can_fill_case:e.can_fill_case||!1};oe.mutate({stageId:v.id,roleId:e.id,permissions:t})},disabled:oe.isLoading,className:"text-blue-600 hover:text-blue-700",children:oe.isLoading?"Saving...":"Save"}),(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{I(null),D({})},disabled:oe.isLoading,children:"Cancel"})]}):(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{I(e.id),D(Pe(Pe({},R),{},{[e.id]:{can_approve:e.can_approve||!1,can_reject:void 0!==e.can_reject&&e.can_reject,can_review:e.can_review||!1,can_view:!1!==e.can_view,can_edit:e.can_edit||!1,can_delete:e.can_delete||!1,can_create_case:e.can_create_case||!1,can_fill_case:e.can_fill_case||!1}}))},className:"text-blue-600 hover:text-blue-700",children:"Edit Permissions"}),(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,console.log("Removing role:",t,"from stage:",v.id),console.log("selectedStage:",v),void ie.mutate({stageId:v.id,roleId:t});var t},className:"text-red-600 hover:text-red-700",disabled:ie.isLoading,children:ie.isLoading?"Removing...":"Remove"})]})})]}),O===e.id&&(0,er.jsx)("div",{className:"p-4 bg-white border-t border-gray-200",children:(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-3",children:"Permission Settings:"}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,er.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"checkbox",checked:(null===(t=R[e.id])||void 0===t?void 0:t.can_approve)||!1,onChange:t=>D(Pe(Pe({},R),{},{[e.id]:Pe(Pe({},R[e.id]),{},{can_approve:t.target.checked})})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Can Approve"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"checkbox",checked:void 0!==(null===(a=R[e.id])||void 0===a?void 0:a.can_reject)&&R[e.id].can_reject,onChange:t=>D(Pe(Pe({},R),{},{[e.id]:Pe(Pe({},R[e.id]),{},{can_reject:t.target.checked})})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Can Reject"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"checkbox",checked:(null===(r=R[e.id])||void 0===r?void 0:r.can_review)||!1,onChange:t=>D(Pe(Pe({},R),{},{[e.id]:Pe(Pe({},R[e.id]),{},{can_review:t.target.checked})})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Can Review"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"checkbox",checked:!1!==(null===(n=R[e.id])||void 0===n?void 0:n.can_view),onChange:t=>D(Pe(Pe({},R),{},{[e.id]:Pe(Pe({},R[e.id]),{},{can_view:t.target.checked})})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Can View"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"checkbox",checked:(null===(s=R[e.id])||void 0===s?void 0:s.can_edit)||!1,onChange:t=>D(Pe(Pe({},R),{},{[e.id]:Pe(Pe({},R[e.id]),{},{can_edit:t.target.checked})})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Can Edit"})]}),(0,er.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,er.jsx)("input",{type:"checkbox",checked:(null===(i=R[e.id])||void 0===i?void 0:i.can_delete)||!1,onChange:t=>D(Pe(Pe({},R),{},{[e.id]:Pe(Pe({},R[e.id]),{},{can_delete:t.target.checked})})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,er.jsx)("span",{className:"text-sm text-gray-700",children:"Can Delete"})]})]}),(0,er.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["\ud83d\udca1 ",(0,er.jsx)("strong",{children:"Important:"}),' Enable "Can Approve" and "Can Reject" for workflow buttons to appear']})]})})]},e.id)})})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Add Role"}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsxs)("select",{value:k,onChange:e=>S(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,er.jsx)("option",{value:"",children:"Select a role to add"}),(()=>{console.log("selectedStage:",v),console.log("selectedStage.roles:",null===v||void 0===v?void 0:v.roles),console.log("availableRoles before filter:",be);const e=(null===v||void 0===v?void 0:v.roles)||[],t=be.filter(t=>{const a=e.some(e=>e.id===t.id);return console.log("Role ".concat(t.name," (ID: ").concat(t.id,") - already assigned:"),a),!a});return console.log("filteredRoles:",t),t.map(e=>(0,er.jsx)("option",{value:e.id,children:e.display_name||e.name},e.id))})()]}),(0,er.jsx)(Fr,{onClick:()=>{if(!k)return void j("Please select a role to add");se.mutate({stageId:v.id,roleId:k,permissions:{can_approve:!1,can_reject:!1,can_review:!1,can_view:!0,can_edit:!1,can_delete:!1,can_create_case:!1,can_fill_case:!1}},{onSuccess:()=>{S("")}})},disabled:!k||se.isLoading,className:"w-full",children:se.isLoading?"Adding...":"Add Role"})]})]})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{x(!1),S(""),I(null),D({})},children:"Close"})})]}),(0,er.jsxs)(xn,{isOpen:g,onClose:()=>y(!1),title:"Manage Users - ".concat(null===v||void 0===v?void 0:v.stage_name),size:"lg",children:[(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsx)("p",{className:"text-sm text-gray-600",children:"Assign specific users to this workflow stage and set their permissions."}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Current Users"}),(0,er.jsxs)("div",{className:"space-y-2",children:[(console.log("selectedStage in users modal:",v),console.log("selectedStage.users:",null===v||void 0===v?void 0:v.users),console.log("selectedStage.users length:",null===v||void 0===v||null===(je=v.users)||void 0===je?void 0:je.length),null),null===v||void 0===v||null===(l=v.users)||void 0===l?void 0:l.map(e=>(0,er.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("div",{className:"font-medium text-gray-900",children:e.full_name}),(0,er.jsxs)("div",{className:"text-sm text-gray-600",children:[e.email," \u2022 ",e.role]})]}),(0,er.jsx)(Fr,{variant:"outline",size:"sm",onClick:()=>{return t=e.id,void ce.mutate({stageId:v.id,userId:t});var t},className:"text-red-600 hover:text-red-700",disabled:ce.isLoading,children:ce.isLoading?"Removing...":"Remove"})]},e.id))]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Add User"}),(0,er.jsxs)("div",{className:"space-y-3",children:[(0,er.jsxs)("select",{value:C,onChange:e=>A(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,er.jsx)("option",{value:"",children:"Select a user to add"}),(()=>{console.log("selectedStage:",v),console.log("selectedStage.users:",null===v||void 0===v?void 0:v.users),console.log("availableUsers before filter:",_e);const e=(null===v||void 0===v?void 0:v.users)||[],t=_e.filter(t=>{const a=e.some(e=>e.id===t.id);console.log("User ".concat(t.full_name," (ID: ").concat(t.id,") - already assigned:"),a);const r=(null===v||void 0===v?void 0:v.roles)||[],n=r.some(e=>e.name===t.role);return console.log("User ".concat(t.full_name," has matching role:"),n),0===r.length?!a:!a&&n});return console.log("filteredUsers:",t),t.map(e=>(0,er.jsxs)("option",{value:e.id,children:[e.full_name," (",e.email,")"]},e.id))})()]}),(0,er.jsx)(Fr,{onClick:()=>{if(!C)return void j("Please select a user to add");le.mutate({stageId:v.id,userId:C,permissions:{can_approve:!0,can_review:!0,can_view:!0,can_create_case:!1,can_fill_case:!1}})},disabled:!C||le.isLoading,className:"w-full",children:le.isLoading?"Adding...":"Add User"})]})]})]}),(0,er.jsx)(xn.Footer,{children:(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{y(!1),A("")},children:"Close"})})]})]});var je},yh=["id"],vh=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),bh=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),_h=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),jh=()=>{const{user:e}=ar(),t=(0,Ce.useQueryClient)(),[a,n]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)({category_name:"",description:"",sort_order:"",is_active:!0}),{data:h,isLoading:p,error:f}=(0,Ce.useQuery)("welfareChecklistCategories",()=>Za.get("/api/welfare-checklist/categories").then(e=>e.data),{enabled:"super_admin"===(null===e||void 0===e?void 0:e.role)||"admin"===(null===e||void 0===e?void 0:e.role),retry:!1}),x=(0,Ce.useMutation)(async e=>(await Za.post("/api/welfare-checklist/categories",e)).data,{onSuccess:()=>{t.invalidateQueries("welfareChecklistCategories"),n(!1),v()}}),g=(0,Ce.useMutation)(async e=>{let{id:t}=e,a=Pr(e,yh);return(await Za.put("/api/welfare-checklist/categories/".concat(t),a)).data},{onSuccess:()=>{t.invalidateQueries("welfareChecklistCategories"),i(!1),v()}}),y=(0,Ce.useMutation)(async e=>(await Za.delete("/api/welfare-checklist/categories/".concat(e))).data,{onSuccess:()=>{t.invalidateQueries("welfareChecklistCategories"),l(!1),d(null)}}),v=()=>{m({category_name:"",description:"",sort_order:"",is_active:!0}),d(null)},b=()=>{v(),n(!0)},_=e=>{e.preventDefault(),a?x.mutate(u):g.mutate(Pe({id:c.id},u))};if("super_admin"!==(null===e||void 0===e?void 0:e.role)&&"admin"!==(null===e||void 0===e?void 0:e.role))return(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)(Ur,{severity:"error",children:"Access denied. Only administrators can access checklist categories management."})});if(p)return(0,er.jsx)("div",{className:"flex justify-center items-center h-64",children:"Loading..."});if(f)return(0,er.jsxs)("div",{className:"text-red-600",children:["Error: ",f.message]});const j=(null===h||void 0===h?void 0:h.categories)||[];return(0,er.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,er.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welfare Checklist Categories"}),(0,er.jsx)("p",{className:"text-gray-600 text-lg",children:'Manage categories for organizing checklist items (e.g., "Basic Details", "Counsellor\'s Assessment & Recommendations")'})]}),(0,er.jsx)("div",{className:"mb-6 flex space-x-4",children:(0,er.jsxs)(Fr,{onClick:b,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:[(0,er.jsx)(vh,{}),"Add Category"]})}),(0,er.jsxs)(zr,{className:"p-6",children:[(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Categories"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Organize checklist items into logical groups"})]}),0===j.length?(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,er.jsx)(vh,{})}),(0,er.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Categories"}),(0,er.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:"Get started by creating your first checklist category"}),(0,er.jsxs)(Fr,{onClick:b,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:[(0,er.jsx)(vh,{}),"Create First Category"]})]}):(0,er.jsxs)(rn,{children:[(0,er.jsx)(rn.Head,{children:(0,er.jsxs)(rn.Row,{children:[(0,er.jsx)(rn.Header,{children:"Sort Order"}),(0,er.jsx)(rn.Header,{children:"Category Name"}),(0,er.jsx)(rn.Header,{children:"Description"}),(0,er.jsx)(rn.Header,{children:"Items Count"}),(0,er.jsx)(rn.Header,{children:"Status"}),(0,er.jsx)(rn.Header,{children:"Actions"})]})}),(0,er.jsx)(rn.Body,{children:j.map(e=>(0,er.jsxs)(rn.Row,{className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"font-medium",children:e.sort_order})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"font-medium text-gray-900",children:e.category_name})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"text-gray-600",children:e.description||"No description"})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"text-gray-600",children:e.items_count||0})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(pn,{variant:e.is_active?"success":"secondary",size:"sm",children:e.is_active?"Active":"Inactive"})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{d(e),m({category_name:e.category_name,description:e.description||"",sort_order:e.sort_order,is_active:e.is_active}),i(!0)})(e),className:"flex items-center justify-center px-3 py-1 text-xs font-medium border-0 bg-blue-600 hover:bg-blue-700 text-white",children:[(0,er.jsx)(bh,{}),(0,er.jsx)("span",{className:"ml-1",children:"Edit"})]}),(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{d(e),l(!0)})(e),className:"flex items-center justify-center px-3 py-1 text-xs font-medium border-0 bg-red-600 hover:bg-red-700 text-white",children:[(0,er.jsx)(_h,{}),(0,er.jsx)("span",{className:"ml-1",children:"Delete"})]})]})})]},e.id))})]})]}),(0,er.jsx)(xn,{isOpen:a,onClose:()=>n(!1),title:"Create Checklist Category",children:(0,er.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,er.jsx)(Ir,{label:"Category Name *",value:u.category_name,onChange:e=>m(Pe(Pe({},u),{},{category_name:e.target.value})),placeholder:"e.g., Basic Details",required:!0}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)("textarea",{value:u.description,onChange:e=>m(Pe(Pe({},u),{},{description:e.target.value})),placeholder:"Enter category description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,er.jsx)(Ir,{label:"Sort Order *",type:"number",value:u.sort_order,onChange:e=>m(Pe(Pe({},u),{},{sort_order:parseInt(e.target.value)||0})),placeholder:"0",required:!0}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",disabled:x.isLoading,className:"bg-primary-600 hover:bg-primary-700 text-white",children:x.isLoading?"Creating...":"Create Category"})]})]})}),(0,er.jsx)(xn,{isOpen:s,onClose:()=>i(!1),title:"Edit Checklist Category",children:(0,er.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[(0,er.jsx)(Ir,{label:"Category Name *",value:u.category_name,onChange:e=>m(Pe(Pe({},u),{},{category_name:e.target.value})),placeholder:"e.g., Basic Details",required:!0}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,er.jsx)("textarea",{value:u.description,onChange:e=>m(Pe(Pe({},u),{},{description:e.target.value})),placeholder:"Enter category description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),(0,er.jsx)(Ir,{label:"Sort Order *",type:"number",value:u.sort_order,onChange:e=>m(Pe(Pe({},u),{},{sort_order:parseInt(e.target.value)||0})),placeholder:"0",required:!0}),(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)("input",{type:"checkbox",id:"is_active",checked:u.is_active,onChange:e=>m(Pe(Pe({},u),{},{is_active:e.target.checked})),className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500"}),(0,er.jsx)("label",{htmlFor:"is_active",className:"text-sm font-medium text-gray-700",children:"Active"})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",disabled:g.isLoading,className:"bg-primary-600 hover:bg-primary-700 text-white",children:g.isLoading?"Updating...":"Update Category"})]})]})}),(0,er.jsx)(xn,{isOpen:o,onClose:()=>l(!1),title:"Delete Checklist Category",children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("p",{className:"text-gray-600",children:['Are you sure you want to delete the category "',null===c||void 0===c?void 0:c.category_name,'"?']}),(0,er.jsx)("p",{className:"text-sm text-red-600",children:"This action cannot be undone. Make sure there are no items in this category."}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),(0,er.jsx)(Fr,{variant:"danger",onClick:()=>y.mutate(c.id),disabled:y.isLoading,children:y.isLoading?"Deleting...":"Delete Category"})]})]})})]})})},wh=["id"],Nh=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),kh=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Sh=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Ch=()=>{const{user:e}=ar(),t=(0,Ce.useQueryClient)(),[a,n]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)({category_id:"",form_section:"",checklist_detail:"",sort_order:"",is_active:!0,is_compulsory:!1}),{data:f}=(0,Ce.useQuery)("welfareChecklistCategories",()=>Za.get("/api/welfare-checklist/categories").then(e=>e.data),{enabled:("super_admin"===(null===e||void 0===e?void 0:e.role)||"admin"===(null===e||void 0===e?void 0:e.role))&&!u,retry:!1}),{data:x,isLoading:g,error:y}=(0,Ce.useQuery)(["welfareChecklistItems",u],()=>{const e=u?"/api/welfare-checklist/items?category_id=".concat(u):"/api/welfare-checklist/items";return Za.get(e).then(e=>e.data)},{enabled:"super_admin"===(null===e||void 0===e?void 0:e.role)||"admin"===(null===e||void 0===e?void 0:e.role),retry:!1}),v=(0,Ce.useMutation)(async e=>(await Za.post("/api/welfare-checklist/items",e)).data,{onSuccess:()=>{t.invalidateQueries("welfareChecklistItems"),n(!1),j()}}),b=(0,Ce.useMutation)(async e=>{let{id:t}=e,a=Pr(e,wh);return(await Za.put("/api/welfare-checklist/items/".concat(t),a)).data},{onSuccess:()=>{t.invalidateQueries("welfareChecklistItems"),i(!1),j()}}),_=(0,Ce.useMutation)(async e=>(await Za.delete("/api/welfare-checklist/items/".concat(e))).data,{onSuccess:()=>{t.invalidateQueries("welfareChecklistItems"),l(!1),d(null)}}),j=()=>{p({category_id:u||"",form_section:"",checklist_detail:"",sort_order:"",is_active:!0,is_compulsory:!1}),d(null)},w=()=>{j(),n(!0)},N=e=>{e.preventDefault(),a?v.mutate(h):b.mutate(Pe({id:c.id},h))};if("super_admin"!==(null===e||void 0===e?void 0:e.role)&&"admin"!==(null===e||void 0===e?void 0:e.role))return(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)(Ur,{severity:"error",children:"Access denied. Only administrators can access checklist items management."})});if(g)return(0,er.jsx)("div",{className:"flex justify-center items-center h-64",children:"Loading..."});if(y)return(0,er.jsxs)("div",{className:"text-red-600",children:["Error: ",y.message]});const k=(null===f||void 0===f?void 0:f.categories)||[],S=(null===x||void 0===x?void 0:x.items)||[];return(0,er.jsx)("div",{className:"p-6 bg-gray-50 min-h-screen",children:(0,er.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,er.jsxs)("div",{className:"mb-8",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Welfare Checklist Items"}),(0,er.jsx)("p",{className:"text-gray-600 text-lg",children:"Manage individual checklist items with form section numbers and details"})]}),(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsx)(zr,{className:"p-4",children:(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Filter by Category:"}),(0,er.jsxs)(ln,{value:u,onChange:e=>m(e.target.value),className:"w-64",children:[(0,er.jsx)(ln.Option,{value:"",children:"All Categories"}),k.map(e=>(0,er.jsx)(ln.Option,{value:e.id,children:e.category_name},e.id))]}),(0,er.jsx)(Fr,{onClick:()=>m(""),variant:"outline",size:"sm",children:"Clear Filter"})]})})}),(0,er.jsx)("div",{className:"mb-6 flex space-x-4",children:(0,er.jsxs)(Fr,{onClick:w,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:[(0,er.jsx)(Nh,{}),"Add Checklist Item"]})}),(0,er.jsxs)(zr,{className:"p-6",children:[(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Checklist Items"}),(0,er.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Individual checklist requirements with form section numbers"})]}),0===S.length?(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,er.jsx)(Nh,{})}),(0,er.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Checklist Items"}),(0,er.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:"Get started by creating your first checklist item"}),(0,er.jsxs)(Fr,{onClick:w,className:"bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 text-lg font-semibold shadow-lg hover:shadow-xl transition-all duration-200",children:[(0,er.jsx)(Nh,{}),"Create First Item"]})]}):(0,er.jsx)("div",{className:"w-full overflow-hidden",children:(0,er.jsxs)(rn,{className:"w-full table-auto",children:[(0,er.jsx)(rn.Head,{children:(0,er.jsxs)(rn.Row,{children:[(0,er.jsx)(rn.Header,{className:"w-[8%]",children:"Form Section"}),(0,er.jsx)(rn.Header,{className:"w-[12%]",children:"Category"}),(0,er.jsx)(rn.Header,{className:"w-[40%]",children:"Checklist Detail"}),(0,er.jsx)(rn.Header,{className:"w-[8%]",children:"Sort Order"}),(0,er.jsx)(rn.Header,{className:"w-[10%]",children:"Compulsory"}),(0,er.jsx)(rn.Header,{className:"w-[10%]",children:"Status"}),(0,er.jsx)(rn.Header,{className:"w-[12%]",children:"Actions"})]})}),(0,er.jsx)(rn.Body,{children:S.map(e=>(0,er.jsxs)(rn.Row,{className:"hover:bg-gray-50 transition-colors duration-150",children:[(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"font-medium text-primary-600",children:e.form_section})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"text-gray-600",children:e.category_name||"N/A"})}),(0,er.jsx)(rn.Cell,{className:"break-words",children:(0,er.jsx)("span",{className:"text-gray-900 break-words whitespace-normal",children:e.checklist_detail})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)("span",{className:"text-gray-600",children:e.sort_order})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(_n,{checked:e.is_compulsory||!1,onChange:t=>{var a;b.mutate({id:e.id,category_id:e.category_id||(null===(a=e.category)||void 0===a?void 0:a.id)||"",form_section:e.form_section,checklist_detail:e.checklist_detail,sort_order:e.sort_order,is_active:e.is_active,is_compulsory:t})},disabled:b.isLoading})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsx)(pn,{variant:e.is_active?"success":"secondary",size:"sm",children:e.is_active?"Active":"Inactive"})}),(0,er.jsx)(rn.Cell,{children:(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{var t;d(e),p({category_id:e.category_id||(null===(t=e.category)||void 0===t?void 0:t.id)||"",form_section:e.form_section,checklist_detail:e.checklist_detail,sort_order:e.sort_order,is_active:e.is_active,is_compulsory:e.is_compulsory||!1}),i(!0)})(e),className:"flex items-center justify-center px-3 py-1 text-xs font-medium border-0 bg-blue-600 hover:bg-blue-700 text-white",children:[(0,er.jsx)(kh,{}),(0,er.jsx)("span",{className:"ml-1",children:"Edit"})]}),(0,er.jsxs)(Fr,{variant:"outline",size:"sm",onClick:()=>(e=>{d(e),l(!0)})(e),className:"flex items-center justify-center px-3 py-1 text-xs font-medium border-0 bg-red-600 hover:bg-red-700 text-white",children:[(0,er.jsx)(Sh,{}),(0,er.jsx)("span",{className:"ml-1",children:"Delete"})]})]})})]},e.id))})]})})]}),(0,er.jsx)(xn,{isOpen:a,onClose:()=>n(!1),title:"Create Checklist Item",children:(0,er.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,er.jsxs)("select",{value:h.category_id,onChange:e=>p(Pe(Pe({},h),{},{category_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select a category"}),k.map(e=>(0,er.jsx)("option",{value:e.id,children:e.category_name},e.id))]})]}),(0,er.jsx)(Ir,{label:"Form Section *",value:h.form_section,onChange:e=>p(Pe(Pe({},h),{},{form_section:e.target.value})),placeholder:"e.g., 1, 1.2, 2.2, 3.1",required:!0}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Checklist Detail *"}),(0,er.jsx)("textarea",{value:h.checklist_detail,onChange:e=>p(Pe(Pe({},h),{},{checklist_detail:e.target.value})),placeholder:"Enter the checklist requirement/question",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,er.jsx)(Ir,{label:"Sort Order *",type:"number",value:h.sort_order,onChange:e=>p(Pe(Pe({},h),{},{sort_order:parseInt(e.target.value)||0})),placeholder:"0",required:!0}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>n(!1),children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",disabled:v.isLoading,className:"bg-primary-600 hover:bg-primary-700 text-white",children:v.isLoading?"Creating...":"Create Item"})]})]})}),(0,er.jsx)(xn,{isOpen:s,onClose:()=>i(!1),title:"Edit Checklist Item",children:(0,er.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,er.jsxs)("select",{value:h.category_id,onChange:e=>p(Pe(Pe({},h),{},{category_id:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[(0,er.jsx)("option",{value:"",children:"Select a category"}),k.map(e=>(0,er.jsx)("option",{value:e.id,children:e.category_name},e.id))]})]}),(0,er.jsx)(Ir,{label:"Form Section *",value:h.form_section,onChange:e=>p(Pe(Pe({},h),{},{form_section:e.target.value})),placeholder:"e.g., 1, 1.2, 2.2, 3.1",required:!0}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Checklist Detail *"}),(0,er.jsx)("textarea",{value:h.checklist_detail,onChange:e=>p(Pe(Pe({},h),{},{checklist_detail:e.target.value})),placeholder:"Enter the checklist requirement/question",rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0})]}),(0,er.jsx)(Ir,{label:"Sort Order *",type:"number",value:h.sort_order,onChange:e=>p(Pe(Pe({},h),{},{sort_order:parseInt(e.target.value)||0})),placeholder:"0",required:!0}),(0,er.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,er.jsx)(_n,{checked:h.is_compulsory,onChange:e=>p(Pe(Pe({},h),{},{is_compulsory:e}))}),(0,er.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Compulsory"})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",disabled:b.isLoading,className:"bg-primary-600 hover:bg-primary-700 text-white",children:b.isLoading?"Updating...":"Update Item"})]})]})}),(0,er.jsx)(xn,{isOpen:o,onClose:()=>l(!1),title:"Delete Checklist Item",children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("p",{className:"text-gray-600",children:['Are you sure you want to delete the checklist item "',null===c||void 0===c?void 0:c.checklist_detail,'"?']}),(0,er.jsx)("p",{className:"text-sm text-red-600",children:"This action cannot be undone."}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),(0,er.jsx)(Fr,{variant:"danger",onClick:()=>_.mutate(c.id),disabled:_.isLoading,children:_.isLoading?"Deleting...":"Delete Item"})]})]})})]})})},Ah=()=>(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Profile"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage your profile information"})]}),(0,er.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,er.jsx)("svg",{className:"w-8 h-8 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Profile Page"}),(0,er.jsx)("p",{className:"text-gray-600 mb-4",children:"This page is being updated to use Tailwind CSS"}),(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"The full functionality will be restored once the migration is complete."})]})})]}),Lh=()=>(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Notifications"}),(0,er.jsx)("p",{className:"text-gray-600",children:"View and manage notifications"})]}),(0,er.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,er.jsx)("svg",{className:"w-8 h-8 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4.828 7l2.586 2.586a2 2 0 002.828 0L12.828 7H4.828z"})})}),(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Notifications Page"}),(0,er.jsx)("p",{className:"text-gray-600 mb-4",children:"This page is being updated to use Tailwind CSS"}),(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"The full functionality will be restored once the migration is complete."})]})})]}),Ph=()=>(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"mb-6",children:[(0,er.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Reports"}),(0,er.jsx)("p",{className:"text-gray-600",children:"Generate and view reports"})]}),(0,er.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,er.jsxs)("div",{className:"text-center py-12",children:[(0,er.jsx)("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,er.jsx)("svg",{className:"w-8 h-8 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Reports Page"}),(0,er.jsx)("p",{className:"text-gray-600 mb-4",children:"This page is being updated to use Tailwind CSS"}),(0,er.jsx)("p",{className:"text-sm text-gray-500",children:"The full functionality will be restored once the migration is complete."})]})})]}),Eh=e=>{let{caseId:t,isViewOnly:a=!1,caseDetails:n=null}=e;const s=(0,Ce.useQueryClient)(),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[m,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(null),{data:b,isLoading:_}=(0,Ce.useQuery)(["payment-schedule",t],()=>Za.get("/api/cases/".concat(t,"/payment-schedule")).then(e=>e.data),{enabled:!!t}),j=(0,r.useMemo)(()=>{const e=[],t=new Date;let a=-6;"finance_disbursement"===(null===n||void 0===n?void 0:n.status_name)&&(!(null!==b&&void 0!==b&&b.schedules)||0===b.schedules.length)&&(a=0);for(let r=a;r<a+60;r++){const a=new Date(t.getFullYear(),t.getMonth()+r,1),n=a.toLocaleDateString("en-US",{month:"short"}).toUpperCase(),s=a.getFullYear();e.push({key:"".concat(s,"-").concat(a.getMonth()+1),label:"".concat(n," '").concat(s.toString().slice(-2)),year:s,month:a.getMonth()+1})}return e},[n,b]),w=(0,Ce.useMutation)(e=>Za.post("/api/cases/".concat(t,"/payment-schedule"),{schedules:e}),{onSuccess:()=>{s.invalidateQueries(["payment-schedule",t]),o(!1),c(null),u(null)}}),N=(0,Ce.useMutation)(e=>{let{scheduleId:a,disbursed_date:r,repayment_months:n}=e;return Za.post("/api/cases/".concat(t,"/payment-schedule/").concat(a,"/confirm-disbursement"),{disbursed_date:r,repayment_months:n})},{onSuccess:()=>{s.invalidateQueries(["payment-schedule",t]),g(!1),v(null)}}),k=(0,r.useMemo)(()=>{const e=(null===b||void 0===b?void 0:b.schedules)||[],t={qardan_hasana:{},enayat:{}};for(let a=1;a<=5;a++)t.qardan_hasana[a]=null,t.enayat[a]=null;return e.forEach(e=>{if("qardan_hasana"===e.payment_type||"enayat"===e.payment_type){const a=Number(e.year_number);a>=1&&a<=5&&a===Math.floor(a)?t[e.payment_type][a]=e:console.warn("Invalid year_number found:",e.year_number,"for schedule:",e.id)}}),t},[b]),S=function(e,t){return e?arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&"qardan_hasana"===e.payment_type?e.disbursement_year===t.year&&e.disbursement_month===t.month?e.disbursement_amount:null:"enayat"===e.payment_type&&e.disbursement_year===t.year&&e.disbursement_month===t.month?e.disbursement_amount:null:null},C=(e,t,r,n)=>{a||null!==n&&void 0!==n&&n.is_disbursed||(u({paymentType:e,yearNumber:t,month:r}),c(n?{payment_type:e,year_number:t,disbursement_year:n.disbursement_year,disbursement_month:n.disbursement_month,disbursement_amount:n.disbursement_amount,repayment_months:n.repayment_months||12,repayment_start_year:n.repayment_start_year||r.year+1,repayment_start_month:n.repayment_start_month||1}:{payment_type:e,year_number:t,disbursement_year:r.year,disbursement_month:r.month,disbursement_amount:"",repayment_months:12,repayment_start_year:r.year+1,repayment_start_month:1}),o(!0))},A=e=>{e&&!e.is_disbursed&&(v({scheduleId:e.id,schedule:e,disbursed_date:e.disbursed_date||(new Date).toISOString().split("T")[0],repayment_months:e.repayment_months||12}),g(!0))},L=(e,t)=>{f({paymentType:e,yearNumber:t}),h(!0)},P=(0,r.useMemo)(()=>{const e=(null===b||void 0===b?void 0:b.schedules)||[];let t=0,a=0;return e.forEach(e=>{const r=parseFloat(e.disbursement_amount)||0;"qardan_hasana"===e.payment_type&&e.year_number>=1&&e.year_number<=5?t+=r:"enayat"===e.payment_type&&e.year_number>=1&&e.year_number<=5&&(a+=r)}),{totalQardanHasana:t,totalEnayat:a,totalBalance:0}},[b]);return _?(0,er.jsx)("div",{className:"text-center py-4",children:"Loading payment schedule..."}):(0,er.jsxs)(zr,{className:"mt-6",children:[(0,er.jsxs)(zr.Header,{children:[(0,er.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Payment Schedule"})}),!a&&(0,er.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,er.jsxs)("p",{className:"text-sm text-gray-700 mb-3",children:[(0,er.jsx)("strong",{children:"How to add a payment schedule:"})," Click on any cell in the timeline below, or use the buttons to add a new payment entry."]}),(0,er.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,er.jsxs)(Fr,{variant:"primary",size:"md",onClick:()=>{let e=1;for(let t=1;t<=5;t++)if(!k.qardan_hasana[t]){e=t;break}c({payment_type:"qardan_hasana",year_number:e,disbursement_year:(new Date).getFullYear(),disbursement_month:(new Date).getMonth()+1,disbursement_amount:"",repayment_months:12,repayment_start_year:(new Date).getFullYear()+1,repayment_start_month:1}),o(!0)},className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,er.jsx)("span",{children:"Add Qardan Hasana"})]}),(0,er.jsxs)(Fr,{variant:"secondary",size:"md",onClick:()=>{let e=1;for(let t=1;t<=5;t++)if(!k.enayat[t]){e=t;break}c({payment_type:"enayat",year_number:e,disbursement_year:(new Date).getFullYear(),disbursement_month:(new Date).getMonth()+1,disbursement_amount:"",repayment_months:null,repayment_start_year:null,repayment_start_month:null}),o(!0)},className:"flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,er.jsx)("span",{children:"Add Enayat"})]})]})]}),a&&(0,er.jsx)("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,er.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,er.jsx)("strong",{children:"View Only Mode:"})," You don't have permission to edit payment schedules. Contact an administrator if you need edit access."]})}),(0,er.jsxs)("div",{className:"flex items-center justify-start space-x-6 mt-4 pt-4 border-t border-gray-200",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"text-sm text-gray-600",children:"Total Qardan Hasana: "}),(0,er.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["\u20b9",P.totalQardanHasana.toLocaleString("en-IN")]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"text-sm text-gray-600",children:"Total Enayat: "}),(0,er.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["\u20b9",P.totalEnayat.toLocaleString("en-IN")]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"text-sm text-gray-600",children:"Total Balance: "}),(0,er.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:["\u20b9",P.totalBalance.toLocaleString("en-IN")]})]})]})]}),(0,er.jsx)(zr.Content,{children:(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("div",{className:"min-w-full",style:{width:"max-content"},children:[(0,er.jsxs)("div",{className:"flex border-b border-gray-300 sticky top-0 bg-white z-10",children:[(0,er.jsx)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 font-semibold text-sm bg-gray-50",children:"Payment Type / Year"}),j.map(e=>(0,er.jsx)("div",{className:"w-24 flex-shrink-0 border-r border-gray-300 p-2 text-center text-xs font-medium bg-gray-50",children:e.label},e.key))]}),(e=>{const t=k.qardan_hasana[1],n=t&&"qardan_hasana"===t.payment_type&&(null===(e=t.repayments)||void 0===e?void 0:e.length)>0;return(0,er.jsxs)(r.Fragment,{children:[(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-white flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&t&&!t.is_disbursed&&(0,er.jsx)("button",{onClick:()=>L("qardan_hasana",1),className:"text-red-500 hover:text-red-700",title:"Remove schedule",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-900","data-year":1,children:["QH Year 1",(null===t||void 0===t?void 0:t.is_disbursed)&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Disbursed"})]})]}),!a&&t&&!t.is_disbursed&&(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>A(t),className:"ml-2 text-xs",children:"Confirm"})]}),j.map(e=>{const r=S(t,e,!0),n=t&&t.disbursement_year===e.year&&t.disbursement_month===e.month;return(0,er.jsx)("div",{onClick:()=>!a&&!(null!==t&&void 0!==t&&t.is_disbursed)&&C("qardan_hasana",1,e,t),className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(n?"bg-blue-600 text-white font-semibold":null!==t&&void 0!==t&&t.is_disbursed?"bg-gray-100 cursor-not-allowed":a?"":"cursor-pointer hover:bg-blue-50 hover:border-blue-300"),title:null!==t&&void 0!==t&&t.is_disbursed?"Disbursed - Cannot edit":a?"":"Click to add/edit payment",children:r?"\u20b9".concat(r.toLocaleString("en-IN",{maximumFractionDigits:2})):a||null!==t&&void 0!==t&&t.is_disbursed?"-":"Click"},e.key)})]}),n&&(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-gray-50 flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,er.jsx)("span",{className:"text-sm text-gray-600","data-year":1,dangerouslySetInnerHTML:{__html:"Repayments (QH Year 1)"}})]}),j.map(e=>{var a;const r=null===(a=t.repayments)||void 0===a?void 0:a.find(t=>t.repayment_year===e.year&&t.repayment_month===e.month);return(0,er.jsx)("div",{className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(r?"bg-blue-100 text-blue-900 font-semibold":"text-gray-400"),children:r?"\u20b9".concat(r.repayment_amount.toLocaleString("en-IN",{maximumFractionDigits:2})):"number"},e.key)})]})]},"qh-1")})(),(e=>{const t=k.qardan_hasana[2],n=t&&"qardan_hasana"===t.payment_type&&(null===(e=t.repayments)||void 0===e?void 0:e.length)>0;return(0,er.jsxs)(r.Fragment,{children:[(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-white flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&t&&!t.is_disbursed&&(0,er.jsx)("button",{onClick:()=>L("qardan_hasana",2),className:"text-red-500 hover:text-red-700",title:"Remove schedule",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-900","data-year":2,children:["QH Year 2",(null===t||void 0===t?void 0:t.is_disbursed)&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Disbursed"})]})]}),!a&&t&&!t.is_disbursed&&(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>A(t),className:"ml-2 text-xs",children:"Confirm"})]}),j.map(e=>{const r=S(t,e,!0),n=t&&t.disbursement_year===e.year&&t.disbursement_month===e.month;return(0,er.jsx)("div",{onClick:()=>!a&&!(null!==t&&void 0!==t&&t.is_disbursed)&&C("qardan_hasana",2,e,t),className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(n?"bg-blue-600 text-white font-semibold":null!==t&&void 0!==t&&t.is_disbursed?"bg-gray-100 cursor-not-allowed":a?"":"cursor-pointer hover:bg-blue-50 hover:border-blue-300"),title:null!==t&&void 0!==t&&t.is_disbursed?"Disbursed - Cannot edit":a?"":"Click to add/edit payment",children:r?"\u20b9".concat(r.toLocaleString("en-IN",{maximumFractionDigits:2})):a||null!==t&&void 0!==t&&t.is_disbursed?"-":"Click"},e.key)})]}),n&&(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-gray-50 flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,er.jsx)("span",{className:"text-sm text-gray-600","data-year":2,dangerouslySetInnerHTML:{__html:"Repayments (QH Year 2)"}})]}),j.map(e=>{var a;const r=null===(a=t.repayments)||void 0===a?void 0:a.find(t=>t.repayment_year===e.year&&t.repayment_month===e.month);return(0,er.jsx)("div",{className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(r?"bg-blue-100 text-blue-900 font-semibold":"text-gray-400"),children:r?"\u20b9".concat(r.repayment_amount.toLocaleString("en-IN",{maximumFractionDigits:2})):"number"},e.key)})]})]},"qh-2")})(),(e=>{const t=k.qardan_hasana[3],n=t&&"qardan_hasana"===t.payment_type&&(null===(e=t.repayments)||void 0===e?void 0:e.length)>0;return(0,er.jsxs)(r.Fragment,{children:[(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-white flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&t&&!t.is_disbursed&&(0,er.jsx)("button",{onClick:()=>L("qardan_hasana",3),className:"text-red-500 hover:text-red-700",title:"Remove schedule",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-900","data-year":3,children:["QH Year 3",(null===t||void 0===t?void 0:t.is_disbursed)&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Disbursed"})]})]}),!a&&t&&!t.is_disbursed&&(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>A(t),className:"ml-2 text-xs",children:"Confirm"})]}),j.map(e=>{const r=S(t,e,!0),n=t&&t.disbursement_year===e.year&&t.disbursement_month===e.month;return(0,er.jsx)("div",{onClick:()=>!a&&!(null!==t&&void 0!==t&&t.is_disbursed)&&C("qardan_hasana",3,e,t),className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(n?"bg-blue-600 text-white font-semibold":null!==t&&void 0!==t&&t.is_disbursed?"bg-gray-100 cursor-not-allowed":a?"":"cursor-pointer hover:bg-blue-50 hover:border-blue-300"),title:null!==t&&void 0!==t&&t.is_disbursed?"Disbursed - Cannot edit":a?"":"Click to add/edit payment",children:r?"\u20b9".concat(r.toLocaleString("en-IN",{maximumFractionDigits:2})):a||null!==t&&void 0!==t&&t.is_disbursed?"-":"Click"},e.key)})]}),n&&(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-gray-50 flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,er.jsx)("span",{className:"text-sm text-gray-600","data-year":3,dangerouslySetInnerHTML:{__html:"Repayments (QH Year 3)"}})]}),j.map(e=>{var a;const r=null===(a=t.repayments)||void 0===a?void 0:a.find(t=>t.repayment_year===e.year&&t.repayment_month===e.month);return(0,er.jsx)("div",{className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(r?"bg-blue-100 text-blue-900 font-semibold":"text-gray-400"),children:r?"\u20b9".concat(r.repayment_amount.toLocaleString("en-IN",{maximumFractionDigits:2})):"number"},e.key)})]})]},"qh-3")})(),(e=>{const t=k.qardan_hasana[4],n=t&&"qardan_hasana"===t.payment_type&&(null===(e=t.repayments)||void 0===e?void 0:e.length)>0;return(0,er.jsxs)(r.Fragment,{children:[(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-white flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&t&&!t.is_disbursed&&(0,er.jsx)("button",{onClick:()=>L("qardan_hasana",4),className:"text-red-500 hover:text-red-700",title:"Remove schedule",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-900","data-year":4,children:["QH Year 4",(null===t||void 0===t?void 0:t.is_disbursed)&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Disbursed"})]})]}),!a&&t&&!t.is_disbursed&&(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>A(t),className:"ml-2 text-xs",children:"Confirm"})]}),j.map(e=>{const r=S(t,e,!0),n=t&&t.disbursement_year===e.year&&t.disbursement_month===e.month;return(0,er.jsx)("div",{onClick:()=>!a&&!(null!==t&&void 0!==t&&t.is_disbursed)&&C("qardan_hasana",4,e,t),className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(n?"bg-blue-600 text-white font-semibold":null!==t&&void 0!==t&&t.is_disbursed?"bg-gray-100 cursor-not-allowed":a?"":"cursor-pointer hover:bg-blue-50 hover:border-blue-300"),title:null!==t&&void 0!==t&&t.is_disbursed?"Disbursed - Cannot edit":a?"":"Click to add/edit payment",children:r?"\u20b9".concat(r.toLocaleString("en-IN",{maximumFractionDigits:2})):a||null!==t&&void 0!==t&&t.is_disbursed?"-":"Click"},e.key)})]}),n&&(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-gray-50 flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,er.jsx)("span",{className:"text-sm text-gray-600","data-year":4,dangerouslySetInnerHTML:{__html:"Repayments (QH Year 4)"}})]}),j.map(e=>{var a;const r=null===(a=t.repayments)||void 0===a?void 0:a.find(t=>t.repayment_year===e.year&&t.repayment_month===e.month);return(0,er.jsx)("div",{className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(r?"bg-blue-100 text-blue-900 font-semibold":"text-gray-400"),children:r?"\u20b9".concat(r.repayment_amount.toLocaleString("en-IN",{maximumFractionDigits:2})):"number"},e.key)})]})]},"qh-4")})(),(e=>{const t=k.qardan_hasana[5],n=t&&"qardan_hasana"===t.payment_type&&(null===(e=t.repayments)||void 0===e?void 0:e.length)>0;return(0,er.jsxs)(r.Fragment,{children:[(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-white flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&t&&!t.is_disbursed&&(0,er.jsx)("button",{onClick:()=>L("qardan_hasana",5),className:"text-red-500 hover:text-red-700",title:"Remove schedule",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-900","data-year":5,children:["QH Year 5",(null===t||void 0===t?void 0:t.is_disbursed)&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Disbursed"})]})]}),!a&&t&&!t.is_disbursed&&(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>A(t),className:"ml-2 text-xs",children:"Confirm"})]}),j.map(e=>{const r=S(t,e,!0),n=t&&t.disbursement_year===e.year&&t.disbursement_month===e.month;return(0,er.jsx)("div",{onClick:()=>!a&&!(null!==t&&void 0!==t&&t.is_disbursed)&&C("qardan_hasana",5,e,t),className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(n?"bg-blue-600 text-white font-semibold":null!==t&&void 0!==t&&t.is_disbursed?"bg-gray-100 cursor-not-allowed":a?"":"cursor-pointer hover:bg-blue-50 hover:border-blue-300"),title:null!==t&&void 0!==t&&t.is_disbursed?"Disbursed - Cannot edit":a?"":"Click to add/edit payment",children:r?"\u20b9".concat(r.toLocaleString("en-IN",{maximumFractionDigits:2})):a||null!==t&&void 0!==t&&t.is_disbursed?"-":"Click"},e.key)})]}),n&&(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-gray-50 flex items-center space-x-2",children:[(0,er.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,er.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,er.jsx)("span",{className:"text-sm text-gray-600","data-year":5,dangerouslySetInnerHTML:{__html:"Repayments (QH Year 5)"}})]}),j.map(e=>{var a;const r=null===(a=t.repayments)||void 0===a?void 0:a.find(t=>t.repayment_year===e.year&&t.repayment_month===e.month);return(0,er.jsx)("div",{className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(r?"bg-blue-100 text-blue-900 font-semibold":"text-gray-400"),children:r?"\u20b9".concat(r.repayment_amount.toLocaleString("en-IN",{maximumFractionDigits:2})):"number"},e.key)})]})]},"qh-5")})(),(()=>{const e=k.enayat[1];return(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-white flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&e&&!e.is_disbursed&&(0,er.jsx)("button",{onClick:()=>L("enayat",1),className:"text-red-500 hover:text-red-700",title:"Remove schedule",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-900","data-year":1,"data-type":"enayat",children:["Enayat Year 1",(null===e||void 0===e?void 0:e.is_disbursed)&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Disbursed"})]})]}),!a&&e&&!e.is_disbursed&&(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>A(e),className:"ml-2 text-xs",children:"Confirm"})]}),j.map(t=>{const r=S(e,t),n=e&&e.disbursement_year===t.year&&e.disbursement_month===t.month;return(0,er.jsx)("div",{onClick:()=>!a&&!(null!==e&&void 0!==e&&e.is_disbursed)&&C("enayat",1,t,e),className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(n?"bg-blue-600 text-white font-semibold":null!==e&&void 0!==e&&e.is_disbursed?"bg-gray-100 cursor-not-allowed":a?"":"cursor-pointer hover:bg-blue-50 hover:border-blue-300"),title:null!==e&&void 0!==e&&e.is_disbursed?"Disbursed - Cannot edit":a?"":"Click to add/edit payment",children:r?"\u20b9".concat(r.toLocaleString("en-IN",{maximumFractionDigits:2})):a||null!==e&&void 0!==e&&e.is_disbursed?"-":"Click"},t.key)})]},"enayat-1")})(),(()=>{const e=k.enayat[2];return(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-white flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&e&&!e.is_disbursed&&(0,er.jsx)("button",{onClick:()=>L("enayat",2),className:"text-red-500 hover:text-red-700",title:"Remove schedule",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-900","data-year":2,"data-type":"enayat",children:["Enayat Year 2",(null===e||void 0===e?void 0:e.is_disbursed)&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Disbursed"})]})]}),!a&&e&&!e.is_disbursed&&(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>A(e),className:"ml-2 text-xs",children:"Confirm"})]}),j.map(t=>{const r=S(e,t),n=e&&e.disbursement_year===t.year&&e.disbursement_month===t.month;return(0,er.jsx)("div",{onClick:()=>!a&&!(null!==e&&void 0!==e&&e.is_disbursed)&&C("enayat",2,t,e),className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(n?"bg-blue-600 text-white font-semibold":null!==e&&void 0!==e&&e.is_disbursed?"bg-gray-100 cursor-not-allowed":a?"":"cursor-pointer hover:bg-blue-50 hover:border-blue-300"),title:null!==e&&void 0!==e&&e.is_disbursed?"Disbursed - Cannot edit":a?"":"Click to add/edit payment",children:r?"\u20b9".concat(r.toLocaleString("en-IN",{maximumFractionDigits:2})):a||null!==e&&void 0!==e&&e.is_disbursed?"-":"Click"},t.key)})]},"enayat-2")})(),(()=>{const e=k.enayat[3];return(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-white flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&e&&!e.is_disbursed&&(0,er.jsx)("button",{onClick:()=>L("enayat",3),className:"text-red-500 hover:text-red-700",title:"Remove schedule",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-900","data-year":3,"data-type":"enayat",children:["Enayat Year 3",(null===e||void 0===e?void 0:e.is_disbursed)&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Disbursed"})]})]}),!a&&e&&!e.is_disbursed&&(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>A(e),className:"ml-2 text-xs",children:"Confirm"})]}),j.map(t=>{const r=S(e,t),n=e&&e.disbursement_year===t.year&&e.disbursement_month===t.month;return(0,er.jsx)("div",{onClick:()=>!a&&!(null!==e&&void 0!==e&&e.is_disbursed)&&C("enayat",3,t,e),className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(n?"bg-blue-600 text-white font-semibold":null!==e&&void 0!==e&&e.is_disbursed?"bg-gray-100 cursor-not-allowed":a?"":"cursor-pointer hover:bg-blue-50 hover:border-blue-300"),title:null!==e&&void 0!==e&&e.is_disbursed?"Disbursed - Cannot edit":a?"":"Click to add/edit payment",children:r?"\u20b9".concat(r.toLocaleString("en-IN",{maximumFractionDigits:2})):a||null!==e&&void 0!==e&&e.is_disbursed?"-":"Click"},t.key)})]},"enayat-3")})(),(()=>{const e=k.enayat[4];return(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-white flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&e&&!e.is_disbursed&&(0,er.jsx)("button",{onClick:()=>L("enayat",4),className:"text-red-500 hover:text-red-700",title:"Remove schedule",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-900","data-year":4,"data-type":"enayat",children:["Enayat Year 4",(null===e||void 0===e?void 0:e.is_disbursed)&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Disbursed"})]})]}),!a&&e&&!e.is_disbursed&&(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>A(e),className:"ml-2 text-xs",children:"Confirm"})]}),j.map(t=>{const r=S(e,t),n=e&&e.disbursement_year===t.year&&e.disbursement_month===t.month;return(0,er.jsx)("div",{onClick:()=>!a&&!(null!==e&&void 0!==e&&e.is_disbursed)&&C("enayat",4,t,e),className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(n?"bg-blue-600 text-white font-semibold":null!==e&&void 0!==e&&e.is_disbursed?"bg-gray-100 cursor-not-allowed":a?"":"cursor-pointer hover:bg-blue-50 hover:border-blue-300"),title:null!==e&&void 0!==e&&e.is_disbursed?"Disbursed - Cannot edit":a?"":"Click to add/edit payment",children:r?"\u20b9".concat(r.toLocaleString("en-IN",{maximumFractionDigits:2})):a||null!==e&&void 0!==e&&e.is_disbursed?"-":"Click"},t.key)})]},"enayat-4")})(),(()=>{const e=k.enayat[5];return(0,er.jsxs)("div",{className:"flex border-b border-gray-200 hover:bg-gray-50",children:[(0,er.jsxs)("div",{className:"w-60 flex-shrink-0 border-r border-gray-300 p-2 bg-white flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"flex items-center space-x-2",children:[!a&&e&&!e.is_disbursed&&(0,er.jsx)("button",{onClick:()=>L("enayat",5),className:"text-red-500 hover:text-red-700",title:"Remove schedule",children:(0,er.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,er.jsxs)("span",{className:"text-sm font-medium text-gray-900","data-year":5,"data-type":"enayat",children:["Enayat Year 5",(null===e||void 0===e?void 0:e.is_disbursed)&&(0,er.jsx)("span",{className:"ml-2 text-xs bg-green-100 text-green-800 px-2 py-0.5 rounded",children:"Disbursed"})]})]}),!a&&e&&!e.is_disbursed&&(0,er.jsx)(Fr,{variant:"primary",size:"sm",onClick:()=>A(e),className:"ml-2 text-xs",children:"Confirm"})]}),j.map(t=>{const r=S(e,t),n=e&&e.disbursement_year===t.year&&e.disbursement_month===t.month;return(0,er.jsx)("div",{onClick:()=>!a&&!(null!==e&&void 0!==e&&e.is_disbursed)&&C("enayat",5,t,e),className:"w-24 flex-shrink-0 border-r border-gray-200 p-2 text-center text-xs ".concat(n?"bg-blue-600 text-white font-semibold":null!==e&&void 0!==e&&e.is_disbursed?"bg-gray-100 cursor-not-allowed":a?"":"cursor-pointer hover:bg-blue-50 hover:border-blue-300"),title:null!==e&&void 0!==e&&e.is_disbursed?"Disbursed - Cannot edit":a?"":"Click to add/edit payment",children:r?"\u20b9".concat(r.toLocaleString("en-IN",{maximumFractionDigits:2})):a||null!==e&&void 0!==e&&e.is_disbursed?"-":"Click"},t.key)})]},"enayat-5")})()]})})}),i&&(0,er.jsx)(xn,{isOpen:i,onClose:()=>{o(!1),c(null),u(null)},title:"Configure Payment Schedule",children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Payment Type"}),(0,er.jsxs)(ln,{value:l.payment_type,onChange:e=>{var t;const a=e.target.value,r=null===b||void 0===b||null===(t=b.schedules)||void 0===t?void 0:t.find(e=>e.payment_type===a&&e.year_number===l.year_number);r||c(Pe(Pe({},l),{},{payment_type:a,repayment_months:"qardan_hasana"===a?l.repayment_months||12:null,repayment_start_year:"qardan_hasana"===a?l.repayment_start_year||l.disbursement_year+1:null,repayment_start_month:"qardan_hasana"===a?l.repayment_start_month||1:null}))},children:[(0,er.jsx)(ln.Option,{value:"qardan_hasana",children:"Qardan Hasana"}),(0,er.jsx)(ln.Option,{value:"enayat",children:"Enayat"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Year Number"}),(0,er.jsx)(ln,{value:l.year_number,onChange:e=>{var t;const a=parseInt(e.target.value),r=null===b||void 0===b||null===(t=b.schedules)||void 0===t?void 0:t.find(e=>e.payment_type===l.payment_type&&e.year_number===a);r||c(Pe(Pe({},l),{},{year_number:a}))},children:[1,2,3,4,5].map(e=>(0,er.jsxs)(ln.Option,{value:e,children:["Year ",e]},e))})]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disbursement Year"}),(0,er.jsx)(ln,{value:l.disbursement_year,onChange:e=>c(Pe(Pe({},l),{},{disbursement_year:parseInt(e.target.value)})),children:Array.from({length:10},(e,t)=>(new Date).getFullYear()+t-2).map(e=>(0,er.jsx)(ln.Option,{value:e,children:e},e))})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disbursement Month"}),(0,er.jsx)(ln,{value:l.disbursement_month,onChange:e=>c(Pe(Pe({},l),{},{disbursement_month:parseInt(e.target.value)})),children:[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}].map(e=>(0,er.jsx)(ln.Option,{value:e.value,children:e.label},e.value))})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),(0,er.jsx)(Ir,{type:"number",value:l.disbursement_amount,onChange:e=>c(Pe(Pe({},l),{},{disbursement_amount:e.target.value})),placeholder:"Enter amount",min:"0",step:"0.01"})]}),"qardan_hasana"===l.payment_type&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Repayment Months"}),(0,er.jsx)(Ir,{type:"number",value:l.repayment_months,onChange:e=>c(Pe(Pe({},l),{},{repayment_months:parseInt(e.target.value)||12})),placeholder:"Number of months",min:"1"})]}),(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Repayment Start Year"}),(0,er.jsx)(ln,{value:l.repayment_start_year,onChange:e=>c(Pe(Pe({},l),{},{repayment_start_year:parseInt(e.target.value)})),children:Array.from({length:10},(e,t)=>(new Date).getFullYear()+t-1).map(e=>(0,er.jsx)(ln.Option,{value:e,children:e},e))})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Repayment Start Month"}),(0,er.jsx)(ln,{value:l.repayment_start_month,onChange:e=>c(Pe(Pe({},l),{},{repayment_start_month:parseInt(e.target.value)})),children:[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}].map(e=>(0,er.jsx)(ln.Option,{value:e.value,children:e.label},e.value))})]})]}),l.disbursement_amount&&l.repayment_months&&(0,er.jsxs)(Ur,{severity:"info",children:["Monthly repayment will be: \u20b9",(parseFloat(l.disbursement_amount)/l.repayment_months).toLocaleString("en-IN",{maximumFractionDigits:2})]})]}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:()=>{o(!1),c(null),u(null)},children:"Cancel"}),(0,er.jsx)(Fr,{variant:"primary",onClick:()=>{if(!l.disbursement_amount||parseFloat(l.disbursement_amount)<=0)return void alert("Please enter a valid disbursement amount");const e=(null===b||void 0===b?void 0:b.schedules)||[],t=e.find(e=>e.is_disbursed&&e.payment_type===l.payment_type&&e.year_number===l.year_number);if(t)return void alert("Cannot edit a disbursed schedule. Please use the Confirm Disbursement button to update.");const a=e.filter(e=>!e.is_disbursed&&!(e.payment_type===l.payment_type&&e.year_number===l.year_number)),r={payment_type:l.payment_type,year_number:l.year_number,disbursement_year:parseInt(l.disbursement_year),disbursement_month:parseInt(l.disbursement_month),disbursement_amount:parseFloat(l.disbursement_amount),repayment_months:"qardan_hasana"===l.payment_type?parseInt(l.repayment_months):null,repayment_start_year:"qardan_hasana"===l.payment_type?parseInt(l.repayment_start_year):null,repayment_start_month:"qardan_hasana"===l.payment_type?parseInt(l.repayment_start_month):null};a.push(r),w.mutate(a)},loading:w.isLoading,children:"Apply"})]})]})}),(0,er.jsxs)(xn,{isOpen:m,onClose:()=>{h(!1),f(null)},title:"Remove Payment Schedule",size:"sm",children:[(0,er.jsx)("div",{className:"space-y-4",children:(0,er.jsx)(Ur,{severity:"warning",children:"Are you sure you want to remove this payment schedule? This action cannot be undone."})}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:()=>{h(!1),f(null)},children:"Cancel"}),(0,er.jsx)(Fr,{variant:"danger",onClick:()=>{if(!p)return;const e=(null===b||void 0===b?void 0:b.schedules)||[],t=e.find(e=>e.payment_type===p.paymentType&&e.year_number===p.yearNumber);if(null!==t&&void 0!==t&&t.is_disbursed)return alert("Cannot delete a disbursed schedule. Please contact an administrator."),h(!1),void f(null);const a=e.filter(e=>!(e.payment_type===p.paymentType&&e.year_number===p.yearNumber));w.mutate(a),h(!1),f(null)},loading:w.isLoading,children:"Remove"})]})]}),x&&y&&(0,er.jsx)(xn,{isOpen:x,onClose:()=>{g(!1),v(null)},title:"Confirm Disbursement",size:"md",children:(0,er.jsxs)("div",{className:"space-y-4",children:[(0,er.jsxs)(Ur,{severity:"info",children:[(0,er.jsx)("strong",{children:"Amount to be disbursed:"})," \u20b9",y.schedule.disbursement_amount.toLocaleString("en-IN",{maximumFractionDigits:2})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Date of Amount Disburse ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)(Ir,{type:"date",value:y.disbursed_date,onChange:e=>v(Pe(Pe({},y),{},{disbursed_date:e.target.value})),required:!0})]}),"qardan_hasana"===y.schedule.payment_type&&(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Repayment Months ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)(Ir,{type:"number",value:y.repayment_months,onChange:e=>v(Pe(Pe({},y),{},{repayment_months:parseInt(e.target.value)||12})),placeholder:"Number of months",min:"1",required:!0}),y.schedule.disbursement_amount&&y.repayment_months&&(0,er.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:["Monthly repayment will be: \u20b9",(y.schedule.disbursement_amount/y.repayment_months).toLocaleString("en-IN",{maximumFractionDigits:2})]})]}),(0,er.jsx)(Ur,{severity:"warning",children:"Once confirmed, this disbursement cannot be edited. The amount will be locked and repayments will be calculated based on the disbursement date."}),(0,er.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,er.jsx)(Fr,{variant:"outline",onClick:()=>{g(!1),v(null)},children:"Cancel"}),(0,er.jsx)(Fr,{variant:"primary",onClick:()=>{y.disbursed_date?"qardan_hasana"!==y.schedule.payment_type||y.repayment_months?N.mutate({scheduleId:y.scheduleId,disbursed_date:y.disbursed_date,repayment_months:"qardan_hasana"===y.schedule.payment_type?parseInt(y.repayment_months):null}):alert("Please enter the number of repayment months"):alert("Please select a disbursement date")},loading:N.isLoading,children:"Confirm Disbursement"})]})]})})]})},Fh=()=>(0,er.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,er.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),Oh=()=>{const{caseId:e}=ee(),t=Z(),{data:a,isLoading:r,error:n}=(0,Ce.useQuery)(["case",e],()=>Za.get("/api/cases/".concat(e)).then(e=>e.data),{enabled:!!e}),{hasPermission:s}=Cr("payment_management","read"),{hasPermission:i}=Cr("payment_management","update");if(r)return(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,er.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})})});if(n)return(0,er.jsx)("div",{className:"p-6",children:(0,er.jsxs)(Ur,{severity:"error",children:["Error loading case: ",n.message]})});if(null===a||void 0===a||!a.case)return(0,er.jsx)("div",{className:"p-6",children:(0,er.jsx)(Ur,{severity:"error",children:"Case not found"})});const o=a.case,l="finance_disbursement"===o.status_name,c=s&&l,d=i&&l;return(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsx)("div",{className:"mb-6",children:(0,er.jsx)("div",{className:"flex items-center justify-between",children:(0,er.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,er.jsxs)(Fr,{variant:"outline",onClick:()=>t("/cases/".concat(e)),className:"flex items-center space-x-2",children:[(0,er.jsx)(Fh,{}),(0,er.jsx)("span",{children:"Back to Case Details"})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Payment Schedule - Case ",o.case_number]}),(0,er.jsx)("p",{className:"text-gray-600",children:"Manage payment schedules for Qardan Hasana and Enayat"})]})]})})}),!l&&(0,er.jsx)(Ur,{severity:"warning",className:"mb-6",children:"This case is not in the finance disbursement stage. Payment schedules can only be managed when the case reaches the finance disbursement stage."}),l&&!s&&(0,er.jsx)(Ur,{severity:"error",className:"mb-6",children:"You do not have permission to view the payment schedule for this case. Please contact an administrator to request Payment Management access."}),c&&(0,er.jsx)(Eh,{caseId:e,isViewOnly:!d,caseDetails:o})]})},Ih=()=>{const e=Z(),t=(0,Ce.useQueryClient)(),{user:a}=ar(),{hasPermission:n}=Cr("case_identification","create"),{hasPermission:s}=Cr("case_identification","approve"),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(1),[d]=(0,r.useState)(20),[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[f,x]=(0,r.useState)(!1),[g,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(""),[_,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(""),[k,S]=(0,r.useState)(null),[C,A]=(0,r.useState)(null),[L,P]=(0,r.useState)(!1),[E,F]=(0,r.useState)(null),[O,I]=(0,r.useState)(""),[R,D]=(0,r.useState)(""),[M,T]=(0,r.useState)(""),[q,z]=(0,r.useState)(""),{register:B,handleSubmit:U,formState:{errors:H},reset:W,watch:V,setValue:Q}=xi(),J=V("its_number"),[Y,G]=(0,r.useState)(""),{data:K,isLoading:$,refetch:X}=(0,Ce.useQuery)(["caseIdentifications",l,i,u,h,d],()=>Za.get("/api/case-identifications",{params:Pe(Pe(Pe({page:l,limit:d},i&&{search:i}),u&&{status:u}),h&&{eligible_in:h})}).then(e=>e.data),{keepPreviousData:!0}),{data:ee}=(0,Ce.useQuery)("caseTypes",()=>Za.get("/api/case-types").then(e=>e.data),{select:e=>e.caseTypes||[]});(0,r.useEffect)(()=>{c(1)},[i,u,h]),(0,r.useEffect)(()=>{if(J&&J!==Y&&J.length>=3){const e=setTimeout(()=>{te(J)},500);return G(J),()=>clearTimeout(e)}},[J,Y]);const te=async e=>{if(e&&""!==e.trim()){j(!0),N(""),A(null);try{const t=await Za.get("/api/case-identifications/check-its/".concat(e));t.data.exists&&A(t.data.message);const a=(await Za.get("/api/applicants/fetch-from-api/".concat(e))).data.data;if(a.full_name&&Q("full_name",a.full_name),a.age&&Q("age",a.age),a.gender){const e=a.gender;Q("gender","male"===e||"Male"===e||"M"===e?"Male":"female"===e||"Female"===e||"F"===e?"Female":a.gender)}a.phone&&Q("phone",a.phone),a.email&&Q("email",a.email),a.address&&Q("address",a.address),a.jamiat_name&&Q("jamiat",a.jamiat_name),a.jamaat_name&&Q("jamaat",a.jamaat_name),a.photo?(Q("photo",a.photo),S(a.photo)):(Q("photo",null),S(null)),b("Data fetched successfully from API!"),y("")}catch(r){var t,a;N((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to fetch data from external API")}finally{j(!1)}}},ae=(0,Ce.useMutation)(e=>Za.post("/api/case-identifications",e),{onSuccess:()=>{b("Case identification created successfully!"),y(""),W(),S(null),A(null),G(""),setTimeout(()=>{x(!1),b(""),t.invalidateQueries("caseIdentifications")},1500)},onError:e=>{var t,a;y((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to create case identification"),b("")}}),re=(0,Ce.useMutation)(e=>{let{id:t,status:a,review_remarks:r}=e;return Za.put("/api/case-identifications/".concat(t,"/review"),{status:a,review_remarks:r})},{onSuccess:a=>{const r=a.data;z(r.message),T(""),t.invalidateQueries("caseIdentifications"),setTimeout(()=>{P(!1),F(null),D(""),z(""),r.case_id&&e("/cases/".concat(r.case_id))},2e3)},onError:e=>{var t,a;T((null===(t=e.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.error)||"Failed to review case identification"),z("")}}),ne=(e,t)=>{F(e),I(t),D(""),T(""),z(""),P(!0)},se=e=>{switch(e){case"pending":return(0,er.jsx)(vn,{variant:"warning",children:"Pending"});case"eligible":return(0,er.jsx)(vn,{variant:"success",children:"Eligible"});case"ineligible":return(0,er.jsx)(vn,{variant:"danger",children:"Ineligible"});default:return(0,er.jsx)(vn,{children:e})}},ie=(null===K||void 0===K?void 0:K.records)||[],oe=(null===K||void 0===K?void 0:K.pagination)||{};return(0,er.jsxs)("div",{className:"p-6",children:[(0,er.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Case Identification"}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Identify and assess cases for eligibility"})]}),n&&(0,er.jsx)(Fr,{onClick:()=>{W(),y(""),b(""),N(""),S(null),A(null),G(""),x(!0)},children:"+ New Case Identification"})]}),(0,er.jsx)(zr,{className:"mb-6",children:(0,er.jsx)("div",{className:"p-4",children:(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),(0,er.jsx)("input",{type:"text",placeholder:"Search by ITS or Name...",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,er.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,er.jsx)("option",{value:"",children:"All Statuses"}),(0,er.jsx)("option",{value:"pending",children:"Pending"}),(0,er.jsx)("option",{value:"eligible",children:"Eligible"}),(0,er.jsx)("option",{value:"ineligible",children:"Ineligible"})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Eligible In"}),(0,er.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,er.jsx)("option",{value:"",children:"All Types"}),null===ee||void 0===ee?void 0:ee.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,er.jsx)("div",{className:"flex items-end",children:(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{o(""),m(""),p("")},className:"w-full",children:"Clear Filters"})})]})})}),(0,er.jsxs)(zr,{children:[(0,er.jsx)("div",{className:"overflow-x-auto",children:(0,er.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,er.jsx)("thead",{className:"bg-gray-50",children:(0,er.jsxs)("tr",{children:[(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ITS"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Eligible In"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Family Members"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Earning Members"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Individual Income (monthly)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Family Income (monthly)"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created By"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,er.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,er.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:$?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"11",className:"px-4 py-8 text-center text-gray-500",children:"Loading..."})}):0===ie.length?(0,er.jsx)("tr",{children:(0,er.jsx)("td",{colSpan:"11",className:"px-4 py-8 text-center text-gray-500",children:"No case identifications found"})}):ie.map(t=>{var a,r;return(0,er.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:t.its_number}),(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:t.full_name||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:t.case_type_name||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:t.total_family_members}),(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:t.earning_family_members}),(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:null===(a=t.individual_income)||void 0===a?void 0:a.toLocaleString()}),(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:null===(r=t.family_income)||void 0===r?void 0:r.toLocaleString()}),(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:se(t.status)}),(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:t.created_by_full_name||t.created_by_name||"-"}),(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),(0,er.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:(0,er.jsxs)("div",{className:"flex items-center gap-2",children:["pending"===t.status&&s&&(0,er.jsxs)(er.Fragment,{children:[(0,er.jsx)("button",{onClick:()=>ne(t,"eligible"),className:"inline-flex items-center px-2.5 py-1.5 text-xs font-medium rounded text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-green-500",children:"Eligible"}),(0,er.jsx)("button",{onClick:()=>ne(t,"ineligible"),className:"inline-flex items-center px-2.5 py-1.5 text-xs font-medium rounded text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-1 focus:ring-red-500",children:"Ineligible"})]}),"eligible"===t.status&&t.case_id&&(0,er.jsx)("button",{onClick:()=>e("/cases/".concat(t.case_id)),className:"inline-flex items-center px-2.5 py-1.5 text-xs font-medium rounded text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none",children:"View Case"}),"ineligible"===t.status&&(0,er.jsx)("span",{className:"text-xs text-gray-400 italic",children:"Ineligible"})]})})]},t.id)})})]})}),oe.totalPages>1&&(0,er.jsxs)("div",{className:"px-4 py-3 border-t border-gray-200 flex items-center justify-between",children:[(0,er.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",(oe.page-1)*oe.limit+1," to"," ",Math.min(oe.page*oe.limit,oe.total)," of"," ",oe.total," results"]}),(0,er.jsx)(gn,{currentPage:oe.page,totalPages:oe.totalPages,onPageChange:c})]})]}),(0,er.jsx)(xn,{isOpen:f,onClose:()=>{x(!1),W(),S(null),A(null),G("")},title:"New Case Identification",size:"lg",children:(0,er.jsxs)("form",{onSubmit:U(async e=>{if(!ae.isLoading){try{if((await Za.get("/api/case-identifications/check-its/".concat(e.its_number))).data.exists)return void y("Case already registered for this ITS number")}catch(zh){}y(""),b(""),ae.mutate({its_number:e.its_number,full_name:e.full_name,age:e.age?parseInt(e.age):null,gender:e.gender,phone:e.phone,email:e.email,photo:e.photo||null,address:e.address,jamiat:e.jamiat,jamaat:e.jamaat,eligible_in:parseInt(e.eligible_in),total_family_members:parseInt(e.total_family_members),earning_family_members:parseInt(e.earning_family_members),individual_income:parseInt(e.individual_income),family_income:parseInt(e.family_income),remarks:e.remarks||null})}}),children:[(0,er.jsxs)("div",{className:"space-y-6 p-1",children:[g&&(0,er.jsx)(Ur,{variant:"error",children:g}),v&&(0,er.jsx)(Ur,{variant:"success",children:v}),w&&(0,er.jsx)(Ur,{variant:"warning",children:w}),C&&(0,er.jsxs)(Ur,{variant:"error",children:[(0,er.jsx)("strong",{children:"Case already registered!"})," ",C]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Personal Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Basic personal details of the applicant"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["ITS Number ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",Pe(Pe({type:"text"},B("its_number",{required:"ITS number is required",pattern:{value:/^[0-9]{8}$/,message:"Must be exactly 8 digits"}})),{},{onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const t=e.target.value.trim();t&&t.length>=3&&te(t)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter 8-digit ITS number"})),H.its_number&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:H.its_number.message}),(0,er.jsx)("p",{className:"mt-1 text-xs text-gray-400",children:"Data will be automatically fetched as you type (minimum 3 characters) or press Enter"})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,er.jsx)("input",Pe(Pe({type:"text"},B("full_name")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm bg-gray-50",readOnly:!0}))]})]}),(0,er.jsx)("div",{className:"mt-3",children:(0,er.jsx)(Fr,{type:"button",variant:"secondary",size:"sm",onClick:()=>{const e=V("its_number");e&&te(e)},disabled:_,children:_?"Fetching...":"Refresh Details"})}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Age"}),(0,er.jsx)("input",Pe(Pe({type:"text"},B("age")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm bg-gray-50",readOnly:!0}))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,er.jsx)("input",Pe(Pe({type:"text"},B("gender")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm bg-gray-50",readOnly:!0}))]})]}),k&&(0,er.jsxs)("div",{className:"mt-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Photo (from API)"}),(0,er.jsx)("img",{src:k,alt:"Applicant",className:"w-24 h-24 rounded-lg object-cover border border-gray-200"})]})]}),(0,er.jsx)("input",Pe({type:"hidden"},B("photo"))),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Contact Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Phone and email contact details"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,er.jsx)("input",Pe(Pe({type:"text"},B("phone")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm bg-gray-50",readOnly:!0}))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,er.jsx)("input",Pe(Pe({type:"text"},B("email")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm bg-gray-50",readOnly:!0}))]})]})]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Address Information"}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Complete address details"}),(0,er.jsxs)("div",{className:"mb-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,er.jsx)("input",Pe(Pe({type:"text"},B("address")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm bg-gray-50",readOnly:!0}))]}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jamiat"}),(0,er.jsx)("input",Pe(Pe({type:"text"},B("jamiat")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm bg-gray-50",readOnly:!0}))]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jamaat"}),(0,er.jsx)("input",Pe(Pe({type:"text"},B("jamaat")),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm bg-gray-50",readOnly:!0}))]})]})]}),(0,er.jsx)("hr",{className:"border-gray-200"}),(0,er.jsxs)("div",{children:[(0,er.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Assessment"}),(0,er.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Case eligibility assessment details"}),(0,er.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Eligible In ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsxs)("select",Pe(Pe({},B("eligible_in",{required:"Eligible In is required"})),{},{className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",children:[(0,er.jsx)("option",{value:"",children:"Select case type..."}),null===ee||void 0===ee?void 0:ee.map(e=>(0,er.jsx)("option",{value:e.id,children:e.name},e.id))]})),H.eligible_in&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:H.eligible_in.message})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Total Family Members ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",Pe(Pe({type:"number"},B("total_family_members",{required:"Total family members is required",min:{value:0,message:"Cannot be negative"},max:{value:25,message:"Cannot exceed 25"}})),{},{min:"0",max:"25",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter number (max 25)"})),H.total_family_members&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:H.total_family_members.message})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Earning Family Members ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",Pe(Pe({type:"number"},B("earning_family_members",{required:"Earning family members is required",min:{value:0,message:"Cannot be negative"},max:{value:20,message:"Cannot exceed 20"}})),{},{min:"0",max:"20",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter number (max 20)"})),H.earning_family_members&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:H.earning_family_members.message})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Individual Income (monthly) ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",Pe(Pe({type:"number"},B("individual_income",{required:"Individual income is required",min:{value:0,message:"Cannot be negative"},max:{value:9999999,message:"Cannot exceed 7 digits"}})),{},{min:"0",max:"9999999",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter amount (max 9999999)"})),H.individual_income&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:H.individual_income.message})]}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Family Income (monthly) ",(0,er.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,er.jsx)("input",Pe(Pe({type:"number"},B("family_income",{required:"Family income is required",min:{value:0,message:"Cannot be negative"},max:{value:9999999,message:"Cannot exceed 7 digits"}})),{},{min:"0",max:"9999999",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter amount (max 9999999)"})),H.family_income&&(0,er.jsx)("p",{className:"mt-1 text-sm text-red-600",children:H.family_income.message})]})]}),(0,er.jsxs)("div",{className:"mt-4",children:[(0,er.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Remarks (Optional)"}),(0,er.jsx)("textarea",Pe(Pe({},B("remarks")),{},{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"Enter any additional remarks..."}))]})]})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200",children:[(0,er.jsx)(Fr,{type:"button",variant:"secondary",onClick:()=>{x(!1),W(),S(null),A(null),G("")},children:"Cancel"}),(0,er.jsx)(Fr,{type:"submit",disabled:ae.isLoading||!!C,children:ae.isLoading?"Submitting...":"Submit"})]})]})}),(0,er.jsx)(xn,{isOpen:L,onClose:()=>{P(!1),F(null),D("")},title:"eligible"===O?"Mark as Eligible":"Mark as Ineligible",size:"md",children:(0,er.jsxs)("div",{className:"space-y-4",children:[M&&(0,er.jsx)(Ur,{variant:"error",children:M}),q&&(0,er.jsx)(Ur,{variant:"success",children:q}),E&&(0,er.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,er.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-600",children:"ITS:"})," ",E.its_number]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-600",children:"Name:"})," ",E.full_name||"-"]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-600",children:"Eligible In:"})," ",E.case_type_name||"-"]}),(0,er.jsxs)("div",{children:[(0,er.jsx)("span",{className:"font-medium text-gray-600",children:"Family Members:"})," ",E.total_family_members]})]})}),"eligible"===O?(0,er.jsx)("div",{className:"bg-green-50 border border-green-200 p-4 rounded-lg",children:(0,er.jsxs)("p",{className:"text-sm text-green-800",children:[(0,er.jsx)("strong",{children:"Confirm Eligibility:"})," This will mark the case as eligible and automatically create a new case in the system."]})}):(0,er.jsx)("div",{className:"bg-red-50 border border-red-200 p-4 rounded-lg",children:(0,er.jsxs)("p",{className:"text-sm text-red-800",children:[(0,er.jsx)("strong",{children:"Confirm Ineligibility:"})," This will mark the case as ineligible. This action cannot be undone."]})}),(0,er.jsxs)("div",{children:[(0,er.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Review Remarks ","ineligible"===O?"":"(Optional)"]}),(0,er.jsx)("textarea",{value:R,onChange:e=>D(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:"ineligible"===O?"Reason for ineligibility...":"Any additional remarks..."})]}),(0,er.jsxs)("div",{className:"flex justify-end gap-3 pt-2",children:[(0,er.jsx)(Fr,{variant:"secondary",onClick:()=>{P(!1),F(null),D("")},children:"Cancel"}),(0,er.jsx)(Fr,{onClick:()=>{E&&!re.isLoading&&re.mutate({id:E.id,status:O,review_remarks:R||null})},disabled:re.isLoading,className:"eligible"===O?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:re.isLoading?"Processing...":"eligible"===O?"Confirm Eligible":"Confirm Ineligible"})]})]})})]})},Rh=new Ce.QueryClient({defaultOptions:{queries:{retry:1,refetchOnWindowFocus:!1}}}),Dh=e=>{let{children:t}=e;const{user:a,loading:r}=ar();return r?(0,er.jsx)("div",{children:"Loading..."}):a?t:(0,er.jsx)(pe,{to:"/login",replace:!0})},Mh=e=>{let{children:t}=e;const{user:a,loading:r}=ar();return r?(0,er.jsx)("div",{children:"Loading..."}):a?(0,er.jsx)(pe,{to:"/dashboard",replace:!0}):t},Th=()=>{const{user:e,loading:t}=ar();return t?(0,er.jsx)("div",{children:"Loading..."}):e?(0,er.jsx)(pe,{to:"/dashboard",replace:!0}):(0,er.jsx)(pe,{to:"/login",replace:!0})};const qh=function(){return(0,er.jsx)(Ce.QueryClientProvider,{client:Rh,children:(0,er.jsx)(rr,{children:(0,er.jsx)(we,{children:(0,er.jsxs)(ge,{children:[(0,er.jsx)(fe,{path:"/login",element:(0,er.jsx)(Mh,{children:(0,er.jsx)(Cn,{})})}),(0,er.jsx)(fe,{path:"/dashboard",element:(0,er.jsx)(Lr,{children:(0,er.jsx)(Sr,{children:(0,er.jsx)(On,{})})})}),(0,er.jsx)(fe,{path:"/cases",element:(0,er.jsx)(Lr,{requiredAnyOfPermissions:[{resource:"cases",action:"read"},{resource:"cases",action:"case_assigned"}],children:(0,er.jsx)(Sr,{children:(0,er.jsx)(Kc,{})})})}),(0,er.jsx)(fe,{path:"/cases/:caseId",element:(0,er.jsx)(Lr,{requiredAnyOfPermissions:[{resource:"cases",action:"read"},{resource:"cases",action:"case_assigned"}],children:(0,er.jsx)(Sr,{children:(0,er.jsx)(ed,{})})})}),(0,er.jsx)(fe,{path:"/cases/:caseId/payment-schedule",element:(0,er.jsx)(Lr,{requiredAnyOfPermissions:[{resource:"cases",action:"read"},{resource:"cases",action:"case_assigned"}],children:(0,er.jsx)(Sr,{children:(0,er.jsx)(Oh,{})})})}),(0,er.jsx)(fe,{path:"/applicants",element:(0,er.jsx)(Lr,{requiredPermission:{resource:"applicants",action:"read"},children:(0,er.jsx)(Sr,{children:(0,er.jsx)(td,{})})})}),(0,er.jsx)(fe,{path:"/case-identification",element:(0,er.jsx)(Lr,{children:(0,er.jsx)(Sr,{children:(0,er.jsx)(Ih,{})})})}),(0,er.jsx)(fe,{path:"/counseling-forms",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireCounselingFormAccess:!0,children:(0,er.jsx)(Sr,{children:(0,er.jsx)(md,{})})})})}),(0,er.jsx)(fe,{path:"/counseling-form/:caseId",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireCounselingFormAccess:!0,children:(0,er.jsx)(Sr,{children:(0,er.jsx)(ud,{})})})})}),(0,er.jsx)(fe,{path:"/users",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireAdminAccess:!0,children:(0,er.jsx)(Sr,{children:(0,er.jsx)(hd,{})})})})}),(0,er.jsx)(fe,{path:"/roles",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireAdminAccess:!0,children:(0,er.jsx)(Sr,{children:(0,er.jsx)(pd,{})})})})}),(0,er.jsx)(fe,{path:"/jamiat-master",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireAdminAccess:!0,children:(0,er.jsx)(Sr,{children:(0,er.jsx)(fd,{})})})})}),(0,er.jsx)(fe,{path:"/case-types",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireAdminAccess:!0,children:(0,er.jsx)(Sr,{children:(0,er.jsx)(vd,{})})})})}),(0,er.jsx)(fe,{path:"/relations",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireAdminAccess:!0,children:(0,er.jsx)(Sr,{children:(0,er.jsx)(bd,{})})})})}),(0,er.jsx)(fe,{path:"/education-levels",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireAdminAccess:!0,children:(0,er.jsx)(Sr,{children:(0,er.jsx)(_d,{})})})})}),(0,er.jsx)(fe,{path:"/occupations",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireAdminAccess:!0,children:(0,er.jsx)(Sr,{children:(0,er.jsx)(jd,{})})})})}),(0,er.jsx)(fe,{path:"/business-assets/:caseId",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireCounselingFormAccess:!0,children:(0,er.jsx)(Sr,{children:(0,er.jsx)(Nd,{})})})})}),(0,er.jsx)(fe,{path:"/executive-levels",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireRoles:["super_admin","admin"],children:(0,er.jsx)(Sr,{children:(0,er.jsx)(Ld,{})})})})}),(0,er.jsx)(fe,{path:"/workflow-stages",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireRoles:["super_admin","admin"],children:(0,er.jsx)(Sr,{children:(0,er.jsx)(gh,{})})})})}),(0,er.jsx)(fe,{path:"/welfare-checklist-categories",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireRoles:["super_admin","admin"],children:(0,er.jsx)(Sr,{children:(0,er.jsx)(jh,{})})})})}),(0,er.jsx)(fe,{path:"/welfare-checklist-items",element:(0,er.jsx)(Dh,{children:(0,er.jsx)(Lr,{requireRoles:["super_admin","admin"],children:(0,er.jsx)(Sr,{children:(0,er.jsx)(Ch,{})})})})}),(0,er.jsx)(fe,{path:"/profile",element:(0,er.jsx)(Lr,{children:(0,er.jsx)(Sr,{children:(0,er.jsx)(Ah,{})})})}),(0,er.jsx)(fe,{path:"/notifications",element:(0,er.jsx)(Lr,{children:(0,er.jsx)(Sr,{children:(0,er.jsx)(Lh,{})})})}),(0,er.jsx)(fe,{path:"/reports",element:(0,er.jsx)(Lr,{children:(0,er.jsx)(Sr,{children:(0,er.jsx)(Ph,{})})})}),(0,er.jsx)(fe,{path:"/",element:(0,er.jsx)(Th,{})}),(0,er.jsx)(fe,{path:"*",element:(0,er.jsx)(Lr,{children:(0,er.jsx)(Sr,{children:(0,er.jsxs)("div",{className:"p-6 text-center",children:[(0,er.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"404 - Page Not Found"}),(0,er.jsx)("p",{className:"text-gray-600",children:"The page you're looking for doesn't exist."})]})})})})]})})})})};s.createRoot(document.getElementById("root")).render((0,er.jsx)(r.StrictMode,{children:(0,er.jsx)(qh,{})}))})()})();
//# sourceMappingURL=main.25edd041.js.map